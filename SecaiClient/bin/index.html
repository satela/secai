<html>

<head>
    <title>www.layabox.com</title>
    <meta charset='utf-8' />
    <meta name='renderer' content='webkit' />
    <meta name='viewport' content='width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no'
    />
    <meta name='apple-mobile-web-app-capable' content='yes' />
    <meta name='full-screen' content='true' />
    <meta name='x5-fullscreen' content='true' />
    <meta name='360-fullscreen' content='true' />
    <meta name='laya' screenorientation='landscape' />
    <meta http-equiv='expires' content='0' />
    <meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1' />
    <meta http-equiv='expires' content='0' />
    <meta http-equiv='Cache-Control' content='no-siteapp' />
</head>

<body>

<br/><br/>
<br/><br/>
<br/><br/>
<br/><br/>

<div id="div1" align="center"> 
<progress value="0"  max="100" style="width: 30%">您的浏览器不支持progress元素</progress>
</div>
    <script type="text/javascript">
	
	function goprogress(){
        var pro=document.getElementsByTagName("progress")[0];
        gotoend(pro,0);
    }
    function gotoend(pro,value){
        var value=value+1;
        pro.value=value;
        if(value<95) {
            setTimeout(function(){gotoend(pro, value);},60)
        }else{
            //setTimeout(function(){alert("任务完成")},20);
        }
    }
        function loadLib(url) {
            var script = document.createElement("script");
            script.async = false;
            script.src = url;
            document.body.appendChild(script);
			goprogress();
			script.onload  = function()
			{
			var pro=document.getElementsByTagName("progress")[0];
			 	pro.value=100;
			var parent=document.getElementById("div1");
				parent.removeChild(pro);
				//console.log("pass time:" + ((new Date()).valueOf() - nowtime));
			}
        }
		
		var verifyCode;
		function loadVerifyCode(){
		  verifyCode = new GVerify("v_container");
		}
		
		function checkCode(txt){
		
		 var res = verifyCode.validate(txt);
            
		return res;
		}
		
		 function uploadPic(fileobj) {
                     
            //原生ajax实现文件上传
            var formData = new FormData();
            formData.append("path", fileobj.path);

           // if (file) {
			
                formData.append("file", fileobj.file);
          //  }

            //得到xhr对象
            var xhr = null;
            if (XMLHttpRequest) {
                xhr = new XMLHttpRequest();
            } else {
                xhr = new ActiveXObject("Microsoft.XMLHTTP");
            }

            xhr.open("post", "http://8p7jqx.natappfree.cc/file/add", true);//设置提交方式，url，异步提交
            xhr.onload = function () {
                var data = xhr.responseText;    //得到返回值
               // alert(data);
			   if(uploadApp != null)
			   uploadApp.onCompleteUpload(data);
            }
			
			xhr.upload.onprogress=function(d){
					schedule = d.loaded/d.total*100;
					schedule = schedule.toFixed(2);
					if(uploadApp != null)
						uploadApp.onProgressHandler(schedule);

		   }


			//req.addEventListener("load", transferComplete, false); req.addEventListener("error", transferFailed, false); req.addEventListener("abort", transferCanceled, false); 
			
            xhr.send(formData);
        }
		
    </script>
	<script type="text/javascript" src="GVerify.js"></script>

    <script type="text/javascript" src="index.js"></script>
	
</body>

</html>