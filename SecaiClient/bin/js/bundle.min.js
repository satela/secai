var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(){function t(e,i,n){function r(a,o){if(!i[a]){if(!e[a]){var h="function"==typeof require&&require;if(!o&&h)return h(a,!0);if(s)return s(a,!0);var _=new Error("Cannot find module '"+a+"'");throw _.code="MODULE_NOT_FOUND",_}var l=i[a]={exports:{}};e[a][0].call(l.exports,function(t){var i=e[a][1][t];return r(i||t)},l,l.exports,t,e,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}return t}()({1:[function(){var t=window.Laya=function(t){var e={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(t,i){return 1==arguments.length?e.__presubstr.call(this,t):e.__presubstr.call(this,t,i>0?i:this.length+i)},__init:function(t){t.forEach(function(t){t.__init$&&t.__init$()})},__isClass:function(t){return t&&(t.__isclass||t==Object||t==String||t==Array)},__newvec:function(t,e){var i=[];i.length=t;for(var n=0;t>n;n++)i[n]=e;return i},__extend:function(t,i){function n(){e.un(this,"constructor",t)}for(var r in i)if(i.hasOwnProperty(r)){var s=Object.getOwnPropertyDescriptor(i,r),a=s.get,o=s.set;a||o?a&&o?Object.defineProperty(t,r,s):(a&&Object.defineProperty(t,r,a),o&&Object.defineProperty(t,r,o)):t[r]=i[r]}n.prototype=i.prototype,t.prototype=new n,e.un(t.prototype,"__imps",e.__copy({},i.prototype.__imps))},__copy:function(t,e){if(!e)return null;t=t||{};for(var i in e)t[i]=e[i];return t},__package:function(i,n){if(!e.__packages[i]){e.__packages[i]=!0;var r=t,s=i.split(".");if(s.length>1)for(var a=0,o=s.length-1;o>a;a++){var h=r[s[a]];r=h?h:r[s[a]]={}}r[s[s.length-1]]||(r[s[s.length-1]]=n||{})}},__hasOwnProperty:function(t,e){function i(t,e){if(Object.hasOwnProperty.call(e.prototype,t))return!0;var n=e.prototype.__super;return null==n?null:i(t,n)}return e=e||this,Object.hasOwnProperty.call(e,t)||i(t,e.__class)},__typeof:function(t,e){if(!t||!e)return!1;if(e===String)return"string"==typeof t;if(e===Number)return"number"==typeof t;if(e.__interface__)e=e.__interface__;else if("string"!=typeof e)return t instanceof e;return t.__imps&&t.__imps[e]||t.__class==e},__as:function(t,e){return this.__typeof(t,e)?t:null},__int:function(t){return t?parseInt(t):0},"interface":function(i,n){e.__package(i,{});var r=e.__internals,s=r[i]=r[i]||{self:i};if(n){var a=n.split(",");s.extend=[];for(var o=0;o<a.length;o++){var h=a[o];r[h]=r[h]||{self:h},s.extend.push(r[h])}}for(var _=t,l=i.split("."),o=0;o<l.length-1;o++)_=_[l[o]];_[l[l.length-1]]={__interface__:i}},"class":function(i,n,r,s){if(r&&e.__extend(i,r),n)if(e.__package(n,i),e.__classmap[n]=i,n.indexOf(".")>0){if(0==n.indexOf("laya.")){var a=n.split(".");s=s||a[a.length-1],e[s]&&console.log("Warning!,this class["+s+"] already exist:",e[s]),e[s]=i}}else"Main"==n?t.Main=i:(e[n]&&console.log("Error!,this class["+n+"] already exist:",e[n]),e[n]=i);var o=e.un,h=i.prototype;o(h,"hasOwnProperty",e.__hasOwnProperty),o(h,"__class",i),o(h,"__super",r),o(h,"__className",n),o(i,"__super",r),o(i,"__className",n),o(i,"__isclass",!0),o(i,"super",function(t){this.__super.call(t)})},imps:function(t,i){function n(t){var i,s;if((i=e.__internals[t])&&(r[t]=!0,s=i.extend))for(var a=0;a<s.length;a++)n(s[a].self)}if(!i)return null;var r=t.__imps||e.un(t,"__imps",{});for(var s in i)n(s)},superSet:function(t,e,i,n){var r=t.prototype["_$set_"+i];r&&r.call(e,n)},superGet:function(t,e,i){var n=t.prototype["_$get_"+i];return n?n.call(e):null},getset:function(t,i,n,r,s){t?(r&&(i["_$GET_"+n]=r),s&&(i["_$SET_"+n]=s)):(r&&e.un(i,"_$get_"+n,r),s&&e.un(i,"_$set_"+n,s)),r&&s?Object.defineProperty(i,n,{get:r,set:s,enumerable:!1,configurable:!0}):(r&&Object.defineProperty(i,n,{get:r,enumerable:!1,configurable:!0}),s&&Object.defineProperty(i,n,{set:s,enumerable:!1,configurable:!0}))},"static":function(t,e){function i(){var i=e[n],r=e[n+1];Object.defineProperty(t,i,{get:function(){return delete this[i],this[i]=r.call(this)},set:function(t){delete this[i],this[i]=t},enumerable:!0,configurable:!0})}for(var n=0,r=e.length;r>n;n+=2)"length"==e[n]?t.length=e[n+1].call(t):i()},un:function(t,i,n){return n||(n=t[i]),e.__propun.value=n,Object.defineProperty(t,i,e.__propun),n},uns:function(t,i){i.forEach(function(i){e.un(t,i)})}};return t.console=t.console||{log:function(){}},t.trace=t.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),e}(window,document);!function(t,e,i){{var n=(i.un,i.uns,i.static),r=i.class,s=i.getset;i.__newvec}i.interface("laya.ui.IItem"),i.interface("laya.ui.IRender"),i.interface("laya.ui.ISelect"),i.interface("laya.runtime.IMarket"),i.interface("laya.filters.IFilter"),i.interface("laya.resource.IDispose"),i.interface("laya.html.utils.ILayout"),i.interface("laya.webgl.submit.ISubmit"),i.interface("laya.runtime.ICPlatformClass"),i.interface("laya.webgl.canvas.save.ISaveData");var a=(function(){return s(1,i,"alertGlobalError",null,function(t){var e=0;Me.window.onerror=t?function(t,i,n,r,s){e++<5&&s&&alert("出错啦，请把此信息截图给研发商\n"+t+"\n"+s.stack)}:null}),i.init=function(e,n){for(var r=[],s=2,a=arguments.length;a>s;s++)r.push(arguments[s]);if(!i._isinit){i._isinit=!0,ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=i._arrayBufferSlice),Me.__init__(),wi.isConchApp||w.__init__(),i.systemTimer=new si(!1),i.startTimer=new si(!1),i.physicsTimer=new si(!1),i.updateTimer=new si(!1),i.lateTimer=new si(!1),i.timer=new si(!1),i.loader=new ln,Ee.__init__();for(var o=!1,s=0,h=r.length;h>s;s++)r[s]&&r[s].enable&&(r[s].enable(),"WebGL"==typeof r[s]&&(o=!0));return wi.isConchApp&&(o||laya.webgl.WebGL.enable(),Yi.enableNative()),Wi.__init__(),$i.beginCheck(),i._currentStage=i.stage=new pr,i._getUrlPath(),i.render=new wi(0,0),i.stage.size(e,n),t.stage=i.stage,U.__init__(),Ei.__init__(),oe.instance.__init__(i.stage,wi.canvas),xr.__init__(),Vi.autoStopMusic=!0,wi.canvas}},i._getUrlPath=function(){var t=Me.window.location,e=t.pathname;e=":"==e.charAt(2)?e.substring(1):e,Pi.rootPath=Pi.basePath=Pi.getPath("file:"==t.protocol?e:t.protocol+"//"+t.host+t.pathname)},i._arrayBufferSlice=function(t,e){var i=this,n=new Uint8Array(i,t,e-t),r=new Uint8Array(n.length);return r.set(n),r.buffer},i._runScript=function(t){return Me.window[i._evcode](t)},i.enableDebugPanel=function(t){if(void 0===t&&(t="libs/laya.debugtool.js"),i.DebugPanel)i.DebugPanel.enable();else{var e=Me.createElement("script");e.onload=function(){i.DebugPanel.enable()},e.src=t,Me.document.body.appendChild(e)}},i.stage=null,i.systemTimer=null,i.startTimer=null,i.physicsTimer=null,i.updateTimer=null,i.lateTimer=null,i.timer=null,i.loader=null,i.version="2.0.0beta5",i.render=null,i._currentStage=null,i._isinit=!1,i.isWXOpenDataContext=!1,i.isWXPosMsg=!1,n(i,["conchMarket",function(){return this.conchMarket=t.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=t.PlatformClass},"_evcode",function(){return this._evcode="eval"}]),i}(),function(){function t(){}return r(t,"laya.renders.LayaGLQuickRunner"),t.__init__=function(){t.map[515]=t.alpha_transform_drawLayaGL,t.map[513]=t.alpha_drawLayaGL,t.map[514]=t.transform_drawLayaGL,t.map[8194]=t.transform_drawNodes,t.map[259]=t.alpha_transform_drawTexture,t.map[257]=t.alpha_drawTexture,t.map[258]=t.transform_drawTexture,t.map[8704]=t.drawLayaGL_drawNodes},t.transform_drawTexture=function(e,i,n,r){var s=(e._style,e.texture);i.saveTransform(t.curMat),i.transformByMatrix(e.transform,n,r),i.drawTexture(s,-e.pivotX,-e.pivotY,e._width||s.width,e._height||s.height),i.restoreTransform(t.curMat)},t.alpha_drawTexture=function(t,e,i,n){var r=t._style,s=0/0,a=t.texture;if((s=r.alpha)>.01||t._needRepaint()){var o=e.globalAlpha;e.globalAlpha*=s,e.drawTexture(a,i-r.pivotX+a.offsetX,n-r.pivotY+a.offsetY,t._width||a.width,t._height||a.height),e.globalAlpha=o}},t.alpha_transform_drawTexture=function(e,i,n,r){var s=e._style,a=0/0,o=e.texture;if((a=s.alpha)>.01||e._needRepaint()){var h=i.globalAlpha;i.globalAlpha*=a,i.saveTransform(t.curMat),i.transformByMatrix(e.transform,n,r),i.drawTexture(o,-s.pivotX+o.offsetX,-s.pivotY+o.offsetY,e._width||o.width,e._height||o.height),i.restoreTransform(t.curMat),i.globalAlpha=h}},t.alpha_transform_drawLayaGL=function(e,i,n,r){var s=e._style,a=0/0;if((a=s.alpha)>.01||e._needRepaint()){var o=i.globalAlpha;i.globalAlpha*=a,i.saveTransform(t.curMat),i.transformByMatrix(e.transform,n,r),e._graphics&&e._graphics._render(e,i,-s.pivotX,-s.pivotY),i.restoreTransform(t.curMat),i.globalAlpha=o}},t.alpha_drawLayaGL=function(t,e,i,n){var r=t._style,s=0/0;if((s=r.alpha)>.01||t._needRepaint()){var a=e.globalAlpha;e.globalAlpha*=s,t._graphics&&t._graphics._render(t,e,i-r.pivotX,n-r.pivotY),e.globalAlpha=a}},t.transform_drawLayaGL=function(e,i,n,r){var s=e._style;i.saveTransform(t.curMat),i.transformByMatrix(e.transform,n,r),e._graphics&&e._graphics._render(e,i,-s.pivotX,-s.pivotY),i.restoreTransform(t.curMat)},t.transform_drawNodes=function(e,i,n,r){var s=e._style;i.saveTransform(t.curMat),i.transformByMatrix(e.transform,n,r),n=-s.pivotX,r=-s.pivotY;var a,o=e._children,h=o.length;if(s.viewport){var _=s.viewport,l=_.x,u=_.y,c=_.right,d=_.bottom,f=0/0,p=0/0;for(m=0;h>m;++m)(a=o[m])._visible&&(f=a._x)<c&&f+a.width>l&&(p=a._y)<d&&p+a.height>u&&a.render(i,n,r)}else for(var m=0;h>m;++m)(a=o[m])._visible&&a.render(i,n,r);i.restoreTransform(t.curMat)},t.drawLayaGL_drawNodes=function(t,e,i,n){var r=t._style;i-=r.pivotX,n-=r.pivotY,t._graphics&&t._graphics._render(t,e,i,n);var s,a=t._children,o=a.length;if(r.viewport){var h=r.viewport,_=h.x,l=h.y,u=h.right,c=h.bottom,d=0/0,f=0/0;for(p=0;o>p;++p)(s=a[p])._visible&&(d=s._x)<u&&d+s.width>_&&(f=s._y)<c&&f+s.height>l&&s.render(e,i,n)}else for(var p=0;o>p;++p)(s=a[p])._visible&&s.render(e,i,n)},t.map={},n(t,["curMat",function(){return this.curMat=new ui}]),t}()),o=function(){function t(e){if(this.arrColor=[],null==e)return this.strColor="#00000000",this.numColor=0,this.arrColor=[0,0,0,0],void 0;var i=0,n=0,r=0;if("string"==typeof e)if(e.indexOf("rgba(")>=0||e.indexOf("rgb(")>=0){var s=e,a=0,o=0;for(a=s.indexOf("("),o=s.indexOf(")"),s=s.substring(a+1,o),this.arrColor=s.split(","),n=this.arrColor.length,i=0;n>i;i++)this.arrColor[i]=parseFloat(this.arrColor[i]),3>i&&(this.arrColor[i]=Math.round(this.arrColor[i]));r=4==this.arrColor.length?256*(256*(256*this.arrColor[0]+this.arrColor[1])+this.arrColor[2])+Math.round(255*this.arrColor[3]):256*(256*this.arrColor[0]+this.arrColor[1])+this.arrColor[2],this.strColor=e}else{if(this.strColor=e,"#"===e.charAt(0)&&(e=e.substr(1)),n=e.length,3===n||4===n){var h="";for(i=0;n>i;i++)h+=e[i]+e[i];e=h}r=parseInt(e,16)}else r=e,this.strColor=Q.toHexColor(r);this.strColor.indexOf("rgba")>=0||9===this.strColor.length?(this.arrColor=[((4278190080&r)>>>24)/255,((16711680&r)>>16)/255,((65280&r)>>8)/255,(255&r)/255],this.numColor=(4278190080&r)>>>24|(16711680&r)>>8|(65280&r)<<8|(255&r)<<24):(this.arrColor=[((16711680&r)>>16)/255,((65280&r)>>8)/255,(255&r)/255,1],this.numColor=4278190080|(16711680&r)>>16|65280&r|(255&r)<<16),this.arrColor.__id=++t._COLODID}return r(t,"laya.utils.ColorUtils"),t._initDefault=function(){t._DEFAULT={};for(var e in t._COLOR_MAP)t._SAVE[e]=t._DEFAULT[e]=new t(t._COLOR_MAP[e]);return t._DEFAULT},t._initSaveMap=function(){t._SAVE_SIZE=0,t._SAVE={};for(var e in t._DEFAULT)t._SAVE[e]=t._DEFAULT[e]},t.create=function(e){var i=e+"",n=t._SAVE[i];return null!=n?n:(t._SAVE_SIZE<1e3&&t._initSaveMap(),t._SAVE[i]=new t(e))},t._SAVE={},t._SAVE_SIZE=0,t._COLOR_MAP={purple:"#800080",orange:"#ffa500",white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#808080"},t._DEFAULT=t._initDefault(),t._COLODID=1,t}(),h=function(){function t(){}r(t,"laya.webgl.canvas.save.SaveBase");var e=t.prototype;return i.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){this._dataObj[this._valueName]=this._value,t.POOL[t.POOL._length++]=this,this._newSubmit&&(e._curSubmit=j.RENDERBASE)},t._createArray=function(){var t=[];return t._length=0,t},t._init=function(){var e=t._namemap={};return e[1]="ALPHA",e[2]="fillStyle",e[8]="font",e[256]="lineWidth",e[512]="strokeStyle",e[8192]="_mergeID",e[1024]=e[2048]=e[4096]=[],e[16384]="textBaseline",e[32768]="textAlign",e[65536]="_nBlendType",e[1048576]="shader",e[2097152]="filters",e[8388608]="_colorFiler",e},t.save=function(e,i,n,r){if((e._saveMark._saveuse&i)!==i){e._saveMark._saveuse|=i;var s=t.POOL,a=s._length>0?s[--s._length]:new t;a._value=n[a._valueName=t._namemap[i]],a._dataObj=n,a._newSubmit=r;var o=e._save;o[o._length++]=a}},t.POOL=laya.webgl.canvas.save.SaveBase._createArray(),t._namemap=t._init(),t}(),_=function(){function t(){this._events=null}var e;r(t,"laya.events.EventDispatcher");var i=t.prototype;return i.hasListener=function(t){var e=this._events&&this._events[t];return!!e},i.event=function(t,e){if(!this._events||!this._events[t])return!1;var i=this._events[t];if(i.run)i.once&&delete this._events[t],null!=e?i.runWith(e):i.run();else{for(var n=0,r=i.length;r>n;n++){var s=i[n];s&&(null!=e?s.runWith(e):s.run()),(!s||s.once)&&(i.splice(n,1),n--,r--)}0===i.length&&this._events&&delete this._events[t]}return!0},i.on=function(t,e,i,n){return this._createListener(t,e,i,n,!1)},i.once=function(t,e,i,n){return this._createListener(t,e,i,n,!0)},i._createListener=function(t,i,n,r,s,a){void 0===a&&(a=!0),a&&this.off(t,i,n,s);var o=e.create(i||this,n,r,s);this._events||(this._events={});var h=this._events;return h[t]?h[t].run?h[t]=[h[t],o]:h[t].push(o):h[t]=o,this},i.off=function(t,e,i,n){if(void 0===n&&(n=!1),!this._events||!this._events[t])return this;var r=this._events[t];if(null!=r)if(r.run)e&&r.caller!==e||null!=i&&r.method!==i||n&&!r.once||(delete this._events[t],r.recover());else{for(var s=0,a=0,o=r.length;o>a;a++){var h=r[a];h?!h||e&&h.caller!==e||null!=i&&h.method!==i||n&&!h.once||(s++,r[a]=null,h.recover()):s++}s===o&&delete this._events[t]}return this},i.offAll=function(t){var e=this._events;if(!e)return this;if(t)this._recoverHandlers(e[t]),delete e[t];else{for(var i in e)this._recoverHandlers(e[i]);this._events=null}return this},i.offAllCaller=function(t){if(t&&this._events)for(var e in this._events)this.off(e,t,null);return this},i._recoverHandlers=function(t){if(t)if(t.run)t.recover();else for(var e=t.length-1;e>-1;e--)t[e]&&(t[e].recover(),t[e]=null)},i.isMouseEvent=function(e){return t.MOUSE_EVENTS[e]||!1},t.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},t.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0}),e=function(t){function e(t,i,n,r){e.__super.call(this,t,i,n,r)}r(e,"",t);var i=e.prototype;return i.recover=function(){this._id>0&&(this._id=0,e._pool.push(this.clear()))},e.create=function(t,i,n,r){return void 0===r&&(r=!0),e._pool.length?e._pool.pop().setTo(t,i,n,r):new e(t,i,n,r)},e._pool=[],e}(l)},t}(),l=function(){function t(t,e,i,n){this.once=!1,this._id=0,void 0===n&&(n=!1),this.setTo(t,e,i,n)}r(t,"laya.utils.Handler");var e=t.prototype;return e.setTo=function(e,i,n,r){return this._id=t._gid++,this.caller=e,this.method=i,this.args=n,this.once=r,this},e.run=function(){if(null==this.method)return null;var t=this._id,e=this.method.apply(this.caller,this.args);return this._id===t&&this.once&&this.recover(),e},e.runWith=function(t){if(null==this.method)return null;var e=this._id;if(null==t)var i=this.method.apply(this.caller,this.args);else i=this.args||t.unshift?this.args?this.method.apply(this.caller,this.args.concat(t)):this.method.apply(this.caller,t):this.method.call(this.caller,t);return this._id===e&&this.once&&this.recover(),i},e.clear=function(){return this.caller=null,this.method=null,this.args=null,this},e.recover=function(){this._id>0&&(this._id=0,t._pool.push(this.clear()))},t.create=function(e,i,n,r){return void 0===r&&(r=!0),t._pool.length?t._pool.pop().setTo(e,i,n,r):new t(e,i,n,r)},t._pool=[],t._gid=1,t}(),u=function(){function t(){this._id=Q.getGID(),this._resetComp()}r(t,"laya.components.Component");var e=t.prototype;return i.imps(e,{"laya.resource.ISingletonElement":!0,"laya.resource.IDestroy":!0}),e._resetComp=function(){this._indexInList=-1,this._enabled=!0,this._active=!1,this._awaked=!1,this.owner=null},e._getIndexInList=function(){return this._indexInList},e._setIndexInList=function(t){this._indexInList=t},e._onAdded=function(){},e._onAwake=function(){},e._onEnable=function(){},e._onDisable=function(){},e._onEnableInScene=function(){},e._onDisableInScene=function(){},e._onDestroy=function(){},e.onReset=function(){},e._parse=function(){},e._cloneTo=function(){},e._setActive=function(t){this._active!==t&&this.owner.activeInHierarchy&&(this._active=t,t?(this._awaked||(this._awaked=!0,this._onAwake()),this._enabled&&this._onEnable()):this._enabled&&this._onDisable())},e._setActiveInScene=function(t){t?this._onEnableInScene():this._onDisableInScene()},e.destroy=function(){this.owner&&this.owner._destroyComponent(this)},e._destroy=function(){this._active&&this._setActive(!1),this.owner._scene&&this._setActiveInScene(!1),this._onDestroy(),this._destroyed=!0,this.onReset!==laya.components.Component.prototype.onReset?(this.onReset(),this._resetComp(),Ki.recoverByClass(this)):this._resetComp()},s(0,e,"id",function(){return this._id}),s(0,e,"enabled",function(){return this._enabled},function(t){this._enabled=t,this.owner&&(t?this.owner.activeInHierarchy&&this._onEnable():this._active&&this._onDisable())}),s(0,e,"isSingleton",function(){return!0}),s(0,e,"destroyed",function(){return this._destroyed}),t}(),c=function(){function t(){this.receiverName="王晓明",this.phone="15256565485",this.province="上海市",this.city="浦东新区",this.town="周浦镇",this.address="汇腾南苑612好23号"}r(t,"model.users.AddressVo");var e=t.prototype;return s(0,e,"proCityArea",function(){return this.province+" "+this.city+" "+this.town+" "+this.address}),s(0,e,"addressDetail",function(){return this.receiverName+"-"+this.phone+" "+this.province+" "+this.city+" "+this.town+" "+this.address}),t}(),d=function(){function t(){}return r(t,"GameConfig"),t.init=function(){var t=Te.regClass;t("utils.LoadingPrgControl",zn),t("script.login.LogPanelControl",kn),t("laya.display.Text",ur),t("script.login.RegisterCntrol",qn),t("script.login.ResetPwdControl",Zn),t("script.MainPageControl",Bn),t("utils.AddMsgControl",Un),t("script.prefabScript.LinkTextControl",Vn),t("script.order.SelectAddressControl",Kn),t("script.order.SelectFactoryControl",$n),t("script.order.SelectMaterialControl",Jn),t("laya.html.dom.HTMLDivElement",dr),t("script.order.SelectPicControl",Fn),t("script.order.SelectTechControl",jn),t("script.order.PaintOrderControl",Hn),t("script.picUpload.PicManagerControl",Wn),t("script.picUpload.PictureCheckControl",Gn),t("utils.PopUpWindowControl",Xn),t("script.picUpload.UpLoadAndOrderContrl",Qn),t("script.usercenter.AddressMgrControl",tr),t("script.usercenter.EnterPrizeInfoControl",Yn),t("script.usercenter.AddressEditControl",er),t("script.usercenter.UserMainControl",Nn)},t.width=640,t.height=1136,t.scaleMode="fixedwidth",t.screenMode="none",t.alignV="top",t.alignH="left",t.startScene="usercenter/EnterPrizeInfoPane.scene",t.sceneRoot="",t.debug=!1,t.stat=!1,t.physicsDebug=!1,t.exportSceneToJson=!0,t.__init$=function(){t.init()},t}(),f=function(){function t(){this.userId=0,this.userSession=null,this.userAccount=null,this.userName=null,this.company=null,this.addressList=null,this.money=0/0,this.isLogin=!1}return r(t,"model.Userdata"),s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance}),t._instance=null,t}(),p=function(){function t(){this.matName="PVP塑料管",this.matId=1,this.matClassType=1}return r(t,"model.orderModel.MaterialItemVo"),t}(),m=function(){function t(){this.techId=0,this.techName="蓝色包边",this.needAttach=!1;var t=Math.floor(5*Math.random());this.techName=["蓝色包边","3毫米PVC板","不裁剪","中金边","画面正上方打孔"][t]}return r(t,"model.orderModel.SingleTechVo"),t}(),g=function(){function t(){}r(t,"model.ChinaAreaModel");var e=t.prototype;return e.getAllProvince=function(){for(var e=[],i=0;i<t.citys.length;i++)e.push(t.citys[i].name);return e},e.getAllCity=function(e){for(var i=[],n=0;n<t.citys.length;n++)if(t.citys[n].name==e){for(var r=0;r<t.citys[n].city.length;r++)i.push(t.citys[n].city[r].name);break}return i},e.getAllArea=function(e,i){for(var n=0;n<t.citys.length;n++)if(t.citys[n].name==e){for(var r=0;r<t.citys[n].city.length;r++)if(t.citys[n].city[r].name==i)return t.citys[n].city[r].area;break}return[]},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t,t.initData()),t._instance}),t.initData=function(){t.citys=JSON.parse('[{"name":"上海市","city":[{"name":"上海市","area":["黄浦区","卢湾区","徐汇区","长宁区","静安区","普陀区","虹口区","杨浦区","宝山区","闵行区","嘉定区","松江区","金山区","青浦区","奉贤区","浦东新区","崇明县","其他"]}]},{"name":"北京市","city":[{"name":"北京市","area":["东城区","西城区","崇文区","宣武区","朝阳区","丰台区","石景山区","海淀区","门头沟区","房山区","通州区","顺义区","昌平区","大兴区","平谷区","怀柔区","密云县","延庆县"]}]},{"name":"天津市","city":[{"name":"天津市","area":["和平区","河东区","河西区","南开区","河北区","红桥区","塘沽区","汉沽区","大港区","东丽区","西青区","津南区","北辰区","武清区","宝坻区","宁河县","静海县","蓟县"]}]},{"name":"河北省","city":[{"name":"石家庄市","area":["长安区","桥东区","桥西区","新华区","郊区","井陉矿区","井陉县","正定县","栾城县","行唐县","灵寿县","高邑县","深泽县","赞皇县","无极县","平山县","元氏县","赵县","辛集市","藁","晋州市","新乐市","鹿泉市"]},{"name":"唐山市","area":["路南区","路北区","古冶区","开平区","新区","丰润县","滦县","滦南县","乐亭县","迁西县","玉田县","唐海县","遵化市","丰南市","迁安市"]},{"name":"秦皇岛市","area":["海港区","山海关区","北戴河区","青龙满族自治县","昌黎县","抚宁县","卢龙县"]},{"name":"邯郸市","area":["邯山区","丛台区","复兴区","峰峰矿区","邯郸县","临漳县","成安县","大名县","涉县","磁县","肥乡县","永年县","邱县","鸡泽县","广平县","馆陶县","魏县","曲周县","武安市"]},{"name":"邢台市","area":["桥东区","桥西区","邢台县","临城县","内丘县","柏乡县","隆尧县","任县","南和县","宁晋县","巨鹿县","新河县","广宗县","平乡县","威县","清河县","临西县","南宫市","沙河市"]},{"name":"保定市","area":["新市区","北市区","南市区","满城县","清苑县","涞水县","阜平县","徐水县","定兴县","唐县","高阳县","容城县","涞源县","望都县","安新县","易县","曲阳县","蠡县","顺平县","博野","雄县","涿州市","定州市","安国市","高碑店市"]},{"name":"张家口","area":["桥东区","桥西区","宣化区","下花园区","宣化县","张北县","康保县","沽源县","尚义县","蔚县","阳原县","怀安县","万全县","怀来县","涿鹿县","赤城县","崇礼县"]},{"name":"承德市","area":["双桥区","双滦区","鹰手营子矿区","承德县","兴隆县","平泉县","滦平县","隆化县","丰宁满族自治县","宽城满族自治县","围场满族蒙古族自治县"]},{"name":"沧州市","area":["新华区","运河区","沧县","青县","东光县","海兴县","盐山县","肃宁县","南皮县","吴桥县","献县","孟村回族自治县","泊头市","任丘市","黄骅市","河间市"]},{"name":"廊坊市","area":["安次区","固安县","永清县","香河县","大城县","文安县","大厂回族自治县","霸州市","三河市"]},{"name":"衡水市","area":["桃城区","枣强县","武邑县","武强县","饶阳县","安平县","故城县","景县","阜城县","冀州市","深州市"]}]},{"name":"山西省","city":[{"name":"太原市","area":["小店区","迎泽区","杏花岭区","尖草坪区","万柏林区","晋源区","清徐县","阳曲县","娄烦县","古交市"]},{"name":"大同市","area":["城区","矿区","南郊区","新荣区","阳高县","天镇县","广灵县","灵丘县","浑源县","左云县","大同县"]},{"name":"阳泉市","area":["城区","矿区","郊区","平定县","盂县"]},{"name":"长治市","area":["城区","郊区","长治县","襄垣县","屯留县","平顺县","黎城县","壶关县","长子县","武乡县","沁县","沁源县","潞城市"]},{"name":"晋城市","area":["城区","沁水县","阳城县","陵川县","泽州县","高平市"]},{"name":"朔州市","area":["朔城区","平鲁区","山阴县","应县","右玉县","怀仁县"]},{"name":"忻州市","area":["忻府区","原平市","定襄县","五台县","代县","繁峙县","宁武县","静乐县","神池县","五寨县","岢岚县","河曲县","保德县","偏关县"]},{"name":"吕梁市","area":["离石区","孝义市","汾阳市","文水县","交城县","兴县","临县","柳林县","石楼县","岚县","方山县","中阳县","交口县"]},{"name":"晋中市","area":["榆次市","介休市","榆社县","左权县","和顺县","昔阳县","寿阳县","太谷县","祁县","平遥县","灵石县"]},{"name":"临汾市","area":["临汾市","侯马市","霍州市","曲沃县","翼城县","襄汾县","洪洞县","古县","安泽县","浮山县","吉县","乡宁县","蒲县","大宁县","永和县","隰县","汾西县"]},{"name":"运城市","area":["运城市","永济市","河津市","芮城县","临猗县","万荣县","新绛县","稷山县","闻喜县","夏县","绛县","平陆县","垣曲县"]}]},{"name":"内蒙古","city":[{"name":"呼和浩特市","area":["新城区","回民区","玉泉区","郊区","土默特左旗","托克托县","和林格尔县","清水河县","武川县"]},{"name":"包头市","area":["东河区","昆都伦区","青山区","石拐矿区","白云矿区","郊区","土默特右旗","固阳县","达尔罕茂明安联合旗"]},{"name":"乌海市","area":["海勃湾区","海南区","乌达区"]},{"name":"赤峰市","area":["红山区","元宝山区","松山区","阿鲁科尔沁旗","巴林左旗","巴林右旗","林西县","克什克腾旗","翁牛特旗","喀喇沁旗","宁城县","敖汉旗"]},{"name":"呼伦贝尔市","area":["海拉尔市","满洲里市","扎兰屯市","牙克石市","根河市","额尔古纳市","阿荣旗","莫力达瓦达斡尔族自治旗","鄂伦春自治旗","鄂温克族自治旗","新巴尔虎右旗","新巴尔虎左旗","陈巴尔虎旗"]},{"name":"兴安盟","area":["乌兰浩特市","阿尔山市","科尔沁右翼前旗","科尔沁右翼中旗","扎赉特旗","突泉县"]},{"name":"通辽市","area":["科尔沁区","霍林郭勒市","科尔沁左翼中旗","科尔沁左翼后旗","开鲁县","库伦旗","奈曼旗","扎鲁特旗"]},{"name":"锡林郭勒盟","area":["二连浩特市","锡林浩特市","阿巴嘎旗","苏尼特左旗","苏尼特右旗","东乌珠穆沁旗","西乌珠穆沁旗","太仆寺旗","镶黄旗","正镶白旗","正蓝旗","多伦县"]},{"name":"乌兰察布盟","area":["集宁市","丰镇市","卓资县","化德县","商都县","兴和县","凉城县","察哈尔右翼前旗","察哈尔右翼中旗","察哈尔右翼后旗","四子王旗"]},{"name":"伊克昭盟","area":["东胜市","达拉特旗","准格尔旗","鄂托克前旗","鄂托克旗","杭锦旗","乌审旗","伊金霍洛旗"]},{"name":"巴彦淖尔盟","area":["临河市","五原县","磴口县","乌拉特前旗","乌拉特中旗","乌拉特后旗","杭锦后旗"]},{"name":"阿拉善盟","area":["阿拉善左旗","阿拉善右旗","额济纳旗"]}]},{"name":"辽宁省","city":[{"name":"沈阳市","area":["沈河区","皇姑区","和平区","大东区","铁西区","苏家屯区","东陵区","于洪区","新民市","法库县","辽中县","康平县","新城子区","其他"]},{"name":"大连市","area":["西岗区","中山区","沙河口区","甘井子区","旅顺口区","金州区","瓦房店市","普兰店市","庄河市","长海县","其他"]},{"name":"鞍山市","area":["铁东区","铁西区","立山区","千山区","海城市","台安县","岫岩满族自治县","其他"]},{"name":"抚顺市","area":["顺城区","新抚区","东洲区","望花区","抚顺县","清原满族自治县","新宾满族自治县","其他"]},{"name":"本溪市","area":["平山区","明山区","溪湖区","南芬区","本溪满族自治县","桓仁满族自治县","其他"]},{"name":"丹东市","area":["振兴区","元宝区","振安区","东港市","凤城市","宽甸满族自治县","其他"]},{"name":"锦州市","area":["太和区","古塔区","凌河区","凌海市","黑山县","义县","北宁市","其他"]},{"name":"营口市","area":["站前区","西市区","鲅鱼圈区","老边区","大石桥市","盖州市","其他"]},{"name":"阜新市","area":["海州区","新邱区","太平区","清河门区","细河区","彰武县","阜新蒙古族自治县","其他"]},{"name":"辽阳市","area":["白塔区","文圣区","宏伟区","太子河区","弓长岭区","灯塔市","辽阳县","其他"]},{"name":"盘锦","area":["双台子区","兴隆台区","盘山县","大洼县","其他"]},{"name":"铁岭市","area":["银州区","清河区","调兵山市","开原市","铁岭县","昌图县","西丰县","其他"]},{"name":"朝阳市","area":["双塔区","龙城区","凌源市","北票市","朝阳县","建平县","喀喇沁左翼蒙古族自治县","其他"]},{"name":"葫芦岛市","area":["龙港区","南票区","连山区","兴城市","绥中县","建昌县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"吉林省","city":[{"name":"长春市","area":["朝阳区","宽城区","二道区","南关区","绿园区","双阳区","九台市","榆树市","德惠市","农安县","其他"]},{"name":"吉林市","area":["船营区","昌邑区","龙潭区","丰满区","舒兰市","桦甸市","蛟河市","磐石市","永吉县","其他"]},{"name":"四平","area":["铁西区","铁东区","公主岭市","双辽市","梨树县","伊通满族自治县","其他"]},{"name":"辽源市","area":["龙山区","西安区","东辽县","东丰县","其他"]},{"name":"通化市","area":["东昌区","二道江区","梅河口市","集安市","通化县","辉南县","柳河县","其他"]},{"name":"白山市","area":["八道江区","江源区","临江市","靖宇县","抚松县","长白朝鲜族自治县","其他"]},{"name":"松原市","area":["宁江区","乾安县","长岭县","扶余县","前郭尔罗斯蒙古族自治县","其他"]},{"name":"白城市","area":["洮北区","大安市","洮南市","镇赉县","通榆县","其他"]},{"name":"延边朝鲜族自治州","area":["延吉市","图们市","敦化市","龙井市","珲春市","和龙市","安图县","汪清县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"黑龙江省","city":[{"name":"哈尔滨市","area":["松北区","道里区","南岗区","平房区","香坊区","道外区","呼兰区","阿城区","双城市","尚志市","五常市","宾县","方正县","通河县","巴彦县","延寿县","木兰县","依兰县","其他"]},{"name":"齐齐哈尔市","area":["龙沙区","昂昂溪区","铁锋区","建华区","富拉尔基区","碾子山区","梅里斯达斡尔族区","讷河市","富裕县","拜泉县","甘南县","依安县","克山县","泰来县","克东县","龙江县","其他"]},{"name":"鹤岗市","area":["兴山区","工农区","南山区","兴安区","向阳区","东山区","萝北县","绥滨县","其他"]},{"name":"双鸭山","area":["尖山区","岭东区","四方台区","宝山区","集贤县","宝清县","友谊县","饶河县","其他"]},{"name":"鸡西市","area":["鸡冠区","恒山区","城子河区","滴道区","梨树区","麻山区","密山市","虎林市","鸡东县","其他"]},{"name":"大庆市","area":["萨尔图区","红岗区","龙凤区","让胡路区","大同区","林甸县","肇州县","肇源县","杜尔伯特蒙古族自治县","其他"]},{"name":"伊春市","area":["伊春区","带岭区","南岔区","金山屯区","西林区","美溪区","乌马河区","翠峦区","友好区","上甘岭区","五营区","红星区","新青区","汤旺河区","乌伊岭区","铁力市","嘉荫县","其他"]},{"name":"牡丹江市","area":["爱民区","东安区","阳明区","西安区","绥芬河市","宁安市","海林市","穆棱市","林口县","东宁县","其他"]},{"name":"佳木斯市","area":["向阳区","前进区","东风区","郊区","同江市","富锦市","桦川县","抚远县","桦南县","汤原县","其他"]},{"name":"七台河市","area":["桃山区","新兴区","茄子河区","勃利县","其他"]},{"name":"黑河市","area":["爱辉区","北安市","五大连池市","逊克县","嫩江县","孙吴县","其他"]},{"name":"绥化市","area":["北林区","安达市","肇东市","海伦市","绥棱县","兰西县","明水县","青冈县","庆安县","望奎县","其他"]},{"name":"大兴安岭地区","area":["呼玛县","塔河县","漠河县","大兴安岭辖区","其他"]},{"name":"其他","area":["其他"]}]},{"name":"江苏省","city":[{"name":"南京市","area":["玄武区","白下区","秦淮区","建邺区","鼓楼区","下关区","栖霞区","雨花台区","浦口区","江宁区","六合区","溧水县","高淳县","其他"]},{"name":"苏州市","area":["金阊区","平江区","沧浪区","虎丘区","吴中区","相城区","常熟市","张家港市","昆山市","吴江市","太仓市","其他"]},{"name":"无锡市","area":["崇安区","南长区","北塘区","滨湖区","锡山区","惠山区","江阴市","宜兴市","其他"]},{"name":"常州市","area":["钟楼区","天宁区","戚墅堰区","新北区","武进区","金坛市","溧阳市","其他"]},{"name":"镇江市","area":["京口区","润州区","丹徒区","丹阳市","扬中市","句容市","其他"]},{"name":"南通市","area":["崇川区","港闸区","通州市","如皋市","海门市","启东市","海安县","如东县","其他"]},{"name":"泰州市","area":["海陵区","高港区","姜堰市","泰兴市","靖江市","兴化市","其他"]},{"name":"扬州市","area":["广陵区","维扬区","邗江区","江都市","仪征市","高邮市","宝应县","其他"]},{"name":"盐城市","area":["亭湖区","盐都区","大丰市","东台市","建湖县","射阳县","阜宁县","滨海县","响水县","其他"]},{"name":"连云港市","area":["新浦区","海州区","连云区","东海县","灌云县","赣榆县","灌南县","其他"]},{"name":"徐州市","area":["云龙区","鼓楼区","九里区","泉山区","贾汪区","邳州市","新沂市","铜山县","睢宁县","沛县","丰县","其他"]},{"name":"淮安市","area":["清河区","清浦区","楚州区","淮阴区","涟水县","洪泽县","金湖县","盱眙县","其他"]},{"name":"宿迁市","area":["宿城区","宿豫区","沭阳县","泗阳县","泗洪县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"浙江省","city":[{"name":"杭州市","area":["拱墅区","西湖区","上城区","下城区","江干区","滨江区","余杭区","萧山区","建德市","富阳市","临安市","桐庐县","淳安县","其他"]},{"name":"宁波市","area":["海曙区","江东区","江北区","镇海区","北仑区","鄞州区","余姚市","慈溪市","奉化市","宁海县","象山县","其他"]},{"name":"温州市","area":["鹿城区","龙湾区","瓯海区","瑞安市","乐清市","永嘉县","洞头县","平阳县","苍南县","文成县","泰顺县","其他"]},{"name":"嘉兴市","area":["秀城区","秀洲区","海宁市","平湖市","桐乡市","嘉善县","海盐县","其他"]},{"name":"湖州市","area":["吴兴区","南浔区","长兴县","德清县","安吉县","其他"]},{"name":"绍兴市","area":["越城区","诸暨市","上虞市","嵊州市","绍兴县","新昌县","其他"]},{"name":"金华市","area":["婺城区","金东区","兰溪市","义乌市","东阳市","永康市","武义县","浦江县","磐安县","其他"]},{"name":"衢州市","area":["柯城区","衢江区","江山市","龙游县","常山县","开化县","其他"]},{"name":"舟山市","area":["定海区","普陀区","岱山县","嵊泗县","其他"]},{"name":"台州市","area":["椒江区","黄岩区","路桥区","临海市","温岭市","玉环县","天台县","仙居县","三门县","其他"]},{"name":"丽水市","area":["莲都区","龙泉市","缙云县","青田县","云和县","遂昌县","松阳县","庆元县","景宁畲族自治县","其他"]},{"name":"其他市","area":["其他"]}]},{"name":"安徽省","city":[{"name":"合肥市","area":["庐阳区","瑶海区","蜀山区","包河区","长丰县","肥东县","肥西县","其他"]},{"name":"芜湖市","area":["镜湖区","弋江区","鸠江区","三山区","芜湖县","南陵县","繁昌县","其他"]},{"name":"蚌埠市","area":["蚌山区","龙子湖区","禹会区","淮上区","怀远县","固镇县","五河县","其他"]},{"name":"淮南市","area":["田家庵区","大通区","谢家集区","八公山区","潘集区","凤台县","其他"]},{"name":"马鞍山市","area":["雨山区","花山区","金家庄区","当涂县","其他"]},{"name":"淮北市","area":["相山区","杜集区","烈山区","濉溪县","其他"]},{"name":"铜陵市","area":["铜官山区","狮子山区","郊区","铜陵县","其他"]},{"name":"安庆市","area":["迎江区","大观区","宜秀区","桐城市","宿松县","枞阳县","太湖县","怀宁县","岳西县","望江县","潜山县","其他"]},{"name":"黄山市","area":["屯溪区","黄山区","徽州区","休宁县","歙县","祁门县","黟县","其他"]},{"name":"滁州市","area":["琅琊区","南谯区","天长市","明光市","全椒县","来安县","定远县","凤阳县","其他"]},{"name":"阜阳市","area":["颍州区","颍东区","颍泉区","界首市","临泉县","颍上县","阜南县","太和县","其他"]},{"name":"宿州市","area":["埇桥区","萧县","泗县","砀山县","灵璧县","其他"]},{"name":"巢湖市","area":["居巢区","含山县","无为县","庐江县","和县","其他"]},{"name":"六安市","area":["金安区","裕安区","寿县","霍山县","霍邱县","舒城县","金寨县","其他"]},{"name":"亳州市","area":["谯城区","利辛县","涡阳县","蒙城县","其他"]},{"name":"池州市","area":["贵池区","东至县","石台县","青阳县","其他"]},{"name":"宣城市","area":["宣州区","宁国市","广德县","郎溪县","泾县","旌德县","绩溪县","其他"]},{"name":"其他市","area":["其他"]}]},{"name":"福建省","city":[{"name":"福州市","area":["鼓楼区","台江区","仓山区","马尾区","晋安区","福清市","长乐市","闽侯县","闽清县","永泰县","连江县","罗源县","平潭县","其他"]},{"name":"厦门市","area":["思明区","海沧区","湖里区","集美区","同安区","翔安区","其他"]},{"name":"莆田市","area":["城厢区","涵江区","荔城区","秀屿区","仙游县","其他"]},{"name":"三明市","area":["梅列区","三元区","永安市","明溪县","将乐县","大田县","宁化县","建宁县","沙县","尤溪县","清流县","泰宁县","其他"]},{"name":"泉州市","area":["鲤城区","丰泽区","洛江区","泉港区","石狮市","晋江市","南安市","惠安县","永春县","安溪县","德化县","金门县","其他"]},{"name":"漳州市","area":["芗城区","龙文区","龙海市","平和县","南靖县","诏安县","漳浦县","华安县","东山县","长泰县","云霄县","其他"]},{"name":"南平市","area":["延平区","建瓯市","邵武市","武夷山市","建阳市","松溪县","光泽县","顺昌县","浦城县","政和县","其他"]},{"name":"龙岩市","area":["新罗区","漳平市","长汀县","武平县","上杭县","永定县","连城县","其他"]},{"name":"宁德市","area":["蕉城区","福安市","福鼎市","寿宁县","霞浦县","柘荣县","屏南县","古田县","周宁县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"江西省","city":[{"name":"南昌市","area":["东湖区","西湖区","青云谱区","湾里区","青山湖区","新建县","南昌县","进贤县","安义县","其他"]},{"name":"景德镇市","area":["珠山区","昌江区","乐平市","浮梁县","其他"]},{"name":"萍乡市","area":["安源区","湘东区","莲花县","上栗县","芦溪县","其他"]},{"name":"九江市","area":["浔阳区","庐山区","瑞昌市","九江县","星子县","武宁县","彭泽县","永修县","修水县","湖口县","德安县","都昌县","其他"]},{"name":"新余市","area":["渝水区","分宜县","其他"]},{"name":"鹰潭市","area":["月湖区","贵溪市","余江县","其他"]},{"name":"赣州市","area":["章贡区","瑞金市","南康市","石城县","安远县","赣县","宁都县","寻乌县","兴国县","定南县","上犹县","于都县","龙南县","崇义县","信丰县","全南县","大余县","会昌县","其他"]},{"name":"吉安市","area":["吉州区","青原区","井冈山市","吉安县","永丰县","永新县","新干县","泰和县","峡江县","遂川县","安福县","吉水县","万安县","其他"]},{"name":"宜春市","area":["袁州区","丰城市","樟树市","高安市","铜鼓县","靖安县","宜丰县","奉新县","万载县","上高县","其他"]},{"name":"抚州市","area":["临川区","南丰县","乐安县","金溪县","南城县","东乡县","资溪县","宜黄县","广昌县","黎川县","崇仁县","其他"]},{"name":"上饶市","area":["信州区","德兴市","上饶县","广丰县","鄱阳县","婺源县","铅山县","余干县","横峰县","弋阳县","玉山县","万年县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"山东省","city":[{"name":"济南市","area":["市中区","历下区","天桥区","槐荫区","历城区","长清区","章丘市","平阴县","济阳县","商河县","其他"]},{"name":"青岛市","area":["市南区","市北区","城阳区","四方区","李沧区","黄岛区","崂山区","胶南市","胶州市","平度市","莱西市","即墨市","其他"]},{"name":"淄博市","area":["张店区","临淄区","淄川区","博山区","周村区","桓台县","高青县","沂源县","其他"]},{"name":"枣庄市","area":["市中区","山亭区","峄城区","台儿庄区","薛城区","滕州市","其他"]},{"name":"东营市","area":["东营区","河口区","垦利县","广饶县","利津县","其他"]},{"name":"烟台市","area":["芝罘区","福山区","牟平区","莱山区","龙口市","莱阳市","莱州市","招远市","蓬莱市","栖霞市","海阳市","长岛县","其他"]},{"name":"潍坊市","area":["潍城区","寒亭区","坊子区","奎文区","青州市","诸城市","寿光市","安丘市","高密市","昌邑市","昌乐县","临朐县","其他"]},{"name":"济宁市","area":["市中区","任城区","曲阜市","兖州市","邹城市","鱼台县","金乡县","嘉祥县","微山县","汶上县","泗水县","梁山县","其他"]},{"name":"泰安市","area":["泰山区","岱岳区","新泰市","肥城市","宁阳县","东平县","其他"]},{"name":"威海市","area":["环翠区","乳山市","文登市","荣成市","其他"]},{"name":"日照市","area":["东港区","岚山区","五莲县","莒县","其他"]},{"name":"莱芜市","area":["莱城区","钢城区","其他"]},{"name":"临沂市","area":["兰山区","罗庄区","河东区","沂南县","郯城县","沂水县","苍山县","费县","平邑县","莒南县","蒙阴县","临沭县","其他"]},{"name":"德州市","area":["德城区","乐陵市","禹城市","陵县","宁津县","齐河县","武城县","庆云县","平原县","夏津县","临邑县","其他"]},{"name":"聊城市","area":["东昌府区","临清市","高唐县","阳谷县","茌平县","莘县","东阿县","冠县","其他"]},{"name":"滨州市","area":["滨城区","邹平县","沾化县","惠民县","博兴县","阳信县","无棣县","其他"]},{"name":"菏泽市","area":["牡丹区","鄄城县","单县","郓城县","曹县","定陶县","巨野县","东明县","成武县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"河南省","city":[{"name":"郑州市","area":["中原区","金水区","二七区","管城回族区","上街区","惠济区","巩义市","新郑市","新密市","登封市","荥阳市","中牟县","其他"]},{"name":"开封市","area":["鼓楼区","龙亭区","顺河回族区","禹王台区","金明区","开封县","尉氏县","兰考县","杞县","通许县","其他"]},{"name":"洛阳市","area":["西工区","老城区","涧西区","瀍河回族区","洛龙区","吉利区","偃师市","孟津县","汝阳县","伊川县","洛宁县","嵩县","宜阳县","新安县","栾川县","其他"]},{"name":"平顶山市","area":["新华区","卫东区","湛河区","石龙区","汝州市","舞钢市","宝丰县","叶县","郏县","鲁山县","其他"]},{"name":"安阳市","area":["北关区","文峰区","殷都区","龙安区","林州市","安阳县","滑县","内黄县","汤阴县","其他"]},{"name":"鹤壁市","area":["淇滨区","山城区","鹤山区","浚县","淇县","其他"]},{"name":"新乡市","area":["卫滨区","红旗区","凤泉区","牧野区","卫辉市","辉县市","新乡县","获嘉县","原阳县","长垣县","封丘县","延津县","其他"]},{"name":"焦作市","area":["解放区","中站区","马村区","山阳区","沁阳市","孟州市","修武县","温县","武陟县","博爱县","其他"]},{"name":"濮阳市","area":["华龙区","濮阳县","南乐县","台前县","清丰县","范县","其他"]},{"name":"许昌市","area":["魏都区","禹州市","长葛市","许昌县","鄢陵县","襄城县","其他"]},{"name":"漯河市","area":["源汇区","郾城区","召陵区","临颍县","舞阳县","其他"]},{"name":"三门峡市","area":["湖滨区","义马市","灵宝市","渑池县","卢氏县","陕县","其他"]},{"name":"南阳市","area":["卧龙区","宛城区","邓州市","桐柏县","方城县","淅川县","镇平县","唐河县","南召县","内乡县","新野县","社旗县","西峡县","其他"]},{"name":"商丘市","area":["梁园区","睢阳区","永城市","宁陵县","虞城县","民权县","夏邑县","柘城县","睢县","其他"]},{"name":"信阳市","area":["浉河区","平桥区","潢川县","淮滨县","息县","新县","商城县","固始县","罗山县","光山县","其他"]},{"name":"周口市","area":["川汇区","项城市","商水县","淮阳县","太康县","鹿邑县","西华县","扶沟县","沈丘县","郸城县","其他"]},{"name":"驻马店市","area":["驿城区","确山县","新蔡县","上蔡县","西平县","泌阳县","平舆县","汝南县","遂平县","正阳县","其他"]},{"name":"焦作市","area":["济源市","其他"]},{"name":"其他","area":["其他"]}]},{"name":"湖北省","city":[{"name":"武汉市","area":["江岸区","武昌区","江汉区","硚口区","汉阳区","青山区","洪山区","东西湖区","汉南区","蔡甸区","江夏区","黄陂区","新洲区","其他"]},{"name":"黄石市","area":["黄石港区","西塞山区","下陆区","铁山区","大冶市","阳新县","其他"]},{"name":"十堰市","area":["张湾区","茅箭区","丹江口市","郧县","竹山县","房县","郧西县","竹溪县","其他"]},{"name":"荆州市","area":["沙市区","荆州区","洪湖市","石首市","松滋市","监利县","公安县","江陵县","其他"]},{"name":"宜昌市","area":["西陵区","伍家岗区","点军区","猇亭区","夷陵区","宜都市","当阳市","枝江市","秭归县","远安县","兴山县","五峰土家族自治县","长阳土家族自治县","其他"]},{"name":"襄樊市","area":["襄城区","樊城区","襄阳区","老河口市","枣阳市","宜城市","南漳县","谷城县","保康县","其他"]},{"name":"鄂州市","area":["鄂城区","华容区","梁子湖区","其他"]},{"name":"荆门市","area":["东宝区","掇刀区","钟祥市","京山县","沙洋县","其他"]},{"name":"孝感市","area":["孝南区","应城市","安陆市","汉川市","云梦县","大悟县","孝昌县","其他"]},{"name":"黄冈市","area":["黄州区","麻城市","武穴市","红安县","罗田县","浠水县","蕲春县","黄梅县","英山县","团风县","其他"]},{"name":"咸宁市","area":["咸安区","赤壁市","嘉鱼县","通山县","崇阳县","通城县","其他"]},{"name":"随州市","area":["曾都区","广水市","其他"]},{"name":"恩施土家族苗族自治州","area":["恩施市","利川市","建始县","来凤县","巴东县","鹤峰县","宣恩县","咸丰县","其他"]},{"name":"仙桃市","area":["仙桃"]},{"name":"天门市","area":["天门"]},{"name":"潜江市","area":["潜江"]},{"name":"神农架林区","area":["神农架林区"]},{"name":"其他","area":["其他"]}]},{"name":"湖南省","city":[{"name":"长沙市","area":["岳麓区","芙蓉区","天心区","开福区","雨花区","浏阳市","长沙县","望城县","宁乡县","其他"]},{"name":"株洲市","area":["天元区","荷塘区","芦淞区","石峰区","醴陵市","株洲县","炎陵县","茶陵县","攸县","其他"]},{"name":"湘潭市","area":["岳塘区","雨湖区","湘乡市","韶山市","湘潭县","其他"]},{"name":"衡阳市","area":["雁峰区","珠晖区","石鼓区","蒸湘区","南岳区","耒阳市","常宁市","衡阳县","衡东县","衡山县","衡南县","祁东县","其他"]},{"name":"邵阳市","area":["双清区","大祥区","北塔区","武冈市","邵东县","洞口县","新邵县","绥宁县","新宁县","邵阳县","隆回县","城步苗族自治县","其他"]},{"name":"岳阳市","area":["岳阳楼区","云溪区","君山区","临湘市","汨罗市","岳阳县","湘阴县","平江县","华容县","其他"]},{"name":"常德市","area":["武陵区","鼎城区","津市市","澧县","临澧县","桃源县","汉寿县","安乡县","石门县","其他"]},{"name":"张家界市","area":["永定区","武陵源区","慈利县","桑植县","其他"]},{"name":"益阳市","area":["赫山区","资阳区","沅江市","桃江县","南县","安化县","其他"]},{"name":"郴州市","area":["北湖区","苏仙区","资兴市","宜章县","汝城县","安仁县","嘉禾县","临武县","桂东县","永兴县","桂阳县","其他"]},{"name":"永州市","area":["冷水滩区","零陵区","祁阳县","蓝山县","宁远县","新田县","东安县","江永县","道县","双牌县","江华瑶族自治县","其他"]},{"name":"怀化市","area":["鹤城区","洪江市","会同县","沅陵县","辰溪县","溆浦县","中方县","新晃侗族自治县","芷江侗族自治县","通道侗族自治县","靖州苗族侗族自治县","麻阳苗族自治县","其他"]},{"name":"娄底市","area":["娄星区","冷水江市","涟源市","新化县","双峰县","其他"]},{"name":"湘西土家族苗族自治州","area":["吉首市","古丈县","龙山县","永顺县","凤凰县","泸溪县","保靖县","花垣县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"广东省","city":[{"name":"广州市","area":["越秀区","荔湾区","海珠区","天河区","白云区","黄埔区","番禺区","花都区","南沙区","萝岗区","增城市","从化市","其他"]},{"name":"深圳市","area":["福田区","罗湖区","南山区","宝安区","龙岗区","盐田区","其他"]},{"name":"东莞市","area":["莞城","常平","塘厦","塘厦","塘厦","其他"]},{"name":"中山市","area":["中山"]},{"name":"潮州市","area":["湘桥区","潮安县","饶平县","其他"]},{"name":"揭阳市","area":["榕城区","揭东县","揭西县","惠来县","普宁市","其他"]},{"name":"云浮市","area":["云城区","新兴县","郁南县","云安县","罗定市","其他"]},{"name":"珠海市","area":["香洲区","斗门区","金湾区","其他"]},{"name":"汕头市","area":["金平区","濠江区","龙湖区","潮阳区","潮南区","澄海区","南澳县","其他"]},{"name":"韶关市","area":["浈江区","武江区","曲江区","乐昌市","南雄市","始兴县","仁化县","翁源县","新丰县","乳源瑶族自治县","其他"]},{"name":"佛山市","area":["禅城区","南海区","顺德区","三水区","高明区","其他"]},{"name":"江门市","area":["蓬江区","江海区","新会区","恩平市","台山市","开平市","鹤山市","其他"]},{"name":"湛江市","area":["赤坎区","霞山区","坡头区","麻章区","吴川市","廉江市","雷州市","遂溪县","徐闻县","其他"]},{"name":"茂名市","area":["茂南区","茂港区","化州市","信宜市","高州市","电白县","其他"]},{"name":"肇庆市","area":["端州区","鼎湖区","高要市","四会市","广宁县","怀集县","封开县","德庆县","其他"]},{"name":"惠州市","area":["惠城区","惠阳区","博罗县","惠东县","龙门县","其他"]},{"name":"梅州市","area":["梅江区","兴宁市","梅县","大埔县","丰顺县","五华县","平远县","蕉岭县","其他"]},{"name":"汕尾市","area":["城区","陆丰市","海丰县","陆河县","其他"]},{"name":"河源市","area":["源城区","紫金县","龙川县","连平县","和平县","东源县","其他"]},{"name":"阳江市","area":["江城区","阳春市","阳西县","阳东县","其他"]},{"name":"清远市","area":["清城区","英德市","连州市","佛冈县","阳山县","清新县","连山壮族瑶族自治县","连南瑶族自治县","其他"]}]},{"name":"广西","city":[{"name":"南宁市","area":["青秀区","兴宁区","西乡塘区","良庆区","江南区","邕宁区","武鸣县","隆安县","马山县","上林县","宾阳县","横县","其他"]},{"name":"柳州市","area":["城中区","鱼峰区","柳北区","柳南区","柳江县","柳城县","鹿寨县","融安县","融水苗族自治县","三江侗族自治县","其他"]},{"name":"桂林市","area":["象山区","秀峰区","叠彩区","七星区","雁山区","阳朔县","临桂县","灵川县","全州县","平乐县","兴安县","灌阳县","荔浦县","资源县","永福县","龙胜各族自治县","恭城瑶族自治县","其他"]},{"name":"梧州市","area":["万秀区","蝶山区","长洲区","岑溪市","苍梧县","藤县","蒙山县","其他"]},{"name":"北海市","area":["海城区","银海区","铁山港区","合浦县","其他"]},{"name":"防城港市","area":["港口区","防城区","东兴市","上思县","其他"]},{"name":"钦州市","area":["钦南区","钦北区","灵山县","浦北县","其他"]},{"name":"贵港市","area":["港北区","港南区","覃塘区","桂平市","平南县","其他"]},{"name":"玉林市","area":["玉州区","北流市","容县","陆川县","博白县","兴业县","其他"]},{"name":"百色市","area":["右江区","凌云县","平果县","西林县","乐业县","德保县","田林县","田阳县","靖西县","田东县","那坡县","隆林各族自治县","其他"]},{"name":"贺州市","area":["八步区","钟山县","昭平县","富川瑶族自治县","其他"]},{"name":"河池市","area":["金城江区","宜州市","天峨县","凤山县","南丹县","东兰县","都安瑶族自治县","罗城仫佬族自治县","巴马瑶族自治县","环江毛南族自治县","大化瑶族自治县","其他"]},{"name":"来宾市","area":["兴宾区","合山市","象州县","武宣县","忻城县","金秀瑶族自治县","其他"]},{"name":"崇左市","area":["江州区","凭祥市","宁明县","扶绥县","龙州县","大新县","天等县","其他"]},{"name":"其他市","area":["其他"]}]},{"name":"海南省","city":[{"name":"海口市","area":["龙华区","秀英区","琼山区","美兰区","其他"]},{"name":"三亚市","area":["三亚市","其他"]},{"name":"五指山市","area":["五指山"]},{"name":"琼海市","area":["琼海"]},{"name":"儋州市","area":["儋州"]},{"name":"文昌市","area":["文昌"]},{"name":"万宁市","area":["万宁"]},{"name":"东方市","area":["东方"]},{"name":"澄迈县","area":["澄迈县"]},{"name":"定安县","area":["定安县"]},{"name":"屯昌县","area":["屯昌县"]},{"name":"临高县","area":["临高县"]},{"name":"白沙黎族自治县","area":["白沙黎族自治县"]},{"name":"昌江黎族自治县","area":["昌江黎族自治县"]},{"name":"乐东黎族自治县","area":["乐东黎族自治县"]},{"name":"陵水黎族自治县","area":["陵水黎族自治县"]},{"name":"保亭黎族苗族自治县","area":["保亭黎族苗族自治县"]},{"name":"琼中黎族苗族自治县","area":["琼中黎族苗族自治县"]},{"name":"其他","area":["其他"]}]},{"name":"重庆市","city":[{"name":"重庆市","area":["渝中区","大渡口区","江北区","南岸区","北碚区","渝北区","巴南区","长寿区","双桥区","沙坪坝区","万盛区","万州区","涪陵区","黔江区","永川区","合川区","江津区","九龙坡区","南川区","綦江县","潼南县","荣昌县","璧山县","大足县","铜梁县","梁平县","开县","忠县","城口县","垫江县","武隆县","丰都县","奉节县","云阳县","巫溪县","巫山县","石柱土家族自治县","秀山土家族苗族自治县","酉阳土家族苗族自治县","彭水苗族土家族自治县","其他"]}]},{"name":"四川省","city":[{"name":"成都市","area":["青羊区","锦江区","金牛区","武侯区","成华区","龙泉驿区","青白江区","新都区","温江区","都江堰市","彭州市","邛崃市","崇州市","金堂县","郫县","新津县","双流县","蒲江县","大邑县","其他"]},{"name":"自贡市","area":["大安区","自流井区","贡井区","沿滩区","荣县","富顺县","其他"]},{"name":"攀枝花市","area":["仁和区","米易县","盐边县","东区","西区","其他"]},{"name":"泸州市","area":["江阳区","纳溪区","龙马潭区","泸县","合江县","叙永县","古蔺县","其他"]},{"name":"德阳市","area":["旌阳区","广汉市","什邡市","绵竹市","罗江县","中江县","其他"]},{"name":"绵阳市","area":["涪城区","游仙区","江油市","盐亭县","三台县","平武县","安县","梓潼县","北川羌族自治县","其他"]},{"name":"广元市","area":["元坝区","朝天区","青川县","旺苍县","剑阁县","苍溪县","市中区","其他"]},{"name":"遂宁市","area":["船山区","安居区","射洪县","蓬溪县","大英县","其他"]},{"name":"内江市","area":["市中区","东兴区","资中县","隆昌县","威远县","其他"]},{"name":"乐山市","area":["市中区","五通桥区","沙湾区","金口河区","峨眉山市","夹江县","井研县","犍为县","沐川县","马边彝族自治县","峨边彝族自治县","其他"]},{"name":"南充","area":["顺庆区","高坪区","嘉陵区","阆中市","营山县","蓬安县","仪陇县","南部县","西充县","其他"]},{"name":"眉山市","area":["东坡区","仁寿县","彭山县","洪雅县","丹棱县","青神县","其他"]},{"name":"宜宾市","area":["翠屏区","宜宾县","兴文县","南溪县","珙县","长宁县","高县","江安县","筠连县","屏山县","其他"]},{"name":"广安市","area":["广安区","华蓥市","岳池县","邻水县","武胜县","其他"]},{"name":"达州市","area":["通川区","万源市","达县","渠县","宣汉县","开江县","大竹县","其他"]},{"name":"雅安市","area":["雨城区","芦山县","石棉县","名山县","天全县","荥经县","宝兴县","汉源县","其他"]},{"name":"巴中市","area":["巴州区","南江县","平昌县","通江县","其他"]},{"name":"资阳市","area":["雁江区","简阳市","安岳县","乐至县","其他"]},{"name":"阿坝藏族羌族自治州","area":["马尔康县","九寨沟县","红原县","汶川县","阿坝县","理县","若尔盖县","小金县","黑水县","金川县","松潘县","壤塘县","茂县","其他"]},{"name":"甘孜藏族自治州","area":["康定县","丹巴县","炉霍县","九龙县","甘孜县","雅江县","新龙县","道孚县","白玉县","理塘县","德格县","乡城县","石渠县","稻城县","色达县","巴塘县","泸定县","得荣县","其他"]},{"name":"凉山彝族自治州","area":["西昌市","美姑县","昭觉县","金阳县","甘洛县","布拖县","雷波县","普格县","宁南县","喜德县","会东县","越西县","会理县","盐源县","德昌县","冕宁县","木里藏族自治县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"贵州省","city":[{"name":"贵阳市","area":["南明区","云岩区","花溪区","乌当区","白云区","小河区","清镇市","开阳县","修文县","息烽县","其他"]},{"name":"六盘水市","area":["钟山区","水城县","盘县","六枝特区","其他"]},{"name":"遵义市","area":["红花岗区","汇川区","赤水市","仁怀市","遵义县","绥阳县","桐梓县","习水县","凤冈县","正安县","余庆县","湄潭县","道真仡佬族苗族自治县","务川仡佬族苗族自治县","其他"]},{"name":"安顺市","area":["西秀区","普定县","平坝县","镇宁布依族苗族自治县","紫云苗族布依族自治县","关岭布依族苗族自治县","其他"]},{"name":"铜仁地区","area":["铜仁市","德江县","江口县","思南县","石阡县","玉屏侗族自治县","松桃苗族自治县","印江土家族苗族自治县","沿河土家族自治县","万山特区","其他"]},{"name":"毕节地区","area":["毕节市","黔西县","大方县","织金县","金沙县","赫章县","纳雍县","威宁彝族回族苗族自治县","其他"]},{"name":"黔西南布依族苗族自治州","area":["兴义市","望谟县","兴仁县","普安县","册亨县","晴隆县","贞丰县","安龙县","其他"]},{"name":"黔东南苗族侗族自治州","area":["凯里市","施秉县","从江县","锦屏县","镇远县","麻江县","台江县","天柱县","黄平县","榕江县","剑河县","三穗县","雷山县","黎平县","岑巩县","丹寨县","其他"]},{"name":"黔南布依族苗族自治州","area":["都匀市","福泉市","贵定县","惠水县","罗甸县","瓮安县","荔波县","龙里县","平塘县","长顺县","独山县","三都水族自治县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"云南省","city":[{"name":"昆明市","area":["盘龙区","五华区","官渡区","西山区","东川区","安宁市","呈贡县","晋宁县","富民县","宜良县","嵩明县","石林彝族自治县","禄劝彝族苗族自治县","寻甸回族彝族自治县","其他"]},{"name":"曲靖市","area":["麒麟区","宣威市","马龙县","沾益县","富源县","罗平县","师宗县","陆良县","会泽县","其他"]},{"name":"玉溪市","area":["红塔区","江川县","澄江县","通海县","华宁县","易门县","峨山彝族自治县","新平彝族傣族自治县","元江哈尼族彝族傣族自治县","其他"]},{"name":"保山市","area":["隆阳区","施甸县","腾冲县","龙陵县","昌宁县","其他"]},{"name":"昭通市","area":["昭阳区","鲁甸县","巧家县","盐津县","大关县","永善县","绥江县","镇雄县","彝良县","威信县","水富县","其他"]},{"name":"丽江市","area":["古城区","永胜县","华坪县","玉龙纳西族自治县","宁蒗彝族自治县","其他"]},{"name":"普洱市","area":["思茅区","普洱哈尼族彝族自治县","墨江哈尼族自治县","景东彝族自治县","景谷傣族彝族自治县","镇沅彝族哈尼族拉祜族自治县","江城哈尼族彝族自治县","孟连傣族拉祜族佤族自治县","澜沧拉祜族自治县","西盟佤族自治县","其他"]},{"name":"临沧市","area":["临翔区","凤庆县","云县","永德县","镇康县","双江拉祜族佤族布朗族傣族自治县","耿马傣族佤族自治县","沧源佤族自治县","其他"]},{"name":"德宏傣族景颇族自治州","area":["潞西市","瑞丽市","梁河县","盈江县","陇川县","其他"]},{"name":"怒江傈僳族自治州","area":["泸水县","福贡县","贡山独龙族怒族自治县","兰坪白族普米族自治县","其他"]},{"name":"迪庆藏族自治州","area":["香格里拉县","德钦县","维西傈僳族自治县","其他"]},{"name":"大理白族自治州","area":["大理市","祥云县","宾川县","弥渡县","永平县","云龙县","洱源县","剑川县","鹤庆县","漾濞彝族自治县","南涧彝族自治县","巍山彝族回族自治县","其他"]},{"name":"楚雄彝族自治州","area":["楚雄市","双柏县","牟定县","南华县","姚安县","大姚县","永仁县","元谋县","武定县","禄丰县","其他"]},{"name":"红河哈尼族彝族自治州","area":["蒙自县","个旧市","开远市","绿春县","建水县","石屏县","弥勒县","泸西县","元阳县","红河县","金平苗族瑶族傣族自治县","河口瑶族自治县","屏边苗族自治县","其他"]},{"name":"文山壮族苗族自治州","area":["文山县","砚山县","西畴县","麻栗坡县","马关县","丘北县","广南县","富宁县","其他"]},{"name":"西双版纳傣族自治州","area":["景洪市","勐海县","勐腊县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"西藏","city":[{"name":"拉萨市","area":["城关区","林周县","当雄县","尼木县","曲水县","堆龙德庆县","达孜县","墨竹工卡县","其他"]},{"name":"那曲地区","area":["那曲县","嘉黎县","比如县","聂荣县","安多县","申扎县","索县","班戈县","巴青县","尼玛县","其他"]},{"name":"昌都地区","area":["昌都县","江达县","贡觉县","类乌齐县","丁青县","察雅县","八宿县","左贡县","芒康县","洛隆县","边坝县","其他"]},{"name":"林芝地区","area":["林芝县","工布江达县","米林县","墨脱县","波密县","察隅县","朗县","其他"]},{"name":"山南地区","area":["乃东县","扎囊县","贡嘎县","桑日县","琼结县","曲松县","措美县","洛扎县","加查县","隆子县","错那县","浪卡子县","其他"]},{"name":"日喀则地区","area":["日喀则市","南木林县","江孜县","定日县","萨迦县","拉孜县","昂仁县","谢通门县","白朗县","仁布县","康马县","定结县","仲巴县","亚东县","吉隆县","聂拉木县","萨嘎县","岗巴县","其他"]},{"name":"阿里地区","area":["噶尔县","普兰县","札达县","日土县","革吉县","改则县","措勤县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"陕西省","city":[{"name":"西安市","area":["莲湖区","新城区","碑林区","雁塔区","灞桥区","未央区","阎良区","临潼区","长安区","高陵县","蓝田县","户县","周至县","其他"]},{"name":"铜川市","area":["耀州区","王益区","印台区","宜君县","其他"]},{"name":"宝鸡市","area":["渭滨区","金台区","陈仓区","岐山县","凤翔县","陇县","太白县","麟游县","扶风县","千阳县","眉县","凤县","其他"]},{"name":"咸阳市","area":["秦都区","渭城区","杨陵区","兴平市","礼泉县","泾阳县","永寿县","三原县","彬县","旬邑县","长武县","乾县","武功县","淳化县","其他"]},{"name":"渭南市","area":["临渭区","韩城市","华阴市","蒲城县","潼关县","白水县","澄城县","华县","合阳县","富平县","大荔县","其他"]},{"name":"延安市","area":["宝塔区","安塞县","洛川县","子长县","黄陵县","延川县","富县","延长县","甘泉县","宜川县","志丹县","黄龙县","吴起县","其他"]},{"name":"汉中市","area":["汉台区","留坝县","镇巴县","城固县","南郑县","洋县","宁强县","佛坪县","勉县","西乡县","略阳县","其他"]},{"name":"榆林市","area":["榆阳区","清涧县","绥德县","神木县","佳县","府谷县","子洲县","靖边县","横山县","米脂县","吴堡县","定边县","其他"]},{"name":"安康市","area":["汉滨区","紫阳县","岚皋县","旬阳县","镇坪县","平利县","石泉县","宁陕县","白河县","汉阴县","其他"]},{"name":"商洛市","area":["商州区","镇安县","山阳县","洛南县","商南县","丹凤县","柞水县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"甘肃省","city":[{"name":"兰州市","area":["城关区","七里河区","西固区","安宁区","红古区","永登县","皋兰县","榆中县","其他"]},{"name":"嘉峪关市","area":["嘉峪关市","其他"]},{"name":"金昌市","area":["金川区","永昌县","其他"]},{"name":"白银市","area":["白银区","平川区","靖远县","会宁县","景泰县","其他"]},{"name":"天水市","area":["清水县","秦安县","甘谷县","武山县","张家川回族自治县","北道区","秦城区","其他"]},{"name":"武威市","area":["凉州区","民勤县","古浪县","天祝藏族自治县","其他"]},{"name":"酒泉市","area":["肃州区","玉门市","敦煌市","金塔县","肃北蒙古族自治县","阿克塞哈萨克族自治县","安西县","其他"]},{"name":"张掖市","area":["甘州区","民乐县","临泽县","高台县","山丹县","肃南裕固族自治县","其他"]},{"name":"庆阳市","area":["西峰区","庆城县","环县","华池县","合水县","正宁县","宁县","镇原县","其他"]},{"name":"平凉市","area":["崆峒区","泾川县","灵台县","崇信县","华亭县","庄浪县","静宁县","其他"]},{"name":"定西市","area":["安定区","通渭县","临洮县","漳县","岷县","渭源县","陇西县","其他"]},{"name":"陇南市","area":["武都区","成县","宕昌县","康县","文县","西和县","礼县","两当县","徽县","其他"]},{"name":"临夏回族自治州","area":["临夏市","临夏县","康乐县","永靖县","广河县","和政县","东乡族自治县","积石山保安族东乡族撒拉族自治县","其他"]},{"name":"甘南藏族自治州","area":["合作市","临潭县","卓尼县","舟曲县","迭部县","玛曲县","碌曲县","夏河县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"青海省","city":[{"name":"西宁市","area":["城中区","城东区","城西区","城北区","湟源县","湟中县","大通回族土族自治县","其他"]},{"name":"海东地区","area":["平安县","乐都县","民和回族土族自治县","互助土族自治县","化隆回族自治县","循化撒拉族自治县","其他"]},{"name":"海北藏族自治州","area":["海晏县","祁连县","刚察县","门源回族自治县","其他"]},{"name":"海南藏族自治州","area":["共和县","同德县","贵德县","兴海县","贵南县","其他"]},{"name":"黄南藏族自治州","area":["同仁县","尖扎县","泽库县","河南蒙古族自治县","其他"]},{"name":"果洛藏族自治州","area":["玛沁县","班玛县","甘德县","达日县","久治县","玛多县","其他"]},{"name":"玉树藏族自治州","area":["玉树县","杂多县","称多县","治多县","囊谦县","曲麻莱县","其他"]},{"name":"海西蒙古族藏族自治州","area":["德令哈市","格尔木市","乌兰县","都兰县","天峻县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"宁夏","city":[{"name":"银川市","area":["兴庆区","西夏区","金凤区","灵武市","永宁县","贺兰县","其他"]},{"name":"石嘴山市","area":["大武口区","惠农区","平罗县","其他"]},{"name":"吴忠市","area":["利通区","青铜峡市","盐池县","同心县","其他"]},{"name":"固原市","area":["原州区","西吉县","隆德县","泾源县","彭阳县","其他"]},{"name":"中卫市","area":["沙坡头区","中宁县","海原县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"新疆","city":[{"name":"乌鲁木齐市","area":["天山区","沙依巴克区","新市区","水磨沟区","头屯河区","达坂城区","东山区","乌鲁木齐县","其他"]},{"name":"克拉玛依市","area":["克拉玛依区","独山子区","白碱滩区","乌尔禾区","其他"]},{"name":"吐鲁番地区","area":["吐鲁番市","托克逊县","鄯善县","其他"]},{"name":"哈密地区","area":["哈密市","伊吾县","巴里坤哈萨克自治县","其他"]},{"name":"和田地区","area":["和田市","和田县","洛浦县","民丰县","皮山县","策勒县","于田县","墨玉县","其他"]},{"name":"阿克苏地区","area":["阿克苏市","温宿县","沙雅县","拜城县","阿瓦提县","库车县","柯坪县","新和县","乌什县","其他"]},{"name":"喀什地区","area":["喀什市","巴楚县","泽普县","伽师县","叶城县","岳普湖县","疏勒县","麦盖提县","英吉沙县","莎车县","疏附县","塔什库尔干塔吉克自治县","其他"]},{"name":"克孜勒苏柯尔克孜自治州","area":["阿图什市","阿合奇县","乌恰县","阿克陶县","其他"]},{"name":"巴音郭楞蒙古自治州","area":["库尔勒市","和静县","尉犁县","和硕县","且末县","博湖县","轮台县","若羌县","焉耆回族自治县","其他"]},{"name":"昌吉回族自治州","area":["昌吉市","阜康市","奇台县","玛纳斯县","吉木萨尔县","呼图壁县","木垒哈萨克自治县","米泉市","其他"]},{"name":"博尔塔拉蒙古自治州","area":["博乐市","精河县","温泉县","其他"]},{"name":"石河子","area":["石河子"]},{"name":"阿拉尔","area":["阿拉尔"]},{"name":"图木舒克","area":["图木舒克"]},{"name":"五家渠","area":["五家渠"]},{"name":"伊犁哈萨克自治州","area":["伊宁市","奎屯市","伊宁县","特克斯县","尼勒克县","昭苏县","新源县","霍城县","巩留县","察布查尔锡伯自治县","塔城地区","阿勒泰地区","其他"]},{"name":"其他","area":["其他"]}]},{"name":"台湾省","city":[{"name":"台北市","area":["内湖区","南港区","中正区","万华区","大同区","中山区","松山区","大安区","信义区","文山区","士林区","北投区"]},{"name":"新北市","area":["板桥区","汐止区","新店区","其他"]},{"name":"桃园市","area":["其他"]},{"name":"台中市","area":["其他"]},{"name":"台南市","area":["其他"]},{"name":"高雄市","area":["其他"]}]},{"name":"澳门","city":[{"name":"澳门","area":["花地玛堂区","圣安多尼堂区","大堂区","望德堂区","风顺堂区","嘉模堂区","圣方济各堂区","路凼","其他"]}]},{"name":"香港","city":[{"name":"香港","area":["深水埗区","油尖旺区","九龙城区","黄大仙区","观塘区","北区","大埔区","沙田区","西贡区","元朗区","屯门区","荃湾区","葵青区","离岛区","中西区","湾仔区","东区","南区","其他"]}]}]')
},t.allareastr='[{"name":"上海市","city":[{"name":"上海市","area":["黄浦区","卢湾区","徐汇区","长宁区","静安区","普陀区","虹口区","杨浦区","宝山区","闵行区","嘉定区","松江区","金山区","青浦区","奉贤区","浦东新区","崇明县","其他"]}]},{"name":"北京市","city":[{"name":"北京市","area":["东城区","西城区","崇文区","宣武区","朝阳区","丰台区","石景山区","海淀区","门头沟区","房山区","通州区","顺义区","昌平区","大兴区","平谷区","怀柔区","密云县","延庆县"]}]},{"name":"天津市","city":[{"name":"天津市","area":["和平区","河东区","河西区","南开区","河北区","红桥区","塘沽区","汉沽区","大港区","东丽区","西青区","津南区","北辰区","武清区","宝坻区","宁河县","静海县","蓟县"]}]},{"name":"河北省","city":[{"name":"石家庄市","area":["长安区","桥东区","桥西区","新华区","郊区","井陉矿区","井陉县","正定县","栾城县","行唐县","灵寿县","高邑县","深泽县","赞皇县","无极县","平山县","元氏县","赵县","辛集市","藁","晋州市","新乐市","鹿泉市"]},{"name":"唐山市","area":["路南区","路北区","古冶区","开平区","新区","丰润县","滦县","滦南县","乐亭县","迁西县","玉田县","唐海县","遵化市","丰南市","迁安市"]},{"name":"秦皇岛市","area":["海港区","山海关区","北戴河区","青龙满族自治县","昌黎县","抚宁县","卢龙县"]},{"name":"邯郸市","area":["邯山区","丛台区","复兴区","峰峰矿区","邯郸县","临漳县","成安县","大名县","涉县","磁县","肥乡县","永年县","邱县","鸡泽县","广平县","馆陶县","魏县","曲周县","武安市"]},{"name":"邢台市","area":["桥东区","桥西区","邢台县","临城县","内丘县","柏乡县","隆尧县","任县","南和县","宁晋县","巨鹿县","新河县","广宗县","平乡县","威县","清河县","临西县","南宫市","沙河市"]},{"name":"保定市","area":["新市区","北市区","南市区","满城县","清苑县","涞水县","阜平县","徐水县","定兴县","唐县","高阳县","容城县","涞源县","望都县","安新县","易县","曲阳县","蠡县","顺平县","博野","雄县","涿州市","定州市","安国市","高碑店市"]},{"name":"张家口","area":["桥东区","桥西区","宣化区","下花园区","宣化县","张北县","康保县","沽源县","尚义县","蔚县","阳原县","怀安县","万全县","怀来县","涿鹿县","赤城县","崇礼县"]},{"name":"承德市","area":["双桥区","双滦区","鹰手营子矿区","承德县","兴隆县","平泉县","滦平县","隆化县","丰宁满族自治县","宽城满族自治县","围场满族蒙古族自治县"]},{"name":"沧州市","area":["新华区","运河区","沧县","青县","东光县","海兴县","盐山县","肃宁县","南皮县","吴桥县","献县","孟村回族自治县","泊头市","任丘市","黄骅市","河间市"]},{"name":"廊坊市","area":["安次区","固安县","永清县","香河县","大城县","文安县","大厂回族自治县","霸州市","三河市"]},{"name":"衡水市","area":["桃城区","枣强县","武邑县","武强县","饶阳县","安平县","故城县","景县","阜城县","冀州市","深州市"]}]},{"name":"山西省","city":[{"name":"太原市","area":["小店区","迎泽区","杏花岭区","尖草坪区","万柏林区","晋源区","清徐县","阳曲县","娄烦县","古交市"]},{"name":"大同市","area":["城区","矿区","南郊区","新荣区","阳高县","天镇县","广灵县","灵丘县","浑源县","左云县","大同县"]},{"name":"阳泉市","area":["城区","矿区","郊区","平定县","盂县"]},{"name":"长治市","area":["城区","郊区","长治县","襄垣县","屯留县","平顺县","黎城县","壶关县","长子县","武乡县","沁县","沁源县","潞城市"]},{"name":"晋城市","area":["城区","沁水县","阳城县","陵川县","泽州县","高平市"]},{"name":"朔州市","area":["朔城区","平鲁区","山阴县","应县","右玉县","怀仁县"]},{"name":"忻州市","area":["忻府区","原平市","定襄县","五台县","代县","繁峙县","宁武县","静乐县","神池县","五寨县","岢岚县","河曲县","保德县","偏关县"]},{"name":"吕梁市","area":["离石区","孝义市","汾阳市","文水县","交城县","兴县","临县","柳林县","石楼县","岚县","方山县","中阳县","交口县"]},{"name":"晋中市","area":["榆次市","介休市","榆社县","左权县","和顺县","昔阳县","寿阳县","太谷县","祁县","平遥县","灵石县"]},{"name":"临汾市","area":["临汾市","侯马市","霍州市","曲沃县","翼城县","襄汾县","洪洞县","古县","安泽县","浮山县","吉县","乡宁县","蒲县","大宁县","永和县","隰县","汾西县"]},{"name":"运城市","area":["运城市","永济市","河津市","芮城县","临猗县","万荣县","新绛县","稷山县","闻喜县","夏县","绛县","平陆县","垣曲县"]}]},{"name":"内蒙古","city":[{"name":"呼和浩特市","area":["新城区","回民区","玉泉区","郊区","土默特左旗","托克托县","和林格尔县","清水河县","武川县"]},{"name":"包头市","area":["东河区","昆都伦区","青山区","石拐矿区","白云矿区","郊区","土默特右旗","固阳县","达尔罕茂明安联合旗"]},{"name":"乌海市","area":["海勃湾区","海南区","乌达区"]},{"name":"赤峰市","area":["红山区","元宝山区","松山区","阿鲁科尔沁旗","巴林左旗","巴林右旗","林西县","克什克腾旗","翁牛特旗","喀喇沁旗","宁城县","敖汉旗"]},{"name":"呼伦贝尔市","area":["海拉尔市","满洲里市","扎兰屯市","牙克石市","根河市","额尔古纳市","阿荣旗","莫力达瓦达斡尔族自治旗","鄂伦春自治旗","鄂温克族自治旗","新巴尔虎右旗","新巴尔虎左旗","陈巴尔虎旗"]},{"name":"兴安盟","area":["乌兰浩特市","阿尔山市","科尔沁右翼前旗","科尔沁右翼中旗","扎赉特旗","突泉县"]},{"name":"通辽市","area":["科尔沁区","霍林郭勒市","科尔沁左翼中旗","科尔沁左翼后旗","开鲁县","库伦旗","奈曼旗","扎鲁特旗"]},{"name":"锡林郭勒盟","area":["二连浩特市","锡林浩特市","阿巴嘎旗","苏尼特左旗","苏尼特右旗","东乌珠穆沁旗","西乌珠穆沁旗","太仆寺旗","镶黄旗","正镶白旗","正蓝旗","多伦县"]},{"name":"乌兰察布盟","area":["集宁市","丰镇市","卓资县","化德县","商都县","兴和县","凉城县","察哈尔右翼前旗","察哈尔右翼中旗","察哈尔右翼后旗","四子王旗"]},{"name":"伊克昭盟","area":["东胜市","达拉特旗","准格尔旗","鄂托克前旗","鄂托克旗","杭锦旗","乌审旗","伊金霍洛旗"]},{"name":"巴彦淖尔盟","area":["临河市","五原县","磴口县","乌拉特前旗","乌拉特中旗","乌拉特后旗","杭锦后旗"]},{"name":"阿拉善盟","area":["阿拉善左旗","阿拉善右旗","额济纳旗"]}]},{"name":"辽宁省","city":[{"name":"沈阳市","area":["沈河区","皇姑区","和平区","大东区","铁西区","苏家屯区","东陵区","于洪区","新民市","法库县","辽中县","康平县","新城子区","其他"]},{"name":"大连市","area":["西岗区","中山区","沙河口区","甘井子区","旅顺口区","金州区","瓦房店市","普兰店市","庄河市","长海县","其他"]},{"name":"鞍山市","area":["铁东区","铁西区","立山区","千山区","海城市","台安县","岫岩满族自治县","其他"]},{"name":"抚顺市","area":["顺城区","新抚区","东洲区","望花区","抚顺县","清原满族自治县","新宾满族自治县","其他"]},{"name":"本溪市","area":["平山区","明山区","溪湖区","南芬区","本溪满族自治县","桓仁满族自治县","其他"]},{"name":"丹东市","area":["振兴区","元宝区","振安区","东港市","凤城市","宽甸满族自治县","其他"]},{"name":"锦州市","area":["太和区","古塔区","凌河区","凌海市","黑山县","义县","北宁市","其他"]},{"name":"营口市","area":["站前区","西市区","鲅鱼圈区","老边区","大石桥市","盖州市","其他"]},{"name":"阜新市","area":["海州区","新邱区","太平区","清河门区","细河区","彰武县","阜新蒙古族自治县","其他"]},{"name":"辽阳市","area":["白塔区","文圣区","宏伟区","太子河区","弓长岭区","灯塔市","辽阳县","其他"]},{"name":"盘锦","area":["双台子区","兴隆台区","盘山县","大洼县","其他"]},{"name":"铁岭市","area":["银州区","清河区","调兵山市","开原市","铁岭县","昌图县","西丰县","其他"]},{"name":"朝阳市","area":["双塔区","龙城区","凌源市","北票市","朝阳县","建平县","喀喇沁左翼蒙古族自治县","其他"]},{"name":"葫芦岛市","area":["龙港区","南票区","连山区","兴城市","绥中县","建昌县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"吉林省","city":[{"name":"长春市","area":["朝阳区","宽城区","二道区","南关区","绿园区","双阳区","九台市","榆树市","德惠市","农安县","其他"]},{"name":"吉林市","area":["船营区","昌邑区","龙潭区","丰满区","舒兰市","桦甸市","蛟河市","磐石市","永吉县","其他"]},{"name":"四平","area":["铁西区","铁东区","公主岭市","双辽市","梨树县","伊通满族自治县","其他"]},{"name":"辽源市","area":["龙山区","西安区","东辽县","东丰县","其他"]},{"name":"通化市","area":["东昌区","二道江区","梅河口市","集安市","通化县","辉南县","柳河县","其他"]},{"name":"白山市","area":["八道江区","江源区","临江市","靖宇县","抚松县","长白朝鲜族自治县","其他"]},{"name":"松原市","area":["宁江区","乾安县","长岭县","扶余县","前郭尔罗斯蒙古族自治县","其他"]},{"name":"白城市","area":["洮北区","大安市","洮南市","镇赉县","通榆县","其他"]},{"name":"延边朝鲜族自治州","area":["延吉市","图们市","敦化市","龙井市","珲春市","和龙市","安图县","汪清县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"黑龙江省","city":[{"name":"哈尔滨市","area":["松北区","道里区","南岗区","平房区","香坊区","道外区","呼兰区","阿城区","双城市","尚志市","五常市","宾县","方正县","通河县","巴彦县","延寿县","木兰县","依兰县","其他"]},{"name":"齐齐哈尔市","area":["龙沙区","昂昂溪区","铁锋区","建华区","富拉尔基区","碾子山区","梅里斯达斡尔族区","讷河市","富裕县","拜泉县","甘南县","依安县","克山县","泰来县","克东县","龙江县","其他"]},{"name":"鹤岗市","area":["兴山区","工农区","南山区","兴安区","向阳区","东山区","萝北县","绥滨县","其他"]},{"name":"双鸭山","area":["尖山区","岭东区","四方台区","宝山区","集贤县","宝清县","友谊县","饶河县","其他"]},{"name":"鸡西市","area":["鸡冠区","恒山区","城子河区","滴道区","梨树区","麻山区","密山市","虎林市","鸡东县","其他"]},{"name":"大庆市","area":["萨尔图区","红岗区","龙凤区","让胡路区","大同区","林甸县","肇州县","肇源县","杜尔伯特蒙古族自治县","其他"]},{"name":"伊春市","area":["伊春区","带岭区","南岔区","金山屯区","西林区","美溪区","乌马河区","翠峦区","友好区","上甘岭区","五营区","红星区","新青区","汤旺河区","乌伊岭区","铁力市","嘉荫县","其他"]},{"name":"牡丹江市","area":["爱民区","东安区","阳明区","西安区","绥芬河市","宁安市","海林市","穆棱市","林口县","东宁县","其他"]},{"name":"佳木斯市","area":["向阳区","前进区","东风区","郊区","同江市","富锦市","桦川县","抚远县","桦南县","汤原县","其他"]},{"name":"七台河市","area":["桃山区","新兴区","茄子河区","勃利县","其他"]},{"name":"黑河市","area":["爱辉区","北安市","五大连池市","逊克县","嫩江县","孙吴县","其他"]},{"name":"绥化市","area":["北林区","安达市","肇东市","海伦市","绥棱县","兰西县","明水县","青冈县","庆安县","望奎县","其他"]},{"name":"大兴安岭地区","area":["呼玛县","塔河县","漠河县","大兴安岭辖区","其他"]},{"name":"其他","area":["其他"]}]},{"name":"江苏省","city":[{"name":"南京市","area":["玄武区","白下区","秦淮区","建邺区","鼓楼区","下关区","栖霞区","雨花台区","浦口区","江宁区","六合区","溧水县","高淳县","其他"]},{"name":"苏州市","area":["金阊区","平江区","沧浪区","虎丘区","吴中区","相城区","常熟市","张家港市","昆山市","吴江市","太仓市","其他"]},{"name":"无锡市","area":["崇安区","南长区","北塘区","滨湖区","锡山区","惠山区","江阴市","宜兴市","其他"]},{"name":"常州市","area":["钟楼区","天宁区","戚墅堰区","新北区","武进区","金坛市","溧阳市","其他"]},{"name":"镇江市","area":["京口区","润州区","丹徒区","丹阳市","扬中市","句容市","其他"]},{"name":"南通市","area":["崇川区","港闸区","通州市","如皋市","海门市","启东市","海安县","如东县","其他"]},{"name":"泰州市","area":["海陵区","高港区","姜堰市","泰兴市","靖江市","兴化市","其他"]},{"name":"扬州市","area":["广陵区","维扬区","邗江区","江都市","仪征市","高邮市","宝应县","其他"]},{"name":"盐城市","area":["亭湖区","盐都区","大丰市","东台市","建湖县","射阳县","阜宁县","滨海县","响水县","其他"]},{"name":"连云港市","area":["新浦区","海州区","连云区","东海县","灌云县","赣榆县","灌南县","其他"]},{"name":"徐州市","area":["云龙区","鼓楼区","九里区","泉山区","贾汪区","邳州市","新沂市","铜山县","睢宁县","沛县","丰县","其他"]},{"name":"淮安市","area":["清河区","清浦区","楚州区","淮阴区","涟水县","洪泽县","金湖县","盱眙县","其他"]},{"name":"宿迁市","area":["宿城区","宿豫区","沭阳县","泗阳县","泗洪县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"浙江省","city":[{"name":"杭州市","area":["拱墅区","西湖区","上城区","下城区","江干区","滨江区","余杭区","萧山区","建德市","富阳市","临安市","桐庐县","淳安县","其他"]},{"name":"宁波市","area":["海曙区","江东区","江北区","镇海区","北仑区","鄞州区","余姚市","慈溪市","奉化市","宁海县","象山县","其他"]},{"name":"温州市","area":["鹿城区","龙湾区","瓯海区","瑞安市","乐清市","永嘉县","洞头县","平阳县","苍南县","文成县","泰顺县","其他"]},{"name":"嘉兴市","area":["秀城区","秀洲区","海宁市","平湖市","桐乡市","嘉善县","海盐县","其他"]},{"name":"湖州市","area":["吴兴区","南浔区","长兴县","德清县","安吉县","其他"]},{"name":"绍兴市","area":["越城区","诸暨市","上虞市","嵊州市","绍兴县","新昌县","其他"]},{"name":"金华市","area":["婺城区","金东区","兰溪市","义乌市","东阳市","永康市","武义县","浦江县","磐安县","其他"]},{"name":"衢州市","area":["柯城区","衢江区","江山市","龙游县","常山县","开化县","其他"]},{"name":"舟山市","area":["定海区","普陀区","岱山县","嵊泗县","其他"]},{"name":"台州市","area":["椒江区","黄岩区","路桥区","临海市","温岭市","玉环县","天台县","仙居县","三门县","其他"]},{"name":"丽水市","area":["莲都区","龙泉市","缙云县","青田县","云和县","遂昌县","松阳县","庆元县","景宁畲族自治县","其他"]},{"name":"其他市","area":["其他"]}]},{"name":"安徽省","city":[{"name":"合肥市","area":["庐阳区","瑶海区","蜀山区","包河区","长丰县","肥东县","肥西县","其他"]},{"name":"芜湖市","area":["镜湖区","弋江区","鸠江区","三山区","芜湖县","南陵县","繁昌县","其他"]},{"name":"蚌埠市","area":["蚌山区","龙子湖区","禹会区","淮上区","怀远县","固镇县","五河县","其他"]},{"name":"淮南市","area":["田家庵区","大通区","谢家集区","八公山区","潘集区","凤台县","其他"]},{"name":"马鞍山市","area":["雨山区","花山区","金家庄区","当涂县","其他"]},{"name":"淮北市","area":["相山区","杜集区","烈山区","濉溪县","其他"]},{"name":"铜陵市","area":["铜官山区","狮子山区","郊区","铜陵县","其他"]},{"name":"安庆市","area":["迎江区","大观区","宜秀区","桐城市","宿松县","枞阳县","太湖县","怀宁县","岳西县","望江县","潜山县","其他"]},{"name":"黄山市","area":["屯溪区","黄山区","徽州区","休宁县","歙县","祁门县","黟县","其他"]},{"name":"滁州市","area":["琅琊区","南谯区","天长市","明光市","全椒县","来安县","定远县","凤阳县","其他"]},{"name":"阜阳市","area":["颍州区","颍东区","颍泉区","界首市","临泉县","颍上县","阜南县","太和县","其他"]},{"name":"宿州市","area":["埇桥区","萧县","泗县","砀山县","灵璧县","其他"]},{"name":"巢湖市","area":["居巢区","含山县","无为县","庐江县","和县","其他"]},{"name":"六安市","area":["金安区","裕安区","寿县","霍山县","霍邱县","舒城县","金寨县","其他"]},{"name":"亳州市","area":["谯城区","利辛县","涡阳县","蒙城县","其他"]},{"name":"池州市","area":["贵池区","东至县","石台县","青阳县","其他"]},{"name":"宣城市","area":["宣州区","宁国市","广德县","郎溪县","泾县","旌德县","绩溪县","其他"]},{"name":"其他市","area":["其他"]}]},{"name":"福建省","city":[{"name":"福州市","area":["鼓楼区","台江区","仓山区","马尾区","晋安区","福清市","长乐市","闽侯县","闽清县","永泰县","连江县","罗源县","平潭县","其他"]},{"name":"厦门市","area":["思明区","海沧区","湖里区","集美区","同安区","翔安区","其他"]},{"name":"莆田市","area":["城厢区","涵江区","荔城区","秀屿区","仙游县","其他"]},{"name":"三明市","area":["梅列区","三元区","永安市","明溪县","将乐县","大田县","宁化县","建宁县","沙县","尤溪县","清流县","泰宁县","其他"]},{"name":"泉州市","area":["鲤城区","丰泽区","洛江区","泉港区","石狮市","晋江市","南安市","惠安县","永春县","安溪县","德化县","金门县","其他"]},{"name":"漳州市","area":["芗城区","龙文区","龙海市","平和县","南靖县","诏安县","漳浦县","华安县","东山县","长泰县","云霄县","其他"]},{"name":"南平市","area":["延平区","建瓯市","邵武市","武夷山市","建阳市","松溪县","光泽县","顺昌县","浦城县","政和县","其他"]},{"name":"龙岩市","area":["新罗区","漳平市","长汀县","武平县","上杭县","永定县","连城县","其他"]},{"name":"宁德市","area":["蕉城区","福安市","福鼎市","寿宁县","霞浦县","柘荣县","屏南县","古田县","周宁县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"江西省","city":[{"name":"南昌市","area":["东湖区","西湖区","青云谱区","湾里区","青山湖区","新建县","南昌县","进贤县","安义县","其他"]},{"name":"景德镇市","area":["珠山区","昌江区","乐平市","浮梁县","其他"]},{"name":"萍乡市","area":["安源区","湘东区","莲花县","上栗县","芦溪县","其他"]},{"name":"九江市","area":["浔阳区","庐山区","瑞昌市","九江县","星子县","武宁县","彭泽县","永修县","修水县","湖口县","德安县","都昌县","其他"]},{"name":"新余市","area":["渝水区","分宜县","其他"]},{"name":"鹰潭市","area":["月湖区","贵溪市","余江县","其他"]},{"name":"赣州市","area":["章贡区","瑞金市","南康市","石城县","安远县","赣县","宁都县","寻乌县","兴国县","定南县","上犹县","于都县","龙南县","崇义县","信丰县","全南县","大余县","会昌县","其他"]},{"name":"吉安市","area":["吉州区","青原区","井冈山市","吉安县","永丰县","永新县","新干县","泰和县","峡江县","遂川县","安福县","吉水县","万安县","其他"]},{"name":"宜春市","area":["袁州区","丰城市","樟树市","高安市","铜鼓县","靖安县","宜丰县","奉新县","万载县","上高县","其他"]},{"name":"抚州市","area":["临川区","南丰县","乐安县","金溪县","南城县","东乡县","资溪县","宜黄县","广昌县","黎川县","崇仁县","其他"]},{"name":"上饶市","area":["信州区","德兴市","上饶县","广丰县","鄱阳县","婺源县","铅山县","余干县","横峰县","弋阳县","玉山县","万年县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"山东省","city":[{"name":"济南市","area":["市中区","历下区","天桥区","槐荫区","历城区","长清区","章丘市","平阴县","济阳县","商河县","其他"]},{"name":"青岛市","area":["市南区","市北区","城阳区","四方区","李沧区","黄岛区","崂山区","胶南市","胶州市","平度市","莱西市","即墨市","其他"]},{"name":"淄博市","area":["张店区","临淄区","淄川区","博山区","周村区","桓台县","高青县","沂源县","其他"]},{"name":"枣庄市","area":["市中区","山亭区","峄城区","台儿庄区","薛城区","滕州市","其他"]},{"name":"东营市","area":["东营区","河口区","垦利县","广饶县","利津县","其他"]},{"name":"烟台市","area":["芝罘区","福山区","牟平区","莱山区","龙口市","莱阳市","莱州市","招远市","蓬莱市","栖霞市","海阳市","长岛县","其他"]},{"name":"潍坊市","area":["潍城区","寒亭区","坊子区","奎文区","青州市","诸城市","寿光市","安丘市","高密市","昌邑市","昌乐县","临朐县","其他"]},{"name":"济宁市","area":["市中区","任城区","曲阜市","兖州市","邹城市","鱼台县","金乡县","嘉祥县","微山县","汶上县","泗水县","梁山县","其他"]},{"name":"泰安市","area":["泰山区","岱岳区","新泰市","肥城市","宁阳县","东平县","其他"]},{"name":"威海市","area":["环翠区","乳山市","文登市","荣成市","其他"]},{"name":"日照市","area":["东港区","岚山区","五莲县","莒县","其他"]},{"name":"莱芜市","area":["莱城区","钢城区","其他"]},{"name":"临沂市","area":["兰山区","罗庄区","河东区","沂南县","郯城县","沂水县","苍山县","费县","平邑县","莒南县","蒙阴县","临沭县","其他"]},{"name":"德州市","area":["德城区","乐陵市","禹城市","陵县","宁津县","齐河县","武城县","庆云县","平原县","夏津县","临邑县","其他"]},{"name":"聊城市","area":["东昌府区","临清市","高唐县","阳谷县","茌平县","莘县","东阿县","冠县","其他"]},{"name":"滨州市","area":["滨城区","邹平县","沾化县","惠民县","博兴县","阳信县","无棣县","其他"]},{"name":"菏泽市","area":["牡丹区","鄄城县","单县","郓城县","曹县","定陶县","巨野县","东明县","成武县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"河南省","city":[{"name":"郑州市","area":["中原区","金水区","二七区","管城回族区","上街区","惠济区","巩义市","新郑市","新密市","登封市","荥阳市","中牟县","其他"]},{"name":"开封市","area":["鼓楼区","龙亭区","顺河回族区","禹王台区","金明区","开封县","尉氏县","兰考县","杞县","通许县","其他"]},{"name":"洛阳市","area":["西工区","老城区","涧西区","瀍河回族区","洛龙区","吉利区","偃师市","孟津县","汝阳县","伊川县","洛宁县","嵩县","宜阳县","新安县","栾川县","其他"]},{"name":"平顶山市","area":["新华区","卫东区","湛河区","石龙区","汝州市","舞钢市","宝丰县","叶县","郏县","鲁山县","其他"]},{"name":"安阳市","area":["北关区","文峰区","殷都区","龙安区","林州市","安阳县","滑县","内黄县","汤阴县","其他"]},{"name":"鹤壁市","area":["淇滨区","山城区","鹤山区","浚县","淇县","其他"]},{"name":"新乡市","area":["卫滨区","红旗区","凤泉区","牧野区","卫辉市","辉县市","新乡县","获嘉县","原阳县","长垣县","封丘县","延津县","其他"]},{"name":"焦作市","area":["解放区","中站区","马村区","山阳区","沁阳市","孟州市","修武县","温县","武陟县","博爱县","其他"]},{"name":"濮阳市","area":["华龙区","濮阳县","南乐县","台前县","清丰县","范县","其他"]},{"name":"许昌市","area":["魏都区","禹州市","长葛市","许昌县","鄢陵县","襄城县","其他"]},{"name":"漯河市","area":["源汇区","郾城区","召陵区","临颍县","舞阳县","其他"]},{"name":"三门峡市","area":["湖滨区","义马市","灵宝市","渑池县","卢氏县","陕县","其他"]},{"name":"南阳市","area":["卧龙区","宛城区","邓州市","桐柏县","方城县","淅川县","镇平县","唐河县","南召县","内乡县","新野县","社旗县","西峡县","其他"]},{"name":"商丘市","area":["梁园区","睢阳区","永城市","宁陵县","虞城县","民权县","夏邑县","柘城县","睢县","其他"]},{"name":"信阳市","area":["浉河区","平桥区","潢川县","淮滨县","息县","新县","商城县","固始县","罗山县","光山县","其他"]},{"name":"周口市","area":["川汇区","项城市","商水县","淮阳县","太康县","鹿邑县","西华县","扶沟县","沈丘县","郸城县","其他"]},{"name":"驻马店市","area":["驿城区","确山县","新蔡县","上蔡县","西平县","泌阳县","平舆县","汝南县","遂平县","正阳县","其他"]},{"name":"焦作市","area":["济源市","其他"]},{"name":"其他","area":["其他"]}]},{"name":"湖北省","city":[{"name":"武汉市","area":["江岸区","武昌区","江汉区","硚口区","汉阳区","青山区","洪山区","东西湖区","汉南区","蔡甸区","江夏区","黄陂区","新洲区","其他"]},{"name":"黄石市","area":["黄石港区","西塞山区","下陆区","铁山区","大冶市","阳新县","其他"]},{"name":"十堰市","area":["张湾区","茅箭区","丹江口市","郧县","竹山县","房县","郧西县","竹溪县","其他"]},{"name":"荆州市","area":["沙市区","荆州区","洪湖市","石首市","松滋市","监利县","公安县","江陵县","其他"]},{"name":"宜昌市","area":["西陵区","伍家岗区","点军区","猇亭区","夷陵区","宜都市","当阳市","枝江市","秭归县","远安县","兴山县","五峰土家族自治县","长阳土家族自治县","其他"]},{"name":"襄樊市","area":["襄城区","樊城区","襄阳区","老河口市","枣阳市","宜城市","南漳县","谷城县","保康县","其他"]},{"name":"鄂州市","area":["鄂城区","华容区","梁子湖区","其他"]},{"name":"荆门市","area":["东宝区","掇刀区","钟祥市","京山县","沙洋县","其他"]},{"name":"孝感市","area":["孝南区","应城市","安陆市","汉川市","云梦县","大悟县","孝昌县","其他"]},{"name":"黄冈市","area":["黄州区","麻城市","武穴市","红安县","罗田县","浠水县","蕲春县","黄梅县","英山县","团风县","其他"]},{"name":"咸宁市","area":["咸安区","赤壁市","嘉鱼县","通山县","崇阳县","通城县","其他"]},{"name":"随州市","area":["曾都区","广水市","其他"]},{"name":"恩施土家族苗族自治州","area":["恩施市","利川市","建始县","来凤县","巴东县","鹤峰县","宣恩县","咸丰县","其他"]},{"name":"仙桃市","area":["仙桃"]},{"name":"天门市","area":["天门"]},{"name":"潜江市","area":["潜江"]},{"name":"神农架林区","area":["神农架林区"]},{"name":"其他","area":["其他"]}]},{"name":"湖南省","city":[{"name":"长沙市","area":["岳麓区","芙蓉区","天心区","开福区","雨花区","浏阳市","长沙县","望城县","宁乡县","其他"]},{"name":"株洲市","area":["天元区","荷塘区","芦淞区","石峰区","醴陵市","株洲县","炎陵县","茶陵县","攸县","其他"]},{"name":"湘潭市","area":["岳塘区","雨湖区","湘乡市","韶山市","湘潭县","其他"]},{"name":"衡阳市","area":["雁峰区","珠晖区","石鼓区","蒸湘区","南岳区","耒阳市","常宁市","衡阳县","衡东县","衡山县","衡南县","祁东县","其他"]},{"name":"邵阳市","area":["双清区","大祥区","北塔区","武冈市","邵东县","洞口县","新邵县","绥宁县","新宁县","邵阳县","隆回县","城步苗族自治县","其他"]},{"name":"岳阳市","area":["岳阳楼区","云溪区","君山区","临湘市","汨罗市","岳阳县","湘阴县","平江县","华容县","其他"]},{"name":"常德市","area":["武陵区","鼎城区","津市市","澧县","临澧县","桃源县","汉寿县","安乡县","石门县","其他"]},{"name":"张家界市","area":["永定区","武陵源区","慈利县","桑植县","其他"]},{"name":"益阳市","area":["赫山区","资阳区","沅江市","桃江县","南县","安化县","其他"]},{"name":"郴州市","area":["北湖区","苏仙区","资兴市","宜章县","汝城县","安仁县","嘉禾县","临武县","桂东县","永兴县","桂阳县","其他"]},{"name":"永州市","area":["冷水滩区","零陵区","祁阳县","蓝山县","宁远县","新田县","东安县","江永县","道县","双牌县","江华瑶族自治县","其他"]},{"name":"怀化市","area":["鹤城区","洪江市","会同县","沅陵县","辰溪县","溆浦县","中方县","新晃侗族自治县","芷江侗族自治县","通道侗族自治县","靖州苗族侗族自治县","麻阳苗族自治县","其他"]},{"name":"娄底市","area":["娄星区","冷水江市","涟源市","新化县","双峰县","其他"]},{"name":"湘西土家族苗族自治州","area":["吉首市","古丈县","龙山县","永顺县","凤凰县","泸溪县","保靖县","花垣县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"广东省","city":[{"name":"广州市","area":["越秀区","荔湾区","海珠区","天河区","白云区","黄埔区","番禺区","花都区","南沙区","萝岗区","增城市","从化市","其他"]},{"name":"深圳市","area":["福田区","罗湖区","南山区","宝安区","龙岗区","盐田区","其他"]},{"name":"东莞市","area":["莞城","常平","塘厦","塘厦","塘厦","其他"]},{"name":"中山市","area":["中山"]},{"name":"潮州市","area":["湘桥区","潮安县","饶平县","其他"]},{"name":"揭阳市","area":["榕城区","揭东县","揭西县","惠来县","普宁市","其他"]},{"name":"云浮市","area":["云城区","新兴县","郁南县","云安县","罗定市","其他"]},{"name":"珠海市","area":["香洲区","斗门区","金湾区","其他"]},{"name":"汕头市","area":["金平区","濠江区","龙湖区","潮阳区","潮南区","澄海区","南澳县","其他"]},{"name":"韶关市","area":["浈江区","武江区","曲江区","乐昌市","南雄市","始兴县","仁化县","翁源县","新丰县","乳源瑶族自治县","其他"]},{"name":"佛山市","area":["禅城区","南海区","顺德区","三水区","高明区","其他"]},{"name":"江门市","area":["蓬江区","江海区","新会区","恩平市","台山市","开平市","鹤山市","其他"]},{"name":"湛江市","area":["赤坎区","霞山区","坡头区","麻章区","吴川市","廉江市","雷州市","遂溪县","徐闻县","其他"]},{"name":"茂名市","area":["茂南区","茂港区","化州市","信宜市","高州市","电白县","其他"]},{"name":"肇庆市","area":["端州区","鼎湖区","高要市","四会市","广宁县","怀集县","封开县","德庆县","其他"]},{"name":"惠州市","area":["惠城区","惠阳区","博罗县","惠东县","龙门县","其他"]},{"name":"梅州市","area":["梅江区","兴宁市","梅县","大埔县","丰顺县","五华县","平远县","蕉岭县","其他"]},{"name":"汕尾市","area":["城区","陆丰市","海丰县","陆河县","其他"]},{"name":"河源市","area":["源城区","紫金县","龙川县","连平县","和平县","东源县","其他"]},{"name":"阳江市","area":["江城区","阳春市","阳西县","阳东县","其他"]},{"name":"清远市","area":["清城区","英德市","连州市","佛冈县","阳山县","清新县","连山壮族瑶族自治县","连南瑶族自治县","其他"]}]},{"name":"广西","city":[{"name":"南宁市","area":["青秀区","兴宁区","西乡塘区","良庆区","江南区","邕宁区","武鸣县","隆安县","马山县","上林县","宾阳县","横县","其他"]},{"name":"柳州市","area":["城中区","鱼峰区","柳北区","柳南区","柳江县","柳城县","鹿寨县","融安县","融水苗族自治县","三江侗族自治县","其他"]},{"name":"桂林市","area":["象山区","秀峰区","叠彩区","七星区","雁山区","阳朔县","临桂县","灵川县","全州县","平乐县","兴安县","灌阳县","荔浦县","资源县","永福县","龙胜各族自治县","恭城瑶族自治县","其他"]},{"name":"梧州市","area":["万秀区","蝶山区","长洲区","岑溪市","苍梧县","藤县","蒙山县","其他"]},{"name":"北海市","area":["海城区","银海区","铁山港区","合浦县","其他"]},{"name":"防城港市","area":["港口区","防城区","东兴市","上思县","其他"]},{"name":"钦州市","area":["钦南区","钦北区","灵山县","浦北县","其他"]},{"name":"贵港市","area":["港北区","港南区","覃塘区","桂平市","平南县","其他"]},{"name":"玉林市","area":["玉州区","北流市","容县","陆川县","博白县","兴业县","其他"]},{"name":"百色市","area":["右江区","凌云县","平果县","西林县","乐业县","德保县","田林县","田阳县","靖西县","田东县","那坡县","隆林各族自治县","其他"]},{"name":"贺州市","area":["八步区","钟山县","昭平县","富川瑶族自治县","其他"]},{"name":"河池市","area":["金城江区","宜州市","天峨县","凤山县","南丹县","东兰县","都安瑶族自治县","罗城仫佬族自治县","巴马瑶族自治县","环江毛南族自治县","大化瑶族自治县","其他"]},{"name":"来宾市","area":["兴宾区","合山市","象州县","武宣县","忻城县","金秀瑶族自治县","其他"]},{"name":"崇左市","area":["江州区","凭祥市","宁明县","扶绥县","龙州县","大新县","天等县","其他"]},{"name":"其他市","area":["其他"]}]},{"name":"海南省","city":[{"name":"海口市","area":["龙华区","秀英区","琼山区","美兰区","其他"]},{"name":"三亚市","area":["三亚市","其他"]},{"name":"五指山市","area":["五指山"]},{"name":"琼海市","area":["琼海"]},{"name":"儋州市","area":["儋州"]},{"name":"文昌市","area":["文昌"]},{"name":"万宁市","area":["万宁"]},{"name":"东方市","area":["东方"]},{"name":"澄迈县","area":["澄迈县"]},{"name":"定安县","area":["定安县"]},{"name":"屯昌县","area":["屯昌县"]},{"name":"临高县","area":["临高县"]},{"name":"白沙黎族自治县","area":["白沙黎族自治县"]},{"name":"昌江黎族自治县","area":["昌江黎族自治县"]},{"name":"乐东黎族自治县","area":["乐东黎族自治县"]},{"name":"陵水黎族自治县","area":["陵水黎族自治县"]},{"name":"保亭黎族苗族自治县","area":["保亭黎族苗族自治县"]},{"name":"琼中黎族苗族自治县","area":["琼中黎族苗族自治县"]},{"name":"其他","area":["其他"]}]},{"name":"重庆市","city":[{"name":"重庆市","area":["渝中区","大渡口区","江北区","南岸区","北碚区","渝北区","巴南区","长寿区","双桥区","沙坪坝区","万盛区","万州区","涪陵区","黔江区","永川区","合川区","江津区","九龙坡区","南川区","綦江县","潼南县","荣昌县","璧山县","大足县","铜梁县","梁平县","开县","忠县","城口县","垫江县","武隆县","丰都县","奉节县","云阳县","巫溪县","巫山县","石柱土家族自治县","秀山土家族苗族自治县","酉阳土家族苗族自治县","彭水苗族土家族自治县","其他"]}]},{"name":"四川省","city":[{"name":"成都市","area":["青羊区","锦江区","金牛区","武侯区","成华区","龙泉驿区","青白江区","新都区","温江区","都江堰市","彭州市","邛崃市","崇州市","金堂县","郫县","新津县","双流县","蒲江县","大邑县","其他"]},{"name":"自贡市","area":["大安区","自流井区","贡井区","沿滩区","荣县","富顺县","其他"]},{"name":"攀枝花市","area":["仁和区","米易县","盐边县","东区","西区","其他"]},{"name":"泸州市","area":["江阳区","纳溪区","龙马潭区","泸县","合江县","叙永县","古蔺县","其他"]},{"name":"德阳市","area":["旌阳区","广汉市","什邡市","绵竹市","罗江县","中江县","其他"]},{"name":"绵阳市","area":["涪城区","游仙区","江油市","盐亭县","三台县","平武县","安县","梓潼县","北川羌族自治县","其他"]},{"name":"广元市","area":["元坝区","朝天区","青川县","旺苍县","剑阁县","苍溪县","市中区","其他"]},{"name":"遂宁市","area":["船山区","安居区","射洪县","蓬溪县","大英县","其他"]},{"name":"内江市","area":["市中区","东兴区","资中县","隆昌县","威远县","其他"]},{"name":"乐山市","area":["市中区","五通桥区","沙湾区","金口河区","峨眉山市","夹江县","井研县","犍为县","沐川县","马边彝族自治县","峨边彝族自治县","其他"]},{"name":"南充","area":["顺庆区","高坪区","嘉陵区","阆中市","营山县","蓬安县","仪陇县","南部县","西充县","其他"]},{"name":"眉山市","area":["东坡区","仁寿县","彭山县","洪雅县","丹棱县","青神县","其他"]},{"name":"宜宾市","area":["翠屏区","宜宾县","兴文县","南溪县","珙县","长宁县","高县","江安县","筠连县","屏山县","其他"]},{"name":"广安市","area":["广安区","华蓥市","岳池县","邻水县","武胜县","其他"]},{"name":"达州市","area":["通川区","万源市","达县","渠县","宣汉县","开江县","大竹县","其他"]},{"name":"雅安市","area":["雨城区","芦山县","石棉县","名山县","天全县","荥经县","宝兴县","汉源县","其他"]},{"name":"巴中市","area":["巴州区","南江县","平昌县","通江县","其他"]},{"name":"资阳市","area":["雁江区","简阳市","安岳县","乐至县","其他"]},{"name":"阿坝藏族羌族自治州","area":["马尔康县","九寨沟县","红原县","汶川县","阿坝县","理县","若尔盖县","小金县","黑水县","金川县","松潘县","壤塘县","茂县","其他"]},{"name":"甘孜藏族自治州","area":["康定县","丹巴县","炉霍县","九龙县","甘孜县","雅江县","新龙县","道孚县","白玉县","理塘县","德格县","乡城县","石渠县","稻城县","色达县","巴塘县","泸定县","得荣县","其他"]},{"name":"凉山彝族自治州","area":["西昌市","美姑县","昭觉县","金阳县","甘洛县","布拖县","雷波县","普格县","宁南县","喜德县","会东县","越西县","会理县","盐源县","德昌县","冕宁县","木里藏族自治县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"贵州省","city":[{"name":"贵阳市","area":["南明区","云岩区","花溪区","乌当区","白云区","小河区","清镇市","开阳县","修文县","息烽县","其他"]},{"name":"六盘水市","area":["钟山区","水城县","盘县","六枝特区","其他"]},{"name":"遵义市","area":["红花岗区","汇川区","赤水市","仁怀市","遵义县","绥阳县","桐梓县","习水县","凤冈县","正安县","余庆县","湄潭县","道真仡佬族苗族自治县","务川仡佬族苗族自治县","其他"]},{"name":"安顺市","area":["西秀区","普定县","平坝县","镇宁布依族苗族自治县","紫云苗族布依族自治县","关岭布依族苗族自治县","其他"]},{"name":"铜仁地区","area":["铜仁市","德江县","江口县","思南县","石阡县","玉屏侗族自治县","松桃苗族自治县","印江土家族苗族自治县","沿河土家族自治县","万山特区","其他"]},{"name":"毕节地区","area":["毕节市","黔西县","大方县","织金县","金沙县","赫章县","纳雍县","威宁彝族回族苗族自治县","其他"]},{"name":"黔西南布依族苗族自治州","area":["兴义市","望谟县","兴仁县","普安县","册亨县","晴隆县","贞丰县","安龙县","其他"]},{"name":"黔东南苗族侗族自治州","area":["凯里市","施秉县","从江县","锦屏县","镇远县","麻江县","台江县","天柱县","黄平县","榕江县","剑河县","三穗县","雷山县","黎平县","岑巩县","丹寨县","其他"]},{"name":"黔南布依族苗族自治州","area":["都匀市","福泉市","贵定县","惠水县","罗甸县","瓮安县","荔波县","龙里县","平塘县","长顺县","独山县","三都水族自治县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"云南省","city":[{"name":"昆明市","area":["盘龙区","五华区","官渡区","西山区","东川区","安宁市","呈贡县","晋宁县","富民县","宜良县","嵩明县","石林彝族自治县","禄劝彝族苗族自治县","寻甸回族彝族自治县","其他"]},{"name":"曲靖市","area":["麒麟区","宣威市","马龙县","沾益县","富源县","罗平县","师宗县","陆良县","会泽县","其他"]},{"name":"玉溪市","area":["红塔区","江川县","澄江县","通海县","华宁县","易门县","峨山彝族自治县","新平彝族傣族自治县","元江哈尼族彝族傣族自治县","其他"]},{"name":"保山市","area":["隆阳区","施甸县","腾冲县","龙陵县","昌宁县","其他"]},{"name":"昭通市","area":["昭阳区","鲁甸县","巧家县","盐津县","大关县","永善县","绥江县","镇雄县","彝良县","威信县","水富县","其他"]},{"name":"丽江市","area":["古城区","永胜县","华坪县","玉龙纳西族自治县","宁蒗彝族自治县","其他"]},{"name":"普洱市","area":["思茅区","普洱哈尼族彝族自治县","墨江哈尼族自治县","景东彝族自治县","景谷傣族彝族自治县","镇沅彝族哈尼族拉祜族自治县","江城哈尼族彝族自治县","孟连傣族拉祜族佤族自治县","澜沧拉祜族自治县","西盟佤族自治县","其他"]},{"name":"临沧市","area":["临翔区","凤庆县","云县","永德县","镇康县","双江拉祜族佤族布朗族傣族自治县","耿马傣族佤族自治县","沧源佤族自治县","其他"]},{"name":"德宏傣族景颇族自治州","area":["潞西市","瑞丽市","梁河县","盈江县","陇川县","其他"]},{"name":"怒江傈僳族自治州","area":["泸水县","福贡县","贡山独龙族怒族自治县","兰坪白族普米族自治县","其他"]},{"name":"迪庆藏族自治州","area":["香格里拉县","德钦县","维西傈僳族自治县","其他"]},{"name":"大理白族自治州","area":["大理市","祥云县","宾川县","弥渡县","永平县","云龙县","洱源县","剑川县","鹤庆县","漾濞彝族自治县","南涧彝族自治县","巍山彝族回族自治县","其他"]},{"name":"楚雄彝族自治州","area":["楚雄市","双柏县","牟定县","南华县","姚安县","大姚县","永仁县","元谋县","武定县","禄丰县","其他"]},{"name":"红河哈尼族彝族自治州","area":["蒙自县","个旧市","开远市","绿春县","建水县","石屏县","弥勒县","泸西县","元阳县","红河县","金平苗族瑶族傣族自治县","河口瑶族自治县","屏边苗族自治县","其他"]},{"name":"文山壮族苗族自治州","area":["文山县","砚山县","西畴县","麻栗坡县","马关县","丘北县","广南县","富宁县","其他"]},{"name":"西双版纳傣族自治州","area":["景洪市","勐海县","勐腊县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"西藏","city":[{"name":"拉萨市","area":["城关区","林周县","当雄县","尼木县","曲水县","堆龙德庆县","达孜县","墨竹工卡县","其他"]},{"name":"那曲地区","area":["那曲县","嘉黎县","比如县","聂荣县","安多县","申扎县","索县","班戈县","巴青县","尼玛县","其他"]},{"name":"昌都地区","area":["昌都县","江达县","贡觉县","类乌齐县","丁青县","察雅县","八宿县","左贡县","芒康县","洛隆县","边坝县","其他"]},{"name":"林芝地区","area":["林芝县","工布江达县","米林县","墨脱县","波密县","察隅县","朗县","其他"]},{"name":"山南地区","area":["乃东县","扎囊县","贡嘎县","桑日县","琼结县","曲松县","措美县","洛扎县","加查县","隆子县","错那县","浪卡子县","其他"]},{"name":"日喀则地区","area":["日喀则市","南木林县","江孜县","定日县","萨迦县","拉孜县","昂仁县","谢通门县","白朗县","仁布县","康马县","定结县","仲巴县","亚东县","吉隆县","聂拉木县","萨嘎县","岗巴县","其他"]},{"name":"阿里地区","area":["噶尔县","普兰县","札达县","日土县","革吉县","改则县","措勤县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"陕西省","city":[{"name":"西安市","area":["莲湖区","新城区","碑林区","雁塔区","灞桥区","未央区","阎良区","临潼区","长安区","高陵县","蓝田县","户县","周至县","其他"]},{"name":"铜川市","area":["耀州区","王益区","印台区","宜君县","其他"]},{"name":"宝鸡市","area":["渭滨区","金台区","陈仓区","岐山县","凤翔县","陇县","太白县","麟游县","扶风县","千阳县","眉县","凤县","其他"]},{"name":"咸阳市","area":["秦都区","渭城区","杨陵区","兴平市","礼泉县","泾阳县","永寿县","三原县","彬县","旬邑县","长武县","乾县","武功县","淳化县","其他"]},{"name":"渭南市","area":["临渭区","韩城市","华阴市","蒲城县","潼关县","白水县","澄城县","华县","合阳县","富平县","大荔县","其他"]},{"name":"延安市","area":["宝塔区","安塞县","洛川县","子长县","黄陵县","延川县","富县","延长县","甘泉县","宜川县","志丹县","黄龙县","吴起县","其他"]},{"name":"汉中市","area":["汉台区","留坝县","镇巴县","城固县","南郑县","洋县","宁强县","佛坪县","勉县","西乡县","略阳县","其他"]},{"name":"榆林市","area":["榆阳区","清涧县","绥德县","神木县","佳县","府谷县","子洲县","靖边县","横山县","米脂县","吴堡县","定边县","其他"]},{"name":"安康市","area":["汉滨区","紫阳县","岚皋县","旬阳县","镇坪县","平利县","石泉县","宁陕县","白河县","汉阴县","其他"]},{"name":"商洛市","area":["商州区","镇安县","山阳县","洛南县","商南县","丹凤县","柞水县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"甘肃省","city":[{"name":"兰州市","area":["城关区","七里河区","西固区","安宁区","红古区","永登县","皋兰县","榆中县","其他"]},{"name":"嘉峪关市","area":["嘉峪关市","其他"]},{"name":"金昌市","area":["金川区","永昌县","其他"]},{"name":"白银市","area":["白银区","平川区","靖远县","会宁县","景泰县","其他"]},{"name":"天水市","area":["清水县","秦安县","甘谷县","武山县","张家川回族自治县","北道区","秦城区","其他"]},{"name":"武威市","area":["凉州区","民勤县","古浪县","天祝藏族自治县","其他"]},{"name":"酒泉市","area":["肃州区","玉门市","敦煌市","金塔县","肃北蒙古族自治县","阿克塞哈萨克族自治县","安西县","其他"]},{"name":"张掖市","area":["甘州区","民乐县","临泽县","高台县","山丹县","肃南裕固族自治县","其他"]},{"name":"庆阳市","area":["西峰区","庆城县","环县","华池县","合水县","正宁县","宁县","镇原县","其他"]},{"name":"平凉市","area":["崆峒区","泾川县","灵台县","崇信县","华亭县","庄浪县","静宁县","其他"]},{"name":"定西市","area":["安定区","通渭县","临洮县","漳县","岷县","渭源县","陇西县","其他"]},{"name":"陇南市","area":["武都区","成县","宕昌县","康县","文县","西和县","礼县","两当县","徽县","其他"]},{"name":"临夏回族自治州","area":["临夏市","临夏县","康乐县","永靖县","广河县","和政县","东乡族自治县","积石山保安族东乡族撒拉族自治县","其他"]},{"name":"甘南藏族自治州","area":["合作市","临潭县","卓尼县","舟曲县","迭部县","玛曲县","碌曲县","夏河县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"青海省","city":[{"name":"西宁市","area":["城中区","城东区","城西区","城北区","湟源县","湟中县","大通回族土族自治县","其他"]},{"name":"海东地区","area":["平安县","乐都县","民和回族土族自治县","互助土族自治县","化隆回族自治县","循化撒拉族自治县","其他"]},{"name":"海北藏族自治州","area":["海晏县","祁连县","刚察县","门源回族自治县","其他"]},{"name":"海南藏族自治州","area":["共和县","同德县","贵德县","兴海县","贵南县","其他"]},{"name":"黄南藏族自治州","area":["同仁县","尖扎县","泽库县","河南蒙古族自治县","其他"]},{"name":"果洛藏族自治州","area":["玛沁县","班玛县","甘德县","达日县","久治县","玛多县","其他"]},{"name":"玉树藏族自治州","area":["玉树县","杂多县","称多县","治多县","囊谦县","曲麻莱县","其他"]},{"name":"海西蒙古族藏族自治州","area":["德令哈市","格尔木市","乌兰县","都兰县","天峻县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"宁夏","city":[{"name":"银川市","area":["兴庆区","西夏区","金凤区","灵武市","永宁县","贺兰县","其他"]},{"name":"石嘴山市","area":["大武口区","惠农区","平罗县","其他"]},{"name":"吴忠市","area":["利通区","青铜峡市","盐池县","同心县","其他"]},{"name":"固原市","area":["原州区","西吉县","隆德县","泾源县","彭阳县","其他"]},{"name":"中卫市","area":["沙坡头区","中宁县","海原县","其他"]},{"name":"其他","area":["其他"]}]},{"name":"新疆","city":[{"name":"乌鲁木齐市","area":["天山区","沙依巴克区","新市区","水磨沟区","头屯河区","达坂城区","东山区","乌鲁木齐县","其他"]},{"name":"克拉玛依市","area":["克拉玛依区","独山子区","白碱滩区","乌尔禾区","其他"]},{"name":"吐鲁番地区","area":["吐鲁番市","托克逊县","鄯善县","其他"]},{"name":"哈密地区","area":["哈密市","伊吾县","巴里坤哈萨克自治县","其他"]},{"name":"和田地区","area":["和田市","和田县","洛浦县","民丰县","皮山县","策勒县","于田县","墨玉县","其他"]},{"name":"阿克苏地区","area":["阿克苏市","温宿县","沙雅县","拜城县","阿瓦提县","库车县","柯坪县","新和县","乌什县","其他"]},{"name":"喀什地区","area":["喀什市","巴楚县","泽普县","伽师县","叶城县","岳普湖县","疏勒县","麦盖提县","英吉沙县","莎车县","疏附县","塔什库尔干塔吉克自治县","其他"]},{"name":"克孜勒苏柯尔克孜自治州","area":["阿图什市","阿合奇县","乌恰县","阿克陶县","其他"]},{"name":"巴音郭楞蒙古自治州","area":["库尔勒市","和静县","尉犁县","和硕县","且末县","博湖县","轮台县","若羌县","焉耆回族自治县","其他"]},{"name":"昌吉回族自治州","area":["昌吉市","阜康市","奇台县","玛纳斯县","吉木萨尔县","呼图壁县","木垒哈萨克自治县","米泉市","其他"]},{"name":"博尔塔拉蒙古自治州","area":["博乐市","精河县","温泉县","其他"]},{"name":"石河子","area":["石河子"]},{"name":"阿拉尔","area":["阿拉尔"]},{"name":"图木舒克","area":["图木舒克"]},{"name":"五家渠","area":["五家渠"]},{"name":"伊犁哈萨克自治州","area":["伊宁市","奎屯市","伊宁县","特克斯县","尼勒克县","昭苏县","新源县","霍城县","巩留县","察布查尔锡伯自治县","塔城地区","阿勒泰地区","其他"]},{"name":"其他","area":["其他"]}]},{"name":"台湾省","city":[{"name":"台北市","area":["内湖区","南港区","中正区","万华区","大同区","中山区","松山区","大安区","信义区","文山区","士林区","北投区"]},{"name":"新北市","area":["板桥区","汐止区","新店区","其他"]},{"name":"桃园市","area":["其他"]},{"name":"台中市","area":["其他"]},{"name":"台南市","area":["其他"]},{"name":"高雄市","area":["其他"]}]},{"name":"澳门","city":[{"name":"澳门","area":["花地玛堂区","圣安多尼堂区","大堂区","望德堂区","风顺堂区","嘉模堂区","圣方济各堂区","路凼","其他"]}]},{"name":"香港","city":[{"name":"香港","area":["深水埗区","油尖旺区","九龙城区","黄大仙区","观塘区","北区","大埔区","沙田区","西贡区","元朗区","屯门区","荃湾区","葵青区","离岛区","中西区","湾仔区","东区","南区","其他"]}]}]',t.citys=null,t._instance=null,t}(),v=function(){function t(){this.matclassname="喷绘材料",this.childMatList=null,this.childMatList=[];var t=["喷绘材料","布类材料","印刷材料"],e=Math.floor(Math.random()*t.length);this.matclassname=t[e];for(var i=0;20>i;i++)this.childMatList.push(new p)}return r(t,"model.orderModel.MatetialClassVo"),t}(),y=function(){function t(){this.viewContainer=null,this.openViewList=null,this.viewDict=null,this.viewContainer=new On,i.stage.addChild(this.viewContainer),this.openViewList={},this.viewDict=new Object,this.viewDict.VIEW_FIRST_PAGE=Dr,this.viewDict.VIEW_lOGPANEL=ts,this.viewDict.VIEW_REGPANEL=ns,this.viewDict.VIEW_CHANGEPWD=cs,this.viewDict.VIEW_MYPICPANEL=ds,this.viewDict.VIEW_PICMANAGER=_s,this.viewDict.VIEW_USERCENTER=os,this.viewDict.VIEW_PICTURE_CHECK=Es,this.viewDict.VIEW_POPUPDIALOG=gs,this.viewDict.VIEW_PAINT_ORDER=qr,this.viewDict.VIEW_SELECT_ADDRESS=zr,this.viewDict.VIEW_SELECT_FACTORY=jr,this.viewDict.VIEW_SELECT_PIC_TO_ORDER=es,this.viewDict.VIEW_SELECT_MATERIAL=us,this.viewDict.VIEW_SELECT_TECHNORLOGY=vs,this.viewDict.VIEW_ADD_MESSAGE=is,this.viewDict.VIEW_ADD_NEW_ADDRESS=ss,this.viewDict.VIEW_LOADING_PRO=ys}r(t,"script.ViewManager");var e=t.prototype;return e.openView=function(t,e,i){if(void 0===e&&(e=!1),null==this.openViewList[t]&&null!=this.viewDict[t]){if(e){var n;for(var r in this.openViewList)n=this.openViewList[r],this.viewContainer.removeChild(n),n.destroy(!0);this.openViewList={}}var s=new this.viewDict[t],a=s.getComponent(nn);null!=a&&(a.param=i),this.viewContainer.addChild(s),this.openViewList[t]=s}},e.closeView=function(e){null==this.openViewList[e]&&t.showAlert("不存在的界面"),this.viewContainer.removeChild(this.openViewList[e]),this.openViewList[e].destroy(!0),this.openViewList[e]=null,delete this.openViewList[e]
},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance}),t.showAlert=function(t){Me.window.alert(t)},t._instance=null,t.VIEW_FIRST_PAGE="VIEW_FIRST_PAGE",t.VIEW_lOGPANEL="VIEW_lOGPANEL",t.VIEW_REGPANEL="VIEW_REGPANEL",t.VIEW_CHANGEPWD="VIEW_CHANGEPWD",t.VIEW_MYPICPANEL="VIEW_MYPICPANEL",t.VIEW_PICMANAGER="VIEW_PICMANAGER",t.VIEW_PICTURE_CHECK="VIEW_PICTURE_CHECK",t.VIEW_PAINT_ORDER="VIEW_PAINT_ORDER",t.VIEW_USERCENTER="VIEW_USERCENTER",t.VIEW_SELECT_ADDRESS="VIEW_SELECT_ADDRESS",t.VIEW_SELECT_FACTORY="VIEW_SELECT_FACTORY",t.VIEW_SELECT_PIC_TO_ORDER="VIEW_SELECT_PIC_TO_ORDER",t.VIEW_SELECT_MATERIAL="VIEW_SELECT_MATERIAL",t.VIEW_SELECT_TECHNORLOGY="VIEW_SELECT_TECHNORLOGY",t.VIEW_ADD_MESSAGE="VIEW_ADD_MESSAGE",t.VIEW_LOADING_PRO="VIEW_LOADING_PRO",t.VIEW_ADD_NEW_ADDRESS="VIEW_ADD_NEW_ADDRESS",t.VIEW_POPUPDIALOG="VIEW_POPUPDIALOG",t}(),E=function(){function t(){}return r(t,"utils.UtilTool"),t.oneCutNineAdd=function(t){var e=t.toFixed(1),i=parseInt(e.split(".")[1]);return 1==i?parseInt(e.split(".")[0]):9==i?parseInt(e.split(".")[0])+1:parseFloat(e)},t}(),A=function(){function t(){this.partIndex=0,this.partId=0,this.partName="X展架",this.partSize="60*160",this.partNum=1,this.price=0/0,this.total=0/0}return r(t,"model.orderModel.PartItemVo"),t}(),C=function(){function t(t,e){if(this.picType=0,this.directName="",this.parentDirect="",this.directId="",this.fid="",this.picWidth=0,this.picHeight=0,this.picPhysicWidth=0/0,this.picPhysicHeight=0/0,this.colorspace="",this.picClass="",this.dpi=0/0,this.picType=e,0==this.picType)this.directName=t.dname,this.parentDirect=t.dpath,this.directId=t.did;else{this.fid=t.fid;var i=JSON.parse(t.fattr);this.picWidth=i.width,this.picHeight=i.height,this.colorspace=i.colorspace,this.dpi=E.oneCutNineAdd(i.dpi),this.picPhysicWidth=E.oneCutNineAdd(this.picWidth/this.dpi*2.54),this.picPhysicHeight=E.oneCutNineAdd(this.picHeight/this.dpi*2.54),this.picClass=t.ftype,this.directName=t.fname,this.parentDirect=t.fpath}}r(t,"model.picmanagerModel.PicInfoVo");var e=t.prototype;return s(0,e,"dpath",function(){return this.parentDirect+this.directId+"|"}),t}(),S=function(){function t(){this.topDirectList=[],this.directoryList=null,this.curFileList=[],this.curSelectDir=null,this.haselectPic={},this.directoryList=[]}r(t,"model.picmanagerModel.DirectoryFileModel");var e=t.prototype;return e.initTopDirectoryList=function(t){this.topDirectList=[];for(var e=t.dirs,i=0;i<e.length;i++)this.topDirectList.push(new C(e[i],0))},e.addNewTopDir=function(t){this.topDirectList.push(new C(t,0))},e.initCurDirFiles=function(t){this.curFileList=[];for(var e=t.dirs,i=0;i<e.length;i++)this.curFileList.push(new C(e[i],0));var n=t.files;for(i=0;i<n.length;i++)this.curFileList.push(new C(n[i],1))},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance}),t._instance=null,t}(),D=function(){function t(t){this.indexNum=0,this.picinfo=null,this.materialID=0,this.materialName=null,this.editWidth=0/0,this.editHeight=0/0,this.technolegs=null,this.techStr="",this.vipPrice=0/0,this.price=0/0,this.paitNum=1,this.totalPrice=0/0,this.comment="",this.picinfo=t;for(var e=8*Math.random(),i=0;e>i;i++)this.techStr+="工艺"+i+"\n"}return r(t,"model.orderModel.PicOrderItemVo"),t}(),R=function(){function t(){this.totalName="包边",this.techlist=null,this.techlist=[];for(var t=28*Math.random(),e=0;t>e;e++){var i=new m;this.techlist.push(i)}}return r(t,"model.orderModel.TechMainVo"),t}(),T=function(){function t(){}r(t,"model.HttpRequestUtil");var e=t.prototype;return e.newRequest=function(t,e,n,r,s,a){function o(t,e,i,n,r,s){h.onHttpRequestError(t,e,i,n,r,s)}var h=this;void 0===s&&(s="text");var _=new cn;if(_.on("progress",this,function(t){null!=a&&a(t)}),_.on("complete",this,this.onRequestCompete,[e,n,_]),i.timer.once(5e3,_,o,[t,e,n,r,s,_]),_.on("error",this,this.onHttpRequestError,[t,e,n,r,s,_]),null!=r)if("string"==typeof r);else if(r instanceof ArrayBuffer);else{var l=[];for(var u in r)l.push(u+"="+encodeURIComponent(r[u]));r=l.join("&")}console.log(t+r),_.retrytime=0,_.send(t,r,s?"post":"get","text")},e.onHttpRequestError=function(){},e.onHttpRequestProgress=function(t){console.log(t)},e.onRequestCompete=function(t,e,n,r){i.timer.clearAll(n),t&&e&&e.call(t,r),n.offAll()},e.Request=function(t,e,i,n,r){void 0===r&&(r="get"),this.newRequest(t,e,i,n,r)},e.RequestBin=function(t,e,i,n){this.newRequest(t,e,i,n,"arraybuffer")},s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance}),t._instance=null,t.httpUrl="http://47.101.178.87/",t.registerUrl="account/create",t.loginInUrl="account/login?",t.loginOutUrl="account/logout?",t.getVerifyCode="api/getcode?",t.createDirectory="dir/create?",t.deleteDirectory="dir/remove?",t.getDirectoryList="dir/list?",t.uploadPic="file/add?",t.deletePic="file/remove?",t.biggerPicUrl="http://m-scfy-763.oss-cn-shanghai.aliyuncs.com/",t.smallerrPicUrl="http://s-scfy-763.oss-cn-shanghai.aliyuncs.com/",t}(),x=function(){function e(){this.tt=0/0,t.Laya3D?t.Laya3D.init(1920,1080):i.init(1920,1080,i.WebGL),i.stage.scaleMode="noscale",i.stage.screenMode=d.screenMode,i.stage.alignV=d.alignV,i.stage.alignH=d.alignH,Pi.exportSceneToJson=d.exportSceneToJson,this.tt=(new Date).getTime(),console.log("now time:"+this.tt),(d.debug||"true"==Q.getQueryString("debug"))&&i.enableDebugPanel(),d.physicsDebug&&i.PhysicsDebugDraw&&i.PhysicsDebugDraw.enable(),d.stat&&Li.show(),i.alertGlobalError=!0,Be.enable("version.json",l.create(this,this.onVersionLoaded),2)}r(e,"Main");var n=e.prototype;return n.onVersionLoaded=function(){i.loader.load([{url:"res/atlas/comp.atlas",type:"atlas"}],l.create(this,this.onLoadedComp),null,"atlas")},n.onLoadedComp=function(){bi.enable("fileconfig.json",l.create(null,this.onConfigLoaded))},n.onConfigLoaded=function(){i.stage.addChild(new Dr),y.instance.openView("VIEW_LOADING_PRO")},e}(),b=function(){function t(){this.selectAddress=null}return r(t,"model.orderModel.PaintOrderModel"),s(1,t,"instance",function(){return null==t._instance&&(t._instance=new t),t._instance}),t._instance=null,t}(),P=function(){function t(t,e,i){this._value=0,this._name2int=t,this._int2name=e,this._int2nameMap=i}r(t,"laya.webgl.shader.ShaderDefinesBase");var e=t.prototype;return e.add=function(t){return"string"==typeof t&&(t=this._name2int[t]),this._value|=t,this._value},e.addInt=function(t){return this._value|=t,this._value},e.remove=function(t){return"string"==typeof t&&(t=this._name2int[t]),this._value&=~t,this._value},e.isDefine=function(t){return(this._value&t)===t},e.getValue=function(){return this._value},e.setValue=function(t){this._value=t},e.toNameDic=function(){var e=this._int2nameMap[this._value];return e?e:t._toText(this._value,this._int2name,this._int2nameMap)},t._reg=function(t,e,i,n){i[t]=e,n[e]=t},t._toText=function(t,e,i){var n=i[t];if(n)return n;for(var r={},s=1,a=0;32>a&&(s=1<<a,!(s>t));a++)if(t&s){var o=e[s];o&&(r[o]="")}return i[t]=r,r},t._toInt=function(t,e){for(var i=t.split("."),n=0,r=0,s=i.length;s>r;r++){var a=e[i[r]];if(!a)throw new Error("Defines to int err:"+t+"/"+i[r]);n|=a}return n},t}(),L=function(){function t(){}r(t,"laya.display.cmd.ClipRectCmd");var e=t.prototype;return e.recover=function(){Ki.recover("ClipRectCmd",this)},e.run=function(t,e,i){t.clipRect(this.x+e,this.y+i,this.width,this.height)},s(0,e,"cmdID",function(){return"ClipRect"}),t.create=function(e,i,n,r){var s=Ki.getItemByClass("ClipRectCmd",t);return s.x=e,s.y=i,s.width=n,s.height=r,s},t.ID="ClipRect",t}(),I=(function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._paramData=null,this._texture=null,this._pos=null,this._rectNum=0,this._vbSize=0,this.vbBuffer=null}r(t,"laya.layagl.cmdNative.DrawTexturesCmdNative");var e=t.prototype;return e.recover=function(){this._texture=null,this._pos=null,Ki.recover("DrawTexturesCmd",this)},s(0,e,"cmdID",function(){return"DrawTextures"}),s(0,e,"texture",function(){return this._texture},function(e){this._texture=e;for(var i=this._texture.bitmap.width,n=this._texture.bitmap.height,r=this._texture.uv,s=this.vbBuffer._float32Data,a=this.vbBuffer._int32Data,o=0,h=0;h<this._rectNum;h++){var _=this.pos[2*h],l=this.pos[2*h+1];s[o++]=_,s[o++]=l,s[o++]=r[0],s[o++]=r[1],a[o++]=4294967295,a[o++]=4294967295,s[o++]=_+i,s[o++]=l,s[o++]=r[2],s[o++]=r[3],a[o++]=4294967295,a[o++]=4294967295,s[o++]=_+i,s[o++]=l+n,s[o++]=r[4],s[o++]=r[5],a[o++]=4294967295,a[o++]=4294967295,s[o++]=_,s[o++]=l+n,s[o++]=r[6],s[o++]=r[7],a[o++]=4294967295,a[o++]=4294967295}var u=this._paramData._int32Data;u[t._PARAM_TEXLOCATION_POS_]=33984,u[t._PARAM_TEXTURE_POS_]=this._texture.bitmap._glTexture.id,Le.syncBufferToRenderThread(this.vbBuffer),Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"pos",function(){return this._pos},function(e){this._pos=e;var i=this._pos.length/2,n=this._texture.bitmap.width,r=this._texture.bitmap.height,s=this._texture.uv;(!this.vbBuffer||this.vbBuffer.getByteLength()<24*i*4)&&(this.vbBuffer=new ParamData(24*i*4,!0)),this._vbSize=24*i*4,this._rectNum=i;for(var a=this.vbBuffer._float32Data,o=this.vbBuffer._int32Data,h=0,_=0;i>_;_++){var l=this.pos[2*_],u=this.pos[2*_+1];a[h++]=l,a[h++]=u,a[h++]=s[0],a[h++]=s[1],o[h++]=4294967295,o[h++]=4294967295,a[h++]=l+n,a[h++]=u,a[h++]=s[2],a[h++]=s[3],o[h++]=4294967295,o[h++]=4294967295,a[h++]=l+n,a[h++]=u+r,a[h++]=s[4],a[h++]=s[5],o[h++]=4294967295,o[h++]=4294967295,a[h++]=l,a[h++]=u+r,a[h++]=s[6],a[h++]=s[7],o[h++]=4294967295,o[h++]=4294967295}var c=(this._paramData._float32Data,this._paramData._int32Data);c[t._PARAM_RECT_NUM_POS_]=this._rectNum,c[t._PARAM_VB_POS_]=this.vbBuffer.getPtrID(),c[t._PARAM_VB_SIZE_POS_]=this._vbSize,Le.syncBufferToRenderThread(this.vbBuffer),Le.syncBufferToRenderThread(this._paramData)}),t.create=function(e,i){var n=Ki.getItemByClass("DrawTexturesCmd",t);n._graphicsCmdEncoder=this._commandEncoder,t._DRAW_TEXTURES_CMD_ENCODER_||(t._DRAW_TEXTURES_CMD_ENCODER_=Le.instance.createCommandEncoder(124,32,!0),t._DRAW_TEXTURES_CMD_ENCODER_.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_TEXTURES_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWTEXTURE),t._DRAW_TEXTURES_CMD_ENCODER_.useVDO(se.VDO_MESHQUADTEXTURE),t._DRAW_TEXTURES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_TEXTURES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_TEXTURES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_TEXTURES_CMD_ENCODER_.uniformTextureByParamData(t._PARAM_UNIFORMLOCATION_POS_,4*t._PARAM_TEXLOCATION_POS_,4*t._PARAM_TEXTURE_POS_),t._DRAW_TEXTURES_CMD_ENCODER_.setRectMeshExByParamData(4*t._PARAM_RECT_NUM_POS_,4*t._PARAM_VB_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_VB_OFFSET_POS_),t._DRAW_TEXTURES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_TEXTURES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._DRAW_TEXTURES_CMD_ENCODER_)),n._paramData||(n._paramData=new ParamData(28,!0)),n._texture=e,n._pos=i;var r=e.bitmap.width,s=e.bitmap.height,a=e.uv,o=i.length/2;(!n.vbBuffer||n.vbBuffer.getByteLength()<24*o*4)&&(n.vbBuffer=new ParamData(24*o*4,!0)),n._vbSize=24*o*4,n._rectNum=o;for(var h=n.vbBuffer._float32Data,_=n.vbBuffer._int32Data,l=0,u=0;o>u;u++){var c=i[2*u],d=i[2*u+1];h[l++]=c,h[l++]=d,h[l++]=a[0],h[l++]=a[1],_[l++]=4294967295,_[l++]=4294967295,h[l++]=c+r,h[l++]=d,h[l++]=a[2],h[l++]=a[3],_[l++]=4294967295,_[l++]=4294967295,h[l++]=c+r,h[l++]=d+s,h[l++]=a[4],h[l++]=a[5],_[l++]=4294967295,_[l++]=4294967295,h[l++]=c,h[l++]=d+s,h[l++]=a[6],h[l++]=a[7],_[l++]=4294967295,_[l++]=4294967295}var f=(n._paramData._float32Data,n._paramData._int32Data);return f[t._PARAM_UNIFORMLOCATION_POS_]=3,f[t._PARAM_TEXLOCATION_POS_]=33984,f[t._PARAM_TEXTURE_POS_]=e.bitmap._glTexture.id,f[t._PARAM_RECT_NUM_POS_]=n._rectNum,f[t._PARAM_VB_POS_]=n.vbBuffer.getPtrID(),f[t._PARAM_VB_SIZE_POS_]=n._vbSize,f[t._PARAM_VB_OFFSET_POS_]=0,Le.syncBufferToRenderThread(n.vbBuffer),Le.syncBufferToRenderThread(n._paramData),n._graphicsCmdEncoder.useCommandEncoder(t._DRAW_TEXTURES_CMD_ENCODER_.getPtrID(),n._paramData.getPtrID(),-1),Le.syncBufferToRenderThread(n._graphicsCmdEncoder),n},t.ID="DrawTextures",t._DRAW_TEXTURES_CMD_ENCODER_=null,t._PARAM_UNIFORMLOCATION_POS_=0,t._PARAM_TEXLOCATION_POS_=1,t._PARAM_TEXTURE_POS_=2,t._PARAM_RECT_NUM_POS_=3,t._PARAM_VB_POS_=4,t._PARAM_VB_SIZE_POS_=5,t._PARAM_VB_OFFSET_POS_=6,t}(),function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._paramData=null,this._texture=null,this._x=0/0,this._y=0/0,this._width=0/0,this._height=0/0}r(t,"laya.layagl.cmdNative.DrawCanvasCmdNative");var e=t.prototype;return e.recover=function(){this._graphicsCmdEncoder=null,Ki.recover("DrawCanvasCmd",this)},s(0,e,"cmdID",function(){return"DrawCanvas"}),s(0,e,"y",function(){return this._y},function(e){this._y=e;var i=this._paramData._float32Data;i[t._PARAM_VB_POS_+1]=this._y,i[t._PARAM_VB_POS_+7]=this._y,i[t._PARAM_VB_POS_+13]=this._y+this._height,i[t._PARAM_VB_POS_+19]=this._y+this._height,i[t._PARAM_CLIP_SIZE+1]=e+16,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"texture",function(){return this._texture},function(e){this._texture=e,this._paramData._int32Data[t._PARAM_TEXTURE_POS_]=this._texture._getSource().id;var i=this._paramData._float32Data,n=Gr.flipyuv;i[t._PARAM_VB_POS_+2]=n[0],i[t._PARAM_VB_POS_+3]=n[1],i[t._PARAM_VB_POS_+8]=n[2],i[t._PARAM_VB_POS_+9]=n[3],i[t._PARAM_VB_POS_+14]=n[4],i[t._PARAM_VB_POS_+15]=n[5],i[t._PARAM_VB_POS_+20]=n[6],i[t._PARAM_VB_POS_+21]=n[7],Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"width",function(){return this._width},function(e){this._width=e;var i=this._paramData._float32Data;i[t._PARAM_VB_POS_]=this._x,i[t._PARAM_VB_POS_+6]=this._x+this._width,i[t._PARAM_VB_POS_+12]=this._x+this._width,i[t._PARAM_VB_POS_+18]=this._x,i[t._PARAM_CLIP_SIZE+2]=e-32,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"x",function(){return this._x},function(e){this._x=e;var i=this._paramData._float32Data;i[t._PARAM_VB_POS_]=this._x,i[t._PARAM_VB_POS_+6]=this._x+this._width,i[t._PARAM_VB_POS_+12]=this._x+this._width,i[t._PARAM_VB_POS_+18]=this._x,i[t._PARAM_CLIP_SIZE]=e+16,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"height",function(){return this._height},function(e){this._height=e;var i=this._paramData._float32Data;i[t._PARAM_VB_POS_+1]=this._y,i[t._PARAM_VB_POS_+7]=this._y,i[t._PARAM_VB_POS_+13]=this._y+this._height,i[t._PARAM_VB_POS_+19]=this._y+this._height,i[t._PARAM_CLIP_SIZE+3]=e-32,Le.syncBufferToRenderThread(this._paramData)}),t.create=function(e,i,n,r,s){var a=Ki.getItemByClass("DrawCanvasCmd",t);a._graphicsCmdEncoder=this._commandEncoder,t.createCommandEncoder(),a._paramData||(a._paramData=new ParamData(132,!0)),a._texture=e,a._x=i,a._y=n,a._width=r,a._height=s,t.setParamData(a._paramData,e,i,n,r,s);var o=t._DRAW_CANVAS_CMD_ENCODER_.getPtrID(),h=a._paramData.getPtrID();return a._graphicsCmdEncoder.useCommandEncoder(o,h,-1),Le.syncBufferToRenderThread(a._graphicsCmdEncoder),a},t.createCommandEncoder=function(){t._DRAW_CANVAS_CMD_ENCODER_||(t._DRAW_CANVAS_CMD_ENCODER_=Le.instance.createCommandEncoder(172,32,!0),t._DRAW_CANVAS_CMD_ENCODER_.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_CANVAS_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWTEXTURE),t._DRAW_CANVAS_CMD_ENCODER_.useVDO(se.VDO_MESHQUADTEXTURE),t._DRAW_CANVAS_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_CANVAS_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_CANVAS_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_CANVAS_CMD_ENCODER_.uniformTextureByParamData(0,4,4*t._PARAM_TEXTURE_POS_),t._DRAW_CANVAS_CMD_ENCODER_.setRectMeshByParamData(12,4*t._PARAM_VB_POS_,16),t._DRAW_CANVAS_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_CANVAS_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._DRAW_CANVAS_CMD_ENCODER_))},t.setParamData=function(e,i,n,r,s,a){var o=e._float32Data,h=e._int32Data;h[0]=3,h[1]=33984,h[t._PARAM_TEXTURE_POS_]=i._getSource().id,h[3]=1,h[4]=96;var _=0!=s?s:i.width,l=0!=a?a:i.height,u=Gr.flipyuv,c=t._PARAM_VB_POS_;o[c++]=n,o[c++]=r,o[c++]=u[0],o[c++]=u[1],h[c++]=4294967295,h[c++]=4294967295,o[c++]=n+_,o[c++]=r,o[c++]=u[2],o[c++]=u[3],h[c++]=4294967295,h[c++]=4294967295,o[c++]=n+_,o[c++]=r+l,o[c++]=u[4],o[c++]=u[5],h[c++]=4294967295,h[c++]=4294967295,o[c++]=n,o[c++]=r+l,o[c++]=u[6],o[c++]=u[7],h[c++]=4294967295,h[c++]=4294967295,o[t._PARAM_CLIP_SIZE]=n+16,o[t._PARAM_CLIP_SIZE+1]=r+16,o[t._PARAM_CLIP_SIZE+2]=s-32,o[t._PARAM_CLIP_SIZE+3]=a-32,Le.syncBufferToRenderThread(e)},t.ID="DrawCanvas",t._DRAW_CANVAS_CMD_ENCODER_=null,t._PARAM_TEXTURE_POS_=2,t._PARAM_VB_POS_=5,t._PARAM_CLIP_SIZE=29,t}()),M=function(){function t(){}r(t,"laya.display.cmd.DrawPolyCmd");var e=t.prototype;return e.recover=function(){this.points=null,this.fillColor=null,this.lineColor=null,Ki.recover("DrawPolyCmd",this)},e.run=function(t,e,i){t._drawPoly(this.x+e,this.y+i,this.points,this.fillColor,this.lineColor,this.lineWidth,this.isConvexPolygon,this.vid)},s(0,e,"cmdID",function(){return"DrawPoly"}),t.create=function(e,i,n,r,s,a,o,h){var _=Ki.getItemByClass("DrawPolyCmd",t);return _.x=e,_.y=i,_.points=n,_.fillColor=r,_.lineColor=s,_.lineWidth=a,_.isConvexPolygon=o,_.vid=h,_},t.ID="DrawPoly",t}(),w=function(){function t(){}r(t,"laya.resource.Context");var e=t.prototype;return e.drawCanvas=function(t,e,i,n,r){Li.drawCall++,this.drawImage(t._source,e,i,n,r)},e._drawRect=function(t,e,i,n,r){Li.drawCall++,r&&(this.fillStyle=r),this.fillRect(t,e,i,n)},e.drawText=function(t,e,i,n,r,s){Li.drawCall++,arguments.length>3&&null!=n&&(this.font=n,this.fillStyle=r,this.textAlign=s,this.textBaseline="top"),this.fillText(t,e,i)},e.fillBorderText=function(t,e,i,n,r,s,a,o){Li.drawCall++,this.font=n,this.fillStyle=r,this.textBaseline="top",this.strokeStyle=s,this.lineWidth=a,this.textAlign=o,this.strokeText(t,e,i),this.fillText(t,e,i)},e.fillWords=function(t,e,i,n,r){n&&(this.font=n),r&&(this.fillStyle=r),this.textBaseline="top",this.textAlign="left";for(var s=0,a=t.length;a>s;s++){var o=t[s];this.fillText(o.char,o.x+e,o.y+i)}},e.fillBorderWords=function(t,e,i,n,r,s,a){n&&(this.font=n),r&&(this.fillStyle=r),this.textBaseline="top",this.lineWidth=a,this.textAlign="left",this.strokeStyle=s;for(var o=0,h=t.length;h>o;o++){var _=t[o];this.strokeText(_.char,_.x+e,_.y+i),this.fillText(_.char,_.x+e,_.y+i)}},e.strokeWord=function(t,e,i,n,r,s,a){Li.drawCall++,arguments.length>3&&null!=n&&(this.font=n,this.strokeStyle=r,this.lineWidth=s,this.textAlign=a,this.textBaseline="top"),this.strokeText(t,e,i)},e.setTransformByMatrix=function(t){this.setTransform(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.clipRect=function(t,e,i,n){Li.drawCall++,this.beginPath(),this.rect(t,e,i,n),this.clip()},e.drawTextureWithTransform=function(t,e,i,n,r,s,a,o,h,_){if(t._getSource()){Li.drawCall++;var l=1!==h;if(l){var u=this.globalAlpha;this.globalAlpha*=h}_&&(this.globalCompositeOperation=_);var c=t.uv,d=t.bitmap._width,f=t.bitmap._height;s?(this.save(),this.transform(s.a,s.b,s.c,s.d,s.tx+a,s.ty+o),this.drawImage(t.bitmap._source,c[0]*d,c[1]*f,(c[2]-c[0])*d,(c[5]-c[3])*f,e,i,n,r),this.restore()):this.drawImage(t.bitmap._source,c[0]*d,c[1]*f,(c[2]-c[0])*d,(c[5]-c[3])*f,a+e,o+i,n,r),l&&(this.globalAlpha=u),_&&(this.globalCompositeOperation="source-over")}},e.drawTexture2=function(t,e,i,n,r,s){var a=s[0];Li.drawCall++;var o=a.uv,h=a.bitmap._width,_=a.bitmap._height;r?(this.save(),this.transform(r.a,r.b,r.c,r.d,r.tx+t,r.ty+e),this.drawImage(a.bitmap._source,o[0]*h,o[1]*_,(o[2]-o[0])*h,(o[5]-o[3])*_,s[1]-i,s[2]-n,s[3],s[4]),this.restore()):this.drawImage(a.bitmap._source,o[0]*h,o[1]*_,(o[2]-o[0])*h,(o[5]-o[3])*_,s[1]-i+t,s[2]-n+e,s[3],s[4])},e.fillTexture=function(t,e,i,n,r,s,a,o){if(!o.pat){if(t.uv!=on.DEF_UV){var h=new yr;h.getContext("2d"),h.size(t.width,t.height),h.context.drawTexture(t,0,0,t.width,t.height),t=new on(h)}o.pat=this.createPattern(t.bitmap._source,s)}var _=e,l=i,u=0,c=0;a&&(_+=a.x%t.width,l+=a.y%t.height,u-=a.x%t.width,c-=a.y%t.height),this.translate(_,l),this._drawRect(u,c,n,r,o.pat),this.translate(-_,-l)},e.flush=function(){return 0},e.destroy=function(){this.canvas.width=this.canvas.height=0},e.clear=function(){wi.isConchApp||this.clearRect(0,0,wi._mainCanvas.width,wi._mainCanvas.height)},e.drawTriangle=function(t,e,i,n,r,s,a,o){var h=t.bitmap,_=h._getSource(),l=t.width,u=t.height,c=h.width,d=h.height,f=i[n]*c,p=i[r]*c,m=i[s]*c,g=i[n+1]*d,v=i[r+1]*d,y=i[s+1]*d,E=e[n],A=e[r],C=e[s],S=e[n+1],D=e[r+1],R=e[s+1];if(o){var T=1,x=1,b=(E+A+C)/3,P=(S+D+R)/3,L=E-b,I=S-P,M=Math.sqrt(L*L+I*I);E=b+L/M*(M+T),S=P+I/M*(M+x),L=A-b,I=D-P,M=Math.sqrt(L*L+I*I),A=b+L/M*(M+T),D=P+I/M*(M+x),L=C-b,I=R-P,M=Math.sqrt(L*L+I*I),C=b+L/M*(M+T),R=P+I/M*(M+x)}this.save(),a&&this.transform(a.a,a.b,a.c,a.d,a.tx,a.ty),this.beginPath(),this.moveTo(E,S),this.lineTo(A,D),this.lineTo(C,R),this.closePath(),this.clip();var w=f*v+g*m+p*y-v*m-g*p-f*y,O=1/w,B=E*v+g*C+A*y-v*C-g*A-E*y,N=f*A+E*m+p*C-A*m-E*p-f*C,F=f*v*C+g*A*m+E*p*y-E*v*m-g*p*C-f*A*y,k=S*v+g*R+D*y-v*R-g*D-S*y,V=f*D+S*m+p*R-D*m-S*p-f*R,U=f*v*R+g*D*m+S*p*y-S*v*m-g*p*R-f*D*y;this.transform(B*O,k*O,N*O,V*O,F*O,U*O),this.drawImage(_,t.uv[0]*c,t.uv[1]*d,l,u,t.uv[0]*c,t.uv[1]*d,l,u),this.restore()},e.transformByMatrix=function(t,e,i){this.transform(t.a,t.b,t.c,t.d,t.tx+e,t.ty+i)},e.saveTransform=function(){this.save()},e.restoreTransform=function(){this.restore()},e.drawRect=function(t,e,i,n,r,s,a){var o=this;null!=r&&(o.fillStyle=r,o.fillRect(t,e,i,n)),null!=s&&(o.strokeStyle=s,o.lineWidth=a,o.strokeRect(t,e,i,n))},e.drawTexture=function(t,e,i,n,r){var s=t._getSource();if(s){Li.drawCall++;var a=t.uv,o=t.bitmap.width,h=t.bitmap.height;this.drawImage(s,a[0]*o,a[1]*h,(a[2]-a[0])*o,(a[5]-a[3])*h,e,i,n,r)}},e.drawTextures=function(t,e,i,n){Li.drawCall+=e.length/2;for(var r=t.width,s=t.height,a=0,o=e.length;o>a;a+=2)this.drawTexture(t,e[a]+i,e[a+1]+n,r,s)},e.drawTriangles=function(t,e,i,n,r,s,a){var o=0,h=s.length;for(this.translate(e,i),o=0;h>o;o+=3){var _=2*s[o],l=2*s[o+1],u=2*s[o+2];this.drawTriangle(t,n,r,_,l,u,a,!0)}this.translate(-e,-i)},e.alpha=function(t){this.globalAlpha*=t},e._transform=function(t,e,i){this.translate(e,i),this.transform(t.a,t.b,t.c,t.d,t.tx,t.ty),this.translate(-e,-i)},e._rotate=function(t,e,i){this.translate(e,i),this.rotate(t),this.translate(-e,-i)},e._scale=function(t,e,i,n){this.translate(i,n),this.scale(t,e),this.translate(-i,-n)},e._drawLine=function(t,e,i,n,r,s,a,o){this.beginPath(),this.strokeStyle=a,this.lineWidth=o,this.moveTo(t+i,e+n),this.lineTo(t+r,e+s),this.stroke()},e._drawLines=function(t,e,i,n,r,s){wi.isWebGL&&this.setPathId(s),this.beginPath(),this.strokeStyle=n,this.lineWidth=r;var a=2,o=i.length;if(wi.isWebGL)this.addPath(i.slice(),!1,!1,t,e);else for(this.moveTo(t+i[0],e+i[1]);o>a;)this.lineTo(t+i[a++],e+i[a++]);this.stroke()},e.drawCurves=function(t,e,i,n,r){this.beginPath(),this.strokeStyle=n,this.lineWidth=r,this.moveTo(t+i[0],e+i[1]);for(var s=2,a=i.length;a>s;)this.quadraticCurveTo(t+i[s++],e+i[s++],t+i[s++],e+i[s++]);this.stroke()},e._fillAndStroke=function(t,e,i,n){void 0===n&&(n=!1),null!=t&&(this.fillStyle=t,this.fill()),null!=e&&i>0&&(this.strokeStyle=e,this.lineWidth=i,this.stroke())},e._drawCircle=function(e,i,n,r,s,a){Li.drawCall++,wi.isWebGL?this.beginPath(!0):this.beginPath(),this.arc(e,i,n,0,t.PI2),this.closePath(),this._fillAndStroke(r,s,a)},e._drawPie=function(t,e,i,n,r,s,a,o){this.beginPath(),this.moveTo(t,e),this.arc(t,e,i,n,r),this.closePath(),this._fillAndStroke(s,a,o)},e._drawPoly=function(t,e,i,n,r,s,a,o){var h=2,_=i.length;if(this.beginPath(),wi.isWebGL)this.setPathId(o),this.addPath(i.slice(),!0,a,t,e);else for(this.moveTo(t+i[0],e+i[1]);_>h;)this.lineTo(t+i[h++],e+i[h++]);this.closePath(),this._fillAndStroke(n,r,s,a)},e._drawPath=function(t,e,i,n,r){this.beginPath();for(var s=0,a=i.length;a>s;s++){var o=i[s];switch(o[0]){case"moveTo":this.moveTo(t+o[1],e+o[2]);break;case"lineTo":this.lineTo(t+o[1],e+o[2]);break;case"arcTo":this.arcTo(t+o[1],e+o[2],t+o[3],e+o[4],o[5]);break;case"closePath":this.closePath()}}null!=n&&(this.fillStyle=n.fillStyle,this.fill()),null!=r&&(this.strokeStyle=r.strokeStyle,this.lineWidth=r.lineWidth||1,this.lineJoin=r.lineJoin,this.lineCap=r.lineCap,this.miterLimit=r.miterLimit,this.stroke())},e.drawParticle=function(){},t.__init__=function(t){var e=laya.resource.Context.prototype;if(t=t||CanvasRenderingContext2D.prototype,!t.init2d){t.init2d=!0;var i=["saveTransform","restoreTransform","transformByMatrix","drawTriangles","drawTriangle","drawTextures","fillWords","fillBorderWords","drawRect","strokeWord","drawText","fillTexture","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves","_drawRect","alpha","_transform","_rotate","_scale","_drawLine","_drawLines","_drawCircle","_fillAndStroke","_drawPie","_drawPoly","_drawPath","drawTextureWithTransform"];i.forEach(function(i){t[i]=e[i]})}},t.ENUM_TEXTALIGN_DEFAULT=0,t.ENUM_TEXTALIGN_CENTER=1,t.ENUM_TEXTALIGN_RIGHT=2,t.PI2=2*Math.PI,t}(),O=function(){function t(){}r(t,"laya.display.cmd.FillWordsCmd");var e=t.prototype;return e.recover=function(){this.words=null,Ki.recover("FillWordsCmd",this)},e.run=function(t,e,i){t.fillWords(this.words,this.x+e,this.y+i,this.font,this.color)},s(0,e,"cmdID",function(){return"FillWords"}),t.create=function(e,i,n,r,s){var a=Ki.getItemByClass("FillWordsCmd",t);return a.words=e,a.x=i,a.y=n,a.font=r,a.color=s,a},t.ID="FillWords",t}(),B=function(){function t(){}r(t,"laya.display.cmd.TransformCmd");var e=t.prototype;return e.recover=function(){this.matrix=null,Ki.recover("TransformCmd",this)},e.run=function(t,e,i){t._transform(this.matrix,this.pivotX+e,this.pivotY+i)},s(0,e,"cmdID",function(){return"Transform"}),t.create=function(e,i,n){var r=Ki.getItemByClass("TransformCmd",t);return r.matrix=e,r.pivotX=i,r.pivotY=n,r},t.ID="Transform",t}(),N=function(){function t(t){this._par=null,this._loaded=!0,this.bitmap={},this.bitmap.id=t.id,this._par=t}r(t,"laya.webgl.resource.CharInternalTexture");var e=t.prototype;return e._getSource=function(){return this._par._source},t}(),F=function(){function t(){}r(t,"laya.webgl.resource.ICharRender");var e=t.prototype;return e.getWidth=function(){return 0},e.scale=function(){},e.getCharBmp=function(){return null},t}(),k=function(){function t(){}return r(t,"laya.layagl.ConchPropertyAdpt"),t.rewriteProperties=function(){laya.layagl.ConchPropertyAdpt.rewriteNumProperty(Ge.prototype,"x"),laya.layagl.ConchPropertyAdpt.rewriteNumProperty(Ge.prototype,"y"),laya.layagl.ConchPropertyAdpt.rewriteNumProperty(Ge.prototype,"width"),laya.layagl.ConchPropertyAdpt.rewriteNumProperty(Ge.prototype,"height"),laya.layagl.ConchPropertyAdpt.rewriteFunc(Ge.prototype,"recover")},t.rewriteNumProperty=function(t,e){Object.defineProperty(t,e,{get:function(){return this["_"+e]||0},set:function(t){this["_"+e]=t,this.onPropertyChanged&&this.onPropertyChanged(this)}})},t.rewriteFunc=function(t,e){t["__"+e]=t[e],t[e]=function(){t["__"+e].call(this),this.onPropertyChanged&&(this.onPropertyChanged=null)}},t}(),V=function(){function t(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=0/0,this._http=null}r(t,"laya.net.TTFLoader");var e=t.prototype;return e.load=function(t){this._url=t;var e=t.split(".ttf")[0].split("/");this.fontName=e[e.length-1],wi.isConchApp?this._loadConch():Me.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},e._loadConch=function(){this._http=new cn,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},e._onHttpLoaded=function(t){Me.window.conchTextCanvas.setFontFaceFromBuffer(this.fontName,t),this._clearHttp(),this._complete()},e._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},e._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},e._complete=function(){i.systemTimer.clear(this,this._complete),i.systemTimer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},e._checkComplete=function(){Yi.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},e._loadWithFontFace=function(){var t=new Me.window.FontFace(this.fontName,"url('"+this._url+"')");Me.window.document.fonts.add(t);var e=this;t.loaded.then(function(){e._complete()}),t.load()},e._createDiv=function(){this._div=Me.createElement("div"),this._div.innerHTML="laya";var t=this._div.style;t.fontFamily=this.fontName,t.position="absolute",t.left="-100px",t.top="-100px",Me.document.body.appendChild(this._div)},e._loadWithCSS=function(){var t=this,e=Me.createElement("style");e.type="text/css",Me.document.body.appendChild(e),e.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=Yi.measureText("LayaTTFFont",this._fontTxt).width;var n=this;e.onload=function(){i.systemTimer.once(1e4,n,t._complete)},i.systemTimer.loop(20,this,this._checkComplete),this._createDiv()},t._testString="LayaTTFFont",t}(),U=function(){function t(e,i){if(a.map[e])return this._fun=a.map[e],this._next=t.NORENDER,void 0;switch(this._next=i||t.NORENDER,e){case 0:return this._fun=this._no,void 0;case 1:return this._fun=this._alpha,void 0;case 2:return this._fun=this._transform,void 0;case 4:return this._fun=this._blend,void 0;case 8:return this._fun=this._canvas,void 0;case 32:return this._fun=this._mask,void 0;case 64:return this._fun=this._clip,void 0;case 128:return this._fun=this._style,void 0;case 512:return this._fun=this._graphics,void 0;case 8192:return this._fun=this._children,void 0;case 2048:return this._fun=this._custom,void 0;case 256:return this._fun=this._texture,void 0;case 16:return this._fun=$._filter,void 0;case 69905:return this._fun=t._initRenderFun,void 0}this.onCreate(e)}r(t,"laya.renders.RenderSprite");var e=t.prototype;return e.onCreate=function(){},e._style=function(t,e,i,n){var r=t._style;null!=r.render&&r.render(t,e,i,n);var s=this._next;s._fun.call(s,t,e,i,n)},e._no=function(){},e._custom=function(t,e,i,n){t.customRender(e,i,n),this._next._fun.call(this._next,t,e,i-t.pivotX,n-t.pivotY)},e._clip=function(e,i,n,r){var s=this._next;if(s!=t.NORENDER){var a=e._style.scrollRect;i.save(),i.clipRect(n,r,a.width,a.height),s._fun.call(s,e,i,n-a.x,r-a.y),i.restore()}},e._blend=function(t,e,i,n){var r=t._style;r.blendMode&&(e.globalCompositeOperation=r.blendMode);var s=this._next;s._fun.call(s,t,e,i,n),e.globalCompositeOperation="source-over"},e._mask=function(t,e,i,n){var r=this._next;r._fun.call(r,t,e,i,n);var s=t.mask;s&&(e.globalCompositeOperation="destination-in",(s.numChildren>0||!s.graphics._isOnlyOne())&&(s.cacheAs="bitmap"),s.render(e,i-t._style.pivotX,n-t._style.pivotY)),e.globalCompositeOperation="source-over"},e._texture=function(t,e,i,n){var r=t.texture;r._getSource()&&e.drawTexture(r,i-t.pivotX+r.offsetX,n-t.pivotY+r.offsetY,t._width||r.width,t._height||r.height);var s=this._next;s._fun.call(s,t,e,i,n)},e._graphics=function(t,e,i,n){t._graphics&&t._graphics._render(t,e,i-t.pivotX,n-t.pivotY);var r=this._next;r._fun.call(r,t,e,i,n)},e._image=function(t,e,i,n){var r=t._style;e.drawTexture2(i,n,r.pivotX,r.pivotY,t.transform,t._graphics._one)},e._image2=function(t,e,i,n){var r=t._style;e.drawTexture2(i,n,r.pivotX,r.pivotY,t.transform,t._graphics._one)},e._alpha=function(t,e,i,n){var r,s=t._style;if((r=s.alpha)>.01||t._needRepaint()){var a=e.globalAlpha;e.globalAlpha*=r;var o=this._next;o._fun.call(o,t,e,i,n),e.globalAlpha=a}},e._transform=function(e,i,n,r){{var s=e.transform,a=this._next;e._style}s&&a!=t.NORENDER?(i.save(),i.transform(s.a,s.b,s.c,s.d,s.tx+n,s.ty+r),a._fun.call(a,e,i,0,0),i.restore()):a._fun.call(a,e,i,n,r)
},e._children=function(t,e,i,n){var r,s=t._style,a=t._children,o=a.length;if(i-=t.pivotX,n-=t.pivotY,s.viewport){var h=s.viewport,_=h.x,l=h.y,u=h.right,c=h.bottom,d=0/0,f=0/0;for(p=0;o>p;++p)(r=a[p])._visible&&(d=r._x)<u&&d+r.width>_&&(f=r._y)<c&&f+r.height>l&&r.render(e,i,n)}else for(var p=0;o>p;++p)(r=a[p])._visible&&r.render(e,i,n)},e._canvas=function(t,e,n,r){var s=t._cacheStyle,a=this._next;if(!s.enableCanvasRender)return a._fun.call(a,t,e,n,r),void 0;"bitmap"===s.cacheAs?Li.canvasBitmap++:Li.canvasNormal++;var o=!1,h=!1;if(wi.isWebGL&&s.canvas){var _=s.canvas,l=(_.context,_.touches);if(l)for(var u=0;u<l.length;u++)if(l[u].deleted){h=!0;break}o=_.isCacheValid&&!_.isCacheValid()}if(t._needRepaint()||!s.canvas||h||o||i.stage.isGlobalRepaint())if(wi.isWebGL&&"normal"===s.cacheAs){if(e._targets)return a._fun.call(a,t,e,n,r),void 0;this._canvas_webgl_normal_repaint(t,e)}else this._canvas_repaint(t,e,n,r);var c=s.cacheRect;e.drawCanvas(s.canvas,n+c.x,r+c.y,c.width,c.height)},e._canvas_repaint=function(t,e,i,n){var r,s,a,o,h,_,l,u,c,d=t._cacheStyle,f=this._next,p=d.canvas,m=d.cacheAs;if(c=d._calculateCacheRect(t,m,i,n),l=c.x,u=c.y,o=d.cacheRect,h=o.width*l,_=o.height*u,s=o.x,a=o.y,wi.isWebGL&&"bitmap"===m&&(h>2048||_>2048))return console.warn("cache bitmap size larger than 2048,cache ignored"),d.releaseContext(),f._fun.call(f,t,e,i,n),void 0;if(p||(d.createContext(),p=d.canvas),r=p.context,r.sprite=t,(p.width!=h||p.height!=_)&&p.size(h,_),"bitmap"===m?r.asBitmap=!0:"normal"===m&&(r.asBitmap=!1),r.clear(),1!=l||1!=u){var g=r;g.save(),g.scale(l,u),f._fun.call(f,t,r,-s,-a),g.restore(),t._applyFilters()}else g=r,f._fun.call(f,t,r,-s,-a),t._applyFilters();d.staticCache&&(d.reCache=!1),Li.canvasReCache++},e._canvas_webgl_normal_repaint=function(t,e){{var n=t._cacheStyle,r=this._next,s=n.canvas,a=n.cacheAs;n._calculateCacheRect(t,a,0,0)}s||(s=n.canvas=new i.WebGLCacheAsNormalCanvas(e,t));var o=s.context;s.startRec(),r._fun.call(r,t,o,t.pivotX,t.pivotY),t._applyFilters(),Li.canvasReCache++,s.endRec()},t.__init__=function(){a.__init__();var e,i=0,n=0;for(e=Yi.createRenderSprite(69905,null),n=t.renders.length=16384,i=0;n>i;i++)t.renders[i]=e;t.renders[0]=Yi.createRenderSprite(0,null)},t._initRenderFun=function(e,i,n,r){var s=e._renderType,a=t.renders[s]=t._getTypeRender(s);a._fun(e,i,n,r)},t._getTypeRender=function(t){if(a.map[t])return Yi.createRenderSprite(t,null);for(var e=null,i=8192;i>0;)i&t&&(e=Yi.createRenderSprite(i,e)),i>>=1;return e},t.INIT=69905,t.renders=[],t.NORENDER=new t(0,null),t}(),W=function(){function t(){this._creates(),this.reset()}r(t,"laya.html.dom.HTMLElement");var e=t.prototype;return e._creates=function(){this._style=Gi.create()},e.reset=function(){if(this.URI=null,this.parent=null,this._style.reset(),this._style.ower=this,this._style.valign="middle",this._text&&this._text.words){var e=this._text.words,i=0,n=0;n=e.length;var r;for(i=0;n>i;i++)r=e[i],r&&r.recover()}return this._text=t._EMPTYTEXT,this._children&&(this._children.length=0),this._x=this._y=this._width=this._height=0,this},e._getCSSStyle=function(){return this._style},e._addChildsToLayout=function(t){var e=this._getWords();if(null==e&&(!this._children||0==this._children.length))return!1;if(e)for(var i=0,n=e.length;n>i;i++)t.push(e[i]);return this._children&&this._children.forEach(function(e){var i=e._style;i._enableLayout&&i._enableLayout()&&e._addToLayout(t)}),!0},e._addToLayout=function(t){if(this._style){var e=this._style;e.absolute||(e.block?t.push(this):this._addChildsToLayout(t)&&(this.x=this.y=0))}},e.repaint=function(t){void 0===t&&(t=!1),this.parentRepaint(t)},e.parentRepaint=function(t){void 0===t&&(t=!1),this.parent&&this.parent.repaint(t)},e._setParent=function(t){if(t instanceof laya.html.dom.HTMLElement){var e=t;this.URI||(this.URI=e.URI),this.style&&this.style.inherit(e.style)}},e.appendChild=function(t){return this.addChild(t)},e.addChild=function(t){return t.parent&&t.parent.removeChild(t),this._children||(this._children=[]),this._children.push(t),t.parent=this,t._setParent(this),this.repaint(),t},e.removeChild=function(t){if(!this._children)return null;var e=0,i=0;for(i=this._children.length,e=0;i>e;e++)if(this._children[e]==t)return this._children.splice(e,1),t;return null},e.destroy=function(){this._children&&(this.destroyChildren(),this._children.length=0),Ki.recover(t.getClassName(this),this.reset())},e.destroyChildren=function(){if(this._children){for(var t=this._children.length-1;t>-1;t--)this._children[t].destroy();this._children.length=0}},e._getWords=function(){if(!this._text)return null;var t=this._text.text;if(!t||0===t.length)return null;var e=this._text.words;if(e&&e.length===t.length)return e;null===e&&(this._text.words=e=[]),e.length=t.length;for(var i,n=this.style,r=n.font,s=0,a=t.length;a>s;s++)i=Q.measureText(t.charAt(s),r),e[s]=tn.create().setData(t.charAt(s),i.width,i.height||n.fontSize,n);return e},e._isChar=function(){return!1},e._layoutLater=function(){var t=this.style;512&t._type||(t.widthed(this)&&(this._children&&this._children.length>0||null!=this._getWords())&&t.block?(de.later(this),t._type|=512):this.parent&&this.parent._layoutLater())},e._setAttributes=function(t,e){switch(t){case"style":this.style.cssText(e);break;case"class":this.className=e;break;case"x":this.x=parseFloat(e);break;case"y":this.y=parseFloat(e);break;case"width":this.width=parseFloat(e);break;case"height":this.height=parseFloat(e);break;default:this[t]=e}},e.formatURL=function(e){return this.URI?t.formatURL1(e,this.URI?this.URI.path:null):e},e.drawToGraphic=function(t,e,i,n){e+=this.x,i+=this.y;var r=this.style;r.paddingLeft&&(e+=r.paddingLeft),r.paddingTop&&(i+=r.paddingTop),(null!=r.bgColor||r.borderColor)&&t.drawRect(e,i,this.width,this.height,r.bgColor,r.borderColor,1),this.renderSelfToGraphic(t,e,i,n);var s,a=0,o=0;if(this._children&&this._children.length>0)for(o=this._children.length,a=0;o>a;a++)s=this._children[a],null!=s.drawToGraphic&&s.drawToGraphic(t,e,i,n)},e.renderSelfToGraphic=function(t,e,i,n){var r=this.style,s=this._getWords(),a=0;if(s){a=s.length;if(r){var o=r.font,h=r.color;if(r.stroke){var _=r.stroke;_=parseInt(_);var l=r.strokeColor;t.fillBorderWords(s,e,i,o,h,l,_)}else t.fillWords(s,e,i,o,h);if(this.href){var u=s.length-1,c=s[u],d=c.y+c.height;"none"!=r.textDecoration&&t.drawLine(s[0].x,d,c.x+c.width,d,h,1);var f=Ze.create();f.rec.setTo(s[0].x,c.y,c.x+c.width-s[0].x,c.height),f.href=this.href,n.push(f)}}}},s(0,e,"href",function(){return this._style?this._style.href:null},function(t){this._style&&t!=this._style.href&&(this._style.href=t,this.repaint())}),s(0,e,"color",null,function(t){this.style.color=t}),s(0,e,"id",null,function(t){X.document.setElementById(t,this)}),s(0,e,"innerTEXT",function(){return this._text.text},function(e){this._text===t._EMPTYTEXT?this._text={text:e,words:null}:(this._text.text=e,this._text.words&&(this._text.words.length=0)),this.repaint()}),s(0,e,"style",function(){return this._style}),s(0,e,"width",function(){return this._width},function(t){this._width!==t&&(this._width=t,this.repaint())}),s(0,e,"x",function(){return this._x},function(t){this._x!=t&&(this._x=t,this.parentRepaint())}),s(0,e,"y",function(){return this._y},function(t){this._y!=t&&(this._y=t,this.parentRepaint())}),s(0,e,"height",function(){return this._height},function(t){this._height!==t&&(this._height=t,this.repaint())}),s(0,e,"className",null,function(t){this.style.attrs(X.document.styleSheets["."+t])}),t.formatURL1=function(t,e){if(!t)return"null path";if(e||(e=Pi.basePath),t.indexOf(":")>0)return t;if(null!=Pi.customFormat&&(t=Pi.customFormat(t)),t.indexOf(":")>0)return t;var i=t.charAt(0);if("."===i)return Pi._formatRelativePath(e+t);if("~"===i)return Pi.rootPath+t.substring(1);if("d"===i){if(0===t.indexOf("data:image"))return t}else if("/"===i)return t;return e+t},t.getClassName=function(t){return"function"==typeof t?t.name:t.constructor.name},t._EMPTYTEXT={text:null,words:null},t}(),G=function(){function t(){this.reset()}r(t,"laya.html.utils.HTMLExtendStyle");var e=t.prototype;return e.reset=function(){return this.stroke=0,this.strokeColor="#000000",this.leading=0,this.lineHeight=0,this.letterSpacing=0,this.href=null,this},e.recover=function(){this!=t.EMPTY&&Ki.recover("HTMLExtendStyle",this.reset())},t.create=function(){return Ki.getItemByClass("HTMLExtendStyle",t)},t.EMPTY=new t,t}(),X=function(){function t(){this.all=new Array,this.styleSheets=Gi.styleSheets}r(t,"laya.html.dom.HTMLDocument");var e=t.prototype;return e.getElementById=function(t){return this.all[t]},e.setElementById=function(t,e){this.all[t]=e},n(t,["document",function(){return this.document=new t}]),t}(),z=function(){function t(t){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=t;for(var e=0,i=0,n=0;;){if(e=t.indexOf("#begin",e),0>e)break;for(n=e+5;;){if(n=t.indexOf("#end",n),0>n)break;if("i"!==t.charAt(n+4))break;n+=5}if(0>n)throw"add include err,no #end:"+t;i=t.indexOf("\n",e);var r=_e.splitToWords(t.substr(e,i-e),null);"code"==r[1]?this.codes[r[2]]=t.substr(i+1,n-i-1):"function"==r[1]&&(i=t.indexOf("function",e),i+="function".length,this.funs[r[3]]=t.substr(i+1,n-i-1),this.funnames+=r[3]+";"),e=n+1}}r(t,"laya.webgl.utils.InlcudeFile");var e=t.prototype;return e.getWith=function(t){var e=t?this.codes[t]:this.script;if(!e)throw"get with error:"+t;return e},e.getFunsScript=function(t){var e="";for(var i in this.funs)t.indexOf(i+";")>=0&&(e+=this.funs[i]);return e},t}(),H=(function(){function t(){}return r(t,"laya.Const"),t.NOT_ACTIVE=1,t.ACTIVE_INHIERARCHY=2,t.AWAKED=4,t.NOT_READY=8,t.DISPLAY=16,t.HAS_ZORDER=32,t.HAS_MOUSE=64,t.DISPLAYED_INSTAGE=128,t}(),function(){function t(t,e,i){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=t,this._vb=new Vr(t,35048),e?this._vb._resizeBuffer(e,!1):Di.webGL2D_MeshAllocMaxMem&&this._vb._resizeBuffer(65536*t,!1),this._ib=new Ur,i&&this._ib._resizeBuffer(i,!1)}r(t,"laya.webgl.utils.Mesh2D");var e=t.prototype;return e.cloneWithNewVB=function(){var e=new t(this._stride,0,0);return e._ib=this._ib,e._quadNum=this._quadNum,e._attribInfo=this._attribInfo,e},e.cloneWithNewVBIB=function(){var e=new t(this._stride,0,0);return e._attribInfo=this._attribInfo,e},e.getVBW=function(){return this._vb.setNeedUpload(),this._vb},e.getVBR=function(){return this._vb},e.getIBR=function(){return this._ib},e.getIBW=function(){return this._ib.setNeedUpload(),this._ib},e.createQuadIB=function(t){this._quadNum=t,this._ib._resizeBuffer(6*t*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var e=this._ib.getUint16Array(),i=0,n=0,r=0;t>r;r++)e[i++]=n,e[i++]=n+2,e[i++]=n+1,e[i++]=n,e[i++]=n+3,e[i++]=n+2,n+=4;this._ib.setNeedUpload()},e.setAttributes=function(t){if(this._attribInfo=t,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},e.configVAO=function(t){if(!this._applied){this._applied=!0,this._vao||(this._vao=new Ln),this._vao.bind(),this._vb._bindForVAO(),this._ib.setNeedUpload(),this._ib._bind_uploadForVAO();for(var e=this._attribInfo.length/3,i=0,n=0;e>n;n++){var r=this._attribInfo[i+1],s=this._attribInfo[i],a=this._attribInfo[i+2];t.enableVertexAttribArray(n),t.vertexAttribPointer(n,r,s,!1,this._stride,a),i+=3}this._vao.unBind()}},e.useMesh=function(t){this._applied||this.configVAO(t),this._vao.bind(),this._vb.bind(),this._ib._bind_upload()||this._ib.bind(),this._vb._bind_upload()||this._vb.bind()},e.getEleNum=function(){return this._ib.getBuffer().byteLength/2},e.releaseMesh=function(){},e.destroy=function(){},e.clearVB=function(){this._vb.clear()},t._gvaoid=0,t}()),Y=function(){function t(){}return r(t,"laya.maths.GrahamScan"),t.multiply=function(t,e,i){return(t.x-i.x)*(e.y-i.y)-(e.x-i.x)*(t.y-i.y)},t.dis=function(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)},t._getPoints=function(e,i,n){for(void 0===i&&(i=!1),t._mPointList||(t._mPointList=[]);t._mPointList.length<e;)t._mPointList.push(new Zi);return n||(n=[]),n.length=0,i?t.getFrom(n,t._mPointList,e):t.getFromR(n,t._mPointList,e),n},t.getFrom=function(t,e,i){var n=0;for(n=0;i>n;n++)t.push(e[n]);return t},t.getFromR=function(t,e,i){var n=0;for(n=0;i>n;n++)t.push(e.pop());return t},t.pListToPointList=function(e,i){void 0===i&&(i=!1);var n=0,r=e.length/2,s=t._getPoints(r,i,t._tempPointList);for(n=0;r>n;n++)s[n].setTo(e[n+n],e[n+n+1]);return s},t.pointListToPlist=function(e){var i,n=0,r=e.length,s=t._temPList;for(s.length=0,n=0;r>n;n++)i=e[n],s.push(i.x,i.y);return s},t.scanPList=function(e){return Q.copyArray(e,t.pointListToPlist(t.scan(t.pListToPointList(e,!0))))},t.scan=function(e){var i,n,r,s=0,a=0,o=0,h=e.length,_={};for(n=t._temArr,n.length=0,h=e.length,s=h-1;s>=0;s--)i=e[s],r=i.x+"_"+i.y,_.hasOwnProperty(r)||(_[r]=!0,n.push(i));for(h=n.length,Q.copyArray(e,n),s=1;h>s;s++)(e[s].y<e[o].y||e[s].y==e[o].y&&e[s].x<e[o].x)&&(o=s);for(i=e[0],e[0]=e[o],e[o]=i,s=1;h-1>s;s++){for(o=s,a=s+1;h>a;a++)(t.multiply(e[a],e[o],e[0])>0||0==t.multiply(e[a],e[o],e[0])&&t.dis(e[0],e[a])<t.dis(e[0],e[o]))&&(o=a);i=e[s],e[s]=e[o],e[o]=i}if(n=t._temArr,n.length=0,e.length<3)return Q.copyArray(n,e);for(n.push(e[0],e[1],e[2]),s=3;h>s;s++){for(;n.length>=2&&t.multiply(e[s],n[n.length-1],n[n.length-2])>=0;)n.pop();e[s]&&n.push(e[s])}return n},t._mPointList=null,t._tempPointList=[],t._temPList=[],t._temArr=[],t}(),j=function(){function t(e){this.clipInfoID=-1,this._numEle=0,this._ref=1,this._key=new He,void 0===e&&(e=1e4),this._renderType=e,this._id=++t.ID}r(t,"laya.webgl.submit.Submit");var e=t.prototype;return i.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.getID=function(){return this._id},e.releaseRender=function(){t.RENDERBASE!=this&&--this._ref<1&&(t.POOL[t._poolSize++]=this,this.shaderValue.release(),this.shaderValue=null,this._mesh=null,this._parent&&(this._parent.releaseRender(),this._parent=null))},e.getRenderType=function(){return this._renderType},e.renderSubmit=function(){if(0===this._numEle||!this._mesh||0==this._numEle)return 1;var t=this.shaderValue.textureHost;if(t){var e=t._getSource();if(!e)return 1;this.shaderValue.texture=e}var i=Ii.mainContext;return this._mesh.useMesh(i),this.shaderValue.upload(),ue.activeBlendFunction!==this._blendFn&&(me.setBlend(i,!0),this._blendFn(i),ue.activeBlendFunction=this._blendFn),i.drawElements(4,this._numEle,5123,this._startIdx),Li.drawCall++,Li.trianglesFaces+=this._numEle/3,1},e._cloneInit=function(t,e,i,n){t._ref=1,t._mesh=i,t._id=this._id,t._key.copyFrom(this._key),t._parent=this,t._blendFn=this._blendFn,t._renderType=this._renderType,t._startIdx=n*be.BYTES_PIDX,t._numEle=this._numEle,t.shaderValue=this.shaderValue,this.shaderValue.ref++,this._ref++},e.clone=function(){return null},e.reUse=function(){return 0},e.toString=function(){return"ibindex:"+this._startIdx+" num:"+this._numEle+" key="+this._key},t.__init__=function(){var e=t.RENDERBASE=new t(-1);e.shaderValue=new di(0,0),e.shaderValue.ALPHA=1,e._ref=4294967295},t.create=function(e,i,n){var r=t._poolSize?t.POOL[--t._poolSize]:new t;r._ref=1,r._mesh=i,r._key.clear(),r._startIdx=i.indexNum*be.BYTES_PIDX,r._numEle=0;var s=e._nBlendType;r._blendFn=e._targets?ue.targetFns[s]:ue.fns[s],r.shaderValue=n,r.shaderValue.setValue(e._shader2D);var a=e._shader2D.filters;return a&&r.shaderValue.setFilters(a),r},t.createShape=function(e,i,n,r){var s=t._poolSize?t.POOL[--t._poolSize]:new t;s._mesh=i,s._numEle=n,s._startIdx=2*i.indexNum,s._ref=1,s.shaderValue=r,s.shaderValue.setValue(e._shader2D);var a=e._nBlendType;return s._blendFn=e._targets?ue.targetFns[a]:ue.fns[a],s},t.TYPE_2D=1e4,t.TYPE_CANVAS=10003,t.TYPE_CMDSETRT=10004,t.TYPE_CUSTOM=10005,t.TYPE_BLURRT=10006,t.TYPE_CMDDESTORYPRERT=10007,t.TYPE_DISABLESTENCIL=10008,t.TYPE_OTHERIBVB=10009,t.TYPE_PRIMITIVE=10010,t.TYPE_RT=10011,t.TYPE_BLUR_RT=10012,t.TYPE_TARGET=10013,t.TYPE_CHANGE_VALUE=10014,t.TYPE_SHAPE=10015,t.TYPE_TEXTURE=10016,t.TYPE_FILLTEXTURE=10017,t.KEY_ONCE=-1,t.KEY_FILLRECT=1,t.KEY_DRAWTEXTURE=2,t.KEY_VG=3,t.KEY_TRIANGLES=4,t.RENDERBASE=null,t.ID=1,t.preRender=null,t._poolSize=0,t.POOL=[],t}(),Z=function(){function t(){}r(t,"laya.display.cmd.DrawCurvesCmd");var e=t.prototype;return e.recover=function(){this.points=null,this.lineColor=null,Ki.recover("DrawCurvesCmd",this)},e.run=function(t,e,i){t.drawCurves(this.x+e,this.y+i,this.points,this.lineColor,this.lineWidth)},s(0,e,"cmdID",function(){return"DrawCurves"}),t.create=function(e,i,n,r,s){var a=Ki.getItemByClass("DrawCurvesCmd",t);return a.x=e,a.y=i,a.points=n,a.lineColor=r,a.lineWidth=s,a},t.ID="DrawCurves",t}(),K=function(){function t(){}return r(t,"laya.utils.Mouse"),s(1,t,"cursor",function(){return t._style.cursor},function(e){t._style.cursor=e}),t.hide=function(){"none"!=t.cursor&&(t._preCursor=t.cursor,t.cursor="none")},t.show=function(){"none"==t.cursor&&(t.cursor=t._preCursor?t._preCursor:"auto")},t._preCursor=null,n(t,["_style",function(){return this._style=Me.document.body.style}]),t}(),$=function(){function t(){this._action=null,this._glRender=null}r(t,"laya.filters.Filter");var e=t.prototype;return i.imps(e,{"laya.filters.IFilter":!0}),s(0,e,"type",function(){return-1}),t.BLUR=16,t.COLOR=32,t.GLOW=8,t._filter=null,t._recycleScope=null,t}(),q=function(){function t(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new ee}r(t,"laya.events.TouchManager");var e=t.prototype;return e._clearTempArrs=function(){t._oldArr.length=0,t._newArr.length=0,t._tEleArr.length=0},e.getTouchFromArr=function(t,e){var i=0,n=0;n=e.length;var r;for(i=0;n>i;i++)if(r=e[i],r.id==t)return r;return null},e.removeTouchFromArr=function(t,e){var i=0;for(i=e.length-1;i>=0;i--)e[i].id==t&&e.splice(i,1)},e.createTouchO=function(t,e){var i;return i=Ki.getItem("TouchData")||{},i.id=e,i.tar=t,i},e.onMouseDown=function(e,i,n){if(void 0===n&&(n=!1),this.enable){var r,s,a;r=this.getTouchFromArr(i,this.preOvers),a=this.getEles(e,null,t._tEleArr),r?r.tar=e:(s=this.createTouchO(e,i),this.preOvers.push(s)),Me.onMobile&&this.sendEvents(a,"mouseover");var o;o=n?this.preDowns:this.preRightDowns,r=this.getTouchFromArr(i,o),r?r.tar=e:(s=this.createTouchO(e,i),o.push(s)),this.sendEvents(a,n?"mousedown":"rightmousedown"),this._clearTempArrs()}},e.sendEvents=function(t,e){var i=0,n=0;n=t.length,this._event._stoped=!1;var r;r=t[0];var s;for(i=0;n>i;i++){if(s=t[i],s.destroyed)return;if(s.event(e,this._event.setTo(e,s,r)),this._event._stoped)break}},e.getEles=function(t,e,i){for(i?i.length=0:i=[];t&&t!=e;)i.push(t),t=t.parent;return i},e.checkMouseOutAndOverOfMove=function(e,i,n){if(void 0===n&&(n=0),i!=e){var r,s,a=0,o=0;if(i.contains(e))s=this.getEles(e,i,t._tEleArr),this.sendEvents(s,"mouseover");else if(e.contains(i))s=this.getEles(i,e,t._tEleArr),this.sendEvents(s,"mouseout");else{s=t._tEleArr,s.length=0;var h;h=this.getEles(i,null,t._oldArr);var _;_=this.getEles(e,null,t._newArr),o=h.length;var l=0;for(a=0;o>a;a++){if(r=h[a],l=_.indexOf(r),l>=0){_.splice(l,_.length-l);break}s.push(r)}s.length>0&&this.sendEvents(s,"mouseout"),_.length>0&&this.sendEvents(_,"mouseover")}}},e.onMouseMove=function(e,i){if(this.enable){var n;n=this.getTouchFromArr(i,this.preOvers);var r;n?(this.checkMouseOutAndOverOfMove(e,n.tar),n.tar=e,r=this.getEles(e,null,t._tEleArr)):(r=this.getEles(e,null,t._tEleArr),this.sendEvents(r,"mouseover"),this.preOvers.push(this.createTouchO(e,i))),this.sendEvents(r,"mousemove"),this._clearTempArrs()}},e.getLastOvers=function(){return t._tEleArr.length=0,this.preOvers.length>0&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,t._tEleArr):(t._tEleArr.push(i.stage),t._tEleArr)},e.stageMouseOut=function(){var t;t=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(t,"mouseout")},e.onMouseUp=function(e,i,n){if(void 0===n&&(n=!1),this.enable){var r,s,a,o,h,_=0,l=0,u=Me.onMobile;s=this.getEles(e,null,t._tEleArr),this.sendEvents(s,n?"mouseup":"rightmouseup");var c;if(c=n?this.preDowns:this.preRightDowns,r=this.getTouchFromArr(i,c)){var d=!1,f=Me.now();if(d=f-this._lastClickTime<300,this._lastClickTime=f,e==r.tar)h=s;else for(a=this.getEles(r.tar,null,t._oldArr),h=t._newArr,h.length=0,l=a.length,_=0;l>_;_++)o=a[_],s.indexOf(o)>=0&&h.push(o);h.length>0&&this.sendEvents(h,n?"click":"rightclick"),n&&d&&this.sendEvents(h,"doubleclick"),this.removeTouchFromArr(i,c),r.tar=null,Ki.recover("TouchData",r)}else;r=this.getTouchFromArr(i,this.preOvers),r&&u&&(h=this.getEles(r.tar,null,h),h&&h.length>0&&this.sendEvents(h,"mouseout"),this.removeTouchFromArr(i,this.preOvers),r.tar=null,Ki.recover("TouchData",r)),this._clearTempArrs()}},t._oldArr=[],t._newArr=[],t._tEleArr=[],n(t,["I",function(){return this.I=new t}]),t}(),Q=function(){function e(){}return r(e,"laya.utils.Utils"),e.toRadian=function(t){return t*e._pi2},e.toAngle=function(t){return t*e._pi},e.toHexColor=function(t){if(0>t||isNaN(t))return null;for(var e=t.toString(16);e.length<6;)e="0"+e;return"#"+e},e.getGID=function(){return e._gid++},e.concatArray=function(t,e){if(!e)return t;if(!t)return e;var i=0,n=e.length;for(i=0;n>i;i++)t.push(e[i]);return t},e.clearArray=function(t){return t?(t.length=0,t):t},e.copyArray=function(t,e){if(t||(t=[]),!e)return t;t.length=e.length;var i=0,n=e.length;for(i=0;n>i;i++)t[i]=e[i];return t},e.getGlobalRecByPoints=function(t,e,i,n,r){var s;s=Zi.create().setTo(e,i),s=t.localToGlobal(s);var a;a=Zi.create().setTo(n,r),a=t.localToGlobal(a);var o=Ge._getWrapRec([s.x,s.y,a.x,a.y]);return s.recover(),a.recover(),o},e.getGlobalPosAndScale=function(t){return e.getGlobalRecByPoints(t,0,0,1,1)},e.bind=function(t,e){var i=t;return i=t.bind(e)},e.measureText=function(t,e){return Yi.measureText(t,e)},e.updateOrder=function(t){if(!t||t.length<2)return!1;for(var e,i=1,n=0,r=t.length,s=0/0;r>i;){for(n=i,e=t[n],s=t[n]._zOrder;--n>-1&&t[n]._zOrder>s;)t[n+1]=t[n];t[n+1]=e,i++}return!0},e.transPointList=function(t,e,i){var n=0,r=t.length;for(n=0;r>n;n+=2)t[n]+=e,t[n+1]+=i},e.parseInt=function(t,e){void 0===e&&(e=0);var i=Me.window.parseInt(t,e);return isNaN(i)?0:i},e.getFileExtension=function(t){e._extReg.lastIndex=t.lastIndexOf(".");var i=e._extReg.exec(t);return i&&i.length>1?i[1].toLowerCase():null},e.getTransformRelativeToWindow=function(t,e,n){var r=i.stage,s=laya.utils.Utils.getGlobalPosAndScale(t),a=r._canvasTransform.clone(),o=a.tx,h=a.ty;a.rotate(-Math.PI/180*i.stage.canvasDegree),a.scale(i.stage.clientScaleX,i.stage.clientScaleY);var _=i.stage.canvasDegree%180!=0,l=0/0,u=0/0;_?(l=n+s.y,u=e+s.x,l*=a.d,u*=a.a,90==i.stage.canvasDegree?(l=o-l,u+=h):(l+=o,u=h-u)):(l=e+s.x,u=n+s.y,l*=a.a,u*=a.d,l+=o,u+=h),u+=i.stage._safariOffsetY;var c=0/0,d=0/0;return _?(c=a.d*s.height,d=a.a*s.width):(c=a.a*s.width,d=a.d*s.height),{x:l,y:u,scaleX:c,scaleY:d}},e.fitDOMElementInArea=function(t,n,r,s,a,o){t._fitLayaAirInitialized||(t._fitLayaAirInitialized=!0,t.style.transformOrigin=t.style.webKittransformOrigin="left top",t.style.position="absolute");var h=e.getTransformRelativeToWindow(n,r,s);t.style.transform=t.style.webkitTransform="scale("+h.scaleX+","+h.scaleY+") rotate("+i.stage.canvasDegree+"deg)",t.style.width=a+"px",t.style.height=o+"px",t.style.left=h.x+"px",t.style.top=h.y+"px"},e.isOkTextureList=function(t){if(!t)return!1;var e,i=0,n=t.length;for(i=0;n>i;i++)if(e=t[i],!e||!e._getSource())return!1;return!0},e.isOKCmdList=function(t){if(!t)return!1;var e,i=0,n=t.length;for(i=0;n>i;i++)e=t[i];return!0},e.getQueryString=function(e){if(Me.onMiniGame)return null;var i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=t.location.search.substr(1).match(i);return null!=n?unescape(n[2]):null},e._gid=1,e._pi=180/Math.PI,e._pi2=Math.PI/180,e._extReg=/\.(\w+)\??/g,e.parseXMLFromString=function(t){var e;if(t=t.replace(/>\s+</g,"><"),e=(new DOMParser).parseFromString(t,"text/xml"),e.firstChild.textContent.indexOf("This page contains the following errors")>-1)throw new Error(e.firstChild.firstChild.textContent);return e},e}(),J=function(){function t(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}r(t,"laya.display.BitmapFont");var e=t.prototype;return e.loadFont=function(t,e){return this._path=t,this._complete=e,t&&-1!==t.indexOf(".fnt")?(i.loader.load([{url:t,type:"xml"},{url:t.replace(".fnt",".png"),type:"image"}],l.create(this,this._onLoaded)),void 0):(console.error('Bitmap font configuration information must be a ".fnt" file'),void 0)},e._onLoaded=function(){this.parseFont(hn.getRes(this._path),hn.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.run()},e.parseFont=function(t,e){if(null!=t&&null!=e){this._texture=e;var i=1,n=t.getElementsByTagName("info");if(!n[0].getAttributeNode)return this.parseFont2(t,e);this.fontSize=parseInt(n[0].getAttributeNode("size").nodeValue);var r=n[0].getAttributeNode("padding").nodeValue,s=r.split(",");this._padding=[parseInt(s[0]),parseInt(s[1]),parseInt(s[2]),parseInt(s[3])];var a;a=t.getElementsByTagName("char");var o=0;for(o=0;o<a.length;o++){var h=a[o],_=parseInt(h.getAttributeNode("id").nodeValue),l=parseInt(h.getAttributeNode("xoffset").nodeValue)/i,u=parseInt(h.getAttributeNode("yoffset").nodeValue)/i,c=parseInt(h.getAttributeNode("xadvance").nodeValue)/i,d=new Ge;d.x=parseInt(h.getAttributeNode("x").nodeValue),d.y=parseInt(h.getAttributeNode("y").nodeValue),d.width=parseInt(h.getAttributeNode("width").nodeValue),d.height=parseInt(h.getAttributeNode("height").nodeValue);var f=on.create(e,d.x,d.y,d.width,d.height,l,u);this._maxWidth=Math.max(this._maxWidth,c+this.letterSpacing),this._fontCharDic[_]=f,this._fontWidthMap[_]=c}}},e.parseFont2=function(t,e){if(null!=t&&null!=e){this._texture=e;var i=1,n=t.getElementsByTagName("info");this.fontSize=parseInt(n[0].attributes.size.nodeValue);var r=n[0].attributes.padding.nodeValue,s=r.split(",");this._padding=[parseInt(s[0]),parseInt(s[1]),parseInt(s[2]),parseInt(s[3])];var a=t.getElementsByTagName("char"),o=0;for(o=0;o<a.length;o++){var h=a[o].attributes,_=parseInt(h.id.nodeValue),l=parseInt(h.xoffset.nodeValue)/i,u=parseInt(h.yoffset.nodeValue)/i,c=parseInt(h.xadvance.nodeValue)/i,d=new Ge;d.x=parseInt(h.x.nodeValue),d.y=parseInt(h.y.nodeValue),d.width=parseInt(h.width.nodeValue),d.height=parseInt(h.height.nodeValue);var f=on.create(e,d.x,d.y,d.width,d.height,l,u);this._maxWidth=Math.max(this._maxWidth,c+this.letterSpacing),this._fontCharDic[_]=f,this._fontWidthMap[_]=c}}},e.getCharTexture=function(t){return this._fontCharDic[t.charCodeAt(0)]},e.destroy=function(){if(this._texture){for(var t in this._fontCharDic){var e=this._fontCharDic[t];e&&e.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null,this._complete=null,this._padding=null}},e.setSpaceWidth=function(t){this._spaceWidth=t},e.getCharWidth=function(t){var e=t.charCodeAt(0);return this._fontWidthMap[e]?this._fontWidthMap[e]+this.letterSpacing:" "===t?this._spaceWidth+this.letterSpacing:0},e.getTextWidth=function(t){for(var e=0,i=0,n=t.length;n>i;i++)e+=this.getCharWidth(t.charAt(i));return e},e.getMaxWidth=function(){return this._maxWidth},e.getMaxHeight=function(){return this.fontSize},e._drawText=function(t,e,i,n,r,s){var a,o=this.getTextWidth(t),h=0;"center"===r&&(h=(s-o)/2),"right"===r&&(h=s-o);for(var _=0,l=0,u=t.length;u>l;l++)a=this.getCharTexture(t.charAt(l)),a&&(e.graphics.drawImage(a,i+_+h,n),_+=this.getCharWidth(t.charAt(l)))},t}(),te=function(){function t(){}return r(t,"laya.layagl.ConchCmdReplace"),t.__init__=function(){var t,e=laya.display.cmd,i=laya.layagl.cmdNative;for(t in e)i[t+"Native"]&&(e[t].create=i[t+"Native"].create)},t}(),ee=(function(){function t(){this._draw_texture_cmd_encoder_=Le.instance.createCommandEncoder(64,32,!0)}r(t,"laya.layagl.cmdNative.FillWordsCmdNative");var e=t.prototype;return e.createFillText=function(e,i,n,r,s,a){var h=o.create(a),_=(h.numColor,{});_._curMat=new ui,_._italicDeg=0,_._drawTextureUseColor=4294967295,_.fillStyle=a,_._fillColor=4294967295,_.setFillColor=function(t){_._fillColor=t},_.getFillColor=function(){return _._fillColor},_.mixRGBandAlpha=function(t){return t},_._drawTextureM=function(t,i,n,r,s,a,o,h){e.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),e.useProgramEx(se.PROGRAMEX_DRAWTEXTURE),e.useVDO(se.VDO_MESHQUADTEXTURE),e.uniformEx(se.GLOBALVALUE_VIEWS,0),e.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),e.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),e.uniformTexture(3,33984,t.bitmap._glTexture);var _=new Float32Array([i,n,h[0],h[1],0,0,i+r,n,h[2],h[3],0,0,i+r,n+s,h[4],h[5],0,0,i,n+s,h[6],h[7],0,0]),l=new Int32Array(_.buffer);l[4]=l[10]=l[16]=l[22]=4294967295,l[5]=l[11]=l[17]=l[23]=4294967295,e.setRectMesh(1,_,_.length),e.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),e.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(e)},t.cbook.filltext_native(_,null,i,n,r,s,a,null,0,null)},e.recover=function(){this._graphicsCmdEncoder=null,this.words=null,Ki.recover("FillWordsCmd",this)},s(0,e,"cmdID",function(){return"FillWords"}),t.create=function(e,i,n,r,s){t.cbook||new Error("Error:charbook not create!");var a=Ki.getItemByClass("FillWordsCmd",t),o=a._graphicsCmdEncoder=this._commandEncoder;return a.words=e,a.x=i,a.y=n,a.font=r,a.color=s,a._draw_texture_cmd_encoder_.clearEncoding(),a.createFillText(a._draw_texture_cmd_encoder_,e,i,n,r,s),Le.syncBufferToRenderThread(a._draw_texture_cmd_encoder_),o.useCommandEncoder(a._draw_texture_cmd_encoder_.getPtrID(),-1,-1),Le.syncBufferToRenderThread(o),a},t.ID="FillWords",n(t,["cbook",function(){return this.cbook=Ce.charbookInst}]),t}(),function(){function t(){}r(t,"laya.events.Event");var e=t.prototype;return e.setTo=function(t,e,i){return this.type=t,this.currentTarget=e,this.target=i,this},e.stopPropagation=function(){this._stoped=!0},s(0,e,"stageY",function(){return i.stage.mouseY}),s(0,e,"charCode",function(){return this.nativeEvent.charCode}),s(0,e,"touches",function(){if(!this.nativeEvent)return null;var t=this.nativeEvent.touches;if(t)for(var e=i.stage,n=0,r=t.length;r>n;n++){var s=t[n],a=Zi.TEMP;a.setTo(s.clientX,s.clientY),e._canvasTransform.invertTransformPoint(a),e.transform.invertTransformPoint(a),s.stageX=a.x,s.stageY=a.y}return t}),s(0,e,"keyLocation",function(){return this.nativeEvent.location||this.nativeEvent.keyLocation}),s(0,e,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),s(0,e,"altKey",function(){return this.nativeEvent.altKey}),s(0,e,"shiftKey",function(){return this.nativeEvent.shiftKey}),s(0,e,"stageX",function(){return i.stage.mouseX}),t.EMPTY=new t,t.MOUSE_DOWN="mousedown",t.MOUSE_UP="mouseup",t.CLICK="click",t.RIGHT_MOUSE_DOWN="rightmousedown",t.RIGHT_MOUSE_UP="rightmouseup",t.RIGHT_CLICK="rightclick",t.MOUSE_MOVE="mousemove",t.MOUSE_OVER="mouseover",t.MOUSE_OUT="mouseout",t.MOUSE_WHEEL="mousewheel",t.ROLL_OVER="mouseover",t.ROLL_OUT="mouseout",t.DOUBLE_CLICK="doubleclick",t.CHANGE="change",t.CHANGED="changed",t.RESIZE="resize",t.ADDED="added",t.REMOVED="removed",t.DISPLAY="display",t.UNDISPLAY="undisplay",t.ERROR="error",t.COMPLETE="complete",t.LOADED="loaded",t.READY="ready",t.PROGRESS="progress",t.INPUT="input",t.RENDER="render",t.OPEN="open",t.MESSAGE="message",t.CLOSE="close",t.KEY_DOWN="keydown",t.KEY_PRESS="keypress",t.KEY_UP="keyup",t.FRAME="enterframe",t.DRAG_START="dragstart",t.DRAG_MOVE="dragmove",t.DRAG_END="dragend",t.ENTER="enter",t.SELECT="select",t.BLUR="blur",t.FOCUS="focus",t.VISIBILITY_CHANGE="visibilitychange",t.FOCUS_CHANGE="focuschange",t.PLAYED="played",t.PAUSED="paused",t.STOPPED="stopped",t.START="start",t.END="end",t.COMPONENT_ADDED="componentadded",t.COMPONENT_REMOVED="componentremoved",t.RELEASED="released",t.LINK="link",t.LABEL="label",t.FULL_SCREEN_CHANGE="fullscreenchange",t.DEVICE_LOST="devicelost",t.TRANSFORM_CHANGED="transformchanged",t.ANIMATION_CHANGED="animationchanged",t.TRAIL_FILTER_CHANGE="trailfilterchange",t.TRIGGER_ENTER="triggerenter",t.TRIGGER_STAY="triggerstay",t.TRIGGER_EXIT="triggerexit",t}()),ie=function(){function t(){}r(t,"laya.display.cmd.DrawRectCmd");
var e=t.prototype;return e.recover=function(){this.fillColor=null,this.lineColor=null,Ki.recover("DrawRectCmd",this)},e.run=function(t,e,i){t.drawRect(this.x+e,this.y+i,this.width,this.height,this.fillColor,this.lineColor,this.lineWidth)},s(0,e,"cmdID",function(){return"DrawRect"}),t.create=function(e,i,n,r,s,a,o){var h=Ki.getItemByClass("DrawRectCmd",t);return h.x=e,h.y=i,h.width=n,h.height=r,h.fillColor=s,h.lineColor=a,h.lineWidth=o,h},t.ID="DrawRect",t}(),ne=function(){function t(t,e,i){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return r(t,"laya.webgl.shapes.EarcutNode"),t}(),re=function(){function t(){this._matrix=new ui}r(t,"laya.webgl.canvas.save.SaveTransform");var e=t.prototype;return i.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){e._curMat=this._savematrix,t.POOL[t.POOL._length++]=this},t.save=function(e){var i=e._saveMark;if(2048!==(2048&i._saveuse)){i._saveuse|=2048;var n=t.POOL,r=n._length>0?n[--n._length]:new t;r._savematrix=e._curMat,e._curMat=e._curMat.copyTo(r._matrix);var s=e._save;s[s._length++]=r}},t.POOL=h._createArray(),t}(),se=function(){function t(){}return r(t,"laya.layagl.LayaNative2D"),t._init_simple_texture_cmdEncoder_=function(){t._SIMPLE_TEXTURE_CMDENCODER_=Le.instance.createCommandEncoder(172,32,!0),t._SIMPLE_TEXTURE_CMDENCODER_.useProgramEx(laya.layagl.LayaNative2D.PROGRAMEX_DRAWTEXTURE),t._SIMPLE_TEXTURE_CMDENCODER_.useVDO(laya.layagl.LayaNative2D.VDO_MESHQUADTEXTURE),t._SIMPLE_TEXTURE_CMDENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_VIEWS,0),t._SIMPLE_TEXTURE_CMDENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_CLIP_MAT_DIR,1),t._SIMPLE_TEXTURE_CMDENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_CLIP_MAT_POS,2),t._SIMPLE_TEXTURE_CMDENCODER_.uniformTextureByParamData(0,4,8),t._SIMPLE_TEXTURE_CMDENCODER_.blendFuncByGlobalValue(laya.layagl.LayaNative2D.GLOBALVALUE_BLENDFUNC_SRC,laya.layagl.LayaNative2D.GLOBALVALUE_BLENDFUNC_DEST),t._SIMPLE_TEXTURE_CMDENCODER_.setRectMeshByParamData(12,20,16),t._SIMPLE_TEXTURE_CMDENCODER_.modifyMesh(laya.layagl.LayaNative2D.GLOBALVALUE_MATRIX32,0,7),t._SIMPLE_TEXTURE_CMDENCODER_.modifyMesh(laya.layagl.LayaNative2D.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._SIMPLE_TEXTURE_CMDENCODER_)},t._init_simple_rect_cmdEncoder_=function(){t._SIMPLE_RECT_CMDENCODER_=Le.instance.createCommandEncoder(136,32,!0),t._SIMPLE_RECT_CMDENCODER_.useProgramEx(laya.layagl.LayaNative2D.PROGRAMEX_DRAWTEXTURE),t._SIMPLE_RECT_CMDENCODER_.useVDO(laya.layagl.LayaNative2D.VDO_MESHQUADTEXTURE),t._SIMPLE_RECT_CMDENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_VIEWS,0),t._SIMPLE_RECT_CMDENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_CLIP_MAT_DIR,1),t._SIMPLE_RECT_CMDENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_CLIP_MAT_POS,2),t._SIMPLE_RECT_CMDENCODER_.setRectMeshByParamData(0,8,4),t._SIMPLE_RECT_CMDENCODER_.modifyMesh(laya.layagl.LayaNative2D.GLOBALVALUE_MATRIX32,0,7),t._SIMPLE_RECT_CMDENCODER_.modifyMesh(laya.layagl.LayaNative2D.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._SIMPLE_RECT_CMDENCODER_)},t._init_rect_border_cmdEncoder_=function(){t._RECT_BORDER_CMD_ENCODER_=Le.instance.createCommandEncoder(152,32,!0),t._RECT_BORDER_CMD_ENCODER_.useProgramEx(laya.layagl.LayaNative2D.PROGRAMEX_DRAWVG),t._RECT_BORDER_CMD_ENCODER_.useVDO(laya.layagl.LayaNative2D.VDO_MESHVG),t._RECT_BORDER_CMD_ENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_VIEWS,0),t._RECT_BORDER_CMD_ENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_CLIP_MAT_DIR,1),t._RECT_BORDER_CMD_ENCODER_.uniformEx(laya.layagl.LayaNative2D.GLOBALVALUE_CLIP_MAT_POS,2),t._RECT_BORDER_CMD_ENCODER_.setMeshByParamData(20,0,4,140,8,12,16),t._RECT_BORDER_CMD_ENCODER_.modifyMesh(laya.layagl.LayaNative2D.GLOBALVALUE_MATRIX32,0,7),t._RECT_BORDER_CMD_ENCODER_.modifyMesh(laya.layagl.LayaNative2D.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._RECT_BORDER_CMD_ENCODER_)},t.__init__=function(){if(wi.isConchApp){var e=Le.instance;t.GLOBALVALUE_MATRIX32=e.addGlobalValueDefine(0,5126,6,new Float32Array([1,0,0,1,0,0])),t.GLOBALVALUE_DRAWTEXTURE_COLOR=e.addGlobalValueDefine(0,5124,1,new Uint32Array([4294967295])),t.GLOBALVALUE_ITALICDEG=e.addGlobalValueDefine(0,5126,1,new Float32Array([0])),t.GLOBALVALUE_CLIP_MAT_DIR=e.addGlobalValueDefine(0,5126,4,new Float32Array([1e6,0,0,1e6])),t.GLOBALVALUE_CLIP_MAT_POS=e.addGlobalValueDefine(0,5126,2,new Float32Array([0,0])),t.GLOBALVALUE_BLENDFUNC_SRC=e.addGlobalValueDefine(0,5124,1,new Int32Array([1])),t.GLOBALVALUE_BLENDFUNC_DEST=e.addGlobalValueDefine(0,5124,1,new Int32Array([771])),t.GLOBALVALUE_COLORFILTER_COLOR=e.addGlobalValueDefine(0,5126,16,new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])),t.GLOBALVALUE_COLORFILTER_ALPHA=e.addGlobalValueDefine(0,5126,4,new Float32Array([0,0,0,1])),t.GLOBALVALUE_BLURFILTER_STRENGTH=e.addGlobalValueDefine(0,5126,4,new Float32Array([0,0,0,0])),t.GLOBALVALUE_BLURFILTER_BLURINFO=e.addGlobalValueDefine(0,5126,2,new Float32Array([0,0])),t.GLOBALVALUE_GLOWFILTER_COLOR=e.addGlobalValueDefine(0,5126,4,new Float32Array([0,0,0,0])),t.GLOBALVALUE_GLOWFILTER_BLURINFO1=e.addGlobalValueDefine(0,5126,4,new Float32Array([0,0,0,0])),t.GLOBALVALUE_GLOWFILTER_BLURINFO2=e.addGlobalValueDefine(0,5126,4,new Float32Array([0,0,0,0])),e.endGlobalValueDefine(),t.PROGRAMEX_DRAWTEXTURE=Le.instance.createProgramEx("/*\n	texture和fillrect使用的。\n*/\nattribute vec4 posuv;\nattribute vec4 attribColor;\nattribute vec4 attribFlags;\n//attribute vec4 clipDir;\n//attribute vec2 clipRect;\nuniform vec4 clipMatDir;\nuniform vec2 clipMatPos;		// 这个是全局的，不用再应用矩阵了。\nvarying vec2 cliped;\nuniform vec2 size;\n\n#ifdef WORLDMAT\n	uniform mat4 mmat;\n#endif\n\nvarying vec4 v_texcoordAlpha;\nvarying vec4 v_color;\nvarying float v_useTex;\n\nvoid main() {\n\n	vec4 pos = vec4(posuv.xy,0.,1.);\n#ifdef WORLDMAT\n	pos=mmat*pos;\n#endif\n	gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,0.,1.0);\n  \n	v_texcoordAlpha.xy = posuv.zw;\n	//v_texcoordAlpha.z = attribColor.a/255.0;\n	v_color = attribColor/255.0;\n	v_color.xyz*=v_color.w;//反正后面也要预乘\n	\n	v_useTex = attribFlags.r/255.0;\n	float clipw = length(clipMatDir.xy);\n	float cliph = length(clipMatDir.zw);\n	vec2 clippos = pos.xy - clipMatPos.xy;	//pos已经应用矩阵了，为了减的有意义，clip的位置也要缩放\n	if(clipw>20000. && cliph>20000.)\n		cliped = vec2(0.5,0.5);\n	else {\n		//转成0到1之间。/clipw/clipw 表示clippos与normalize之后的clip朝向点积之后，再除以clipw\n		cliped=vec2( dot(clippos,clipMatDir.xy)/clipw/clipw, dot(clippos,clipMatDir.zw)/cliph/cliph);\n	}\n\n}","/*\n	texture和fillrect使用的。\n*/\n\nprecision mediump float;\n//precision highp float;\nvarying vec4 v_texcoordAlpha;\nvarying vec4 v_color;\nvarying float v_useTex;\nuniform sampler2D texture;\nvarying vec2 cliped;\n\n#ifdef BLUR_FILTER\nuniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoordAlpha.xy-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4Color += texture2D(texture, ctexcoord)*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}\n#endif\n\n#ifdef COLOR_FILTER\nuniform vec4 colorAlpha;\nuniform mat4 colorMat;\n#endif\n\n#ifdef GLOW_FILTER\nuniform vec4 u_color;\nuniform vec4 u_blurInfo1;\nuniform vec4 u_blurInfo2;\n#endif\n\n#ifdef COLOR_ADD\nuniform vec4 colorAdd;\n#endif\n\n//FILLTEXTURE\nuniform vec4 u_TexRange;//startu,startv,urange, vrange\n\nvoid main() {\n	if(cliped.x<0.) discard;\n	if(cliped.x>1.) discard;\n	if(cliped.y<0.) discard;\n	if(cliped.y>1.) discard;\n	\n#ifdef FILLTEXTURE	\n   vec4 color= texture2D(texture, fract(v_texcoordAlpha.xy)*u_TexRange.zw + u_TexRange.xy);\n#else\n   vec4 color= texture2D(texture, v_texcoordAlpha.xy);\n#endif\n\n   if(v_useTex<=0.)color = vec4(1.,1.,1.,1.);\n   color.a*=v_color.w;\n   //color.rgb*=v_color.w;\n   color.rgb*=v_color.rgb;\n   gl_FragColor=color;\n   \n   #ifdef COLOR_ADD\n	gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\n	gl_FragColor.xyz *= colorAdd.a;\n   #endif\n   \n   #ifdef BLUR_FILTER\n	gl_FragColor =   blur();\n	gl_FragColor.w*=v_color.w;   \n   #endif\n   \n   #ifdef COLOR_FILTER\n	mat4 alphaMat =colorMat;\n\n	alphaMat[0][3] *= gl_FragColor.a;\n	alphaMat[1][3] *= gl_FragColor.a;\n	alphaMat[2][3] *= gl_FragColor.a;\n\n	gl_FragColor = gl_FragColor * alphaMat;\n	gl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n   #endif\n   \n   #ifdef GLOW_FILTER\n	const float c_IterationTime = 10.0;\n	float floatIterationTotalTime = c_IterationTime * c_IterationTime;\n	vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n	vec2 vec2FilterDir = vec2(-(u_blurInfo1.z)/u_blurInfo2.x,-(u_blurInfo1.w)/u_blurInfo2.y);\n	vec2 vec2FilterOff = vec2(u_blurInfo1.x/u_blurInfo2.x/c_IterationTime * 2.0,u_blurInfo1.y/u_blurInfo2.y/c_IterationTime * 2.0);\n	float maxNum = u_blurInfo1.x * u_blurInfo1.y;\n	vec2 vec2Off = vec2(0.0,0.0);\n	float floatOff = c_IterationTime/2.0;\n	for(float i = 0.0;i<=c_IterationTime; ++i){\n		for(float j = 0.0;j<=c_IterationTime; ++j){\n			vec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n			vec4Color += texture2D(texture, v_texcoordAlpha.xy + vec2FilterDir + vec2Off)/floatIterationTotalTime;\n		}\n	}\n	gl_FragColor = vec4(u_color.rgb,vec4Color.a * u_blurInfo2.z);\n	gl_FragColor.rgb *= gl_FragColor.a;   \n   #endif\n   \n}","posuv,attribColor,attribFlags","size,clipMatDir,clipMatPos,texture,colorMat,colorAlpha,strength_sig2_2sig2_gauss1,blurInfo,u_color,u_blurInfo1,u_blurInfo2"),t.PROGRAMEX_DRAWVG=Le.instance.createProgramEx("attribute vec4 position;\nattribute vec4 attribColor;\n//attribute vec4 clipDir;\n//attribute vec2 clipRect;\nuniform vec4 clipMatDir;\nuniform vec2 clipMatPos;\n#ifdef WORLDMAT\n	uniform mat4 mmat;\n#endif\nuniform mat4 u_mmat2;\n//uniform vec2 u_pos;\nuniform vec2 size;\nvarying vec4 color;\n//vec4 dirxy=vec4(0.9,0.1, -0.1,0.9);\n//vec4 clip=vec4(100.,30.,300.,600.);\nvarying vec2 cliped;\nvoid main(){\n	\n#ifdef WORLDMAT\n	vec4 pos=mmat*vec4(position.xy,0.,1.);\n	gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n#else\n	gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n#endif	\n	float clipw = length(clipMatDir.xy);\n	float cliph = length(clipMatDir.zw);\n	vec2 clippos = position.xy - clipMatPos.xy;	//pos已经应用矩阵了，为了减的有意义，clip的位置也要缩放\n	if(clipw>20000. && cliph>20000.)\n		cliped = vec2(0.5,0.5);\n	else {\n		//clipdir是带缩放的方向，由于上面clippos是在缩放后的空间计算的，所以需要把方向先normalize一下\n		cliped=vec2( dot(clippos,clipMatDir.xy)/clipw/clipw, dot(clippos,clipMatDir.zw)/cliph/cliph);\n	}\n  //pos2d.x = dot(clippos,dirx);\n  color=attribColor/255.;\n}","precision mediump float;\n//precision mediump float;\nvarying vec4 color;\n//uniform float alpha;\nvarying vec2 cliped;\nvoid main(){\n	//vec4 a=vec4(color.r, color.g, color.b, 1);\n	//a.a*=alpha;\n    gl_FragColor= color;// vec4(color.r, color.g, color.b, alpha);\n	gl_FragColor.rgb*=color.a;\n	if(cliped.x<0.) discard;\n	if(cliped.x>1.) discard;\n	if(cliped.y<0.) discard;\n	if(cliped.y>1.) discard;\n}","position,attribColor","size,clipMatDir,clipMatPos"),t.PROGRAMEX_DRAWPARTICLE=Le.instance.createProgramEx("attribute vec4 a_CornerTextureCoordinate;\nattribute vec3 a_Position;\nattribute vec3 a_Velocity;\nattribute vec4 a_StartColor;\nattribute vec4 a_EndColor;\nattribute vec3 a_SizeRotation;\nattribute vec2 a_Radius;\nattribute vec4 a_Radian;\nattribute float a_AgeAddScale;\nattribute float a_Time;\n\nvarying vec4 v_Color;\nvarying vec2 v_TextureCoordinate;\n\nuniform float u_CurrentTime;\nuniform float u_Duration;\nuniform float u_EndVelocity;\nuniform vec3 u_Gravity;\n\nuniform vec2 size;\nuniform mat4 u_mmat;\n\nvec4 ComputeParticlePosition(in vec3 position, in vec3 velocity,in float age,in float normalizedAge)\n{\n\n   float startVelocity = length(velocity);//起始标量速度\n   float endVelocity = startVelocity * u_EndVelocity;//结束标量速度\n\n   float velocityIntegral = startVelocity * normalizedAge +(endVelocity - startVelocity) * normalizedAge *normalizedAge/2.0;//计算当前速度的标量（单位空间），vt=v0*t+(1/2)*a*(t^2)\n   \n   vec3 addPosition = normalize(velocity) * velocityIntegral * u_Duration;//计算受自身速度影响的位置，转换标量到矢量    \n   addPosition += u_Gravity * age * normalizedAge;//计算受重力影响的位置\n   \n   float radius=mix(a_Radius.x, a_Radius.y, normalizedAge); //计算粒子受半径和角度影响（无需计算角度和半径时，可用宏定义优化屏蔽此计算）\n   float radianHorizontal =mix(a_Radian.x,a_Radian.z,normalizedAge);\n   float radianVertical =mix(a_Radian.y,a_Radian.w,normalizedAge);\n   \n   float r =cos(radianVertical)* radius;\n   addPosition.y += sin(radianVertical) * radius;\n	\n   addPosition.x += cos(radianHorizontal) *r;\n   addPosition.z += sin(radianHorizontal) *r;\n  \n   addPosition.y=-addPosition.y;//2D粒子位置更新需要取负，2D粒子坐标系Y轴正向朝上\n   position+=addPosition;\n   return  vec4(position,1.0);\n}\n\nfloat ComputeParticleSize(in float startSize,in float endSize, in float normalizedAge)\n{    \n    float size = mix(startSize, endSize, normalizedAge);\n    return size;\n}\n\nmat2 ComputeParticleRotation(in float rot,in float age)\n{    \n    float rotation =rot * age;\n    //计算2x2旋转矩阵.\n    float c = cos(rotation);\n    float s = sin(rotation);\n    return mat2(c, -s, s, c);\n}\n\nvec4 ComputeParticleColor(in vec4 startColor,in vec4 endColor,in float normalizedAge)\n{\n	vec4 color=mix(startColor,endColor,normalizedAge);\n    //硬编码设置，使粒子淡入很快，淡出很慢,6.7的缩放因子把置归一在0到1之间，可以谷歌x*(1-x)*(1-x)*6.7的制图表\n    color.a *= normalizedAge * (1.0-normalizedAge) * (1.0-normalizedAge) * 6.7;\n   \n    return color;\n}\n\nvoid main()\n{\n   float age = u_CurrentTime - a_Time;\n   age *= 1.0 + a_AgeAddScale;\n   float normalizedAge = clamp(age / u_Duration,0.0,1.0);\n   gl_Position = ComputeParticlePosition(a_Position, a_Velocity, age, normalizedAge);//计算粒子位置\n   float pSize = ComputeParticleSize(a_SizeRotation.x,a_SizeRotation.y, normalizedAge);\n   mat2 rotation = ComputeParticleRotation(a_SizeRotation.z, age);\n	\n    mat4 mat=u_mmat;\n    gl_Position=vec4((mat*gl_Position).xy,0.0,1.0);\n    gl_Position.xy += (rotation*a_CornerTextureCoordinate.xy) * pSize*vec2(mat[0][0],mat[1][1]);\n    gl_Position=vec4((gl_Position.x/size.x-0.5)*2.0,(0.5-gl_Position.y/size.y)*2.0,0.0,1.0);\n   \n   v_Color = ComputeParticleColor(a_StartColor,a_EndColor, normalizedAge);\n   v_TextureCoordinate =a_CornerTextureCoordinate.zw;\n}\n\n","#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nvarying vec4 v_Color;\nvarying vec2 v_TextureCoordinate;\nuniform sampler2D u_texture;\n\nvoid main()\n{	\n	gl_FragColor=texture2D(u_texture,v_TextureCoordinate)*v_Color;\n	gl_FragColor.xyz *= v_Color.w;\n}","a_CornerTextureCoordinate,a_Position,a_Velocity,a_StartColor,a_EndColor,a_SizeRotation,a_Radius,a_Radian,a_AgeAddScale,a_Time","u_CurrentTime,u_Duration,u_EndVelocity,u_Gravity,size,u_mmat,u_texture"),t.VDO_MESHQUADTEXTURE=e.createVDO(new Int32Array([5126,0,4,24,5121,16,4,24,5121,20,4,24])),t.VDO_MESHVG=e.createVDO(new Int32Array([5126,0,2,12,5121,8,4,12])),t.VDO_MESHPARTICLE=e.createVDO(new Int32Array([5126,0,4,116,5126,16,3,116,5126,28,3,116,5126,40,4,116,5126,56,4,116,5126,72,3,116,5126,84,2,116,5126,92,4,116,5126,108,1,116,5126,112,1,116])),t._init_simple_texture_cmdEncoder_(),t._init_simple_rect_cmdEncoder_(),t._init_rect_border_cmdEncoder_(),t.SHADER_MACRO_COLOR_FILTER=Le.instance.defineShaderMacro("#define COLOR_FILTER",[{uname:4,id:t.GLOBALVALUE_COLORFILTER_COLOR},{uname:5,id:t.GLOBALVALUE_COLORFILTER_ALPHA}]),t.SHADER_MACRO_BLUR_FILTER=Le.instance.defineShaderMacro("#define BLUR_FILTER",[{uname:6,id:t.GLOBALVALUE_BLURFILTER_STRENGTH},{uname:7,id:t.GLOBALVALUE_BLURFILTER_BLURINFO}]),t.SHADER_MACRO_GLOW_FILTER=Le.instance.defineShaderMacro("#define GLOW_FILTER",[{uname:8,id:t.GLOBALVALUE_GLOWFILTER_COLOR},{uname:9,id:t.GLOBALVALUE_GLOWFILTER_BLURINFO1},{uname:10,id:t.GLOBALVALUE_GLOWFILTER_BLURINFO2}]),Ri.__init__(),Ri.__init_END_(),new Ce,Fe.charRender=new Tn}},t._SIMPLE_TEXTURE_CMDENCODER_=null,t._SIMPLE_RECT_CMDENCODER_=null,t._RECT_BORDER_CMD_ENCODER_=null,t.PROGRAMEX_DRAWTEXTURE=0,t.PROGRAMEX_DRAWVG=0,t.PROGRAMEX_DRAWRECT=0,t.PROGRAMEX_DRAWPARTICLE=0,t.VDO_MESHQUADTEXTURE=0,t.VDO_MESHVG=0,t.VDO_MESHPARTICLE=0,t.GLOBALVALUE_VIEWS=0,t.GLOBALVALUE_MATRIX32=0,t.GLOBALVALUE_DRAWTEXTURE_COLOR=0,t.GLOBALVALUE_ITALICDEG=0,t.GLOBALVALUE_CLIP_MAT_DIR=0,t.GLOBALVALUE_CLIP_MAT_POS=0,t.GLOBALVALUE_BLENDFUNC_SRC=0,t.GLOBALVALUE_BLENDFUNC_DEST=0,t.GLOBALVALUE_COLORFILTER_COLOR=0,t.GLOBALVALUE_COLORFILTER_ALPHA=0,t.GLOBALVALUE_BLURFILTER_STRENGTH=0,t.GLOBALVALUE_BLURFILTER_BLURINFO=0,t.SHADER_MACRO_COLOR_FILTER=0,t.SHADER_MACRO_BLUR_FILTER=0,t.SHADER_MACRO_GLOW_FILTER=0,t.GLOBALVALUE_GLOWFILTER_COLOR=0,t.GLOBALVALUE_GLOWFILTER_BLURINFO1=0,t.GLOBALVALUE_GLOWFILTER_BLURINFO2=0,t}(),ae=function(){function t(){this.reset()}r(t,"laya.display.css.SpriteStyle");var e=t.prototype;return e.reset=function(){return this.scaleX=this.scaleY=1,this.skewX=this.skewY=0,this.pivotX=this.pivotY=this.rotation=0,this.alpha=1,this.scrollRect&&this.scrollRect.recover(),this.scrollRect=null,this.viewport&&this.viewport.recover(),this.viewport=null,this.hitArea=null,this.dragging=null,this.blendMode=null,this},e.recover=function(){this!==t.EMPTY&&Ki.recover("SpriteStyle",this.reset())},t.create=function(){return Ki.getItemByClass("SpriteStyle",t)},t.EMPTY=new t,t}(),oe=(function(){function t(){this._graphicsCmdEncoder=null}r(t,"laya.layagl.cmdNative.RestoreCmdNative");var e=t.prototype;return e.recover=function(){Ki.recover("RestoreCmd",this)},s(0,e,"cmdID",function(){return"Restore"}),t.create=function(){var e=Ki.getItemByClass("RestoreCmd",t),i=e._graphicsCmdEncoder=this._commandEncoder;return i.restore(),Le.syncBufferToRenderThread(i),e},t.ID="Restore",t}(),function(){function t(){}return r(t,"laya.utils.Log"),t.enable=function(){t._logdiv||(t._logdiv=Me.createElement("div"),t._logdiv.style.cssText="border:white;padding:4px;overflow-y:auto;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;",Me.document.body.appendChild(t._logdiv),t._btn=Me.createElement("button"),t._btn.innerText="Hide",t._btn.style.cssText="z-index:1000001;position: absolute;left:10px;top:10px;",t._btn.onclick=t.toggle,Me.document.body.appendChild(t._btn))},t.toggle=function(){var e=t._logdiv.style;""===e.display?(t._btn.innerText="Show",e.display="none"):(t._btn.innerText="Hide",e.display="")},t.print=function(e){t._logdiv&&(t._count>=t.maxCount&&t.clear(),t._count++,t._logdiv.innerText+=e+"\n",t.autoScrollToBottom&&t._logdiv.scrollHeight-t._logdiv.scrollTop-t._logdiv.clientHeight<50&&(t._logdiv.scrollTop=t._logdiv.scrollHeight))},t.clear=function(){t._logdiv.innerText="",t._count=0},t._logdiv=null,t._btn=null,t._count=0,t.maxCount=50,t.autoScrollToBottom=!0,t}(),function(){function t(){this._draw_texture_cmd_encoder_=Le.instance.createCommandEncoder(64,32,!0)}r(t,"laya.layagl.cmdNative.FillBorderWordsCmdNative");var e=t.prototype;return e.createFillBorderText=function(e,i,n,r,s,a,h,_){var l=o.create(a),u=(l.numColor,{});u._curMat=new ui,u._italicDeg=0,u._drawTextureUseColor=4294967295,u.fillStyle=a,u._fillColor=4294967295,u.setFillColor=function(t){u._fillColor=t},u.getFillColor=function(){return u._fillColor},u.mixRGBandAlpha=function(t){return t},u._drawTextureM=function(t,i,n,r,s,a,o,h){e.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),e.useProgramEx(se.PROGRAMEX_DRAWTEXTURE),e.useVDO(se.VDO_MESHQUADTEXTURE),e.uniformEx(se.GLOBALVALUE_VIEWS,0),e.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),e.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),e.uniformTexture(3,33984,t.bitmap._glTexture);var _=new Float32Array([i,n,h[0],h[1],0,0,i+r,n,h[2],h[3],0,0,i+r,n+s,h[4],h[5],0,0,i,n+s,h[6],h[7],0,0]),l=new Int32Array(_.buffer);l[4]=l[10]=l[16]=l[22]=4294967295,l[5]=l[11]=l[17]=l[23]=4294967295,e.setRectMesh(1,_,_.length),e.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),e.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(e)},t.cbook.filltext_native(u,null,i,n,r,s,a,h,_,null,0)},e.recover=function(){this._graphicsCmdEncoder=null,this.words=null,Ki.recover("FillBorderWordsCmd",this)},s(0,e,"cmdID",function(){return"FillBorderWords"}),t.create=function(e,i,n,r,s,a,o){t.cbook||new Error("Error:charbook not create!");var h=Ki.getItemByClass("FillBorderWordsCmd",t),_=h._graphicsCmdEncoder=this._commandEncoder;return h.words=e,h.x=i,h.y=n,h.font=r,h.color=s,h.strokeColor=a,h.strokeWidth=o,h._draw_texture_cmd_encoder_.clearEncoding(),h.createFillBorderText(h._draw_texture_cmd_encoder_,e,i,n,r,s,a,o),Le.syncBufferToRenderThread(h._draw_texture_cmd_encoder_),_.useCommandEncoder(h._draw_texture_cmd_encoder_.getPtrID(),-1,-1),Le.syncBufferToRenderThread(_),h},t.ID="FillBorderWords",n(t,["cbook",function(){return this.cbook=Ce.charbookInst}]),t}(),function(){function t(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new ee,this._matrix=new ui,this._point=new Zi,this._rect=new Ge,this._prePoint=new Zi,this._curTouchID=0/0}r(t,"laya.events.MouseManager");var e=t.prototype;return e.__init__=function(e,i){var n=this;this._stage=e;var r=this;i.oncontextmenu=function(){return t.enabled?!1:void 0},i.addEventListener("mousedown",function(e){t.enabled&&(Me.onIE||e.preventDefault(),r.mouseDownTime=Me.now(),n.runEvent(e))}),i.addEventListener("mouseup",function(e){t.enabled&&(e.preventDefault(),r.mouseDownTime=-Me.now(),n.runEvent(e))},!0),i.addEventListener("mousemove",function(e){if(t.enabled){e.preventDefault();var i=Me.now();if(i-r._lastMoveTimer<10)return;r._lastMoveTimer=i,n.runEvent(e)}},!0),i.addEventListener("mouseout",function(e){t.enabled&&n.runEvent(e)}),i.addEventListener("mouseover",function(e){t.enabled&&n.runEvent(e)}),i.addEventListener("touchstart",function(e){t.enabled&&(t._isFirstTouch||xr.isInputting||e.preventDefault(),r.mouseDownTime=Me.now(),n.runEvent(e))}),i.addEventListener("touchend",function(e){t.enabled?(t._isFirstTouch||xr.isInputting||e.preventDefault(),t._isFirstTouch=!1,r.mouseDownTime=-Me.now(),n.runEvent(e)):n._curTouchID=0/0},!0),i.addEventListener("touchmove",function(e){t.enabled&&(e.preventDefault(),n.runEvent(e))},!0),i.addEventListener("touchcancel",function(e){t.enabled?(e.preventDefault(),n.runEvent(e)):n._curTouchID=0/0},!0),i.addEventListener("mousewheel",function(e){t.enabled&&n.runEvent(e)}),i.addEventListener("DOMMouseScroll",function(e){t.enabled&&n.runEvent(e)})},e.initEvent=function(t,e){var i=this;i._event._stoped=!1,i._event.nativeEvent=e||t,i._target=null,this._point.setTo(t.pageX||t.clientX,t.pageY||t.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),i.mouseX=this._point.x,i.mouseY=this._point.y,i._event.touchId=t.identifier||0,this._tTouchID=i._event.touchId;var n;n=q.I._event,n._stoped=!1,n.nativeEvent=i._event.nativeEvent,n.touchId=i._event.touchId},e.checkMouseWheel=function(t){this._event.delta=t.wheelDelta?.025*t.wheelDelta:-t.detail;for(var e=q.I.getLastOvers(),i=0,n=e.length;n>i;i++){var r=e[i];r.event("mousewheel",this._event.setTo("mousewheel",r,this._target))}},e.onMouseMove=function(t){q.I.onMouseMove(t,this._tTouchID)},e.onMouseDown=function(t){if(xr.isInputting&&i.stage.focus&&i.stage.focus.focus&&!i.stage.focus.contains(this._target)){var e=i.stage.focus._tf||i.stage.focus,n=t._tf||t;n instanceof laya.display.Input&&n.multiline==e.multiline?e._focusOut():e.focus=!1}q.I.onMouseDown(t,this._tTouchID,this._isLeftMouse)},e.onMouseUp=function(t){q.I.onMouseUp(t,this._tTouchID,this._isLeftMouse)},e.check=function(t,e,i,n){this._point.setTo(e,i),t.fromParentPoint(this._point),e=this._point.x,i=this._point.y;var r=t._style.scrollRect;if(r&&(this._rect.setTo(r.x,r.y,r.width,r.height),!this._rect.contains(e,i)))return!1;if(!this.disableMouseEvent){if(t.hitTestPrior&&!t.mouseThrough&&!this.hitTest(t,e,i))return!1;for(var s=t._children.length-1;s>-1;s--){var a=t._children[s];if(!a.destroyed&&a._mouseState>1&&a._visible&&this.check(a,e,i,n))return!0}}var o=!t.hitTestPrior||t.mouseThrough||this.disableMouseEvent?this.hitTest(t,e,i):!0;return o?(this._target=t,n.call(this,t)):n===this.onMouseUp&&t===this._stage&&(this._target=this._stage,n.call(this,this._target)),o},e.hitTest=function(t,e,i){var n=!1;t.scrollRect&&(e-=t._style.scrollRect.x,i-=t._style.scrollRect.y);var r=t._style.hitArea;return r&&r._hit?r.contains(e,i):((t.width>0&&t.height>0||t.mouseThrough||r)&&(n=t.mouseThrough?t.getGraphicBounds().contains(e,i):(r?r:this._rect.setTo(0,0,t.width,t.height)).contains(e,i)),n)},e.runEvent=function(e){var i,n=this,r=0,s=0;switch("mousemove"!==e.type&&(this._prePoint.x=this._prePoint.y=-1e6),e.type){case"mousedown":this._touchIDs[0]=this._id++,t._isTouchRespond?t._isTouchRespond=!1:(n._isLeftMouse=0===e.button,n.initEvent(e),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseDown));break;case"mouseup":n._isLeftMouse=0===e.button,n.initEvent(e),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-e.clientX)+Math.abs(this._prePoint.y-e.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=e.clientX,this._prePoint.y=e.clientY,n.initEvent(e),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseMove));break;case"touchstart":t._isTouchRespond=!0,n._isLeftMouse=!0;var a=e.changedTouches;for(r=0,s=a.length;s>r;r++)i=a[r],(t.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=i.identifier,this._id%200===0&&(this._touchIDs={}),this._touchIDs[i.identifier]=this._id++,n.initEvent(i,e),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseDown));break;case"touchend":case"touchcancel":t._isTouchRespond=!0,n._isLeftMouse=!0;var o=e.changedTouches;for(r=0,s=o.length;s>r;r++)if(i=o[r],t.multiTouchEnabled||i.identifier==this._curTouchID){this._curTouchID=0/0,n.initEvent(i,e);var h=!1;h=n.check(n._stage,n.mouseX,n.mouseY,n.onMouseUp),h||n.onMouseUp(null)}break;case"touchmove":var _=e.changedTouches;for(r=0,s=_.length;s>r;r++)i=_[r],(t.multiTouchEnabled||i.identifier==this._curTouchID)&&(n.initEvent(i,e),n.check(n._stage,n.mouseX,n.mouseY,n.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":n.checkMouseWheel(e);break;case"mouseout":q.I.stageMouseOut();break;case"mouseover":n._stage.event("mouseover",n._event.setTo("mouseover",n._stage,n._stage))}},t.enabled=!0,t.multiTouchEnabled=!0,t._isTouchRespond=!1,t._isFirstTouch=!0,n(t,["instance",function(){return this.instance=new t}]),t}()),he=function(){function t(){}r(t,"laya.display.cmd.DrawLineCmd");var e=t.prototype;return e.recover=function(){Ki.recover("DrawLineCmd",this)},e.run=function(t,e,i){t._drawLine(e,i,this.fromX,this.fromY,this.toX,this.toY,this.lineColor,this.lineWidth,this.vid)},s(0,e,"cmdID",function(){return"DrawLine"}),t.create=function(e,i,n,r,s,a,o){var h=Ki.getItemByClass("DrawLineCmd",t);return h.fromX=e,h.fromY=i,h.toX=n,h.toY=r,h.lineColor=s,h.lineWidth=a,h.vid=o,h},t.ID="DrawLine",t}(),_e=function(){function t(t,e,i,n){function r(t){var e=[],i=new ji(e);return s._compileToTree(i,t.split("\n"),0,e,n),i}var s=this,a=Me.now();this._VS=r(t),this._PS=r(e),this._nameMap=i,Me.now()-a>2&&console.log("ShaderCompile use time:"+(Me.now()-a)+"  size:"+t.length+"/"+e.length)}r(t,"laya.webgl.utils.ShaderCompile");var e=t.prototype;return e._compileToTree=function(e,i,n,r,s){var a,o,h,_,l,u,c,d=0,f=0,p=0,m=0;for(f=n;f<i.length;f++)if(h=i[f],!(h.length<1)&&(d=h.indexOf("//"),0!==d)){if(d>=0&&(h=h.substr(0,d)),a=c||new ji(r),c=null,a.text=h,a.noCompile=!0,(d=h.indexOf("#"))>=0){for(_="#",m=d+1,p=h.length;p>m;m++){var g=h.charAt(m);if(" "===g||"	"===g||"?"===g)break;_+=g}switch(a.name=_,_){case"#ifdef":case"#ifndef":if(a.src=h,a.noCompile=null!=h.match(/[!&|()=<>]/),a.noCompile?console.log("function():Boolean{return "+h.substr(d+a.name.length)+"}"):(u=h.replace(/^\s*/,"").split(/\s+/),a.setCondition(u[1],"#ifdef"===_?1:2),a.text="//"+a.text),a.setParent(e),e=a,s)for(u=h.substr(m).split(t._splitToWordExps3),m=0;m<u.length;m++)h=u[m],h.length&&(s[h]=!0);continue;case"#if":if(a.src=h,a.noCompile=!0,a.setParent(e),e=a,s)for(u=h.substr(m).split(t._splitToWordExps3),m=0;m<u.length;m++)h=u[m],h.length&&"defined"!=h&&(s[h]=!0);continue;case"#else":a.src=h,e=e.parent,o=e.childs[e.childs.length-1],a.noCompile=o.noCompile,a.noCompile||(a.condition=o.condition,a.conditionType=1==o.conditionType?2:1,a.text="//"+a.text+" "+o.text+" "+a.conditionType),a.setParent(e),e=a;continue;case"#endif":e=e.parent,o=e.childs[e.childs.length-1],a.noCompile=o.noCompile,a.noCompile||(a.text="//"+a.text),a.setParent(e);continue;case"#include":u=t.splitToWords(h,null);var v=t.includes[u[1]];if(!v)throw"ShaderCompile error no this include file:"+u[1];if((d=u[0].indexOf("?"))<0){a.setParent(e),h=v.getWith("with"==u[2]?u[3]:null),this._compileToTree(a,h.split("\n"),0,r,s),a.text="";continue}a.setCondition(u[0].substr(d+1),1),a.text=v.getWith("with"==u[2]?u[3]:null);break;case"#import":u=t.splitToWords(h,null),l=u[1],r.push({node:a,file:t.includes[l],ofs:a.text.length});continue}}else{if(o=e.childs[e.childs.length-1],o&&!o.name){r.length>0&&t.splitToWords(h,o),c=a,o.text+="\n"+h;continue}r.length>0&&t.splitToWords(h,a)}a.setParent(e)}},e.createShader=function(t,e,i,n){var r={},s="";if(t)for(var a in t)s+="#define "+a+"\n",r[a]=!0;var o=this._VS.toscript(r,[]),h=this._PS.toscript(r,[]);return(i||vr.create)(s+o.join("\n"),s+h.join("\n"),e,this._nameMap,n)},t._parseOne=function(e,i,n,r,s,a){var o={type:t.shaderParamsMap[n[r+1]],name:n[r+2],size:isNaN(parseInt(n[r+3]))?1:parseInt(n[r+3])};return a&&("attribute"==s?e.push(o):i.push(o)),":"==n[r+3]&&(o.type=n[r+4],r+=2),r+=2},t.addInclude=function(e,i){if(!i||0===i.length)throw new Error("add shader include file err:"+e);if(t.includes[e])throw new Error("add shader include file err, has add:"+e);t.includes[e]=new z(i)},t.preGetParams=function(e,i){var n=[e,i],r={},s=[],a=[],o={},h=[];r.attributes=s,r.uniforms=a,r.defines=o;for(var _=0,l=0,u=0;2>u;u++){n[u]=n[u].replace(t._removeAnnotation,"");var c,d=n[u].match(t._reg);for(_=0,l=d.length;l>_;_++){var f=d[_];if("attribute"==f||"uniform"==f)_=t._parseOne(s,a,d,_,f,!0);else{if("#define"==f){f=d[++_],h[f]=1;continue}if("#ifdef"==f){c=d[++_];{o[c]=o[c]||[]}for(_++;l>_;_++)if(f=d[_],"attribute"==f||"uniform"==f)_=t._parseOne(s,a,d,_,f,h[c]);else if("#else"==f)for(_++;l>_;_++)if(f=d[_],"attribute"==f||"uniform"==f)_=t._parseOne(s,a,d,_,f,!h[c]);else if("#endif"==f)break}}}}return r},t.splitToWords=function(t,e){for(var i,n,r=[],s=-1,a=0,o=t.length;o>a;a++)if(i=t.charAt(a)," 	=+-*/&%!<>()'\",;".indexOf(i)>=0){if(s>=0&&a-s>1&&(n=t.substr(s,a-s),r.push(n)),'"'==i||"'"==i){var h=t.indexOf(i,a+1);if(0>h)throw"Sharder err:"+t;r.push(t.substr(a+1,h-a-1)),a=h,s=-1;continue}"("==i&&e&&r.length>0&&(n=r[r.length-1]+";","vec4;main;".indexOf(n)<0&&(e.useFuns+=n)),s=-1}else 0>s&&(s=a);return o>s&&o-s>1&&(n=t.substr(s,o-s),r.push(n)),r},t.IFDEF_NO=0,t.IFDEF_YES=1,t.IFDEF_ELSE=2,t.IFDEF_PARENT=3,t._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),t._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),t._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),t.includes={},n(t,["shaderParamsMap",function(){return this.shaderParamsMap={"float":5126,"int":5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}
},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),t}(),le=function(){function t(e){this._font="14px Arial",this._family="Arial",this._size=14,this._italic=!1,this._bold=!1,this._id=t._gfontID++,this.setFont(e||this._font)}r(t,"laya.utils.FontInfo");var e=t.prototype;return e.setFont=function(t){this._font=t;var e=t.split(" "),i=e.length;if(2>i)return 1==i&&e[0].indexOf("px")>0&&(this._size=parseInt(e[0])),void 0;for(var n=-1,r=0;i>r;r++)if(e[r].indexOf("px")>0||e[r].indexOf("pt")>0){n=r,this._size=parseInt(e[r]),this._size<=0&&(console.error("font parse error:"+t),this._size=14);break}var s=n+1,a=e[s];for(s++;i>s;s++)a+=" "+e[s];this._family=a.split(",")[0],this._italic=e.indexOf("italic")>=0,this._bold=e.indexOf("bold")>=0},t.Parse=function(e){if(e===t._lastFont)return t._lastFontInfo;var i=t._cache[e];return i||(i=t._cache[e]=new t(e)),t._lastFont=e,t._lastFontInfo=i,i},t.EMPTY=new t(null),t._cache={},t._gfontID=0,t._lastFont="",t._lastFontInfo=null,t}(),ue=function(){function t(){}return r(t,"laya.webgl.canvas.BlendMode"),t._init_=function(){t.fns=[t.BlendNormal,t.BlendAdd,t.BlendMultiply,t.BlendScreen,t.BlendOverlay,t.BlendLight,t.BlendMask,t.BlendDestinationOut],t.targetFns=[t.BlendNormalTarget,t.BlendAddTarget,t.BlendMultiplyTarget,t.BlendScreenTarget,t.BlendOverlayTarget,t.BlendLightTarget,t.BlendMask,t.BlendDestinationOut]},t.BlendNormal=function(t){me.setBlendFunc(t,1,771)},t.BlendAdd=function(t){me.setBlendFunc(t,1,772)},t.BlendMultiply=function(t){me.setBlendFunc(t,774,771)},t.BlendScreen=function(t){me.setBlendFunc(t,1,1)},t.BlendOverlay=function(t){me.setBlendFunc(t,1,769)},t.BlendLight=function(t){me.setBlendFunc(t,1,1)},t.BlendNormalTarget=function(t){me.setBlendFunc(t,1,771)},t.BlendAddTarget=function(t){me.setBlendFunc(t,1,772)},t.BlendMultiplyTarget=function(t){me.setBlendFunc(t,774,771)},t.BlendScreenTarget=function(t){me.setBlendFunc(t,1,1)},t.BlendOverlayTarget=function(t){me.setBlendFunc(t,1,769)},t.BlendLightTarget=function(t){me.setBlendFunc(t,1,1)},t.BlendMask=function(t){me.setBlendFunc(t,0,770)},t.BlendDestinationOut=function(t){me.setBlendFunc(t,0,0)},t.activeBlendFunction=null,t.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],t.TOINT={normal:0,add:1,multiply:2,screen:3,overlay:4,light:5,mask:6,"destination-out":7,lighter:1},t.NORMAL="normal",t.ADD="add",t.MULTIPLY="multiply",t.SCREEN="screen",t.OVERLAY="overlay",t.LIGHT="light",t.MASK="mask",t.DESTINATIONOUT="destination-out",t.LIGHTER="lighter",t.fns=[],t.targetFns=[],t}(),ce=(function(){function t(){}r(t,"laya.html.dom.HTMLBrElement");var e=t.prototype;return e._addToLayout=function(t){t.push(this)},e.reset=function(){return this},e.destroy=function(){Ki.recover(W.getClassName(this),this.reset())},e._setParent=function(){},e._getCSSStyle=function(){return t.brStyle||(t.brStyle=new Gi,t.brStyle.setLineElement(!0),t.brStyle.block=!0),t.brStyle},e.renderSelfToGraphic=function(){},s(0,e,"URI",null,function(){}),s(0,e,"parent",null,function(){}),s(0,e,"href",null,function(){}),t.brStyle=null,t}(),function(){function t(){}var e,s;return r(t,"laya.utils.SceneUtils"),t.getBindFun=function(e){var n=t._funMap.get(e);if(null==n){var r='"'+e+'"';r=r.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"');var s="(function(data){if(data==null)return;with(data){try{\nreturn "+r+"\n}catch(e){}}})";n=i._runScript(s),t._funMap.set(e,n)}return n},t.createByData=function(e,i){var n=s.create();if(e=t.createComp(i,e,e,null,n),e._setBit(8,!0),e.hasOwnProperty("_idMap")&&(e._idMap=n._idMap),i.animations){var r,a,o=[],h=i.animations,_=0,l=h.length;for(_=0;l>_;_++){switch(r=new wr,a=h[_],r._setUp(n._idMap,a),e[a.name]=r,r._setControlNode(e),a.action){case 1:r.play(0,!1);break;case 2:r.play(0,!0)}o.push(r)}e._aniList=o}return"Scene"===e._$componentType&&e._width>0&&null==i.props.hitTestPrior&&!e.mouseThrough&&(e.hitTestPrior=!0),n.beginLoad(e),e},t.createInitTool=function(){return s.create()},t.createComp=function(e,n,r,s,a){if("Scene3D"==e.type||"Sprite3D"==e.type){var o=[],h=i.Utils3D._createSceneByJsonForMaker(e,o,a);return"Sprite3D"==e.type?i.StaticBatchManager.combine(h,o):i.StaticBatchManager.combine(null,o),h}if(n=n||t.getCompInstance(e),!n)return e.props&&e.props.runtime?console.warn("runtime not found:"+e.props.runtime):console.warn("can not create:"+e.type),null;var _=e.child;if(_)for(var l="List"==n._$componentType,u=0,c=_.length;c>u;u++){var d=_[u];if(!n.hasOwnProperty("itemRender")||"render"!=d.props.name&&"render"!==d.props.renderType)if("Graphic"==d.type)Te._addGraphicsToSprite(d,n);else if(Te._isDrawType(d.type))Te._addGraphicToSprite(d,n,!0);else{if(l){var f=[],p=t.createComp(d,null,r,f,a);f.length&&(p._$bindData=f)}else p=t.createComp(d,null,r,s,a);"Script"==d.type?p instanceof laya.components.Component?n._addComponentInstance(p):"owner"in p?p.owner=n:"target"in p&&(p.target=n):"mask"==d.props.renderType||"mask"==d.props.name?n.mask=p:p instanceof laya.display.Node&&n.addChild(p)}else n.itemRender=d}var m=e.props;for(var g in m){var v=m[g];"string"==typeof v&&(v.indexOf("@node:")>=0||v.indexOf("@Prefab:")>=0)?a&&a.addNodeRef(n,g,v):t.setCompValue(n,g,v,r,s)}return n._afterInited&&n._afterInited(),e.compId&&a&&a._idMap&&(a._idMap[e.compId]=n),n},t.setCompValue=function(i,n,r,s,a){if("string"==typeof r&&r.indexOf("${")>-1){if(t._sheet||(t._sheet=Te.getClass("laya.data.Table")),!t._sheet)return console.warn("Can not find class Sheet"),void 0;if(a)a.push(i,n,r);else if(s){-1==r.indexOf("].")&&(r=r.replace(".","[0]."));var o=new e(i,n,r);o.exe(s);for(var h,_,l=r.replace(/\[.*?\]\./g,".");null!=(h=t._parseWatchData.exec(l));){for(var u=h[1];null!=(_=t._parseKeyWord.exec(u));){var c=_[0],d=s._watchMap[c]||(s._watchMap[c]=[]);d.push(o),t._sheet.I.notifer.on(c,s,s.changeData,[c])}d=s._watchMap[u]||(s._watchMap[u]=[]),d.push(o),t._sheet.I.notifer.on(u,s,s.changeData,[u])}}}else"var"===n&&s?s[r]=i:i[n]="true"===r?!0:"false"===r?!1:r},t.getCompInstance=function(e){if("UIView"==e.type&&e.props&&e.props.pageData)return t.createByData(null,e.props.pageData);var i=e.props&&e.props.runtime||e.type,n=Te.getClass(i);if(!n)throw"Can not find class "+i;if("Script"===e.type&&n.prototype._doAwake){var r=Ki.createByClass(n);return r._destroyed=!1,r}return e.props&&e.props.hasOwnProperty("renderType")&&"instance"==e.props.renderType?(n.instance||(n.instance=new n),n.instance):new n},t._sheet=null,n(t,["_funMap",function(){return this._funMap=new Ee},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),t.__init$=function(){e=function(){function e(t,e,i){this.comp=null,this.prop=null,this.value=null,this.comp=t,this.prop=e,this.value=i}r(e,"");var i=e.prototype;return i.exe=function(e){var i=t.getBindFun(this.value);this.comp[this.prop]=i.call(this,e)},e}(),s=function(){function t(){this._nodeRefList=null,this._initList=null,this._loadList=null,this._idMap=null,this._scene=null}r(t,"");var e=t.prototype;return e.reset=function(){this._nodeRefList=null,this._initList=null,this._idMap=null,this._loadList=null,this._scene=null},e.recover=function(){this.reset(),Ki.recover("InitTool",this)},e.addLoadRes=function(t,e){this._loadList||(this._loadList=[]),e?this._loadList.push({url:t,type:e}):this._loadList.push(t)},e.addNodeRef=function(t,e,i){this._nodeRefList||(this._nodeRefList=[]),this._nodeRefList.push([t,e,i]),i.indexOf("@Prefab:")>=0&&this.addLoadRes(i.replace("@Prefab:",""),"prefab")},e.setNodeRef=function(){if(this._nodeRefList){if(!this._idMap)return this._nodeRefList=null,void 0;var t=0,e=0;e=this._nodeRefList.length;var i;for(t=0;e>t;t++)i=this._nodeRefList[t],i[0][i[1]]=this.getReferData(i[2]);this._nodeRefList=null}},e.getReferData=function(t){if(t.indexOf("@Prefab:")>=0){var e;return e=hn.getRes(t.replace("@Prefab:",""))}if(t.indexOf("@arr:")>=0){t=t.replace("@arr:","");var i;i=t.split(",");var n,r=0,s=0;for(s=i.length,r=0;s>r;r++)n=i[r],i[r]=n?this._idMap[n.replace("@node:","")]:null;return i}return this._idMap[t.replace("@node:","")]},e.addInitItem=function(t){this._initList||(this._initList=[]),this._initList.push(t)},e.doInits=function(){this._initList&&(this._initList=null)},e.finish=function(){this.setNodeRef(),this.doInits(),this._scene._setBit(8,!1),this._scene.parent&&this._scene.parent.activeInHierarchy&&this._scene.active&&this._scene._activeHierarchy(),this._scene.event("onViewCreated"),this.recover()},e.beginLoad=function(t){this._scene=t,!this._loadList||this._loadList.length<1?this.finish():i.loader.load(this._loadList,l.create(this,this.finish))},t.create=function(){var e=Ki.getItemByClass("InitTool",t);return e._idMap=[],e},t}()},t}()),de=function(){function t(){}return r(t,"laya.html.utils.Layout"),t.later=function(e){null==t._will&&(t._will=[],i.stage.frameLoop(1,null,function(){if(!(t._will.length<1)){for(var e=0;e<t._will.length;e++)laya.html.utils.Layout.layout(t._will[e]);t._will.length=0}})),t._will.push(e)},t.layout=function(e){if(!e||!e._style)return null;var i=e._style;if(0===(512&i._type))return null;e.style._type&=-513;var n=t._multiLineLayout(e);return n},t._multiLineLayout=function(e){function i(){x.y=S,S+=x.h+d,x.mWidth=L,L=0,x=new Qi,T.push(x),x.h=0,C=0,I=!0,b=!1}var n=new Array;e._addChildsToLayout(n);var r,s,a,o,h,_=0,l=n.length,u=e._getCSSStyle(),c=u.letterSpacing,d=u.leading,f=u.lineHeight,p=u._widthAuto()||!u.wordWrap,m=p?999999:e.width,g=(e.height,0),v=u.italic?u.fontSize/3:0,y=u.align,E=u.valign,A="top"!==E||"left"!==y||0!=f,C=0,S=0,D=0,R=0,T=new Array,x=T[0]=new Qi,b=!1,P=!1;x.h=0,u.italic&&(m-=u.fontSize/3);var L=0,I=!0;for(_=0;l>_;_++)if(r=n[_],null!=r)if(I=!1,r instanceof laya.html.dom.HTMLBrElement)i(),x.y=S,x.h=f;else{if(r._isChar()){if(o=r,o.isWord)b=P||"\n"===o.char,x.wordStartIndex=x.elements.length;else{if(T.length>0&&C+D>m&&x.wordStartIndex>0){var M=0;M=x.elements.length-x.wordStartIndex+1,x.elements.length=x.wordStartIndex,_-=M,i();continue}b=!1,L+=o.width}D=o.width+o.style.letterSpacing,R=o.height,P=!1,b=b||C+D>m,b&&i(),x.minTextHeight=Math.min(x.minTextHeight,r.height)}else s=r._getCSSStyle(),h=r,a=s.padding,b=P||s.getLineElement(),D=h.width+a[1]+a[3]+s.letterSpacing,R=h.height+a[0]+a[2],P=s.getLineElement(),b=b||C+D>m&&s.wordWrap,b&&i();x.elements.push(r),x.h=Math.max(x.h,R),r.x=C,r.y=S,C+=D,x.w=C-c,x.y=S,g=Math.max(C+v,g)}else I||(C+=t.DIV_ELEMENT_PADDING),x.wordStartIndex=x.elements.length;if(S=x.y+x.h,A){var w=0,O=m;for(p&&e.width>0&&(O=e.width),_=0,l=T.length;l>_;_++)T[_].updatePos(0,O,_,w,y,E,f),w+=Math.max(f,T[_].h+d);S=w}return p&&(e.width=g),S>e.height&&(e.height=S),[g,S]},t.DIV_ELEMENT_PADDING=0,t._will=null,t}(),fe=function(){function t(){}r(t,"laya.display.cmd.TranslateCmd");var e=t.prototype;return e.recover=function(){Ki.recover("TranslateCmd",this)},e.run=function(t){t.translate(this.tx,this.ty)},s(0,e,"cmdID",function(){return"Translate"}),t.create=function(e,i){var n=Ki.getItemByClass("TranslateCmd",t);return n.tx=e,n.ty=i,n},t.ID="Translate",t}(),pe=function(){function t(){this._mesh=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this._ref=1,this.srcRT=null,this._key=new He}r(t,"laya.webgl.submit.SubmitTarget");var e=t.prototype;return i.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.renderSubmit=function(){var t=Ii.mainContext;this._mesh.useMesh(t);var e=this.srcRT;return e&&(this.shaderValue.texture=e._getSource(),this.shaderValue.upload(),this.blend(),Li.drawCall++,Li.trianglesFaces+=this._numEle/3,Ii.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},e.blend=function(){if(ue.activeBlendFunction!==ue.fns[this.blendType]){var t=Ii.mainContext;t.enable(3042),ue.fns[this.blendType](t),ue.activeBlendFunction=ue.fns[this.blendType]}},e.getRenderType=function(){return 0},e.releaseRender=function(){if(--this._ref<1){var e=t.POOL;e[e._length++]=this}},e.reUse=function(t,e){return this._startIdx=e,this._ref++,e},t.create=function(e,i,n,r){var s=t.POOL._length?t.POOL[--t.POOL._length]:new t;if(s._mesh=i,s.srcRT=r,s._startIdx=i.indexNum*be.BYTES_PIDX,s._ref=1,s._key.clear(),s._numEle=0,s.blendType=e._nBlendType,s._key.blendShader=s.blendType,s.shaderValue=n,s.shaderValue.setValue(e._shader2D),e._colorFiler){var a=e._colorFiler;n.defines.add(a.type),n.colorMat=a._mat,n.colorAlpha=a._alpha}return s},t.POOL=(t.POOL=[],t.POOL._length=0,t.POOL),t}(),me=function(){function e(){}r(e,"laya.webgl.WebGLContext");var i=e.prototype;return i.getContextAttributes=function(){return null},i.isContextLost=function(){},i.getSupportedExtensions=function(){return null},i.getExtension=function(){return null},i.activeTexture=function(){},i.attachShader=function(){},i.bindAttribLocation=function(){},i.bindBuffer=function(){},i.bindFramebuffer=function(){},i.bindRenderbuffer=function(){},i.bindTexture=function(){},i.useTexture=function(){},i.blendColor=function(){},i.blendEquation=function(){},i.blendEquationSeparate=function(){},i.blendFunc=function(){},i.blendFuncSeparate=function(){},i.bufferData=function(){},i.bufferSubData=function(){},i.checkFramebufferStatus=function(){return null},i.clear=function(){},i.clearColor=function(){},i.clearDepth=function(){},i.clearStencil=function(){},i.colorMask=function(){},i.compileShader=function(){},i.copyTexImage2D=function(){},i.copyTexSubImage2D=function(){},i.createBuffer=function(){},i.createFramebuffer=function(){},i.createProgram=function(){},i.createRenderbuffer=function(){},i.createShader=function(){},i.createTexture=function(){return null},i.cullFace=function(){},i.deleteBuffer=function(){},i.deleteFramebuffer=function(){},i.deleteProgram=function(){},i.deleteRenderbuffer=function(){},i.deleteShader=function(){},i.deleteTexture=function(){},i.depthFunc=function(){},i.depthMask=function(){},i.depthRange=function(){},i.detachShader=function(){},i.disable=function(){},i.disableVertexAttribArray=function(){},i.drawArrays=function(){},i.drawElements=function(){},i.enable=function(){},i.enableVertexAttribArray=function(){},i.finish=function(){},i.flush=function(){},i.framebufferRenderbuffer=function(){},i.framebufferTexture2D=function(){},i.frontFace=function(){return null},i.generateMipmap=function(){return null},i.getActiveAttrib=function(){return null},i.getActiveUniform=function(){return null},i.getAttribLocation=function(){return 0},i.getParameter=function(){return null},i.getBufferParameter=function(){return null},i.getError=function(){return null},i.getFramebufferAttachmentParameter=function(){},i.getProgramParameter=function(){return 0},i.getProgramInfoLog=function(){return null},i.getRenderbufferParameter=function(){return null},i.getShaderPrecisionFormat=function(){return null},i.getShaderParameter=function(){},i.getShaderInfoLog=function(){return null},i.getShaderSource=function(){return null},i.getTexParameter=function(){},i.getUniform=function(){},i.getUniformLocation=function(){return null},i.getVertexAttrib=function(){return null},i.getVertexAttribOffset=function(){return null},i.hint=function(){},i.isBuffer=function(){},i.isEnabled=function(){},i.isFramebuffer=function(){},i.isProgram=function(){},i.isRenderbuffer=function(){},i.isShader=function(){},i.isTexture=function(){},i.lineWidth=function(){},i.linkProgram=function(){},i.pixelStorei=function(){},i.polygonOffset=function(){},i.readPixels=function(){},i.renderbufferStorage=function(){},i.sampleCoverage=function(){},i.scissor=function(){},i.shaderSource=function(){},i.stencilFunc=function(){},i.stencilFuncSeparate=function(){},i.stencilMask=function(){},i.stencilMaskSeparate=function(){},i.stencilOp=function(){},i.stencilOpSeparate=function(){},i.texImage2D=function(){},i.texParameterf=function(){},i.texParameteri=function(){},i.texSubImage2D=function(){},i.uniform1f=function(){},i.uniform1fv=function(){},i.uniform1i=function(){},i.uniform1iv=function(){},i.uniform2f=function(){},i.uniform2fv=function(){},i.uniform2i=function(){},i.uniform2iv=function(){},i.uniform3f=function(){},i.uniform3fv=function(){},i.uniform3i=function(){},i.uniform3iv=function(){},i.uniform4f=function(){},i.uniform4fv=function(){},i.uniform4i=function(){},i.uniform4iv=function(){},i.uniformMatrix2fv=function(){},i.uniformMatrix3fv=function(){},i.uniformMatrix4fv=function(){},i.useProgram=function(){},i.validateProgram=function(){},i.vertexAttrib1f=function(){},i.vertexAttrib1fv=function(){},i.vertexAttrib2f=function(){},i.vertexAttrib2fv=function(){},i.vertexAttrib3f=function(){},i.vertexAttrib3fv=function(){},i.vertexAttrib4f=function(){},i.vertexAttrib4fv=function(){},i.vertexAttribPointer=function(){},i.viewport=function(){},i.configureBackBuffer=function(t,e,i,n,r){void 0===n&&(n=!0),void 0===r&&(r=!1)},i.compressedTexImage2D=function(){},i.createVertexArray=function(){throw"not implemented"},i.bindVertexArray=function(){throw"not implemented"},i.deleteVertexArray=function(){throw"not implemented"},i.isVertexArray=function(){throw"not implemented"},e.__init__=function(i){if(e.__init_native(),laya.webgl.WebGLContext._checkExtensions(i),!Ii._isWebGL2){t._setupVertexArrayObject&&(Me.onMiniGame?t._forceSetupVertexArrayObject(i):t._setupVertexArrayObject(i));var n=(i.rawgl||i).getExtension("OES_vertex_array_object");if(n){console.log("EXT:webgl support OES_vertex_array_object！");var r=i;r.createVertexArray=function(){return n.createVertexArrayOES()},r.bindVertexArray=function(t){n.bindVertexArrayOES(t)},r.deleteVertexArray=function(t){n.deleteVertexArrayOES(t)},r.isVertexArray=function(t){n.isVertexArrayOES(t)}}}},e._getExtension=function(t,i){var n=e._extentionVendorPrefixes;for(var r in n){var s=t.getExtension(n[r]+i);if(s)return s}return null},e._checkExtensions=function(t){return e._extTextureFilterAnisotropic=e._getExtension(t,"EXT_texture_filter_anisotropic"),e._compressedTextureS3tc=e._getExtension(t,"WEBGL_compressed_texture_s3tc"),e._compressedTexturePvrtc=e._getExtension(t,"WEBGL_compressed_texture_pvrtc"),e._compressedTextureEtc1=e._getExtension(t,"WEBGL_compressed_texture_etc1"),null},e.__init_native=function(){if(wi.isConchApp){var t=e;t.useProgram=t.useProgramForNative,t.activeTexture=t.activeTextureForNative,t.bindTexture=t.bindTextureForNative,t.bindVertexArray=t.bindVertexArrayForNative,t.setDepthTest=t.setDepthTestForNative,t.setDepthMask=t.setDepthMaskForNative,t.setDepthFunc=t.setDepthFuncForNative,t.setBlend=t.setBlendForNative,t.setBlendFunc=t.setBlendFuncForNative,t.setCullFace=t.setCullFaceForNative,t.setFrontFace=t.setFrontFaceForNative,t._checkExtensions(Me.window.LayaGLContext.instance)}},e.useProgram=function(t,i){return e._useProgram===i?!1:(t.useProgram(i),e._useProgram=i,!0)},e.setDepthTest=function(t,i){i!==e._depthTest&&(e._depthTest=i,i?t.enable(2929):t.disable(2929))},e.setDepthMask=function(t,i){i!==e._depthMask&&(e._depthMask=i,t.depthMask(i))},e.setDepthFunc=function(t,i){i!==e._depthFunc&&(e._depthFunc=i,t.depthFunc(i))},e.setBlend=function(t,i){i!==e._blend&&(e._blend=i,i?t.enable(3042):t.disable(3042))},e.setBlendFunc=function(t,i,n){(i!==e._sFactor||n!==e._dFactor)&&(e._sFactor=i,e._dFactor=n,t.blendFunc(i,n))},e.setCullFace=function(t,i){i!==e._cullFace&&(e._cullFace=i,i?t.enable(2884):t.disable(2884))},e.setFrontFace=function(t,i){i!==e._frontFace&&(e._frontFace=i,t.frontFace(i))},e.activeTexture=function(t,i){e._activedTextureID!==i&&(t.activeTexture(i),e._activedTextureID=i)},e.bindTexture=function(t,i,n){e._activeTextures[e._activedTextureID-33984]!==n&&(t.bindTexture(i,n),e._activeTextures[e._activedTextureID-33984]=n)},e.useProgramForNative=function(t,e){return t.useProgram(e),!0},e.setDepthTestForNative=function(t,e){e?t.enable(2929):t.disable(2929)},e.setDepthMaskForNative=function(t,e){t.depthMask(e)},e.setDepthFuncForNative=function(t,e){t.depthFunc(e)},e.setBlendForNative=function(t,e){e?t.enable(3042):t.disable(3042)},e.setBlendFuncForNative=function(t,e,i){t.blendFunc(e,i)},e.setCullFaceForNative=function(t,e){e?t.enable(2884):t.disable(2884)},e.setFrontFaceForNative=function(t,e){t.frontFace(e)},e.activeTextureForNative=function(t,e){t.activeTexture(e)},e.bindTextureForNative=function(t,e,i){t.bindTexture(e,i)},e.bindVertexArrayForNative=function(t,e){t.bindVertexArray(e)},e.DEPTH_BUFFER_BIT=256,e.STENCIL_BUFFER_BIT=1024,e.COLOR_BUFFER_BIT=16384,e.POINTS=0,e.LINES=1,e.LINE_LOOP=2,e.LINE_STRIP=3,e.TRIANGLES=4,e.TRIANGLE_STRIP=5,e.TRIANGLE_FAN=6,e.ZERO=0,e.ONE=1,e.SRC_COLOR=768,e.ONE_MINUS_SRC_COLOR=769,e.SRC_ALPHA=770,e.ONE_MINUS_SRC_ALPHA=771,e.DST_ALPHA=772,e.ONE_MINUS_DST_ALPHA=773,e.DST_COLOR=774,e.ONE_MINUS_DST_COLOR=775,e.SRC_ALPHA_SATURATE=776,e.FUNC_ADD=32774,e.BLEND_EQUATION=32777,e.BLEND_EQUATION_RGB=32777,e.BLEND_EQUATION_ALPHA=34877,e.FUNC_SUBTRACT=32778,e.FUNC_REVERSE_SUBTRACT=32779,e.BLEND_DST_RGB=32968,e.BLEND_SRC_RGB=32969,e.BLEND_DST_ALPHA=32970,e.BLEND_SRC_ALPHA=32971,e.CONSTANT_COLOR=32769,e.ONE_MINUS_CONSTANT_COLOR=32770,e.CONSTANT_ALPHA=32771,e.ONE_MINUS_CONSTANT_ALPHA=32772,e.BLEND_COLOR=32773,e.ARRAY_BUFFER=34962,e.ELEMENT_ARRAY_BUFFER=34963,e.ARRAY_BUFFER_BINDING=34964,e.ELEMENT_ARRAY_BUFFER_BINDING=34965,e.STREAM_DRAW=35040,e.STATIC_DRAW=35044,e.DYNAMIC_DRAW=35048,e.BUFFER_SIZE=34660,e.BUFFER_USAGE=34661,e.CURRENT_VERTEX_ATTRIB=34342,e.FRONT=1028,e.BACK=1029,e.CULL_FACE=2884,e.FRONT_AND_BACK=1032,e.BLEND=3042,e.DITHER=3024,e.STENCIL_TEST=2960,e.DEPTH_TEST=2929,e.SCISSOR_TEST=3089,e.POLYGON_OFFSET_FILL=32823,e.SAMPLE_ALPHA_TO_COVERAGE=32926,e.SAMPLE_COVERAGE=32928,e.NO_ERROR=0,e.INVALID_ENUM=1280,e.INVALID_VALUE=1281,e.INVALID_OPERATION=1282,e.OUT_OF_MEMORY=1285,e.CW=2304,e.CCW=2305,e.LINE_WIDTH=2849,e.ALIASED_POINT_SIZE_RANGE=33901,e.ALIASED_LINE_WIDTH_RANGE=33902,e.CULL_FACE_MODE=2885,e.FRONT_FACE=2886,e.DEPTH_RANGE=2928,e.DEPTH_WRITEMASK=2930,e.DEPTH_CLEAR_VALUE=2931,e.DEPTH_FUNC=2932,e.STENCIL_CLEAR_VALUE=2961,e.STENCIL_FUNC=2962,e.STENCIL_FAIL=2964,e.STENCIL_PASS_DEPTH_FAIL=2965,e.STENCIL_PASS_DEPTH_PASS=2966,e.STENCIL_REF=2967,e.STENCIL_VALUE_MASK=2963,e.STENCIL_WRITEMASK=2968,e.STENCIL_BACK_FUNC=34816,e.STENCIL_BACK_FAIL=34817,e.STENCIL_BACK_PASS_DEPTH_FAIL=34818,e.STENCIL_BACK_PASS_DEPTH_PASS=34819,e.STENCIL_BACK_REF=36003,e.STENCIL_BACK_VALUE_MASK=36004,e.STENCIL_BACK_WRITEMASK=36005,e.VIEWPORT=2978,e.SCISSOR_BOX=3088,e.COLOR_CLEAR_VALUE=3106,e.COLOR_WRITEMASK=3107,e.UNPACK_ALIGNMENT=3317,e.PACK_ALIGNMENT=3333,e.MAX_TEXTURE_SIZE=3379,e.MAX_VIEWPORT_DIMS=3386,e.SUBPIXEL_BITS=3408,e.RED_BITS=3410,e.GREEN_BITS=3411,e.BLUE_BITS=3412,e.ALPHA_BITS=3413,e.DEPTH_BITS=3414,e.STENCIL_BITS=3415,e.POLYGON_OFFSET_UNITS=10752,e.POLYGON_OFFSET_FACTOR=32824,e.TEXTURE_BINDING_2D=32873,e.SAMPLE_BUFFERS=32936,e.SAMPLES=32937,e.SAMPLE_COVERAGE_VALUE=32938,e.SAMPLE_COVERAGE_INVERT=32939,e.NUM_COMPRESSED_TEXTURE_FORMATS=34466,e.COMPRESSED_TEXTURE_FORMATS=34467,e.DONT_CARE=4352,e.FASTEST=4353,e.NICEST=4354,e.GENERATE_MIPMAP_HINT=33170,e.BYTE=5120,e.UNSIGNED_BYTE=5121,e.SHORT=5122,e.UNSIGNED_SHORT=5123,e.INT=5124,e.UNSIGNED_INT=5125,e.FLOAT=5126,e.DEPTH_COMPONENT=6402,e.ALPHA=6406,e.RGB=6407,e.RGBA=6408,e.LUMINANCE=6409,e.LUMINANCE_ALPHA=6410,e.UNSIGNED_SHORT_4_4_4_4=32819,e.UNSIGNED_SHORT_5_5_5_1=32820,e.UNSIGNED_SHORT_5_6_5=33635,e.FRAGMENT_SHADER=35632,e.VERTEX_SHADER=35633,e.MAX_VERTEX_ATTRIBS=34921,e.MAX_VERTEX_UNIFORM_VECTORS=36347,e.MAX_VARYING_VECTORS=36348,e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,e.MAX_TEXTURE_IMAGE_UNITS=34930,e.MAX_FRAGMENT_UNIFORM_VECTORS=36349,e.SHADER_TYPE=35663,e.DELETE_STATUS=35712,e.LINK_STATUS=35714,e.VALIDATE_STATUS=35715,e.ATTACHED_SHADERS=35717,e.ACTIVE_UNIFORMS=35718,e.ACTIVE_ATTRIBUTES=35721,e.SHADING_LANGUAGE_VERSION=35724,e.CURRENT_PROGRAM=35725,e.NEVER=512,e.LESS=513,e.EQUAL=514,e.LEQUAL=515,e.GREATER=516,e.NOTEQUAL=517,e.GEQUAL=518,e.ALWAYS=519,e.KEEP=7680,e.REPLACE=7681,e.INCR=7682,e.DECR=7683,e.INVERT=5386,e.INCR_WRAP=34055,e.DECR_WRAP=34056,e.VENDOR=7936,e.RENDERER=7937,e.VERSION=7938,e.NEAREST=9728,e.LINEAR=9729,e.NEAREST_MIPMAP_NEAREST=9984,e.LINEAR_MIPMAP_NEAREST=9985,e.NEAREST_MIPMAP_LINEAR=9986,e.LINEAR_MIPMAP_LINEAR=9987,e.TEXTURE_MAG_FILTER=10240,e.TEXTURE_MIN_FILTER=10241,e.TEXTURE_WRAP_S=10242,e.TEXTURE_WRAP_T=10243,e.TEXTURE_2D=3553,e.TEXTURE_3D=32879,e.TEXTURE=5890,e.TEXTURE_CUBE_MAP=34067,e.TEXTURE_BINDING_CUBE_MAP=34068,e.TEXTURE_CUBE_MAP_POSITIVE_X=34069,e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,e.MAX_CUBE_MAP_TEXTURE_SIZE=34076,e.TEXTURE0=33984,e.TEXTURE1=33985,e.TEXTURE2=33986,e.TEXTURE3=33987,e.TEXTURE4=33988,e.TEXTURE5=33989,e.TEXTURE6=33990,e.TEXTURE7=33991,e.TEXTURE8=33992,e.TEXTURE9=33993,e.TEXTURE10=33994,e.TEXTURE11=33995,e.TEXTURE12=33996,e.TEXTURE13=33997,e.TEXTURE14=33998,e.TEXTURE15=33999,e.TEXTURE16=34e3,e.TEXTURE17=34001,e.TEXTURE18=34002,e.TEXTURE19=34003,e.TEXTURE20=34004,e.TEXTURE21=34005,e.TEXTURE22=34006,e.TEXTURE23=34007,e.TEXTURE24=34008,e.TEXTURE25=34009,e.TEXTURE26=34010,e.TEXTURE27=34011,e.TEXTURE28=34012,e.TEXTURE29=34013,e.TEXTURE30=34014,e.TEXTURE31=34015,e.ACTIVE_TEXTURE=34016,e.REPEAT=10497,e.CLAMP_TO_EDGE=33071,e.MIRRORED_REPEAT=33648,e.FLOAT_VEC2=35664,e.FLOAT_VEC3=35665,e.FLOAT_VEC4=35666,e.INT_VEC2=35667,e.INT_VEC3=35668,e.INT_VEC4=35669,e.BOOL=35670,e.BOOL_VEC2=35671,e.BOOL_VEC3=35672,e.BOOL_VEC4=35673,e.FLOAT_MAT2=35674,e.FLOAT_MAT3=35675,e.FLOAT_MAT4=35676,e.SAMPLER_2D=35678,e.SAMPLER_CUBE=35680,e.VERTEX_ATTRIB_ARRAY_ENABLED=34338,e.VERTEX_ATTRIB_ARRAY_SIZE=34339,e.VERTEX_ATTRIB_ARRAY_STRIDE=34340,e.VERTEX_ATTRIB_ARRAY_TYPE=34341,e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,e.VERTEX_ATTRIB_ARRAY_POINTER=34373,e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,e.COMPILE_STATUS=35713,e.LOW_FLOAT=36336,e.MEDIUM_FLOAT=36337,e.HIGH_FLOAT=36338,e.LOW_INT=36339,e.MEDIUM_INT=36340,e.HIGH_INT=36341,e.FRAMEBUFFER=36160,e.RENDERBUFFER=36161,e.RGBA4=32854,e.RGB5_A1=32855,e.RGB565=36194,e.DEPTH_COMPONENT16=33189,e.STENCIL_INDEX=6401,e.STENCIL_INDEX8=36168,e.DEPTH_STENCIL=34041,e.RENDERBUFFER_WIDTH=36162,e.RENDERBUFFER_HEIGHT=36163,e.RENDERBUFFER_INTERNAL_FORMAT=36164,e.RENDERBUFFER_RED_SIZE=36176,e.RENDERBUFFER_GREEN_SIZE=36177,e.RENDERBUFFER_BLUE_SIZE=36178,e.RENDERBUFFER_ALPHA_SIZE=36179,e.RENDERBUFFER_DEPTH_SIZE=36180,e.RENDERBUFFER_STENCIL_SIZE=36181,e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,e.COLOR_ATTACHMENT0=36064,e.DEPTH_ATTACHMENT=36096,e.STENCIL_ATTACHMENT=36128,e.DEPTH_STENCIL_ATTACHMENT=33306,e.NONE=0,e.FRAMEBUFFER_COMPLETE=36053,e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,e.FRAMEBUFFER_UNSUPPORTED=36061,e.FRAMEBUFFER_BINDING=36006,e.RENDERBUFFER_BINDING=36007,e.MAX_RENDERBUFFER_SIZE=34024,e.INVALID_FRAMEBUFFER_OPERATION=1286,e.UNPACK_FLIP_Y_WEBGL=37440,e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,e.CONTEXT_LOST_WEBGL=37442,e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,e.BROWSER_DEFAULT_WEBGL=37444,e._extTextureFilterAnisotropic=null,e._compressedTextureS3tc=null,e._compressedTexturePvrtc=null,e._compressedTextureEtc1=null,e._glTextureIDs=[33984,33985,33986,33987,33988,33989,33990,33991],e._useProgram=null,e._depthTest=!0,e._depthMask=!0,e._depthFunc=513,e._blend=!1,e._sFactor=1,e._dFactor=0,e._cullFace=!1,e._frontFace=2305,e._activedTextureID=33984,n(e,["_extentionVendorPrefixes",function(){return this._extentionVendorPrefixes=["","WEBKIT_","MOZ_"]},"_activeTextures",function(){return this._activeTextures=new Array(8)}]),e}(),ge=function(){function e(){}var i;return r(e,"laya.net.LocalStorage"),e.__init__=function(){return e._baseClass||(e._baseClass=i,i.init()),e.items=e._baseClass.items,e.support=e._baseClass.support,e.support},e.setItem=function(t,i){e._baseClass.setItem(t,i)},e.getItem=function(t){return e._baseClass.getItem(t)},e.setJSON=function(t,i){e._baseClass.setJSON(t,i)},e.getJSON=function(t){return e._baseClass.getJSON(t)},e.removeItem=function(t){e._baseClass.removeItem(t)},e.clear=function(){e._baseClass.clear()},e._baseClass=null,e.items=null,e.support=!1,e.__init$=function(){i=function(){function e(){}return r(e,""),e.init=function(){try{e.support=!0,e.items=t.localStorage,e.setItem("laya","1"),e.removeItem("laya")}catch(i){e.support=!1}e.support||console.log("LocalStorage is not supprot or browser is private mode.")},e.setItem=function(t,i){try{e.support&&e.items.setItem(t,i)}catch(n){console.warn("set localStorage failed",n)}},e.getItem=function(t){return e.support?e.items.getItem(t):null},e.setJSON=function(t,i){try{e.support&&e.items.setItem(t,JSON.stringify(i))}catch(n){console.warn("set localStorage failed",n)}},e.getJSON=function(t){return JSON.parse(e.support?e.items.getItem(t):null)},e.removeItem=function(t){e.support&&e.items.removeItem(t)},e.clear=function(){e.support&&e.items.clear()},e.items=null,e.support=!1,e}()},e}(),ve=function(){function t(){}r(t,"laya.display.cmd.FillTextureCmd");var e=t.prototype;return e.recover=function(){this.texture=null,this.offset=null,this.other=null,Ki.recover("FillTextureCmd",this)},e.run=function(t,e,i){t.fillTexture(this.texture,this.x+e,this.y+i,this.width,this.height,this.type,this.offset,this.other)},s(0,e,"cmdID",function(){return"FillTexture"}),t.create=function(e,i,n,r,s,a,o,h){var _=Ki.getItemByClass("FillTextureCmd",t);return _.texture=e,_.x=i,_.y=n,_.width=r,_.height=s,_.type=a,_.offset=o,_.other=h,_},t.ID="FillTexture",t}(),ye=function(){function t(){}r(t,"laya.display.cmd.DrawPathCmd");var e=t.prototype;return e.recover=function(){this.paths=null,this.brush=null,this.pen=null,Ki.recover("DrawPathCmd",this)},e.run=function(t,e,i){t._drawPath(this.x+e,this.y+i,this.paths,this.brush,this.pen)},s(0,e,"cmdID",function(){return"DrawPath"}),t.create=function(e,i,n,r,s){var a=Ki.getItemByClass("DrawPathCmd",t);return a.x=e,a.y=i,a.paths=n,a.brush=r,a.pen=s,a},t.ID="DrawPath",t}(),Ee=function(){function t(){this._obj=null,this._obj=t.supportWeakMap?new Me.window.WeakMap:{},t.supportWeakMap||t._maps.push(this)}r(t,"laya.utils.WeakObject");var e=t.prototype;return e.set=function(e,i){if(null!=e)if(t.supportWeakMap){var n=e;("string"==typeof e||"number"==typeof e)&&(n=t._keys[e],n||(n=t._keys[e]={k:e})),this._obj.set(n,i)}else"string"==typeof e||"number"==typeof e?this._obj[e]=i:(e.$_GID||(e.$_GID=Q.getGID()),this._obj[e.$_GID]=i)},e.get=function(e){if(null==e)return null;if(t.supportWeakMap){var i="string"==typeof e||"number"==typeof e?t._keys[e]:e;return i?this._obj.get(i):null}return"string"==typeof e||"number"==typeof e?this._obj[e]:this._obj[e.$_GID]},e.del=function(e){if(null!=e)if(t.supportWeakMap){var i="string"==typeof e||"number"==typeof e?t._keys[e]:e;if(!i)return;this._obj.delete(i)}else"string"==typeof e||"number"==typeof e?delete this._obj[e]:delete this._obj[this._obj.$_GID]},e.has=function(e){if(null==e)return!1;if(t.supportWeakMap){var i="string"==typeof e||"number"==typeof e?t._keys[e]:e;return this._obj.has(i)}return"string"==typeof e||"number"==typeof e?null!=this._obj[e]:null!=this._obj[this._obj.$_GID]},t.__init__=function(){t.supportWeakMap=null!=Me.window.WeakMap,t.supportWeakMap||i.systemTimer.loop(t.delInterval,null,t.clearCache)},t.clearCache=function(){for(var e=0,i=t._maps.length;i>e;e++){var n=t._maps[e];n._obj={}}},t.supportWeakMap=!1,t.delInterval=6e5,t._keys={},t._maps=[],n(t,["I",function(){return this.I=new t}]),t}(),Ae=function(){function t(){}return r(t,"laya.html.utils.HTMLParse"),t.getInstance=function(e){var i=Ki.getItem(t._htmlClassMapShort[e]);return i||(i=Te.getInstance(e)),i},t.parse=function(e,i,n){i=i.replace(/<br>/g,"<br/>"),i="<root>"+i+"</root>",i=i.replace(t.spacePattern,t.char255);var r=Q.parseXMLFromString(i);t._parseXML(e,r.childNodes[0].childNodes,n)},t._parseXML=function(e,i,n,r){var s=0,a=0;if(i.join||i.item)for(s=0,a=i.length;a>s;++s)t._parseXML(e,i[s],n,r);else{var o,h;
if(3==i.nodeType){var _;return e instanceof laya.html.dom.HTMLDivParser?(null==i.nodeName&&(i.nodeName="#text"),h=i.nodeName.toLowerCase(),_=i.textContent.replace(/^\s+|\s+$/g,""),_.length>0&&(o=t.getInstance(h),o&&(e.addChild(o),o.innerTEXT=_.replace(t.char255AndOneSpacePattern," ")))):(_=i.textContent.replace(/^\s+|\s+$/g,""),_.length>0&&(e.innerTEXT=_.replace(t.char255AndOneSpacePattern," "))),void 0}if(h=i.nodeName.toLowerCase(),"#comment"==h)return;if(o=t.getInstance(h)){"p"==h?(e.addChild(t.getInstance("br")),o=e.addChild(o),e.addChild(t.getInstance("br"))):o=e.addChild(o),o.URI=n,o.href=r;var l=i.attributes;if(l&&l.length>0)for(s=0,a=l.length;a>s;++s){var u=l[s],c=u.nodeName,d=u.value;o._setAttributes(c,d)}t._parseXML(o,i.childNodes,n,o.href)}else t._parseXML(e,i.childNodes,n,r)}},t.char255=String.fromCharCode(255),t.spacePattern=/&nbsp;|&#160;/g,t.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),t._htmlClassMapShort={div:"HTMLDivParser",p:"HTMLElement",img:"HTMLImageElement",span:"HTMLElement",br:"HTMLBrElement",style:"HTMLStyleElement",font:"HTMLElement",a:"HTMLElement","#text":"HTMLElement",link:"HTMLLinkElement"},t}(),Ce=(function(){function t(t,e){this.submitStartPos=0,this.submitEndPos=0,this.context=null,this.touches=[],this.submits=[],this.sprite=null,this._mesh=null,this._pathMesh=null,this._triangleMesh=null,this.meshlist=[],this._oldMesh=null,this._oldPathMesh=null,this._oldTriMesh=null,this._oldMeshList=null,this.oldMatrix=null,this.cachedClipInfo=new ui,this.context=t,this.sprite=e,t._globalClipMatrix.copyTo(this.cachedClipInfo)}r(t,"laya.webgl.canvas.WebGLCacheAsNormalCanvas");var e=t.prototype;return e.startRec=function(){this.touches.length=0,this.context.touches=this.touches,this.context._globalClipMatrix.copyTo(this.cachedClipInfo),this.submits.length=0,this.submitStartPos=this.context._submits._length;for(var e=0,i=this.meshlist.length;i>e;e++){var n=this.meshlist[e];n.canReuse?n.releaseMesh():n.destroy()}this.meshlist.length=0,this._mesh=bn.getAMesh(),this._pathMesh=fn.getAMesh(),this._triangleMesh=Rn.getAMesh(),this.meshlist.push(this._mesh),this.meshlist.push(this._pathMesh),this.meshlist.push(this._triangleMesh),this.context._curSubmit=j.RENDERBASE,this._oldMesh=this.context._mesh,this._oldPathMesh=this.context._pathMesh,this._oldTriMesh=this.context._triangleMesh,this._oldMeshList=this.context.meshlist,this.context._mesh=this._mesh,this.context._pathMesh=this._pathMesh,this.context._triangleMesh=this._triangleMesh,this.context.meshlist=this.meshlist,this.oldMatrix=this.context._curMat,this.context._curMat=t.matI},e.endRec=function(){var t=this.context._submits;this.submitEndPos=t._length;for(var e=this.submitEndPos-this.submitStartPos,i=0;e>i;i++)this.submits.push(t[this.submitStartPos+i]);t._length-=e,this.context._mesh=this._oldMesh,this.context._pathMesh=this._oldPathMesh,this.context._triangleMesh=this._oldTriMesh,this.context.meshlist=this._oldMeshList,this.context._curSubmit=j.RENDERBASE,this.context._curMat=this.oldMatrix,this.context.touches=null},e.isCacheValid=function(){var t=this.context._globalClipMatrix;return t.a!=this.cachedClipInfo.a||t.b!=this.cachedClipInfo.b||t.c!=this.cachedClipInfo.c||t.d!=this.cachedClipInfo.d||t.tx!=this.cachedClipInfo.tx||t.ty!=this.cachedClipInfo.ty?!1:!0},e.flushsubmit=function(){var t=j.RENDERBASE;this.submits.forEach(function(e){e!=j.RENDERBASE&&(j.preRender=t,t=e,e.renderSubmit())})},e.releaseMem=function(){},n(t,["matI",function(){return this.matI=new ui}]),t}(),function(){function t(){this.fontPages=[],this.fontPagesName=[],this._curPage=null,this.tempUV=[0,0,1,0,1,1,0,1],this.fontScaleX=1,this.fontScaleY=1,this._curStrPos=0,this.tempMat=new ui;var e=!1,n=i.MiniAdpter;n&&n.systemInfo&&n.systemInfo.system&&(e="ios 10.1.1"===n.systemInfo.system.toLowerCase()),Me.onMiniGame&&!e&&(t.isWan1Wan=!0),t.charbookInst=this,Fe.charRender=wi.isConchApp?new Tn:new Sn}var e;r(t,"laya.webgl.resource.CharBook");var s=t.prototype;return s.selectFont=function(e,i){var n,r=Math.max(this.fontScaleX,this.fontScaleY),s=i*r;if(e===t._lastFont&&s===t._lastFontSz)n=t._lastCharPage;else{var a=Fe.getBmpSize(i)*r,o=Math.floor(a/t.gridSize),h=e+o,_=this.fontPagesName.indexOf(h);if(0>_){var l=new Fe(e,a,wi.isConchApp?0:Math.ceil(i/4));this.fontPages.push(l),this.fontPagesName.push(h),n=l}else n=this.fontPages[_];n.selectSize(i,a),t._lastFont=e,t._lastFontSz=s,t._lastCharPage=n}return n},s.isEmoji=function(e){return t._emojiReg.test(e)},s.getNextChar=function(t){var e=t.length,i=this._curStrPos;if(i>=e)return null;for(var n=i,r=0;e>n;n++){var s=t.charCodeAt(n);if(s>>>11==27){if(0==r)r=1;else if(1==r)break;n++}else if(65038===s||65039===s);else if(8205==s)r=2;else if(0==r)r=1;else if(1==r)break}return this._curStrPos=n,t.substring(i,n)},s.hasFreedText=function(t,e){if(t&&t.length>0)for(var i=e,n=t.length;n>i;i++){var r=t[i];if(r)for(var s=0,a=r.length;a>s;s++){var o=r[s].ri;if(o.deleted||o.tex.__destroyed)return!0}}return!1},s._fast_filltext=function(e,i,n,r,s,a,o,h,_,l,u){if(void 0===u&&(u=0),!(i&&i.length<1||n&&n.length<1)){if(t._curFont=a._font,this.fontScaleX=this.fontScaleY=1,t.scaleFontWithCtx){var c=e.getMatScaleX(),d=e.getMatScaleY();if(1e-4>c||.1>d)return;c>1&&(this.fontScaleX=c),d>1&&(this.fontScaleY=d)}a._italic&&(e._italicDeg=12),this._curPage=this.selectFont(a._family,a._size);var f=r,p=i,m=i,g=0,v=!n&&i instanceof laya.utils.WordText,y=!!n,E=t.cacheRenderInfoInWordText&&v?p.pageChars:[];switch(v?(m=p._text,g=p.width,0>g&&(g=p.width=this._curPage.getWidth(m))):g=this._curPage.getWidth(m),l){case w.ENUM_TEXTALIGN_CENTER:f=r-g/2;break;case w.ENUM_TEXTALIGN_RIGHT:f=r-g;break;default:f=r}p&&p.lastGCCnt!=this._curPage.gcCnt&&(p.lastGCCnt=this._curPage.gcCnt,this.hasFreedText(E,p.startID)&&(E=p.pageChars=[]));var A=v?p.startID:0,C=v?p.startIDStroke:0;if(!E||E.length<1){var S=null;t.scaleFontWithCtx&&(Fe.charRender.scale(Math.max(this.fontScaleX,1),Math.max(this.fontScaleY,1)),(this.fontScaleX>1||this.fontScaleY>1)&&(S=""+(10*this.fontScaleX|0)+(10*this.fontScaleY|0))),A=-1,C=-1;var D=0,R=0;this._curStrPos=0;var T;if(y){var x=n[this._curStrPos++];T=x.char,D=x.x,R=x.y}else T=this.getNextChar(m);for(var b=a._bold;T;){var P,L=this.isEmoji(T);if(P=this._curPage.getChar(T,_,a._size,o,h,b,!1,S),!P)break;if(P.char=T,P.isSpace);else{var I=E[P.tex.id];I||(E[P.tex.id]=I=[],(0>A||A>P.tex.id)&&(A=P.tex.id)),I.push({ri:P,isEmoji:L,x:D,y:R,w:P.bmpWidth/this.fontScaleX,h:P.bmpHeight/this.fontScaleY})}y?(x=n[this._curStrPos++],x?(T=x.char,D=x.x,R=x.y):T=null):(T=this.getNextChar(m),D+=P.width)}v&&(p.startID=A,p.startIDStroke=C)}this._drawResortedWords(e,f,E,A,s),e._italicDeg=0}},s.fillWords=function(e,i,n,r,s,a,h,_){if(i&&!(i.length<=0)){var l=o.create(a).numColor,u=h?o.create(h).numColor:0;t._curFont=s;var c=le.Parse(s);this._fast_filltext(e,null,i,n,r,c,l,u,_,0,0)}},s.filltext=function(e,i,n,r,s,a,h,_,l,u){if(void 0===u&&(u=0),!(i.length<=0)){var c=o.create(a).numColor,d=h?o.create(h).numColor:0;t._curFont=s;var f=le.Parse(s),p=0;switch(l){case"center":p=w.ENUM_TEXTALIGN_CENTER;break;case"right":p=w.ENUM_TEXTALIGN_RIGHT}this._fast_filltext(e,i,null,n,r,f,c,d,_,p,u)}},s.filltext_native=function(e,i,n,r,s,a,h,_,l,u,c){if(void 0===c&&(c=0),!(i&&i.length<=0)){var d=o.create(h).numColor,f=_?o.create(_).numColor:0;if(t._curFont=a,this.fontScaleX=this.fontScaleY=1,t.scaleFontWithCtx){var p=e._curMat.getScaleX(),m=e._curMat.getScaleY();if(1e-4>p||.1>m)return;this.fontScaleX=p,this.fontScaleY=m,Fe.charRender.scale(this.fontScaleX,this.fontScaleY)}var g=le.Parse(a),v=g._family,y=g._bold;g._italic&&(e._italicDeg=12),this._curPage=this.selectFont(v,g._size*this.fontScaleX);var E=r,A=i,C=i,S=0,D=!n&&C instanceof laya.utils.WordText,R=!!n,T=t.cacheRenderInfoInWordText&&D?A.pageChars:[];switch(D?(C=A.toString(),S=A.width,0>S&&(S=A.width=this._curPage.getWidth(C))):S=this._curPage.getWidth(C),u){case"center":E=r-S/2;break;case"right":E=r-S;break;default:E=r}if(T){for(var x=!1,b=0,P=T.length;P>b;b++){var L=T[b];if(L){for(var I=0,M=L.length;M>I;I++){var w=L[I];if(w.ri.tex.__destroyed){x=!0;break}}if(x)break}}x&&(T=A.pageChars=[])}if(!T||T.length<=0){var O=null;t.scaleFontWithCtx&&(Fe.charRender.scale(Math.max(this.fontScaleX,1),Math.max(this.fontScaleY,1)),(this.fontScaleX>1||this.fontScaleY>1)&&(O=""+(10*this.fontScaleX|0)+(10*this.fontScaleY|0)));var B=0,N=0;this._curStrPos=0;var F;if(R){var k=n[this._curStrPos++];F=k.char,B=k.x,N=k.y}else F=this.getNextChar(C);for(y=g._bold;F;){var V,U=this.isEmoji(F);if(V=this._curPage.getChar(F,l,g._size,d,f,y,!1,O),V.isSpace);else{var W=T[V.tex.id];W||(T[V.tex.id]=W=[]),W.push({ri:V,isEmoji:U,x:B,y:N,color:h,nColor:d})}R?(k=n[this._curStrPos++],k?(F=k.char,B=k.x,N=k.y):F=null):(B+=V.width,F=this.getNextChar(C))}}var G=e._drawTextureUseColor;this._drawResortedWords_native(e,E,T,s),e._drawTextureUseColor=G,e._italicDeg=0}},s._drawResortedWords=function(t,e,i,n,r){var s=t.getFillColor();t.setFillColor(t.mixRGBandAlpha(16777215)),e-=this._curPage.margin_left,r-=this._curPage.margin_top;for(var a=n,o=i.length;o>a;a++){var h=i[a];if(h){var _=h.length;if(!(0>=_))for(var l=0;_>l;l++){var u=h[l],c=u.ri;c.isSpace||(c.touch(),t.drawTexAlign=!0,t._drawTextureM(c.tex.texture,e+u.x,r+u.y,u.w,u.h,null,1,c.uv),t.touches&&t.touches.push(c))}}}t.setFillColor(s)},s._drawResortedWords_native=function(t,e,i,n){for(var r=0,s=0,a=i.length;a>s;s++){var o=i[s];if(o)for(var h=0,_=o.length;_>h;h++){var l=o[h],u=l.ri;u.isSpace||(t._drawTextureUseColor=!1,r!=l.nColor&&(t.fillStyle=l.color,r=l.nColor),u.touch(),this._drawCharRenderInfo(t,l.ri,e+l.x,l.y+n))}}},s._drawCharRenderInfo=function(t,e,i,n){t._drawTextureM(e.tex.texture,i-this._curPage.margin_left,n-this._curPage.margin_top,e.bmpWidth,e.bmpHeight,null,1,e.uv),t.touches&&t.touches.push(e)},s.GC=function(){var t=this.fontPages.length;if(t){var e=Li.loopCount%t;this.fontPages[e].removeLRU()}},t.textureWidth=512,t.cacheRenderInfoInWordText=!0,t.scaleFontWithCtx=!0,t.gridSize=16,t.debug=!1,t._curFont=null,t.charbookInst=null,t._fontMem=0,t._lastFont=null,t._lastFontSz=0,t._lastCharPage=null,t.isWan1Wan=!1,n(t,["_emojiReg",function(){return this._emojiReg=/(?:0\u20E3|1\u20E3|2\u20E3|3\u20E3|4\u20E3|5\u20E3|6\u20E3|7\u20E3|8\u20E3|9\u20E3|#\u20E3|\*\u20E3|\uD83C(?:\uDDE6\uD83C(?:\uDDE8|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDEE|\uDDF1|\uDDF2|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFC|\uDDFD|\uDDFF)|\uDDE7\uD83C(?:\uDDE6|\uDDE7|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDEF|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFB|\uDDFC|\uDDFE|\uDDFF)|\uDDE8\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF5|\uDDF7|\uDDFA|\uDDFB|\uDDFC|\uDDFD|\uDDFE|\uDDFF)|\uDDE9\uD83C(?:\uDDEA|\uDDEC|\uDDEF|\uDDF0|\uDDF2|\uDDF4|\uDDFF)|\uDDEA\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEC|\uDDED|\uDDF7|\uDDF8|\uDDF9|\uDDFA)|\uDDEB\uD83C(?:\uDDEE|\uDDEF|\uDDF0|\uDDF2|\uDDF4|\uDDF7)|\uDDEC\uD83C(?:\uDDE6|\uDDE7|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDF1|\uDDF2|\uDDF3|\uDDF5|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFC|\uDDFE)|\uDDED\uD83C(?:\uDDF0|\uDDF2|\uDDF3|\uDDF7|\uDDF9|\uDDFA)|\uDDEE\uD83C(?:\uDDE8|\uDDE9|\uDDEA|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9)|\uDDEF\uD83C(?:\uDDEA|\uDDF2|\uDDF4|\uDDF5)|\uDDF0\uD83C(?:\uDDEA|\uDDEC|\uDDED|\uDDEE|\uDDF2|\uDDF3|\uDDF5|\uDDF7|\uDDFC|\uDDFE|\uDDFF)|\uDDF1\uD83C(?:\uDDE6|\uDDE7|\uDDE8|\uDDEE|\uDDF0|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFB|\uDDFE)|\uDDF2\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF5|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFB|\uDDFC|\uDDFD|\uDDFE|\uDDFF)|\uDDF3\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEB|\uDDEC|\uDDEE|\uDDF1|\uDDF4|\uDDF5|\uDDF7|\uDDFA|\uDDFF)|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C(?:\uDDE6|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF7|\uDDF8|\uDDF9|\uDDFC|\uDDFE)|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C(?:\uDDEA|\uDDF4|\uDDF8|\uDDFA|\uDDFC)|\uDDF8\uD83C(?:\uDDE6|\uDDE7|\uDDE8|\uDDE9|\uDDEA|\uDDEC|\uDDED|\uDDEE|\uDDEF|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF7|\uDDF8|\uDDF9|\uDDFB|\uDDFD|\uDDFE|\uDDFF)|\uDDF9\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEB|\uDDEC|\uDDED|\uDDEF|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF7|\uDDF9|\uDDFB|\uDDFC|\uDDFF)|\uDDFA\uD83C(?:\uDDE6|\uDDEC|\uDDF2|\uDDF8|\uDDFE|\uDDFF)|\uDDFB\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEC|\uDDEE|\uDDF3|\uDDFA)|\uDDFC\uD83C(?:\uDDEB|\uDDF8)|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C(?:\uDDEA|\uDDF9)|\uDDFF\uD83C(?:\uDDE6|\uDDF2|\uDDFC)))|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2694\u2696\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD79\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED0\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3]|\uD83E[\uDD10-\uDD18\uDD80-\uDD84\uDDC0]/g},"_uint32",function(){return this._uint32=new Uint32Array(1)},"trash",function(){return this.trash=new e(t.textureWidth)}]),t.__init$=function(){e=function(){function t(t){this.poolLen=0,this.cleanTm=0,this.texW=0,this.pool=new Array(10),this.texW=t}r(t,"");var e=t.prototype;return e.getAPage=function(t){if(this.poolLen>0){var e=this.pool[--this.poolLen];return e.setGridNum(t),this.poolLen>0&&this.clean(),e}return new hr(this.texW,this.texW,t)},e.discardPage=function(t){this.clean(),t&&(t.genID++,this.poolLen>=this.pool.length&&(this.pool=this.pool.concat(new Array(10))),t.reset(),this.pool[this.poolLen++]=t)},e.clean=function(){var t=i.stage.getFrameTm();if(0===this.cleanTm&&(this.cleanTm=t),t-this.cleanTm>3e4){for(var e=0;e<this.poolLen;e++){var n=this.pool[e];t-n._discardTm>2e4&&(n.destroy(),this.pool[e]=this.pool[this.poolLen-1],this.poolLen--,e--)}this.cleanTm=t}},t}()},t}()),Se=function(){function t(){this._commandEncoder=null}r(t,"laya.layagl.ConchGraphicsAdpt");var e=t.prototype;return e._createData=function(){this._commandEncoder=Le.instance.createCommandEncoder(128,64,!0)},e._clearData=function(){this._commandEncoder&&this._commandEncoder.clearEncoding()},e._destroyData=function(){this._commandEncoder&&(this._commandEncoder.clearEncoding(),this._commandEncoder=null)},t.__init__=function(){var e=Ue.prototype,i=t.prototype,n=["_createData","_clearData","_destroyData"],r=0,s=0;s=n.length;var a;for(r=0;s>r;r++)a=n[r],e[a]=i[a]},t}(),De=function(){function t(){}r(t,"laya.display.css.BoundsStyle");var e=t.prototype;return e.reset=function(){return this.bounds&&this.bounds.recover(),this.userBounds&&this.userBounds.recover(),this.bounds=null,this.userBounds=null,this.temBM=null,this},e.recover=function(){Ki.recover("BoundsStyle",this.reset())},t.create=function(){return Ki.getItemByClass("BoundsStyle",t)},t}(),Re=(function(){function t(){}return r(t,"laya.display.SpriteConst"),t.POSRENDERTYPE=0,t.POSBUFFERBEGIN=1,t.POSBUFFEREND=2,t.POSFRAMECOUNT=3,t.POSREPAINT=4,t.POSVISIBLE_NATIVE=5,t.POSX=6,t.POSY=7,t.POSPIVOTX=8,t.POSPIVOTY=9,t.POSSCALEX=10,t.POSSCALEY=11,t.POSSKEWX=12,t.POSSKEWY=13,t.POSROTATION=14,t.POSTRANSFORM_FLAG=15,t.POSMATRIX=16,t.POSCOLOR=22,t.POSGRAPICS=23,t.POSSIM_TEXTURE_ID=24,t.POSSIM_TEXTURE_DATA=25,t.POSLAYAGL3D=26,t.POSCUSTOM=27,t.POSCLIP=28,t.POSCLIP_NEG_POS=32,t.POSCOLORFILTER_COLOR=34,t.POSCOLORFILTER_ALPHA=50,t.POSCALLBACK_OBJ_ID=54,t.POSCUSTOM_CALLBACK_FUN_ID=55,t.POSCANVAS_CALLBACK_FUN_ID=56,t.POSCANVAS_CALLBACK_END_FUN_ID=57,t.POSCANVAS_BEGIN_CMD_ID=58,t.POSCANVAS_END_CMD_ID=59,t.POSCANVAS_DRAW_TARGET_CMD_ID=60,t.POSCANVAS_DRAW_TARGET_PARAM_ID=61,t.POSLAYA3D_FUN_ID=62,t.POSCACHE_CANVAS_SKIP_PAINT_FLAG=63,t.POSFILTER_BEGIN_CMD_ID=64,t.POSFILTER_CALLBACK_FUN_ID=65,t.POSFILTER_END_CMD_ID=66,t.POSFILTER_END_CALLBACK_FUN_ID=67,t.POSGRAPHICS_CALLBACK_FUN_ID=68,t.POSMASK_CALLBACK_FUN_ID=69,t.POSMASK_CMD_ID=70,t.POSBLEND_SRC=71,t.POSBLEND_DEST=72,t.POSSIM_RECT_FILL_CMD=73,t.POSSIM_RECT_FILL_DATA=74,t.POSSIM_RECT_STROKE_CMD=75,t.POSSIM_RECT_STROKE_DATA=76,t.POSSIZE=77,t.ALPHA=1,t.TRANSFORM=2,t.BLEND=4,t.CANVAS=8,t.FILTERS=16,t.MASK=32,t.CLIP=64,t.STYLE=128,t.TEXTURE=256,t.GRAPHICS=512,t.LAYAGL3D=1024,t.CUSTOM=2048,t.ONECHILD=4096,t.CHILDS=8192,t.REPAINT_NONE=0,t.REPAINT_NODE=1,t.REPAINT_CACHE=2,t.REPAINT_ALL=3,t}(),function(){function t(){}return r(t,"laya.system.System"),t.changeDefinition=function(t,e){i[t]=e;var n=t+"=classObj";i._runScript(n)},t.__init__=function(){},t}()),Te=function(){function t(){}return r(t,"laya.utils.ClassUtils"),t.regClass=function(e,i){t._classMap[e]=i},t.regShortClassName=function(e){for(var i=0;i<e.length;i++){var n=e[i],r=n.name;t._classMap[r]=n}},t.getRegClass=function(e){return t._classMap[e]},t.getClass=function(e){var n=t._classMap[e]||e;return"string"==typeof n?i.__classmap[n]||i[e]:n},t.getInstance=function(e){var i=t.getClass(e);return i?new i:(console.warn("[error] Undefined class:",e),null)},t.createByJson=function(e,i,n,r,s){"string"==typeof e&&(e=JSON.parse(e));var a=e.props;if(!i&&(i=s?s.runWith(e):t.getInstance(a.runtime||e.type),!i))return null;var o=e.child;if(o)for(var h=0,_=o.length;_>h;h++){var l=o[h];if("render"!==l.props.name&&"render"!==l.props.renderType||!i._$set_itemRender)if("Graphic"==l.type)t._addGraphicsToSprite(l,i);else if(t._isDrawType(l.type))t._addGraphicToSprite(l,i,!0);else{var u=t.createByJson(l,null,n,r,s);"Script"===l.type?u.hasOwnProperty("owner")?u.owner=i:u.hasOwnProperty("target")&&(u.target=i):"mask"==l.props.renderType?i.mask=u:i.addChild(u)}else i.itemRender=l}if(a)for(var c in a){var d=a[c];"var"===c&&n?n[d]=i:d instanceof Array&&"function"==typeof i[c]?i[c].apply(i,d):i[c]=d}return r&&e.customProps&&r.runWith([i,e]),i.created&&i.created(),i},t._addGraphicsToSprite=function(e,i){var n=e.child;if(n&&!(n.length<1)){var r=t._getGraphicsFromSprite(e,i),s=0,a=0;e.props&&(s=t._getObjVar(e.props,"x",0),a=t._getObjVar(e.props,"y",0)),0!=s&&0!=a&&r.translate(s,a);var o=0,h=0;for(h=n.length,o=0;h>o;o++)t._addGraphicToGraphics(n[o],r);0!=s&&0!=a&&r.translate(-s,-a)}},t._addGraphicToSprite=function(e,i,n){void 0===n&&(n=!1);var r=n?t._getGraphicsFromSprite(e,i):i.graphics;t._addGraphicToGraphics(e,r)},t._getGraphicsFromSprite=function(t,e){if(!t||!t.props)return e.graphics;var i=t.props.renderType;if("hit"===i||"unHit"===i){var n=e._style.hitArea||(e.hitArea=new Si);n[i]||(n[i]=new Ue);var r=n[i]}return r||(r=e.graphics),r},t._getTransformData=function(e){var i;(e.hasOwnProperty("pivotX")||e.hasOwnProperty("pivotY"))&&(i=i||new ui,i.translate(-t._getObjVar(e,"pivotX",0),-t._getObjVar(e,"pivotY",0)));{var n=t._getObjVar(e,"scaleX",1),r=t._getObjVar(e,"scaleY",1),s=t._getObjVar(e,"rotation",0);t._getObjVar(e,"skewX",0),t._getObjVar(e,"skewY",0)}return(1!=n||1!=r||0!=s)&&(i=i||new ui,i.scale(n,r),i.rotate(.0174532922222222*s)),i},t._addGraphicToGraphics=function(e,i){var n;if(n=e.props){var r;if(r=t.DrawTypeDic[e.type]){var s=i,a=t._getParams(n,r[1],r[2],r[3]),o=t._tM;(o||1!=t._alpha)&&(s.save(),o&&s.transform(o),1!=t._alpha&&s.alpha(t._alpha)),s[r[0]].apply(s,a),(o||1!=t._alpha)&&s.restore()}}},t._adptLineData=function(t){return t[2]=parseFloat(t[0])+parseFloat(t[2]),t[3]=parseFloat(t[1])+parseFloat(t[3]),t},t._adptTextureData=function(t){return t[0]=hn.getRes(t[0]),t},t._adptLinesData=function(e){return e[2]=t._getPointListByStr(e[2]),e},t._isDrawType=function(e){return"Image"===e?!1:t.DrawTypeDic.hasOwnProperty(e)},t._getParams=function(e,i,n,r){void 0===n&&(n=0);var s=t._temParam;s.length=i.length;var a=0,o=0;for(o=i.length,a=0;o>a;a++)s[a]=t._getObjVar(e,i[a][0],i[a][1]);t._alpha=t._getObjVar(e,"alpha",1);var h;return h=t._getTransformData(e),h?(n||(n=0),h.translate(s[n],s[n+1]),s[n]=s[n+1]=0,t._tM=h):t._tM=null,r&&t[r]&&(s=t[r](s)),s},t._getPointListByStr=function(t){var e=t.split(","),i=0,n=0;for(n=e.length,i=0;n>i;i++)e[i]=parseFloat(e[i]);return e},t._getObjVar=function(t,e,i){return t.hasOwnProperty(e)?t[e]:i},t._temParam=[],t._classMap={Sprite:On,Scene:_r,Text:ur,Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivParser",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement",link:"laya.html.dom.HTMLLinkElement"},t._tM=null,t._alpha=0/0,n(t,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),t}(),xe=(function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._paramData=null,this._texture=null,this._x=0/0,this._y=0/0,this._width=0/0,this._height=0/0,this._matrix=null,this._alpha=0/0,this._color=null,this._blendMode=null,this._cmdCurrentPos=0,this._blend_src=0,this._blend_dest=0}r(t,"laya.layagl.cmdNative.DrawTextureCmdNative");var e=t.prototype;return e.recover=function(){this._texture=null,Ki.recover("DrawTextureCmd",this)},e._setBlendMode=function(t){switch(t){case"normal":this._blend_src=1,this._blend_dest=771;break;case"add":this._blend_src=1,this._blend_dest=772;break;case"multiply":this._blend_src=774,this._blend_dest=771;break;case"screen":this._blend_src=1,this._blend_dest=1;break;case"light":this._blend_src=1,this._blend_dest=1;break;case"overlay":this._blend_src=1,this._blend_dest=769;break;case"destination-out":this._blend_src=0,this._blend_dest=0;break;case"mask":this._blend_src=0,this._blend_dest=770;break;default:alert("_setBlendMode Unknown type")}},e._mixRGBandAlpha=function(t,e){var i=(4278190080&t)>>>24;return 0!=i?i*=e:i=255*e,16777215&t|i<<24},s(0,e,"cmdID",function(){return"DrawTexture"}),s(0,e,"matrix",function(){return this._matrix},function(e){this._matrix||(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.getPtrID(),Le.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._matrix=e;var i=this._paramData._float32Data;i[t._PARAM_MATRIX_POS_]=e.a,i[t._PARAM_MATRIX_POS_+1]=e.b,i[t._PARAM_MATRIX_POS_+2]=e.c,i[t._PARAM_MATRIX_POS_+3]=e.d,i[t._PARAM_MATRIX_POS_+4]=e.tx,i[t._PARAM_MATRIX_POS_+5]=e.ty,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"y",function(){return this._y},function(e){this._y=e;var i=this._paramData._float32Data;i[t._PARAM_VB_POS_+1]=this._y,i[t._PARAM_VB_POS_+7]=this._y,i[t._PARAM_VB_POS_+13]=this._y+this._height,i[t._PARAM_VB_POS_+19]=this._y+this._height,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"texture",function(){return this._texture},function(e){if(e&&e.url){this._texture=e,this._paramData._int32Data[t._PARAM_TEXTURE_POS_]=this._texture.bitmap._glTexture.id;var i=this._paramData._float32Data,n=this.texture.uv;i[t._PARAM_VB_POS_+2]=n[0],i[t._PARAM_VB_POS_+3]=n[1],i[t._PARAM_VB_POS_+8]=n[2],i[t._PARAM_VB_POS_+9]=n[3],i[t._PARAM_VB_POS_+14]=n[4],i[t._PARAM_VB_POS_+15]=n[5],i[t._PARAM_VB_POS_+20]=n[6],i[t._PARAM_VB_POS_+21]=n[7],Le.syncBufferToRenderThread(this._paramData)}}),s(0,e,"width",function(){return this._width},function(e){this._width=e;var i=this._paramData._float32Data;i[t._PARAM_VB_POS_]=this._x,i[t._PARAM_VB_POS_+6]=this._x+this._width,i[t._PARAM_VB_POS_+12]=this._x+this._width,i[t._PARAM_VB_POS_+18]=this._x,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"x",function(){return this._x},function(e){this._x=e;var i=this._paramData._float32Data;i[t._PARAM_VB_POS_]=this._x,i[t._PARAM_VB_POS_+6]=this._x+this._width,i[t._PARAM_VB_POS_+12]=this._x+this._width,i[t._PARAM_VB_POS_+18]=this._x,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"height",function(){return this._height},function(e){this._height=e;var i=this._paramData._float32Data;i[t._PARAM_VB_POS_+1]=this._y,i[t._PARAM_VB_POS_+7]=this._y,i[t._PARAM_VB_POS_+13]=this._y+this._height,i[t._PARAM_VB_POS_+19]=this._y+this._height,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"alpha",function(){return this._alpha},function(t){this._alpha=t}),t.create=function(e,i,n,r,s,a,o,h,_){var l=Ki.getItemByClass("DrawTextureCmd",t);l._graphicsCmdEncoder=this._commandEncoder,t._DRAW_TEXTURE_CMD_ENCODER_||(t._DRAW_TEXTURE_CMD_ENCODER_=Le.instance.createCommandEncoder(188,32,!0),t._DRAW_TEXTURE_CMD_ENCODER_.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_TEXTURE_CMD_ENCODER_.blendFuncByParamData(4*t._PARAM_BLEND_SRC_POS_,4*t._PARAM_BLEND_DEST_POS_),t._DRAW_TEXTURE_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWTEXTURE),t._DRAW_TEXTURE_CMD_ENCODER_.useVDO(se.VDO_MESHQUADTEXTURE),t._DRAW_TEXTURE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_TEXTURE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_TEXTURE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_TEXTURE_CMD_ENCODER_.uniformTextureByParamData(4*t._PARAM_UNIFORM_LOCATION_POS_,4*t._PARAM_TEX_LOCATION_POS_,4*t._PARAM_TEXTURE_POS_),t._DRAW_TEXTURE_CMD_ENCODER_.setRectMeshByParamData(4*t._PARAM_RECT_NUM_POS_,4*t._PARAM_VB_POS_,4*t._PARAM_VB_SIZE_POS_),t._DRAW_TEXTURE_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_TEXTURE_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._DRAW_TEXTURE_CMD_ENCODER_)),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_||(t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_=Le.instance.createCommandEncoder(224,32,!0),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.blendFuncByParamData(4*t._PARAM_BLEND_SRC_POS_,4*t._PARAM_BLEND_DEST_POS_),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.useProgramEx(se.PROGRAMEX_DRAWTEXTURE),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.useVDO(se.VDO_MESHQUADTEXTURE),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.save(),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.setGlobalValueByParamData(se.GLOBALVALUE_MATRIX32,7,4*t._PARAM_MATRIX_POS_),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.uniformTextureByParamData(4*t._PARAM_UNIFORM_LOCATION_POS_,4*t._PARAM_TEX_LOCATION_POS_,4*t._PARAM_TEXTURE_POS_),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.setRectMeshByParamData(4*t._PARAM_RECT_NUM_POS_,4*t._PARAM_VB_POS_,4*t._PARAM_VB_SIZE_POS_),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.restore(),Le.syncBufferToRenderThread(t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_)),l._paramData||(l._paramData=new ParamData(148,!0)),l._texture=e,l._x=i,l._y=n,l._width=r,l._height=s,l._matrix=a,l._alpha=o,l._color=h,l._blendMode=_;var u=0!=r?r:e.bitmap.width,c=0!=s?s:e.bitmap.height,d=e.uv,f=l._paramData._float32Data,p=l._paramData._int32Data;p[t._PARAM_UNIFORM_LOCATION_POS_]=3,p[t._PARAM_TEX_LOCATION_POS_]=33984,p[t._PARAM_TEXTURE_POS_]=e.bitmap._glTexture.id,p[t._PARAM_RECT_NUM_POS_]=1,p[t._PARAM_VB_SIZE_POS_]=96,_?(l._setBlendMode(_),p[t._PARAM_BLEND_SRC_POS_]=l._blend_src,p[t._PARAM_BLEND_DEST_POS_]=l._blend_dest):(p[t._PARAM_BLEND_SRC_POS_]=-1,p[t._PARAM_BLEND_DEST_POS_]=-1);var m=4294967295;o&&(m=l._mixRGBandAlpha(m,o));var g=t._PARAM_VB_POS_;return f[g++]=i,f[g++]=n,f[g++]=d[0],f[g++]=d[1],p[g++]=m,p[g++]=4294967295,f[g++]=i+u,f[g++]=n,f[g++]=d[2],f[g++]=d[3],p[g++]=m,p[g++]=4294967295,f[g++]=i+u,f[g++]=n+c,f[g++]=d[4],f[g++]=d[5],p[g++]=m,p[g++]=4294967295,f[g++]=i,f[g++]=n+c,f[g++]=d[6],f[g++]=d[7],p[g++]=m,p[g++]=4294967295,a&&(f[t._PARAM_MATRIX_POS_]=a.a,f[t._PARAM_MATRIX_POS_+1]=a.b,f[t._PARAM_MATRIX_POS_+2]=a.c,f[t._PARAM_MATRIX_POS_+3]=a.d,f[t._PARAM_MATRIX_POS_+4]=a.tx,f[t._PARAM_MATRIX_POS_+5]=a.ty),Le.syncBufferToRenderThread(l._paramData),l._cmdCurrentPos=a?l._graphicsCmdEncoder.useCommandEncoder(t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_.getPtrID(),l._paramData.getPtrID(),-1):l._graphicsCmdEncoder.useCommandEncoder(t._DRAW_TEXTURE_CMD_ENCODER_.getPtrID(),l._paramData.getPtrID(),-1),Le.syncBufferToRenderThread(l._graphicsCmdEncoder),l},t.ID="DrawTexture",t._DRAW_TEXTURE_CMD_ENCODER_=null,t._DRAW_TEXTURE_CMD_ENCODER_MATRIX_=null,t._PARAM_UNIFORM_LOCATION_POS_=0,t._PARAM_TEX_LOCATION_POS_=1,t._PARAM_TEXTURE_POS_=2,t._PARAM_RECT_NUM_POS_=3,t._PARAM_VB_SIZE_POS_=4,t._PARAM_VB_POS_=5,t._PARAM_MATRIX_POS_=29,t._PARAM_BLEND_SRC_POS_=35,t._PARAM_BLEND_DEST_POS_=36,t}(),function(){function t(){this.id=0/0,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null,this.width=-1,this.pageChars=[],this.startID=0,this.startIDStroke=0,this.lastGCCnt=0}r(t,"laya.utils.WordText");var e=t.prototype;return e.setText=function(t){this.changed=!0,this._text=t,this.width=-1,this.pageChars=[]},e.toString=function(){return this._text},e.charCodeAt=function(t){return this._text?this._text.charCodeAt(t):0/0},e.charAt=function(t){return this._text?this._text.charAt(t):null},e.cleanCache=function(){this.pageChars=[],this.startID=0},s(0,e,"length",function(){return this._text?this._text.length:0}),t}()),be=function(){function t(){}return r(t,"laya.webgl.utils.CONST3D2D"),t.BYTES_PE=4,t.BYTES_PIDX=2,t.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],t.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],t._TMPARRAY=[],t._OFFSETX=0,t._OFFSETY=0,t}(),Pe=function(){function t(){}r(t,"laya.display.cmd.DrawPieCmd");var e=t.prototype;return e.recover=function(){this.fillColor=null,this.lineColor=null,Ki.recover("DrawPieCmd",this)},e.run=function(t,e,i){t._drawPie(this.x+e,this.y+i,this.radius,this._startAngle,this._endAngle,this.fillColor,this.lineColor,this.lineWidth,this.vid)},s(0,e,"startAngle",function(){return 180*this._startAngle/Math.PI},function(t){this._startAngle=t*Math.PI/180}),s(0,e,"cmdID",function(){return"DrawPie"}),s(0,e,"endAngle",function(){return 180*this._endAngle/Math.PI},function(t){this._endAngle=t*Math.PI/180}),t.create=function(e,i,n,r,s,a,o,h,_){var l=Ki.getItemByClass("DrawPieCmd",t);return l.x=e,l.y=i,l.radius=n,l._startAngle=r,l._endAngle=s,l.fillColor=a,l.lineColor=o,l.lineWidth=h,l.vid=_,l
},t.ID="DrawPie",t}(),Le=function(){function t(){}r(t,"laya.layagl.LayaGL");var e=t.prototype;return e.createCommandEncoder=function(t,e,i){return void 0===t&&(t=128),void 0===e&&(e=64),void 0===i&&(i=!1),new Xe(this,t,e,i)},e.beginCommandEncoding=function(){},e.endCommandEncoding=function(){},e.calcMatrixFromScaleSkewRotation=function(){},e.setGLTemplate=function(){},e.setEndGLTemplate=function(){},e.matrix4x4Multiply=function(){},e.evaluateClipDatasRealTime=function(){},t.getFrameCount=function(){return 0},t.syncBufferToRenderThread=function(t,e){void 0===e&&(e=0)},t.createArrayBufferRef=function(){},t.createArrayBufferRefs=function(){},t.EXECUTE_JS_THREAD_BUFFER=0,t.EXECUTE_RENDER_THREAD_BUFFER=1,t.EXECUTE_COPY_TO_RENDER=2,t.EXECUTE_COPY_TO_RENDER3D=3,t.VALUE_OPERATE_ADD=0,t.VALUE_OPERATE_SUB=1,t.VALUE_OPERATE_MUL=2,t.VALUE_OPERATE_DIV=3,t.VALUE_OPERATE_M2_MUL=4,t.VALUE_OPERATE_M3_MUL=5,t.VALUE_OPERATE_M4_MUL=6,t.VALUE_OPERATE_M32_MUL=7,t.VALUE_OPERATE_SET=8,t.VALUE_OPERATE_M32_TRANSLATE=9,t.VALUE_OPERATE_M32_SCALE=10,t.VALUE_OPERATE_M32_ROTATE=11,t.VALUE_OPERATE_M32_SCALE_PIVOT=12,t.VALUE_OPERATE_M32_ROTATE_PIVOT=13,t.VALUE_OPERATE_M32_TRANSFORM_PIVOT=14,t.VALUE_OPERATE_BYTE4_COLOR_MUL=15,t.ARRAY_BUFFER_TYPE_DATA=0,t.ARRAY_BUFFER_TYPE_CMD=1,t.ARRAY_BUFFER_REF_REFERENCE=0,t.ARRAY_BUFFER_REF_COPY=1,t.UPLOAD_SHADER_UNIFORM_TYPE_ID=0,t.UPLOAD_SHADER_UNIFORM_TYPE_DATA=1,t.instance=null,t}(),Ie=function(){function t(){}return r(t,"laya.maths.MathUtil"),t.subtractVector3=function(t,e,i){i[0]=t[0]-e[0],i[1]=t[1]-e[1],i[2]=t[2]-e[2]},t.lerp=function(t,e,i){return t*(1-i)+e*i},t.scaleVector3=function(t,e,i){i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e},t.lerpVector3=function(t,e,i,n){var r=t[0],s=t[1],a=t[2];n[0]=r+i*(e[0]-r),n[1]=s+i*(e[1]-s),n[2]=a+i*(e[2]-a)},t.lerpVector4=function(t,e,i,n){var r=t[0],s=t[1],a=t[2],o=t[3];n[0]=r+i*(e[0]-r),n[1]=s+i*(e[1]-s),n[2]=a+i*(e[2]-a),n[3]=o+i*(e[3]-o)},t.slerpQuaternionArray=function(t,e,i,n,r,s,a){var o,h,_,l,u,c=t[e+0],d=t[e+1],f=t[e+2],p=t[e+3],m=i[n+0],g=i[n+1],v=i[n+2],y=i[n+3];return h=c*m+d*g+f*v+p*y,0>h&&(h=-h,m=-m,g=-g,v=-v,y=-y),1-h>1e-6?(o=Math.acos(h),_=Math.sin(o),l=Math.sin((1-r)*o)/_,u=Math.sin(r*o)/_):(l=1-r,u=r),s[a+0]=l*c+u*m,s[a+1]=l*d+u*g,s[a+2]=l*f+u*v,s[a+3]=l*p+u*y,s},t.getRotation=function(t,e,i,n){return Math.atan2(n-e,i-t)/Math.PI*180},t.sortBigFirst=function(t,e){return t==e?0:e>t?1:-1},t.sortSmallFirst=function(t,e){return t==e?0:e>t?-1:1},t.sortNumBigFirst=function(t,e){return parseFloat(e)-parseFloat(t)},t.sortNumSmallFirst=function(t,e){return parseFloat(t)-parseFloat(e)},t.sortByKey=function(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!0);var r;return r=i?n?t.sortNumBigFirst:t.sortBigFirst:n?t.sortNumSmallFirst:t.sortSmallFirst,function(t,i){return r(t[e],i[e])}},t}(),Me=function(){function e(){}return r(e,"laya.utils.Browser"),s(1,e,"pixelRatio",function(){if(e._pixelRatio<0)if(e.__init__(),e.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")>-1)e._pixelRatio=2;else{var t=e.context,i=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;e._pixelRatio=(e._window.devicePixelRatio||1)/i,e._pixelRatio<1&&(e._pixelRatio=1)}return e._pixelRatio}),s(1,e,"height",function(){return e.__init__(),(i.stage&&i.stage.canvasRotation?e.clientWidth:e.clientHeight)*e.pixelRatio}),s(1,e,"clientWidth",function(){return e.__init__(),e._window.innerWidth||e._document.body.clientWidth}),s(1,e,"window",function(){return e._window||e.__init__()}),s(1,e,"clientHeight",function(){return e.__init__(),e._window.innerHeight||e._document.body.clientHeight||e._document.documentElement.clientHeight}),s(1,e,"width",function(){return e.__init__(),(i.stage&&i.stage.canvasRotation?e.clientHeight:e.clientWidth)*e.pixelRatio}),s(1,e,"container",function(){return e._container||(e.__init__(),e._container=e.createElement("div"),e._container.id="layaContainer",e._document.body.appendChild(e._container)),e._container},function(t){e._container=t}),s(1,e,"document",function(){return e.__init__(),e._document}),e.__init__=function(){if(e._window)return e._window;var n=e._window=t,r=e._document=n.document,s=e.userAgent=n.navigator.userAgent,a=n._layalibs;if(a){a.sort(function(t,e){return t.i>e.i});for(var o=0;o<a.length;o++)a[o].f(n,r,i)}s.indexOf("MiniGame")>-1&&(i.MiniAdpter?i.MiniAdpter.enable():console.error("请先添加小游戏适配库,详细教程：https://ldc2.layabox.com/doc/?nav=zh-ts-5-0-0")),s.indexOf("SwanGame")>-1&&(i.BMiniAdapter?i.BMiniAdapter.enable():console.error("请先添加百度小游戏适配库,详细教程：https://ldc2.layabox.com/doc/?nav=zh-ts-5-0-0")),n.trace=console.log,n.requestAnimationFrame=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(t){return n.setTimeout(t,1e3/60)};var h=r.body.style;h.margin=0,h.overflow="hidden",h["-webkit-user-select"]="none",h["-webkit-tap-highlight-color"]="rgba(200,200,200,0)";for(var _=r.getElementsByTagName("meta"),l=0,u=!1,c="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no";l<_.length;){var d=_[l];if("viewport"==d.name){d.content=c,u=!0;break}l++}u||(d=r.createElement("meta"),d.name="viewport",d.content=c,r.getElementsByTagName("head")[0].appendChild(d)),e.onMobile=s.indexOf("Mobile")>-1,e.onIOS=!!s.match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),e.onIPhone=s.indexOf("iPhone")>-1,e.onMac=s.indexOf("Mac OS X")>-1,e.onIPad=s.indexOf("iPad")>-1,e.onAndroid=s.indexOf("Android")>-1||s.indexOf("Adr")>-1,e.onWP=s.indexOf("Windows Phone")>-1,e.onQQBrowser=s.indexOf("QQBrowser")>-1,e.onMQQBrowser=s.indexOf("MQQBrowser")>-1||s.indexOf("Mobile")>-1&&s.indexOf("QQ")>-1,e.onIE=!!n.ActiveXObject||"ActiveXObject"in n,e.onWeiXin=s.indexOf("MicroMessenger")>-1,e.onSafari=s.indexOf("Safari")>-1,e.onPC=!e.onMobile,e.onMiniGame=s.indexOf("MiniGame")>-1,e.onBDMiniGame=s.indexOf("SwanGame")>-1,e.onLimixiu=s.indexOf("limixiu")>-1,e.supportLocalStorage=ge.__init__(),e.supportWebAudio=Vi.__init__(),wi._mainCanvas=new yr(!0);var f=wi._mainCanvas.source.style;f.position="absolute",f.top=f.left="0px",f.background="#000000",e.canvas=new yr(!0),e.context=e.canvas.getContext("2d");var p=new yr(!0),m=["webgl","experimental-webgl","webkit-3d","moz-webgl"],g=null;for(l=0;l<m.length;l++){try{g=p.source.getContext(m[l])}catch(v){}if(g){e._supportWebGL=!0;break}}return n},e.createElement=function(t){return e.__init__(),e._document.createElement(t)},e.getElementById=function(t){return e.__init__(),e._document.getElementById(t)},e.removeElement=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},e.now=function(){return Date.now()},e.userAgent=null,e.onMobile=!1,e.onIOS=!1,e.onMac=!1,e.onIPhone=!1,e.onIPad=!1,e.onAndroid=!1,e.onWP=!1,e.onQQBrowser=!1,e.onMQQBrowser=!1,e.onSafari=!1,e.onIE=!1,e.onWeiXin=!1,e.onPC=!1,e.onMiniGame=!1,e.onBDMiniGame=!1,e.onLimixiu=!1,e.onFirefox=!1,e.onEdge=!1,e.supportWebAudio=!1,e.supportLocalStorage=!1,e.canvas=null,e.context=null,e._window=null,e._document=null,e._container=null,e._pixelRatio=-1,e._supportWebGL=!1,e}(),we=function(){function t(){}return r(t,"laya.ui.UIUtils"),t.fillArray=function(t,e,i){var n=t.concat();if(e)for(var r=e.split(","),s=0,a=Math.min(n.length,r.length);a>s;s++){var o=r[s];n[s]="true"==o?!0:"false"==o?!1:o,null!=i&&(n[s]=i(o))}return n},t.toColor=function(t){return Q.toHexColor(t)},t.gray=function(e,i){void 0===i&&(i=!0),i?t.addFilter(e,t.grayFilter):t.clearFilter(e,dn)},t.addFilter=function(t,e){var i=t.filters||[];i.push(e),t.filters=i},t.clearFilter=function(t,e){var n=t.filters;if(null!=n&&n.length>0){for(var r=n.length-1;r>-1;r--){var s=n[r];i.__typeof(s,e)&&n.splice(r,1)}t.filters=n}},t._getReplaceStr=function(e){return t.escapeSequence[e]},t.adptString=function(e){return e.replace(/\\(\w)/g,t._getReplaceStr)},t.getBindFun=function(e){var n=t._funMap.get(e);if(null==n){var r='"'+e+'"';r=r.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"');var s="(function(data){if(data==null)return;with(data){try{\nreturn "+r+"\n}catch(e){}}})";n=i._runScript(s),t._funMap.set(e,n)}return n},n(t,["grayFilter",function(){return this.grayFilter=new dn([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"	"}},"_funMap",function(){return this._funMap=new Ee}]),t}(),Oe=function(){function t(){}r(t,"laya.display.cmd.DrawLinesCmd");var e=t.prototype;return e.recover=function(){this.points=null,this.lineColor=null,Ki.recover("DrawLinesCmd",this)},e.run=function(t,e,i){t._drawLines(this.x+e,this.y+i,this.points,this.lineColor,this.lineWidth,this.vid)},s(0,e,"cmdID",function(){return"DrawLines"}),t.create=function(e,i,n,r,s,a){var o=Ki.getItemByClass("DrawLinesCmd",t);return o.x=e,o.y=i,o.points=n,o.lineColor=r,o.lineWidth=s,o.vid=a,o},t.ID="DrawLines",t}(),Be=(function(){function t(){this._graphicsCmdEncoder=null,this._graphicsCmdEncoder_lines=null,this._paramData=null,this._x=0/0,this._y=0/0,this._points=null,this._fillColor=null,this._lineColor=null,this._lineWidth=0/0,this._isConvexPolygon=!1,this._vid=0,this._vertNum=0,this._line_vertNum=0,this.ibBuffer=null,this.vbBuffer=null,this.line_ibBuffer=null,this.line_vbBuffer=null,this._ibSize=0,this._vbSize=0,this._line_ibSize=0,this._line_vbSize=0,this._cmdCurrentPos=0,this._linePoints=[],this._line_vbArray=[],this._line_ibArray=[]}r(t,"laya.layagl.cmdNative.DrawPolyCmdNative");var e=t.prototype;return e.recover=function(){this._points=null,this._fillColor=null,this._lineColor=null,this._linePoints.length=0,this._line_vbArray.length=0,this._line_ibArray.length=0,Ki.recover("DrawPolyCmd",this)},s(0,e,"lineColor",function(){return this._lineColor},function(e){if(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_POLY_LINES_CMD_ENCODER_.getPtrID(),Le.syncBufferToRenderThread(this._graphicsCmdEncoder),this._lineColor=e,this._lineColor&&this.line_vbBuffer){for(var i=o.create(this._lineColor),n=i.numColor,r=this.line_vbBuffer._int32Data,s=0,a=0;a<this._line_vertNum;a++)s++,s++,r[s++]=n;Le.syncBufferToRenderThread(this.line_vbBuffer)}}),s(0,e,"points",function(){return this._points},function(e){this._points=e,this._vertNum=e.length/2;var i=this._vertNum,n=fi.earcut(e,null,2);if(n.length>0){(!this.ibBuffer||this.ibBuffer.getByteLength()<2*n.length)&&(this.ibBuffer=new ParamData(2*n.length,!0,!0)),this._ibSize=2*n.length;for(var r=this.ibBuffer._int16Data,s=0,a=0;a<n.length;a++)r[s++]=n[a]}(!this.vbBuffer||this.vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.vbBuffer=new ParamData(3*i*4,!0)),this._vbSize=3*this._vertNum*4;for(var h=o.create(this._fillColor),_=h.numColor,l=this.vbBuffer._float32Data,u=this.vbBuffer._int32Data,c=0,d=0;d<this._vertNum;d++)l[c++]=this._points[2*d]+this._x,l[c++]=this._points[2*d+1]+this._y,u[c++]=_;var f=this._paramData._int32Data;if(f[t._PARAM_VB_POS_]=this.vbBuffer.getPtrID(),f[t._PARAM_IB_POS_]=this.ibBuffer.getPtrID(),f[t._PARAM_VB_SIZE_POS_]=this._vbSize,f[t._PARAM_IB_SIZE_POS_]=this._ibSize,Le.syncBufferToRenderThread(this.vbBuffer),Le.syncBufferToRenderThread(this.ibBuffer),Le.syncBufferToRenderThread(this._paramData),this.lineColor){var p=0;for(this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0,d=0;d<e.length;d++)this._linePoints.push(e[d]);this._linePoints.push(e[0]),this._linePoints.push(e[1]),Je.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length,p=this._line_vertNum,(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(p-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;var m=this.line_ibBuffer._int16Data;for(s=0,a=0;a<3*(this._line_vertNum-2);a++)m[s++]=this._line_ibArray[a];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*p*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var g=o.create(this._lineColor),v=g.numColor,y=this.line_vbBuffer._float32Data,E=this.line_vbBuffer._int32Data;for(c=0,d=0;d<this._line_vertNum;d++)y[c++]=this._line_vbArray[2*d]+this._x,y[c++]=this._line_vbArray[2*d+1]+this._y,E[c++]=v;f=this._paramData._int32Data,f[t._PARAM_LINE_VB_POS_]=this.line_vbBuffer.getPtrID(),f[t._PARAM_LINE_IB_POS_]=this.line_ibBuffer.getPtrID(),f[t._PARAM_LINE_VB_SIZE_POS_]=this._line_vbSize,f[t._PARAM_LINE_IB_SIZE_POS_]=this._line_ibSize,Le.syncBufferToRenderThread(this.line_vbBuffer),Le.syncBufferToRenderThread(this.line_ibBuffer)}}),s(0,e,"cmdID",function(){return"DrawPoly"}),s(0,e,"fillColor",function(){return this._fillColor},function(t){this._fillColor=t;for(var e=o.create(this._fillColor),i=e.numColor,n=this.vbBuffer._int32Data,r=0,s=0;s<this._vertNum;s++)r++,r++,n[r++]=i;Le.syncBufferToRenderThread(this.vbBuffer)}),s(0,e,"x",function(){return this._x},function(t){this._x=t;for(var e=this.vbBuffer._float32Data,i=0,n=0;n<this._vertNum;n++)e[i++]=this._points[2*n]+this._x,i++,i++;if(this._lineColor){var r=this.line_vbBuffer._float32Data;for(i=0,n=0;n<this._line_vertNum;n++)r[i++]=this._line_vbArray[2*n]+this._x,i++,i++;Le.syncBufferToRenderThread(this.line_vbBuffer)}Le.syncBufferToRenderThread(this.vbBuffer)}),s(0,e,"isConvexPolygon",function(){return this._isConvexPolygon},function(t){this._isConvexPolygon=t}),s(0,e,"vid",function(){return this._vid},function(t){this._vid=t}),s(0,e,"y",function(){return this._y},function(t){this._y=t;for(var e=this.vbBuffer._float32Data,i=0,n=0;n<this._vertNum;n++)i++,e[i++]=this._points[2*n+1]+this._y,i++;if(this._lineColor){var r=this.line_vbBuffer._float32Data;for(i=0,n=0;n<this._line_vertNum;n++)i++,r[i++]=this._line_vbArray[2*n+1]+this._y,i++;Le.syncBufferToRenderThread(this.line_vbBuffer)}Le.syncBufferToRenderThread(this.vbBuffer)}),s(0,e,"lineWidth",function(){return this._lineWidth},function(e){this.lineColor&&(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_POLY_LINES_CMD_ENCODER_.getPtrID(),Le.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._lineWidth=e,this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0;for(var i=0;i<this._points.length;i++)this._linePoints.push(this._points[i]);this._linePoints.push(this._points[0]),this._linePoints.push(this._points[1]),Je.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1);var n=this.line_vbBuffer._float32Data,r=0;for(i=0;i<this._line_vertNum;i++)n[r++]=this._line_vbArray[2*i]+this._x,n[r++]=this._line_vbArray[2*i+1]+this._y,r++;Le.syncBufferToRenderThread(this.line_vbBuffer)}),t.create=function(e,i,n,r,s,a,h){var _=Ki.getItemByClass("DrawPolyCmd",t);_._graphicsCmdEncoder=this._commandEncoder,t._DRAW_POLY_CMD_ENCODER_||(t._DRAW_POLY_CMD_ENCODER_=Le.instance.createCommandEncoder(168,32,!0),t._DRAW_POLY_CMD_ENCODER_.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_POLY_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWVG),t._DRAW_POLY_CMD_ENCODER_.useVDO(se.VDO_MESHVG),t._DRAW_POLY_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_POLY_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_POLY_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_POLY_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_POLY_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_POLY_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._DRAW_POLY_CMD_ENCODER_)),t._DRAW_POLY_LINES_CMD_ENCODER_||(t._DRAW_POLY_LINES_CMD_ENCODER_=Le.instance.createCommandEncoder(244,32,!0),t._DRAW_POLY_LINES_CMD_ENCODER_.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_POLY_LINES_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWVG),t._DRAW_POLY_LINES_CMD_ENCODER_.useVDO(se.VDO_MESHVG),t._DRAW_POLY_LINES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_POLY_LINES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_POLY_LINES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_POLY_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_POLY_LINES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_POLY_LINES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_POLY_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_LINE_VB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINE_VB_SIZE_POS_,4*t._PARAM_LINE_IB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINE_IB_SIZE_POS_,4*t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_POLY_LINES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_POLY_LINES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._DRAW_POLY_LINES_CMD_ENCODER_)),_._paramData||(_._paramData=new ParamData(68,!0)),_._x=e,_._y=i,_._points=n,_._fillColor=r,_._lineColor=s,_._lineWidth=a,_._isConvexPolygon=h,_._vertNum=n.length/2;var l=_._vertNum,u=fi.earcut(n,null,2);if(u.length>0){(!_.ibBuffer||_.ibBuffer.getByteLength()<2*u.length)&&(_.ibBuffer=new ParamData(2*u.length,!0,!0)),_._ibSize=2*u.length;for(var c=_.ibBuffer._int16Data,d=0,f=0;f<u.length;f++)c[d++]=u[f]}var p=o.create(r),m=p.numColor;(!_.vbBuffer||_.vbBuffer.getByteLength()<3*_._vertNum*4)&&(_.vbBuffer=new ParamData(3*l*4,!0)),_._vbSize=3*_._vertNum*4;for(var g=_.vbBuffer._float32Data,v=_.vbBuffer._int32Data,y=0,E=0;E<_._vertNum;E++)g[y++]=n[2*E]+e,g[y++]=n[2*E+1]+i,v[y++]=m;for(E=0;E<n.length;E++)_._linePoints.push(n[E]);if(_._linePoints.push(n[0]),_._linePoints.push(n[1]),s){Je.createLine2(_._linePoints,_._line_ibArray,a,0,_._line_vbArray,!1),_._line_vertNum=_._linePoints.length;var A=_._line_vertNum;(!_.line_ibBuffer||_.line_ibBuffer.getByteLength()<3*(_._line_vertNum-2)*2)&&(_.line_ibBuffer=new ParamData(3*(A-2)*2,!0,!0)),_._line_ibSize=3*(_._line_vertNum-2)*2;var C=_.line_ibBuffer._int16Data;for(d=0,f=0;f<3*(_._line_vertNum-2);f++)C[d++]=_._line_ibArray[f];(!_.line_vbBuffer||_.line_vbBuffer.getByteLength()<3*_._line_vertNum*4)&&(_.line_vbBuffer=new ParamData(3*A*4,!0)),_._line_vbSize=3*_._line_vertNum*4;var S=o.create(s),D=S.numColor,R=_.line_vbBuffer._float32Data,T=_.line_vbBuffer._int32Data;for(y=0,E=0;E<_._line_vertNum;E++)R[y++]=_._line_vbArray[2*E]+e,R[y++]=_._line_vbArray[2*E+1]+i,T[y++]=D}else{_._lineWidth=1;var x="#ffffff";for(Je.createLine2(_._linePoints,_._line_ibArray,_._lineWidth,0,_._line_vbArray,!1),_._line_vertNum=_._linePoints.length,A=_._line_vertNum,(!_.line_ibBuffer||_.line_ibBuffer.getByteLength()<3*(_._line_vertNum-2)*2)&&(_.line_ibBuffer=new ParamData(3*(A-2)*2,!0,!0)),_._line_ibSize=3*(_._line_vertNum-2)*2,C=_.line_ibBuffer._int16Data,d=0,f=0;f<3*(_._line_vertNum-2);f++)C[d++]=_._line_ibArray[f];for((!_.line_vbBuffer||_.line_vbBuffer.getByteLength()<3*_._line_vertNum*4)&&(_.line_vbBuffer=new ParamData(3*A*4,!0)),_._line_vbSize=3*_._line_vertNum*4,S=o.create(x),D=S.numColor,R=_.line_vbBuffer._float32Data,T=_.line_vbBuffer._int32Data,y=0,E=0;E<_._line_vertNum;E++)R[y++]=_._line_vbArray[2*E]+e,R[y++]=_._line_vbArray[2*E+1]+i,T[y++]=D}var b=_._paramData._float32Data,P=_._paramData._int32Data;return P[0]=1,P[1]=32,null==_.ibBuffer?null:(P[t._PARAM_VB_POS_]=_.vbBuffer.getPtrID(),P[t._PARAM_IB_POS_]=_.ibBuffer.getPtrID(),P[t._PARAM_VB_SIZE_POS_]=_._vbSize,P[t._PARAM_IB_SIZE_POS_]=_._ibSize,P[t._PARAM_VB_OFFSET_POS_]=0,P[t._PARAM_IB_OFFSET_POS_]=0,P[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0,b[t._PARAM_ISCONVEXT_POS_]=h,Le.syncBufferToRenderThread(_.vbBuffer),Le.syncBufferToRenderThread(_.ibBuffer),P[t._PARAM_LINE_VB_POS_]=_.line_vbBuffer.getPtrID(),P[t._PARAM_LINE_IB_POS_]=_.line_ibBuffer.getPtrID(),P[t._PARAM_LINE_VB_SIZE_POS_]=_._line_vbSize,P[t._PARAM_LINE_IB_SIZE_POS_]=_._line_ibSize,P[t._PARAM_LINE_VB_OFFSET_POS_]=0,P[t._PARAM_LINE_IB_OFFSET_POS_]=0,P[t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_]=0,Le.syncBufferToRenderThread(_.line_vbBuffer),Le.syncBufferToRenderThread(_.line_ibBuffer),Le.syncBufferToRenderThread(_._paramData),_._cmdCurrentPos=s?_._graphicsCmdEncoder.useCommandEncoder(t._DRAW_POLY_LINES_CMD_ENCODER_.getPtrID(),_._paramData.getPtrID(),-1):_._graphicsCmdEncoder.useCommandEncoder(t._DRAW_POLY_CMD_ENCODER_.getPtrID(),_._paramData.getPtrID(),-1),Le.syncBufferToRenderThread(_._graphicsCmdEncoder),_)},t.ID="DrawPoly",t._DRAW_POLY_CMD_ENCODER_=null,t._DRAW_POLY_LINES_CMD_ENCODER_=null,t._PARAM_VB_POS_=2,t._PARAM_IB_POS_=3,t._PARAM_VB_SIZE_POS_=4,t._PARAM_IB_SIZE_POS_=5,t._PARAM_LINE_VB_POS_=6,t._PARAM_LINE_IB_POS_=7,t._PARAM_LINE_VB_SIZE_POS_=8,t._PARAM_LINE_IB_SIZE_POS_=9,t._PARAM_ISCONVEXT_POS_=10,t._PARAM_VB_OFFSET_POS_=11,t._PARAM_IB_OFFSET_POS_=12,t._PARAM_LINE_VB_OFFSET_POS_=13,t._PARAM_LINE_IB_OFFSET_POS_=14,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=15,t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_=16,t}(),function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._x=0/0,this._y=0/0,this._points=null,this._lineColor=null,this._lineWidth=0/0,this._vid=0,this._vertNum=0,this.ibBuffer=null,this.vbBuffer=null,this._ibSize=0,this._vbSize=0,this._ibArray=[],this._vbArray=[]}r(t,"laya.layagl.cmdNative.DrawLinesCmdNative");var e=t.prototype;return e.recover=function(){this._points=null,this._lineColor=null,this._ibArray.length=0,this._vbArray.length=0,Ki.recover("DrawLinesCmd",this)},s(0,e,"lineColor",function(){return this._lineColor},function(t){this._lineColor=t;for(var e=o.create(this._lineColor),i=e.numColor,n=this.vbBuffer._int32Data,r=0,s=0;s<this._vertNum;s++)r++,r++,n[r++]=i;Le.syncBufferToRenderThread(this.vbBuffer)}),s(0,e,"points",function(){return this._points},function(e){this._points=e,this._ibArray.length=0,this._vbArray.length=0,Je.createLine2(this._points,this._ibArray,this._lineWidth,0,this._vbArray,!1);var i=o.create(this._lineColor),n=i.numColor;this._vertNum=this._points.length;var r=this._vertNum;(!this.vbBuffer||this.vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.vbBuffer=new ParamData(3*r*4,!0)),this._vbSize=3*this._vertNum*4;for(var s=this.vbBuffer._float32Data,a=this.vbBuffer._int32Data,h=0,_=0;_<this._vertNum;_++)s[h++]=this._vbArray[2*_]+this.x,s[h++]=this._vbArray[2*_+1]+this.y,a[h++]=n;(!this.ibBuffer||this.ibBuffer.getByteLength()<3*(this._vertNum-2)*2)&&(this.ibBuffer=new ParamData(3*(r-2)*2,!0,!0)),this._ibSize=3*(this._vertNum-2)*2;for(var l=this.ibBuffer._int16Data,u=0;u<3*(this._vertNum-2);u++)l[u]=this._ibArray[u];a=this._paramData._int32Data,a[t._PARAM_VB_SIZE_POS_]=this._vbSize,a[t._PARAM_IB_SIZE_POS_]=this._ibSize,Le.syncBufferToRenderThread(this.ibBuffer),Le.syncBufferToRenderThread(this.vbBuffer),Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"cmdID",function(){return"DrawLines"}),s(0,e,"x",function(){return this._x},function(t){this._x=t;for(var e=this.vbBuffer._float32Data,i=0,n=0;n<this._vertNum;n++)e[i++]=this._vbArray[2*n]+this._x,i++,i++;Le.syncBufferToRenderThread(this.vbBuffer)}),s(0,e,"vid",function(){return this._vid},function(t){this._vid=t}),s(0,e,"y",function(){return this._y},function(t){this._y=t;for(var e=this.vbBuffer._float32Data,i=0,n=0;n<this._vertNum;n++)i++,e[i++]=this._vbArray[2*n+1]+this._y,i++;Le.syncBufferToRenderThread(this.vbBuffer)}),s(0,e,"lineWidth",function(){return this._lineWidth},function(t){this._lineWidth=t,this._ibArray.length=0,this._vbArray.length=0,Je.createLine2(this._points,this._ibArray,this._lineWidth,0,this._vbArray,!1);for(var e=this.vbBuffer._float32Data,i=0,n=0;n<this._vertNum;n++)e[i++]=this._vbArray[2*n]+this.x,e[i++]=this._vbArray[2*n+1]+this.y,i++;Le.syncBufferToRenderThread(this.vbBuffer)}),t.create=function(e,i,n,r,s,a){var h=Ki.getItemByClass("DrawLinesCmd",t);h._graphicsCmdEncoder=this._commandEncoder,t._DRAW_LINES_CMD_ENCODER_||(t._DRAW_LINES_CMD_ENCODER_=Le.instance.createCommandEncoder(152,32,!0),t._DRAW_LINES_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWVG),t._DRAW_LINES_CMD_ENCODER_.useVDO(se.VDO_MESHVG),t._DRAW_LINES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_LINES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_LINES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_LINES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_LINES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._DRAW_LINES_CMD_ENCODER_)),h._paramData||(h._paramData=new ParamData(44,!0)),h._x=e,h._y=i,h._points=n,h._lineColor=r,h._lineWidth=s,h._vid=a,Je.createLine2(n,h._ibArray,s,0,h._vbArray,!1);var _=o.create(r),l=_.numColor;h._vertNum=n.length;var u=h._vertNum;(!h.vbBuffer||h.vbBuffer.getByteLength()<3*h._vertNum*4)&&(h.vbBuffer=new ParamData(3*u*4,!0)),h._vbSize=3*h._vertNum*4;for(var c=h.vbBuffer._float32Data,d=h.vbBuffer._int32Data,f=0,p=0;p<h._vertNum;p++)c[f++]=h._vbArray[2*p]+e,c[f++]=h._vbArray[2*p+1]+i,d[f++]=l;(!h.ibBuffer||h.ibBuffer.getByteLength()<3*(h._vertNum-2)*2)&&(h.ibBuffer=new ParamData(3*(u-2)*2,!0,!0)),h._ibSize=3*(h._vertNum-2)*2;for(var m=h.ibBuffer._int16Data,g=0;g<3*(h._vertNum-2);g++)m[g]=h._ibArray[g];var v=h._paramData._float32Data;return d=h._paramData._int32Data,d[0]=1,d[t._PARAM_VB_POS_]=h.vbBuffer.getPtrID(),d[t._PARAM_IB_POS_]=h.ibBuffer.getPtrID(),v[t._PARAM_LINECOLOR_POS_]=r?r:4278190335,v[t._PARAM_LINEWIDTH_POS_]=s,v[t._PARAM_VID_POS_]=a,d[t._PARAM_VB_SIZE_POS_]=h._vbSize,d[t._PARAM_IB_SIZE_POS_]=h._ibSize,d[t._PARAM_VB_OFFSET_POS_]=0,d[t._PARAM_IB_OFFSET_POS_]=0,d[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0,Le.syncBufferToRenderThread(h.vbBuffer),Le.syncBufferToRenderThread(h.ibBuffer),Le.syncBufferToRenderThread(h._paramData),h._graphicsCmdEncoder.useCommandEncoder(t._DRAW_LINES_CMD_ENCODER_.getPtrID(),h._paramData.getPtrID(),-1),Le.syncBufferToRenderThread(h._graphicsCmdEncoder),h},t.ID="DrawLines",t._DRAW_LINES_CMD_ENCODER_=null,t._PARAM_VB_POS_=1,t._PARAM_IB_POS_=2,t._PARAM_LINECOLOR_POS_=3,t._PARAM_LINEWIDTH_POS_=4,t._PARAM_VID_POS_=5,t._PARAM_VB_SIZE_POS_=6,t._PARAM_IB_SIZE_POS_=7,t._PARAM_VB_OFFSET_POS_=8,t._PARAM_IB_OFFSET_POS_=9,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=10,t}(),function(){function t(){}return r(t,"laya.net.ResourceVersion"),t.enable=function(e,n,r){void 0===r&&(r=2),laya.net.ResourceVersion.type=r,i.loader.load(e,l.create(null,t.onManifestLoaded,[n]),null,"json"),Pi.customFormat=t.addVersionPrefix},t.onManifestLoaded=function(e,i){t.manifest=i,e.run(),i||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},t.addVersionPrefix=function(e){return e=Pi.getAdptedFilePath(e),t.manifest&&t.manifest[e]?2==t.type?t.manifest[e]:t.manifest[e]+"/"+e:e},t.FOLDER_VERSION=1,t.FILENAME_VERSION=2,t.manifest=null,t.type=1,t}()),Ne=(function(){function t(){}return r(t,"laya.webgl.shader.ShaderValue"),t}(),function(){function t(){}return r(t,"laya.utils.Ease"),t.linearNone=function(t,e,i,n){return i*t/n+e},t.linearIn=function(t,e,i,n){return i*t/n+e},t.linearInOut=function(t,e,i,n){return i*t/n+e},t.linearOut=function(t,e,i,n){return i*t/n+e},t.bounceIn=function(e,i,n,r){return n-t.bounceOut(r-e,0,n,r)+i},t.bounceInOut=function(e,i,n,r){return.5*r>e?.5*t.bounceIn(2*e,0,n,r)+i:.5*t.bounceOut(2*e-r,0,n,r)+.5*n+i},t.bounceOut=function(t,e,i,n){return(t/=n)<1/2.75?7.5625*i*t*t+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},t.backIn=function(t,e,i,n,r){return void 0===r&&(r=1.70158),i*(t/=n)*t*((r+1)*t-r)+e},t.backInOut=function(t,e,i,n,r){return void 0===r&&(r=1.70158),(t/=.5*n)<1?.5*i*t*t*(((r*=1.525)+1)*t-r)+e:i/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},t.backOut=function(t,e,i,n,r){return void 0===r&&(r=1.70158),i*((t=t/n-1)*t*((r+1)*t+r)+1)+e},t.elasticIn=function(e,i,n,r,s,a){void 0===s&&(s=0),void 0===a&&(a=0);var o;return 0==e?i:1==(e/=r)?i+n:(a||(a=.3*r),!s||n>0&&n>s||0>n&&-n>s?(s=n,o=a/4):o=a/t.PI2*Math.asin(n/s),-(s*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*t.PI2/a))+i)},t.elasticInOut=function(e,i,n,r,s,a){void 0===s&&(s=0),void 0===a&&(a=0);var o;return 0==e?i:2==(e/=.5*r)?i+n:(a||(a=.3*r*1.5),!s||n>0&&n>s||0>n&&-n>s?(s=n,o=a/4):o=a/t.PI2*Math.asin(n/s),1>e?-.5*s*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*t.PI2/a)+i:s*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*t.PI2/a)*.5+n+i)},t.elasticOut=function(e,i,n,r,s,a){void 0===s&&(s=0),void 0===a&&(a=0);var o;return 0==e?i:1==(e/=r)?i+n:(a||(a=.3*r),!s||n>0&&n>s||0>n&&-n>s?(s=n,o=a/4):o=a/t.PI2*Math.asin(n/s),s*Math.pow(2,-10*e)*Math.sin((e*r-o)*t.PI2/a)+n+i)},t.strongIn=function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},t.strongInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t*t+e:.5*i*((t-=2)*t*t*t*t+2)+e},t.strongOut=function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},t.sineInOut=function(t,e,i,n){return.5*-i*(Math.cos(Math.PI*t/n)-1)+e},t.sineIn=function(e,i,n,r){return-n*Math.cos(e/r*t.HALF_PI)+n+i},t.sineOut=function(e,i,n,r){return n*Math.sin(e/r*t.HALF_PI)+i},t.quintIn=function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},t.quintInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t*t+e:.5*i*((t-=2)*t*t*t*t+2)+e},t.quintOut=function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},t.quartIn=function(t,e,i,n){return i*(t/=n)*t*t*t+e},t.quartInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t*t+e:.5*-i*((t-=2)*t*t*t-2)+e},t.quartOut=function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},t.cubicIn=function(t,e,i,n){return i*(t/=n)*t*t+e},t.cubicInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t*t+e:.5*i*((t-=2)*t*t+2)+e},t.cubicOut=function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},t.quadIn=function(t,e,i,n){return i*(t/=n)*t+e},t.quadInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*i*t*t+e:.5*-i*(--t*(t-2)-1)+e},t.quadOut=function(t,e,i,n){return-i*(t/=n)*(t-2)+e},t.expoIn=function(t,e,i,n){return 0==t?e:i*Math.pow(2,10*(t/n-1))+e-.001*i},t.expoInOut=function(t,e,i,n){return 0==t?e:t==n?e+i:(t/=.5*n)<1?.5*i*Math.pow(2,10*(t-1))+e:.5*i*(-Math.pow(2,-10*--t)+2)+e},t.expoOut=function(t,e,i,n){return t==n?e+i:i*(-Math.pow(2,-10*t/n)+1)+e},t.circIn=function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},t.circInOut=function(t,e,i,n){return(t/=.5*n)<1?.5*-i*(Math.sqrt(1-t*t)-1)+e:.5*i*(Math.sqrt(1-(t-=2)*t)+1)+e},t.circOut=function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},t.HALF_PI=.5*Math.PI,t.PI2=2*Math.PI,t}()),Fe=(function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._paramData=null,this._x=0/0,this._y=0/0,this._width=0/0,this._height=0/0,this._fillColor=null,this._lineColor=null,this._lineWidth=0/0,this._line_vertNum=0,this._cmdCurrentPos=0,this._linePoints=[],this._line_ibArray=[],this._line_vbArray=[]}r(t,"laya.layagl.cmdNative.DrawRectCmdNative");var e=t.prototype;return e.recover=function(){this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0,this._graphicsCmdEncoder=null,Ki.recover("DrawRectCmd",this)},s(0,e,"lineColor",function(){return this._lineColor},function(e){this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_RECT_LINE_CMD_ENCODER_.getPtrID(),Le.syncBufferToRenderThread(this._graphicsCmdEncoder),this._lineColor=e;for(var i=this._paramData._int32Data,n=o.create(e),r=n.numColor,s=t._PARAM_LINE_VB_POS_,a=0;a<this._line_vertNum;a++)s++,s++,i[s++]=r;Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"cmdID",function(){return"DrawRect"}),s(0,e,"fillColor",function(){return this._fillColor},function(e){if(this._fillColor=e,"string"==typeof e){var i=o.create(this._fillColor),n=i.numColor,r=this._paramData._int32Data;r[t._PARAM_VB_POS_+4]=n,r[t._PARAM_VB_POS_+10]=n,r[t._PARAM_VB_POS_+16]=n,r[t._PARAM_VB_POS_+22]=n}else r=this._paramData._int32Data,r[t._PARAM_VB_POS_+4]=e,r[t._PARAM_VB_POS_+10]=e,r[t._PARAM_VB_POS_+16]=e,r[t._PARAM_VB_POS_+22]=e;
Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"width",function(){return this._width},function(e){this._width=e;var i=this._paramData._float32Data;if(i[t._PARAM_VB_POS_+6]=this._x+this._width,i[t._PARAM_VB_POS_+12]=this._x+this._width,this.lineColor){this._line_ibArray.length=0,this._line_vbArray.length=0,this._linePoints[2]=this._x+this._width,this._linePoints[4]=this._x+this._width,Je.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length;for(var n=t._PARAM_LINE_VB_POS_,r=0;r<this._line_vertNum;r++)i[n++]=this._line_vbArray[2*r],i[n++]=this._line_vbArray[2*r+1],n++}Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"x",function(){return this._x},function(e){this._x=e;var i=this._paramData._float32Data;if(i[t._PARAM_VB_POS_]=this._x,i[t._PARAM_VB_POS_+6]=this._x+this._width,i[t._PARAM_VB_POS_+12]=this._x+this._width,i[t._PARAM_VB_POS_+18]=this._x,this.lineColor){this._line_ibArray.length=0,this._line_vbArray.length=0,this._linePoints[0]=this._x,this._linePoints[2]=this._x+this._width,this._linePoints[4]=this._x+this._width,this._linePoints[6]=this._x,this._linePoints[8]=this._x,Je.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1);for(var n=t._PARAM_LINE_VB_POS_,r=0;r<this._line_vertNum;r++)i[n++]=this._line_vbArray[2*r],i[n++]=this._line_vbArray[2*r+1],n++}Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"y",function(){return this._y},function(e){this._y=e;var i=this._paramData._float32Data;if(i[t._PARAM_VB_POS_+1]=this._y,i[t._PARAM_VB_POS_+7]=this._y,i[t._PARAM_VB_POS_+13]=this._y+this._height,i[t._PARAM_VB_POS_+19]=this._y+this._height,this.lineColor){this._line_ibArray.length=0,this._line_vbArray.length=0,this._linePoints[1]=this._y,this._linePoints[3]=this._y,this._linePoints[5]=this._y+this._height,this._linePoints[7]=this._y+this._height,this._linePoints[9]=this._y-this._lineWidth/2,Je.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1);for(var n=t._PARAM_LINE_VB_POS_,r=0;r<this._line_vertNum;r++)i[n++]=this._line_vbArray[2*r],i[n++]=this._line_vbArray[2*r+1],n++}Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"height",function(){return this._height},function(e){this._height=e;var i=this._paramData._float32Data;if(i[t._PARAM_VB_POS_+13]=this._y+this._height,i[t._PARAM_VB_POS_+19]=this._y+this._height,this.lineColor){this._line_ibArray.length=0,this._line_vbArray.length=0,this._linePoints[5]=this._y+this._height,this._linePoints[7]=this._y+this._height,Je.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1);for(var n=t._PARAM_LINE_VB_POS_,r=0;r<this._line_vertNum;r++)i[n++]=this._line_vbArray[2*r],i[n++]=this._line_vbArray[2*r+1],n++}Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"lineWidth",function(){return this._lineWidth},function(e){this.lineColor&&(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_RECT_LINE_CMD_ENCODER_.getPtrID(),Le.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._lineWidth=e,this._line_ibArray.length=0,this._line_vbArray.length=0,this._linePoints[9]=this._y-this._lineWidth/2,Je.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length;for(var i=this._paramData._float32Data,n=t._PARAM_LINE_VB_POS_,r=0;r<this._line_vertNum;r++)i[n++]=this._line_vbArray[2*r],i[n++]=this._line_vbArray[2*r+1],n++;Le.syncBufferToRenderThread(this._paramData)}),t.create=function(e,i,n,r,s,a,h){var _=Ki.getItemByClass("DrawRectCmd",t);_._graphicsCmdEncoder=this._commandEncoder,t._DRAW_RECT_LINE_CMD_ENCODER_||(t._DRAW_RECT_LINE_CMD_ENCODER_=Le.instance.createCommandEncoder(300,32,!0),t._DRAW_RECT_LINE_CMD_ENCODER_.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_RECT_LINE_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWTEXTURE),t._DRAW_RECT_LINE_CMD_ENCODER_.useVDO(se.VDO_MESHQUADTEXTURE),t._DRAW_RECT_LINE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_RECT_LINE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_RECT_LINE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_RECT_LINE_CMD_ENCODER_.setRectMeshByParamData(4*t._PARAM_RECT_NUM_POS_,4*t._PARAM_VB_POS_,4*t._PARAM_VB_SIZE_POS_),t._DRAW_RECT_LINE_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_RECT_LINE_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_RECT_LINE_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWVG),t._DRAW_RECT_LINE_CMD_ENCODER_.useVDO(se.VDO_MESHVG),t._DRAW_RECT_LINE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_RECT_LINE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_RECT_LINE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_RECT_LINE_CMD_ENCODER_.setMeshByParamData(4*t._PARAM_LINE_VB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINE_VB_SIZE_POS_,4*t._PARAM_LINE_IB_POS_,4*t._PARAM_LINE_IB_OFFSET_POS_,4*t._PARAM_LINE_IB_SIZE_POS_,4*t._PARAM_LINE_IBELEMENT_OFFSET_POS_),t._DRAW_RECT_LINE_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_RECT_LINE_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._DRAW_RECT_LINE_CMD_ENCODER_)),t._DRAW_RECT_CMD_ENCODER_||(t._DRAW_RECT_CMD_ENCODER_=Le.instance.createCommandEncoder(152,32,!0),t._DRAW_RECT_CMD_ENCODER_.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_RECT_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWTEXTURE),t._DRAW_RECT_CMD_ENCODER_.useVDO(se.VDO_MESHQUADTEXTURE),t._DRAW_RECT_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_RECT_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_RECT_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_RECT_CMD_ENCODER_.setRectMeshByParamData(4*t._PARAM_RECT_NUM_POS_,4*t._PARAM_VB_POS_,4*t._PARAM_VB_SIZE_POS_),t._DRAW_RECT_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_RECT_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._DRAW_RECT_CMD_ENCODER_)),_._paramData||(_._paramData=new ParamData(292,!0)),_._x=e,_._y=i,_._width=n,_._height=r,_._fillColor=s,_._lineColor=a,_._lineWidth=h;var l=o.create(s),u=l.numColor,c=_._paramData._float32Data,d=_._paramData._int32Data;d[t._PARAM_RECT_NUM_POS_]=1,d[t._PARAM_VB_SIZE_POS_]=96;var f=t._PARAM_VB_POS_;if(c[f++]=e,c[f++]=i,c[f++]=0,c[f++]=0,d[f++]=u,c[f++]=4294967295,c[f++]=e+n,c[f++]=i,c[f++]=0,c[f++]=0,d[f++]=u,c[f++]=4294967295,c[f++]=e+n,c[f++]=i+r,c[f++]=0,c[f++]=0,d[f++]=u,c[f++]=4294967295,c[f++]=e,c[f++]=i+r,c[f++]=0,c[f++]=0,d[f++]=u,c[f++]=4294967295,_._linePoints.push(e),_._linePoints.push(i),_._linePoints.push(e+n),_._linePoints.push(i),_._linePoints.push(e+n),_._linePoints.push(i+r),_._linePoints.push(e),_._linePoints.push(i+r),_._linePoints.push(e),_._linePoints.push(i-h/2),a){Je.createLine2(_._linePoints,_._line_ibArray,h,0,_._line_vbArray,!1),_._line_vertNum=_._linePoints.length,d[t._PARAM_LINE_VB_SIZE_POS_]=120;var p=o.create(a),m=p.numColor;f=t._PARAM_LINE_VB_POS_;for(var g=0;g<_._line_vertNum;g++)c[f++]=_._line_vbArray[2*g],c[f++]=_._line_vbArray[2*g+1],d[f++]=m;d[t._PARAM_LINE_IB_SIZE_POS_]=2*_._line_ibArray.length;var v=_._paramData._int16Data;f=2*t._PARAM_LINE_IB_POS_;for(var y=0;y<_._line_ibArray.length;y++)v[f++]=_._line_ibArray[y]}else{_._lineWidth=1;var E="#ffffff";for(Je.createLine2(_._linePoints,_._line_ibArray,_._lineWidth,0,_._line_vbArray,!1),_._line_vertNum=_._linePoints.length,d[t._PARAM_LINE_VB_SIZE_POS_]=120,p=o.create(E),m=p.numColor,f=t._PARAM_LINE_VB_POS_,g=0;g<_._line_vertNum;g++)c[f++]=_._line_vbArray[2*g],c[f++]=_._line_vbArray[2*g+1],d[f++]=m;for(d[t._PARAM_LINE_IB_SIZE_POS_]=2*_._line_ibArray.length,v=_._paramData._int16Data,f=2*t._PARAM_LINE_IB_POS_,y=0;y<_._line_ibArray.length;y++)v[f++]=_._line_ibArray[y]}return d[t._PARAM_LINE_VB_OFFSET_POS_]=0,d[t._PARAM_LINE_IB_OFFSET_POS_]=0,d[t._PARAM_LINE_IBELEMENT_OFFSET_POS_]=0,Le.syncBufferToRenderThread(_._paramData),_._cmdCurrentPos=a?_._graphicsCmdEncoder.useCommandEncoder(t._DRAW_RECT_LINE_CMD_ENCODER_.getPtrID(),_._paramData.getPtrID(),-1):_._graphicsCmdEncoder.useCommandEncoder(t._DRAW_RECT_CMD_ENCODER_.getPtrID(),_._paramData.getPtrID(),-1),Le.syncBufferToRenderThread(_._graphicsCmdEncoder),_},t.ID="DrawRect",t._DRAW_RECT_CMD_ENCODER_=null,t._DRAW_RECT_LINE_CMD_ENCODER_=null,t._PARAM_RECT_NUM_POS_=0,t._PARAM_VB_SIZE_POS_=1,t._PARAM_VB_POS_=2,t._PARAM_LINE_VB_SIZE_POS_=26,t._PARAM_LINE_VB_POS_=27,t._PARAM_LINE_IB_SIZE_POS_=57,t._PARAM_LINE_IB_POS_=58,t._PARAM_LINE_VB_OFFSET_POS_=70,t._PARAM_LINE_IB_OFFSET_POS_=71,t._PARAM_LINE_IBELEMENT_OFFSET_POS_=72,t}(),function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._text=null,this._x=0/0,this._y=0/0,this._font=null,this._color=null,this._textAlign=null,this._draw_texture_cmd_encoder_=Le.instance.createCommandEncoder(64,32,!0)}r(t,"laya.layagl.cmdNative.FillTextCmdNative");var e=t.prototype;return e.createFillText=function(e,i,n,r,s,a,h){var _=o.create(a),l=(_.numColor,{});l._curMat=new ui,l._italicDeg=0,l._drawTextureUseColor=4294967295,l.fillStyle=a,l._fillColor=4294967295,l.setFillColor=function(t){l._fillColor=t},l.getFillColor=function(){return l._fillColor},l.mixRGBandAlpha=function(t){return t},l._drawTextureM=function(t,i,n,r,s,a,o,h){e.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),e.useProgramEx(se.PROGRAMEX_DRAWTEXTURE),e.useVDO(se.VDO_MESHQUADTEXTURE),e.uniformEx(se.GLOBALVALUE_VIEWS,0),e.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),e.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),e.uniformTexture(3,33984,t.bitmap._glTexture);var _=new Float32Array([i,n,h[0],h[1],0,0,i+r,n,h[2],h[3],0,0,i+r,n+s,h[4],h[5],0,0,i,n+s,h[6],h[7],0,0]),l=new Int32Array(_.buffer);l[4]=l[10]=l[16]=l[22]=4294967295,l[5]=l[11]=l[17]=l[23]=4294967295,e.setRectMesh(1,_,_.length),e.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),e.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(e)},t.cbook.filltext_native(l,i,null,n,r,s,a,null,0,h)},e.recover=function(){this._graphicsCmdEncoder=null,Ki.recover("FillTextCmd",this)},s(0,e,"text",function(){return this._text},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._text=t,this.createFillText(e,this._text,this._x,this._y,this._font,this._color,this._textAlign),Le.syncBufferToRenderThread(e)}),s(0,e,"cmdID",function(){return"FillText"}),s(0,e,"font",function(){return this._font},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._font=t,this.createFillText(e,this._text,this._x,this._y,this._font,this._color,this._textAlign),Le.syncBufferToRenderThread(e)}),s(0,e,"color",function(){return this._color},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._color=t,this.createFillText(e,this._text,this._x,this._y,this._font,this._color,this._textAlign),Le.syncBufferToRenderThread(e)}),s(0,e,"textAlign",function(){return this._textAlign},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._textAlign=t,this.createFillText(e,this._text,this._x,this._y,this._font,this._color,this._textAlign),Le.syncBufferToRenderThread(e)}),s(0,e,"x",function(){return this._x},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._x=t,this.createFillText(e,this._text,this._x,this._y,this._font,this._color,this._textAlign),Le.syncBufferToRenderThread(e)}),s(0,e,"y",function(){return this._y},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._y=t,this.createFillText(e,this._text,this._x,this._y,this._font,this._color,this._textAlign),Le.syncBufferToRenderThread(e)}),t.create=function(e,i,n,r,s,a){t.cbook||new Error("Error:charbook not create!");var o=Ki.getItemByClass("FillTextCmd",t),h=o._graphicsCmdEncoder=this._commandEncoder;return o._text=e,o._x=i,o._y=n,o._font=r,o._color=s,o._textAlign=a,o._draw_texture_cmd_encoder_.clearEncoding(),o.createFillText(o._draw_texture_cmd_encoder_,e,i,n,r,s,a),Le.syncBufferToRenderThread(o._draw_texture_cmd_encoder_),h.useCommandEncoder(o._draw_texture_cmd_encoder_.getPtrID(),-1,-1),Le.syncBufferToRenderThread(h),o},t.ID="FillText",n(t,["cbook",function(){return this.cbook=Ce.charbookInst}]),t}(),function(){function t(t,e,i){this.pages=[],this.fontFamily=null,this._slotW=0,this._gridW=0,this._gridNum=0,this._baseSize=0,this._lastSz=0,this._spaceWidthMap=[],this._minScoreID=-1,this._selectedSizeIdx=0,this.margin_left=0,this.margin_top=0,this.margin_bottom=0,this.margin_right=0,this.gcCnt=0,this._textureWidth=Ce.textureWidth,this.fontFamily=t,this.margin_top=this.margin_left=this.margin_right=this.margin_bottom=i,this._baseSize=Math.floor(e/Ce.gridSize)*Ce.gridSize,this._selectedSizeIdx=e-this._baseSize|0,this._slotW=Math.ceil(e/Ce.gridSize)*Ce.gridSize,this._gridW=Math.floor(this._textureWidth/this._slotW),this._gridW<=0&&(console.error("文字太大,需要修改texture大小"),this._gridW=1),this._gridNum=this._gridW*this._gridW,console.log("gridInfo:slotW="+this._slotW+",gridw="+this._gridW+",gridNum="+this._gridNum+",textureW="+this._textureWidth)}r(t,"laya.webgl.resource.CharPages");var e=t.prototype;return e.getWidth=function(e){return t.charRender.getWidth(e)},e.selectSize=function(t,e){this._selectedSizeIdx=e-this._baseSize|0},e.getSpaceChar=function(){if(this._spaceWidthMap[this._selectedSizeIdx])return this._spaceWidthMap[this._selectedSizeIdx];var t=new Ve;return this._spaceWidthMap[this._selectedSizeIdx]=t,t.width=this.getWidth(" "),t.isSpace=!0,t},e.getChar=function(t,e,i,n,r,s,a,o){if(" "===t)return this.getSpaceChar(a);var h,_=e>0?t+"_"+e+r:t;n=16777215&n,r=16777215&r,_+=16777215===n?"#w":16711680===n?"#b":1048320===n?"#g":255===n?"#r":"#"+n.toString(16),s&&(_+="B"),o&&(_+=o);for(var l=0,u=this.pages.length;u>l;l++){var c=this.pages[l],d=c.charMaps[this._selectedSizeIdx];if(d&&(h=d.get(_)))return a&&h.touch(),h}if(h=this._getASlot(),!h)return null;var f=h.tex.charMaps[this._selectedSizeIdx];!f&&(f=h.tex.charMaps[this._selectedSizeIdx]=new Map),f.set(_,h),a&&h.touch();var p="",m="";p=((65280&n)+((255&n)<<16)+((16711680&n)>>16)).toString(16),p="#000000".substr(0,7-p.length)+p,e&&(m=((65280&r)+((255&r)<<16)+((16711680&r)>>16)).toString(16),m="#000000".substr(0,7-m.length)+m),h.height=i;var g=this.getCharBmp(t,Ce._curFont,e,p,m,h);h.bmpWidth=g.width,h.bmpHeight=g.height;var v=Math.floor(h.pos/this._gridW),y=h.pos%this._gridW,E=y*this._slotW,A=v*this._slotW,C=this._textureWidth,S=E/C,D=A/C,R=(E+g.width)/C,T=(A+g.height)/C,x=h.uv;return x[0]=S,x[1]=D,x[2]=R,x[3]=D,x[4]=R,x[5]=T,x[6]=S,x[7]=T,h.tex.addChar(g,E,A),h},e._getASlot=function(){for(var t,e,i=this.pages.length,n=0;i>n;n++)if(t=this.pages[n],e=t.findAGrid())return e;return t=Ce.trash.getAPage(this._gridNum),this.pages.push(t),e=t.findAGrid(),e||console.error("_getASlot error!"),e},e.getAllPageScore=function(){for(var t=0,e=this.pages.length,i=Li.loopCount,n=0,r=1e4;e>t;t++){var s=this.pages[t];s._scoreTick==i?n+=s._score:s._score=0,s._score<r&&(r=s._score,this._minScoreID=t)}return n},e.removeLRU=function(){var t=this._gridNum*this.pages.length-this.getAllPageScore();if(t>=this._gridNum){if(this._minScoreID>=0){var e=this.pages[this._minScoreID];console.log("remove fontpage: delpageid="+this._minScoreID+", total="+this.pages.length+",gcCnt:"+(this.gcCnt+1));var i=e._score;e.printDebugInfo(),Ce.trash.discardPage(e),this.pages[this._minScoreID]=this.pages[this.pages.length-1],this.pages.pop();for(var n=Li.loopCount,r=0,s=this.pages.length;s>r&&i>0;r++){e=this.pages[r],console.log("clean page "+r);var a=e.removeOld(n);i-=a}}return this.gcCnt++,!0}return!1},e.getCharBmp=function(e,i,n,r,s,a){return t.charRender.getCharBmp(e,i,n,r,s,a,this.margin_left,this.margin_top,this.margin_right,this.margin_bottom)},t.getBmpSize=function(t){return 1.5*t},t.charRender=null,t}()),ke=(function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._paramData=null,this._texture=null,this._x=0/0,this._y=0/0,this._width=0/0,this._height=0/0}r(t,"laya.layagl.cmdNative.DrawImageCmdNative");var e=t.prototype;return e.recover=function(){this._graphicsCmdEncoder=null,Ki.recover("DrawImageCmd",this)},s(0,e,"cmdID",function(){return"DrawImage"}),s(0,e,"y",function(){return this._y},function(e){this._y=e;var i=this._paramData._float32Data;i[t._PARAM_VB_POS_+1]=this._y,i[t._PARAM_VB_POS_+7]=this._y,i[t._PARAM_VB_POS_+13]=this._y+this._height,i[t._PARAM_VB_POS_+19]=this._y+this._height,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"texture",function(){return this._texture},function(e){this._texture=e,this._paramData._int32Data[t._PARAM_TEXTURE_POS_]=this._texture.bitmap._glTexture.id;var i=this._paramData._float32Data,n=this._texture.uv;i[t._PARAM_VB_POS_+2]=n[0],i[t._PARAM_VB_POS_+3]=n[1],i[t._PARAM_VB_POS_+8]=n[2],i[t._PARAM_VB_POS_+9]=n[3],i[t._PARAM_VB_POS_+14]=n[4],i[t._PARAM_VB_POS_+15]=n[5],i[t._PARAM_VB_POS_+20]=n[6],i[t._PARAM_VB_POS_+21]=n[7],Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"width",function(){return this._width},function(e){this._width=e;var i=this._paramData._float32Data;i[t._PARAM_VB_POS_]=this._x,i[t._PARAM_VB_POS_+6]=this._x+this._width,i[t._PARAM_VB_POS_+12]=this._x+this._width,i[t._PARAM_VB_POS_+18]=this._x,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"x",function(){return this._x},function(e){this._x=e;var i=this._paramData._float32Data;i[t._PARAM_VB_POS_]=this._x,i[t._PARAM_VB_POS_+6]=this._x+this._width,i[t._PARAM_VB_POS_+12]=this._x+this._width,i[t._PARAM_VB_POS_+18]=this._x,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"height",function(){return this._height},function(e){this._height=e;var i=this._paramData._float32Data;i[t._PARAM_VB_POS_+1]=this._y,i[t._PARAM_VB_POS_+7]=this._y,i[t._PARAM_VB_POS_+13]=this._y+this._height,i[t._PARAM_VB_POS_+19]=this._y+this._height,Le.syncBufferToRenderThread(this._paramData)}),t.create=function(e,i,n,r,s){var a=Ki.getItemByClass("DrawImageCmd",t);a._graphicsCmdEncoder=this._commandEncoder,t._DRAW_IMAGE_CMD_ENCODER_||(t._DRAW_IMAGE_CMD_ENCODER_=Le.instance.createCommandEncoder(172,32,!0),t._DRAW_IMAGE_CMD_ENCODER_.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_IMAGE_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWTEXTURE),t._DRAW_IMAGE_CMD_ENCODER_.useVDO(se.VDO_MESHQUADTEXTURE),t._DRAW_IMAGE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_IMAGE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_IMAGE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_IMAGE_CMD_ENCODER_.uniformTextureByParamData(0,4,4*t._PARAM_TEXTURE_POS_),t._DRAW_IMAGE_CMD_ENCODER_.setRectMeshByParamData(12,4*t._PARAM_VB_POS_,16),t._DRAW_IMAGE_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_IMAGE_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._DRAW_IMAGE_CMD_ENCODER_)),a._paramData||(a._paramData=new ParamData(116,!0)),a._texture=e,a._x=i,a._y=n,a._width=r,a._height=s;var o=a._paramData._float32Data,h=a._paramData._int32Data;h[0]=3,h[1]=33984,h[t._PARAM_TEXTURE_POS_]=e.getIsReady()?e.bitmap._glTexture.id:0,h[3]=1,h[4]=96;var _=0!=r?r:e.bitmap.width,l=0!=s?s:e.bitmap.height,u=e.uv,c=t._PARAM_VB_POS_;return o[c++]=i,o[c++]=n,o[c++]=u[0],o[c++]=u[1],h[c++]=4294967295,h[c++]=4294967295,o[c++]=i+_,o[c++]=n,o[c++]=u[2],o[c++]=u[3],h[c++]=4294967295,h[c++]=4294967295,o[c++]=i+_,o[c++]=n+l,o[c++]=u[4],o[c++]=u[5],h[c++]=4294967295,h[c++]=4294967295,o[c++]=i,o[c++]=n+l,o[c++]=u[6],o[c++]=u[7],h[c++]=4294967295,h[c++]=4294967295,Le.syncBufferToRenderThread(a._paramData),a._graphicsCmdEncoder.useCommandEncoder(t._DRAW_IMAGE_CMD_ENCODER_.getPtrID(),a._paramData.getPtrID(),-1),Le.syncBufferToRenderThread(a._graphicsCmdEncoder),a},t.ID="DrawImage",t._DRAW_IMAGE_CMD_ENCODER_=null,t._PARAM_TEXTURE_POS_=2,t._PARAM_VB_POS_=5,t}(),function(){function t(){}r(t,"laya.display.cmd.RestoreCmd");var e=t.prototype;return e.recover=function(){Ki.recover("RestoreCmd",this)},e.run=function(t){t.restore()},s(0,e,"cmdID",function(){return"Restore"}),t.create=function(){var e=Ki.getItemByClass("RestoreCmd",t);return e},t.ID="Restore",t}()),Ve=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=new ParamData(16,!0)}r(t,"laya.layagl.cmdNative.ClipRectCmdNative");var e=t.prototype;return e.recover=function(){Ki.recover("ClipRectCmd",this)},s(0,e,"cmdID",function(){return"ClipRect"}),s(0,e,"width",function(){return 0},function(){}),s(0,e,"x",function(){return 0},function(){}),s(0,e,"y",function(){return 0},function(){}),s(0,e,"height",function(){return 0},function(){}),t.create=function(e,i,n,r){var s=Ki.getItemByClass("ClipRectCmd",t);s._graphicsCmdEncoder=this._commandEncoder;var a=s._graphicsCmdEncoder,o=s._paramData._float32Data;o[0]=e,o[1]=i,o[2]=n,o[3]=r;var h=s._paramData.getPtrID();return Le.syncBufferToRenderThread(s._paramData),a.setClipValueEx(se.GLOBALVALUE_CLIP_MAT_DIR,se.GLOBALVALUE_CLIP_MAT_POS,se.GLOBALVALUE_MATRIX32,h),Le.syncBufferToRenderThread(a),s},t.ID="ClipRect",t}(),function(){function t(){this.char="",this.tex=null,this.deleted=!1,this.uv=[0,0,1,1],this.pos=0,this.width=0,this.height=0,this.bmpWidth=0,this.bmpHeight=0,this.touchTick=0,this.isSpace=!1}r(t,"laya.webgl.resource.CharRenderInfo");var e=t.prototype;return e.touch=function(){var t=Li.loopCount;this.tex._scoreTick!=t&&(this.tex._score=0,this.tex._scoreTick=t),this.touchTick!=t&&this.tex._score++,this.touchTick=t},t}()),Ue=function(){function t(){this._one=null,this._cmds=null,this.autoDestroy=!1,this._render=this._renderEmpty,this._createData()}r(t,"laya.display.Graphics");var e=t.prototype;return e._createData=function(){},e._clearData=function(){},e._destroyData=function(){},e.destroy=function(){this.clear(!0),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0,this._sp._setRenderType(0),this._sp=null),this._destroyData()},e.clear=function(t){if(void 0===t&&(t=!0),t){var e=this._one;if(this._cmds){var i=0,n=this._cmds.length;for(i=0;n>i;i++)e=this._cmds[i],e.recover();this._cmds.length=0}else e&&e.recover()}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._clearData(),this._sp&&(this._sp._renderType&=-513,this._sp._setRenderType(this._sp._renderType)),this._repaint(),this._vectorgraphArray){for(i=0,n=this._vectorgraphArray.length;n>i;i++)mi.getInstance().deleteShape(this._vectorgraphArray[i]);this._vectorgraphArray.length=0}},e._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},e._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=Ui.create(),this._graphicBounds._graphics=this)},e._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},e._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},e.getBounds=function(t){return void 0===t&&(t=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(t)},e.getBoundPoints=function(t){return void 0===t&&(t=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(t)},e.drawImage=function(t,e,i,n,r){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),!t)return null;if(n||(n=t.sourceWidth),r||(r=t.sourceHeight),t.getIsReady()){var s=n/t.sourceWidth,a=r/t.sourceHeight;if(n=t.width*s,r=t.height*a,0>=n||0>=r)return null;e+=t.offsetX*s,i+=t.offsetY*a}this._sp&&(this._sp._renderType|=512,this._sp._setRenderType(this._sp._renderType));var o=ai.create.call(this,t,e,i,n,r);return null==this._one?(this._one=o,this._render=this._renderOneImg):this._saveToCmd(null,o),this._repaint(),o},e.drawTexture=function(t,e,i,n,r,s,a,h,_){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===a&&(a=1),!t||.01>a)return null;if(!t.getIsReady())return null;if(n||(n=t.sourceWidth),r||(r=t.sourceHeight),t.getIsReady()){var l=!wi.isWebGL&&(Me.onFirefox||Me.onEdge||Me.onIE||Me.onSafari)?.5:0,u=n/t.sourceWidth,c=r/t.sourceHeight;if(n=t.width*u,r=t.height*c,0>=n||0>=r)return null;e+=t.offsetX*u,i+=t.offsetY*c,e-=l,i-=l,n+=2*l,r+=2*l}if(this._sp&&(this._sp._renderType|=512,this._sp._setRenderType(this._sp._renderType)),!wi.isConchApp&&!wi.isWebGL&&(_||h)){var d=new yr;d.size(n,r);var f=d.getContext("2d");if(f.drawTexture(t,0,0,n,r),t=new on(d),h){var p=new Ci,m=o.create(h).arrColor;p.data=(new dn).color(255*m[0],255*m[1],255*m[2]),p.apply({ctx:{ctx:f}})}}var g=$e.create.call(this,t,e,i,n,r,s,a,h,_);return this._repaint(),this._saveToCmd(null,g)},e.drawTextures=function(t,e){return t?this._saveToCmd(wi._context._drawTextures,xi.create.call(this,t,e)):null},e.drawTriangles=function(t,e,i,n,r,s,a,o,h,_){return void 0===o&&(o=1),this._saveToCmd(wi._context.drawTriangles,Hi.create.call(this,t,e,i,n,r,s,a,o,h,_))},e.fillTexture=function(t,e,i,n,r,s,a){return void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s="repeat"),t&&t.getIsReady()?this._saveToCmd(wi._context._fillTexture,ve.create.call(this,t,e,i,n,r,s,a||Zi.EMPTY,{})):null},e._saveToCmd=function(t,e){return this._sp&&(this._sp._renderType|=512,this._sp._setRenderType(this._sp._renderType)),null==this._one?(this._one=e,this._render=this._renderOne):(this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(e)),this._repaint(),e},e.clipRect=function(t,e,i,n){return this._saveToCmd(wi._context._clipRect,L.create.call(this,t,e,i,n))},e.fillText=function(t,e,i,n,r,s){return this._saveToCmd(wi._context._fillText,ni.create.call(this,t,e,i,n||ur.defaultFontStr(),r,s))},e.fillBorderText=function(t,e,i,n,r,s,a,o){return this._saveToCmd(wi._context._fillBorderText,pi.create.call(this,t,e,i,n||ur.defaultFontStr(),r,s,a,o))},e.fillWords=function(t,e,i,n,r){return this._saveToCmd(wi._context._fillWords,O.create.call(this,t,e,i,n||ur.defaultFontStr(),r))},e.fillBorderWords=function(t,e,i,n,r,s,a){return this._saveToCmd(wi._context._fillBorderWords,Ti.create.call(this,t,e,i,n||ur.defaultFontStr(),r,s,a))},e.strokeText=function(t,e,i,n,r,s,a){return this._saveToCmd(wi._context._strokeText,Ji.create.call(this,t,e,i,n||ur.defaultFontStr(),r,s,a))},e.alpha=function(t){return this._saveToCmd(wi._context._alpha,qe.create.call(this,t))},e.transform=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=0),this._saveToCmd(wi._context._transform,B.create.call(this,t,e,i))},e.rotate=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=0),this._saveToCmd(wi._context._rotate,Ni.create.call(this,t,e,i))},e.scale=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),this._saveToCmd(wi._context._scale,Ke.create.call(this,t,e,i,n))},e.translate=function(t,e){return this._saveToCmd(wi._context._translate,fe.create.call(this,t,e))},e.save=function(){return this._saveToCmd(wi._context._save,je.create.call(this))},e.restore=function(){return this._saveToCmd(wi._context._restore,ke.create.call(this))},e.replaceText=function(t){this._repaint();var e=this._cmds;if(e){for(var i=e.length-1;i>-1;i--)if(this._isTextCmd(e[i]))return e[i].text=t,!0}else if(this._one&&this._isTextCmd(this._one))return this._one.text=t,!0;return!1},e._isTextCmd=function(t){var e=t.cmdID;return"FillText"==e||"StrokeText"==e||"FillBorderText"==e},e.replaceTextColor=function(t){this._repaint();var e=this._cmds;if(e)for(var i=e.length-1;i>-1;i--)this._isTextCmd(e[i])&&this._setTextCmdColor(e[i],t);else this._one&&this._isTextCmd(this._one)&&this._setTextCmdColor(this._one,t)},e._setTextCmdColor=function(t,e){var i=t.cmdID;switch(i){case"FillText":case"StrokeText":t.color=e;break;case"FillBorderText":case"FillBorderWords":case"FillBorderText":t.fillColor=e}},e.loadImage=function(t,e,i,n,r,s){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0);var a=hn.getRes(t);a?a.getIsReady()?this.drawImage(a,e,i,n,r):a.once("ready",this,this.drawImage,[a,e,i,n,r]):(a=new on,a.load(t),hn.cacheRes(t,a),a.once("ready",this,this.drawImage,[a,e,i,n,r])),null!=s&&(a.getIsReady()?s.call(this._sp):a.on("ready",this._sp,s))},e._renderEmpty=function(){},e._renderAll=function(t,e,i,n){for(var r,s=this._cmds,a=0,o=s.length;o>a;a++)(r=s[a]).run(e,i,n)},e._renderOne=function(t,e,i,n){this._one.run(e,i,n)},e._renderOneImg=function(t,e,i,n){this._one.run(e,i,n)},e.drawLine=function(t,e,i,n,r,s){void 0===s&&(s=1);var a=0;wi.isWebGL&&(a=mi.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(a));var o=1>s||s%2===0?0:.5;return this._saveToCmd(wi._context._drawLine,he.create.call(this,t+o,e+o,i+o,n+o,r,s,a))},e.drawLines=function(t,e,i,n,r){void 0===r&&(r=1);var s=0;if(!i||i.length<4)return null;wi.isWebGL&&(s=mi.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(s));var a=1>r||r%2===0?0:.5;return this._saveToCmd(wi._context._drawLines,Oe.create.call(this,t+a,e+a,i,n,r,s))},e.drawCurves=function(t,e,i,n,r){return void 0===r&&(r=1),this._saveToCmd(wi._context._drawCurves,Z.create.call(this,t,e,i,n,r))},e.drawRect=function(t,e,i,n,r,s,a){void 0===a&&(a=1);var o=a>=1&&s?a/2:0,h=s?a:0;return this._saveToCmd(wi._context.drawRect,ie.create.call(this,t+o,e+o,i-h,n-h,r,s,a))},e.drawCircle=function(t,e,i,n,r,s){void 0===s&&(s=1);var a=s>=1&&r?s/2:0,o=0;return wi.isWebGL&&(o=mi.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(o)),this._saveToCmd(wi._context._drawCircle,li.create.call(this,t,e,i-a,n,r,s,o))},e.drawPie=function(t,e,i,n,r,s,a,o){void 0===o&&(o=1);var h=o>=1&&a?o/2:0,_=a?o:0,l=0;return wi.isWebGL&&(l=mi.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(l)),this._saveToCmd(wi._context._drawPie,Pe.create.call(this,t+h,e+h,i-_,Q.toRadian(n),Q.toRadian(r),s,a,o,l))},e.drawPoly=function(t,e,i,n,r,s){void 0===s&&(s=1);var a=0;if(wi.isWebGL){a=mi.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(a);var o=!1;o=i.length>6?!1:!0}var h=s>=1&&r?s%2===0?0:.5:0;return this._saveToCmd(wi._context._drawPoly,M.create.call(this,t+h,e+h,i,n,r,s,o,a))},e.drawPath=function(t,e,i,n,r){return this._saveToCmd(wi._context._drawPath,ye.create.call(this,t,e,i,n,r))},s(0,e,"cmds",function(){return this._cmds},function(t){this._sp&&(this._sp._renderType|=512,this._sp._setRenderType(this._sp._renderType)),this._cmds=t,this._render=this._renderAll,this._repaint()}),t}(),We=function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._paramData=null,this.texture=null,this.x=0/0,this.y=0/0,this.width=0/0,this.height=0/0}r(t,"laya.display.cmd.DrawCanvasCmd");var e=t.prototype;return e.recover=function(){this._graphicsCmdEncoder=null,Ki.recover("DrawCanvasCmd",this)},s(0,e,"cmdID",function(){return"DrawCanvasCmd"}),t.create=function(){return null},t.ID="DrawCanvasCmd",t._DRAW_IMAGE_CMD_ENCODER_=null,t._PARAM_TEXTURE_POS_=2,t._PARAM_VB_POS_=5,t}(),Ge=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n}r(t,"laya.maths.Rectangle");var e=t.prototype;return e.setTo=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},e.reset=function(){return this.x=this.y=this.width=this.height=0,this},e.recover=function(){Ki.recover("Rectangle",this.reset())},e.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.right&&e>=this.y&&e<this.bottom?!0:!1},e.intersects=function(t){return!(t.x>this.x+this.width||t.x+t.width<this.x||t.y>this.y+this.height||t.y+t.height<this.y)},e.intersection=function(e,i){return this.intersects(e)?(i||(i=new t),i.x=Math.max(this.x,e.x),i.y=Math.max(this.y,e.y),i.width=Math.min(this.right,e.right)-i.x,i.height=Math.min(this.bottom,e.bottom)-i.y,i):null},e.union=function(e,i){return i||(i=new t),this.clone(i),e.width<=0||e.height<=0?i:(i.addPoint(e.x,e.y),i.addPoint(e.right,e.bottom),this)
},e.clone=function(e){return e||(e=new t),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},e.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},e.equals=function(t){return t&&t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height?!0:!1},e.addPoint=function(t,e){return this.x>t&&(this.width+=this.x-t,this.x=t),this.y>e&&(this.height+=this.y-e,this.y=e),this.width<t-this.x&&(this.width=t-this.x),this.height<e-this.y&&(this.height=e-this.y),this},e._getBoundPoints=function(){var e=t._temB;return e.length=0,0==this.width||0==this.height?e:(e.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),e)},e.isEmpty=function(){return this.width<=0||this.height<=0?!0:!1},s(0,e,"right",function(){return this.x+this.width}),s(0,e,"bottom",function(){return this.y+this.height}),t.create=function(){return Ki.getItemByClass("Rectangle",t)},t._getBoundPointS=function(e,i,n,r){var s=t._temA;return s.length=0,0==n||0==r?s:(s.push(e,i,e+n,i,e,i+r,e+n,i+r),s)},t._getWrapRec=function(e,i){if(!e||e.length<1)return i?i.setTo(0,0,0,0):t.TEMP.setTo(0,0,0,0);i=i?i:laya.maths.Rectangle.create();var n,r,s,a,o,h=e.length,_=Zi.TEMP;for(r=a=99999,s=o=-r,n=0;h>n;n+=2)_.x=e[n],_.y=e[n+1],r=r<_.x?r:_.x,a=a<_.y?a:_.y,s=s>_.x?s:_.x,o=o>_.y?o:_.y;return i.setTo(r,a,s-r,o-a)},t.EMPTY=new t,t.TEMP=new t,t._temB=[],t._temA=[],t}(),Xe=function(){function t(){this._idata=[]}r(t,"laya.layagl.CommandEncoder");var e=t.prototype;return e.getArrayData=function(){return this._idata},e.getPtrID=function(){return 0},e.beginEncoding=function(){},e.endEncoding=function(){},e.clearEncoding=function(){this._idata.length=0},e.getCount=function(){return this._idata.length},e.add_ShaderValue=function(t){this._idata.push(t)},e.addShaderUniform=function(t){this.add_ShaderValue(t)},t}(),ze=(function(){function t(){this._graphicsCmdEncoder=null,this._index=0,this._text=null,this._x=0/0,this._y=0/0,this._font=null,this._color=null,this._strokeColor=null,this._strokeWidth=0,this._textAlign=null,this._draw_texture_cmd_encoder_=Le.instance.createCommandEncoder(64,32,!0)}r(t,"laya.layagl.cmdNative.FillBorderTextCmdNative");var e=t.prototype;return e.createFillBorderText=function(e,i,n,r,s,a,h,_,l){var u=o.create(a),c=(u.numColor,{});c._curMat=new ui,c._italicDeg=0,c._drawTextureUseColor=4294967295,c.fillStyle=a,c._fillColor=4294967295,c.setFillColor=function(t){c._fillColor=t},c.getFillColor=function(){return c._fillColor},c.mixRGBandAlpha=function(t){return t},c._drawTextureM=function(t,i,n,r,s,a,o,h){e.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),e.useProgramEx(se.PROGRAMEX_DRAWTEXTURE),e.useVDO(se.VDO_MESHQUADTEXTURE),e.uniformEx(se.GLOBALVALUE_VIEWS,0),e.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),e.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),e.uniformTexture(3,33984,t.bitmap._glTexture);var _=new Float32Array([i,n,h[0],h[1],0,0,i+r,n,h[2],h[3],0,0,i+r,n+s,h[4],h[5],0,0,i,n+s,h[6],h[7],0,0]),l=new Int32Array(_.buffer);l[4]=l[10]=l[16]=l[22]=4294967295,l[5]=l[11]=l[17]=l[23]=4294967295,e.setRectMesh(1,_,_.length),e.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),e.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(e)},t.cbook.filltext_native(c,i,null,n,r,s,a,h,_,l)},e.recover=function(){this._graphicsCmdEncoder=null,Ki.recover("FillBorderTextCmd",this)},s(0,e,"text",function(){return this._text},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._text=t,this.createFillBorderText(e,this._text,this._x,this._y,this._font,this._color,this._strokeColor,this._strokeWidth,this._textAlign),Le.syncBufferToRenderThread(e)}),s(0,e,"cmdID",function(){return"FillBorderText"}),s(0,e,"font",function(){return this._font},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._font=t,this.createFillBorderText(e,this._text,this._x,this._y,this._font,this._color,this._strokeColor,this._strokeWidth,this._textAlign),Le.syncBufferToRenderThread(e)}),s(0,e,"color",function(){return this._color},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._color=t,this.createFillBorderText(e,this._text,this._x,this._y,this._font,this._color,this._strokeColor,this._strokeWidth,this._textAlign),Le.syncBufferToRenderThread(e)}),s(0,e,"textAlign",function(){return this._textAlign},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._textAlign=t,this.createFillBorderText(e,this._text,this._x,this._y,this._font,this._color,this._strokeColor,this._strokeWidth,this._textAlign),Le.syncBufferToRenderThread(e)}),s(0,e,"x",function(){return this._x},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._x=t,this.createFillBorderText(e,this._text,this._x,this._y,this._font,this._color,this._strokeColor,this._strokeWidth,this._textAlign),Le.syncBufferToRenderThread(e)}),s(0,e,"y",function(){return this._y},function(t){var e=this._draw_texture_cmd_encoder_;e.clearEncoding(),this._y=t,this.createFillBorderText(e,this._text,this._x,this._y,this._font,this._color,this._strokeColor,this._strokeWidth,this._textAlign),Le.syncBufferToRenderThread(e)}),t.create=function(e,i,n,r,s,a,o,h){t.cbook||new Error("Error:charbook not create!");var _=Ki.getItemByClass("FillBorderTextCmd",t),l=_._graphicsCmdEncoder=this._commandEncoder;return _._text=e,_._x=i,_._y=n,_._font=r,_._color=s,_._strokeColor=a,_._strokeWidth=o,_._textAlign=h,_._draw_texture_cmd_encoder_.clearEncoding(),_.createFillBorderText(_._draw_texture_cmd_encoder_,e,i,n,r,s,a,o,h),Le.syncBufferToRenderThread(_._draw_texture_cmd_encoder_),l.useCommandEncoder(_._draw_texture_cmd_encoder_.getPtrID(),-1,-1),Le.syncBufferToRenderThread(l),_},t.ID="FillBorderText",n(t,["cbook",function(){return this.cbook=Ce.charbookInst}]),t}(),function(){function t(){}return r(t,"laya.layagl.LayaGLRunner"),t.uploadShaderUniforms=function(t,e,i,n){for(var r=i._data,s=e.getArrayData(),a=0,o=0,h=s.length;h>o;o++){var _=s[o];if(n||-1!==_.textureID){var l=r[_.dataOffset];null!=l&&(a+=_.fun.call(_.caller,_,l))}}return a},t.uploadCustomUniform=function(t,e,i,n){var r=0,s=e[i];return s&&null!=n&&(r+=s.fun.call(s.caller,s,n)),r},t.uploadShaderUniformsForNative=function(t,e,i){var n=0;i._runtimeCopyValues.length>=0&&(n=1);var r=i._data;return t.uploadShaderUniforms(e,r,n)},t}()),He=function(){function t(){this.blendShader=0,this.submitType=0,this.other=0,this.clear()}r(t,"laya.webgl.submit.SubmitKey");var e=t.prototype;return e.clear=function(){this.submitType=-1,this.blendShader=this.other=0},e.copyFrom=function(t){this.other=t.other,this.blendShader=t.blendShader,this.submitType=t.submitType},e.copyFrom2=function(t,e,i){this.blendShader=t.blendShader,this.other=i,this.submitType=e},e.equal3_2=function(t,e,i){return this.submitType===e&&this.other===i&&this.blendShader===t.blendShader},e.equal4_2=function(t,e,i){return this.submitType===e&&this.other===i&&this.blendShader===t.blendShader},e.equal_3=function(t){return this.submitType===t.submitType&&this.blendShader===t.blendShader},e.equal=function(t){return this.other===t.other&&this.submitType===t.submitType&&this.blendShader===t.blendShader},t}(),Ye=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=new ParamData(12,!0)}r(t,"laya.layagl.cmdNative.RotateCmdNative");var e=t.prototype;return e.recover=function(){Ki.recover("RotateCmd",this)},s(0,e,"cmdID",function(){return"Rotate"}),s(0,e,"angle",function(){return this._paramData._float32Data[0]},function(t){this._paramData._float32Data[0]=t,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"pivotX",function(){return this._paramData._float32Data[1]},function(t){this._paramData._float32Data[1]=t,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"pivotY",function(){return this._paramData._float32Data[2]},function(t){this._paramData._float32Data[2]=t,Le.syncBufferToRenderThread(this._paramData)}),t.create=function(e,i,n){var r=Ki.getItemByClass("RotateCmd",t),s=r._graphicsCmdEncoder=this._commandEncoder,a=r._paramData._float32Data;a[0]=e,a[1]=i,a[2]=n;var o=r._paramData.getPtrID();return Le.syncBufferToRenderThread(r._paramData),s.setGlobalValueEx(se.GLOBALVALUE_MATRIX32,13,o,0),Le.syncBufferToRenderThread(s),r},t.ID="Rotate",t}(),function(){function t(){this._graphicsCmdEncoder=null,this._paramData=new ParamData(16,!0)}r(t,"laya.layagl.cmdNative.ScaleCmdNative");var e=t.prototype;return e.recover=function(){Ki.recover("ScaleCmd",this)},s(0,e,"cmdID",function(){return"Scale"}),s(0,e,"scaleX",function(){return this._paramData._float32Data[0]},function(t){this._paramData._float32Data[0]=t,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"scaleY",function(){return this._paramData._float32Data[1]},function(t){this._paramData._float32Data[1]=t,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"pivotX",function(){return this._paramData._float32Data[2]},function(t){this._paramData._float32Data[2]=t,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"pivotY",function(){return this._paramData._float32Data[3]},function(t){this._paramData._float32Data[3]=t,Le.syncBufferToRenderThread(this._paramData)}),t.create=function(e,i,n,r){var s=Ki.getItemByClass("ScaleCmd",t),a=s._graphicsCmdEncoder=this._commandEncoder,o=s._paramData._float32Data;o[0]=e,o[1]=i,o[2]=n,o[3]=r;var h=s._paramData.getPtrID();return Le.syncBufferToRenderThread(s._paramData),a.setGlobalValueEx(se.GLOBALVALUE_MATRIX32,12,h,0),Le.syncBufferToRenderThread(a),s},t.ID="Scale",t}(),function(){function t(){this._nativeVertexArrayObject=null,this._bindedIndexBuffer=null,this._nativeVertexArrayObject=Le.instance.createVertexArray()}r(t,"laya.webgl.BufferStateBase");var e=t.prototype;return e.bind=function(){t._curBindedBufferState!==this&&(Le.instance.bindVertexArray(this._nativeVertexArrayObject),t._curBindedBufferState=this)},e.unBind=function(){if(t._curBindedBufferState!==this)throw"BufferState: must call bind() function first.";Le.instance.bindVertexArray(null),t._curBindedBufferState=null},e.bindForNative=function(){Le.instance.bindVertexArray(this._nativeVertexArrayObject),t._curBindedBufferState=this},e.unBindForNative=function(){Le.instance.bindVertexArray(null),t._curBindedBufferState=null},e.destroy=function(){Le.instance.deleteVertexArray(this._nativeVertexArrayObject)},t._curBindedBufferState=null,t}()),je=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=new ParamData(8,!0)}r(t,"laya.layagl.cmdNative.TranslateCmdNative");var e=t.prototype;return e.recover=function(){Ki.recover("TranslateCmd",this)},s(0,e,"ty",function(){return this._paramData._float32Data[1]},function(t){this._paramData._float32Data[1]=t,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"cmdID",function(){return"Translate"}),s(0,e,"tx",function(){return this._paramData._float32Data[0]},function(t){this._paramData._float32Data[0]=t,Le.syncBufferToRenderThread(this._paramData)}),t.create=function(e,i){var n=Ki.getItemByClass("TranslateCmd",t),r=n._graphicsCmdEncoder=this._commandEncoder,s=n._paramData._float32Data;s[0]=e,s[1]=i;var a=n._paramData.getPtrID();return Le.syncBufferToRenderThread(n._paramData),r.setGlobalValueEx(se.GLOBALVALUE_MATRIX32,9,a,0),Le.syncBufferToRenderThread(r),n},t.ID="Translate",t}(),function(){function t(){}r(t,"laya.display.cmd.SaveCmd");var e=t.prototype;return e.recover=function(){Ki.recover("SaveCmd",this)},e.run=function(t){t.save()},s(0,e,"cmdID",function(){return"Save"}),t.create=function(){var e=Ki.getItemByClass("SaveCmd",t);return e},t.ID="Save",t}()),Ze=function(){function t(){this.rec=new Ge,this.reset()}r(t,"laya.html.dom.HTMLHitRect");var e=t.prototype;return e.reset=function(){return this.rec.reset(),this.href=null,this},e.recover=function(){Ki.recover("HTMLHitRect",this.reset())},t.create=function(){return Ki.getItemByClass("HTMLHitRect",t)},t}(),Ke=function(){function t(){}r(t,"laya.display.cmd.ScaleCmd");var e=t.prototype;return e.recover=function(){Ki.recover("ScaleCmd",this)},e.run=function(t,e,i){t._scale(this.scaleX,this.scaleY,this.pivotX+e,this.pivotY+i)},s(0,e,"cmdID",function(){return"Scale"}),t.create=function(e,i,n,r){var s=Ki.getItemByClass("ScaleCmd",t);return s.scaleX=e,s.scaleY=i,s.pivotX=n,s.pivotY=r,s},t.ID="Scale",t}(),$e=function(){function t(){}r(t,"laya.display.cmd.DrawTextureCmd");var e=t.prototype;return e.recover=function(){this.texture._removeReference(),this.texture=null,this.matrix=null,Ki.recover("DrawTextureCmd",this)},e.run=function(t,e,i){t.drawTextureWithTransform(this.texture,this.x,this.y,this.width,this.height,this.matrix,e,i,this.alpha,this.blendMode)},s(0,e,"cmdID",function(){return"DrawTexture"}),t.create=function(e,i,n,r,s,a,o,h,_){var l=Ki.getItemByClass("DrawTextureCmd",t);return l.texture=e,e._addReference(),l.x=i,l.y=n,l.width=r,l.height=s,l.matrix=a,l.alpha=o,l.color=h,l.blendMode=_,l},t.ID="DrawTexture",t}(),qe=(function(){function t(){}return r(t,"laya.webgl.VertexArrayObject"),t}()(function(){function e(e){t.console&&t.console.error&&t.console.error(e)}function i(e){t.console&&t.console.log&&t.console.log(e)}function n(t,i){s[t]=!0,void 0!==i&&e(i)}function r(t){var e=t.getError;t.getError=function(){var i;do i=e.apply(t),i!=t.NO_ERROR&&(s[i]=!0);while(i!=t.NO_ERROR);for(var i in s)if(s[i])return delete s[i],parseInt(i);return t.NO_ERROR}}var s={},a=function h(t){var e=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(var i=0;i<this.attribs.length;i++){var n=new h.VertexAttrib(e);this.attribs[i]=n}this.maxAttrib=0};a.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=t.FLOAT,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()},a.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var o=function(t){var e=this;this.gl=t,r(t);var n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(t){return t==e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject==e.defaultVertexArrayObject?null:e.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(t){var i=e.currentVertexArrayObject;i.maxAttrib=Math.max(i.maxAttrib,t);var r=i.attribs[t];return r.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(t){var i=e.currentVertexArrayObject;i.maxAttrib=Math.max(i.maxAttrib,t);var r=i.attribs[t];return r.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(i,r){switch(i){case t.ARRAY_BUFFER:e.currentArrayBuffer=r;break;case t.ELEMENT_ARRAY_BUFFER:e.currentVertexArrayObject.elementArrayBuffer=r}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(i,r){var s=e.currentVertexArrayObject,a=s.attribs[i];switch(r){case t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:return a.buffer;case t.VERTEX_ATTRIB_ARRAY_ENABLED:return a.enabled;case t.VERTEX_ATTRIB_ARRAY_SIZE:return a.size;case t.VERTEX_ATTRIB_ARRAY_STRIDE:return a.stride;case t.VERTEX_ATTRIB_ARRAY_TYPE:return a.type;case t.VERTEX_ATTRIB_ARRAY_NORMALIZED:return a.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(t,i,r,s,a,o){var h=e.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,t);var _=h.attribs[t];return _.buffer=e.currentArrayBuffer,_.size=i,_.type=r,_.normalized=s,_.stride=a,_.offset=o,_.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener&&t.canvas.addEventListener("webglcontextrestored",function(){i("OESVertexArrayObject emulation library context restored"),e.reset_()},!0),this.reset_()};o.prototype.VERTEX_ARRAY_BINDING_OES=34229,o.prototype.reset_=function(){var t=void 0!==this.vertexArrayObjects;if(t)for(var e=0;e<this.vertexArrayObjects.length;++e)this.vertexArrayObjects.isAlive=!1;var i=this.gl;this.maxVertexAttribs=i.getParameter(i.MAX_VERTEX_ATTRIBS),this.defaultVertexArrayObject=new a(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},o.prototype.createVertexArrayOES=function(){var t=new a(this);return this.vertexArrayObjects.push(t),t},o.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject==t&&this.bindVertexArrayOES(null)},o.prototype.isVertexArrayOES=function(t){return t&&t instanceof a&&t.hasBeenBound&&t.ext==this?!0:!1},o.prototype.bindVertexArrayOES=function(t){var e=this.gl;if(t&&!t.isAlive)return n(e.INVALID_OPERATION,"bindVertexArrayOES: attempt to bind deleted arrayObject"),void 0;var i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;var s=this.currentVertexArrayObject;if(r!=s){r&&s.elementArrayBuffer==r.elementArrayBuffer||i.bindBuffer.call(e,e.ELEMENT_ARRAY_BUFFER,s.elementArrayBuffer);for(var a=this.currentArrayBuffer,o=Math.max(r?r.maxAttrib:0,s.maxAttrib),h=0;o>=h;h++){var _=s.attribs[h],l=r?r.attribs[h]:null;if(r&&_.enabled==l.enabled||(_.enabled?i.enableVertexAttribArray.call(e,h):i.disableVertexAttribArray.call(e,h)),_.enabled){var u=!1;r&&_.buffer==l.buffer||(a!=_.buffer&&(i.bindBuffer.call(e,e.ARRAY_BUFFER,_.buffer),a=_.buffer),u=!0),(u||_.cached!=l.cached)&&i.vertexAttribPointer.call(e,h,_.size,_.type,_.normalized,_.stride,_.offset)}}this.currentArrayBuffer!=a&&i.bindBuffer.call(e,e.ARRAY_BUFFER,this.currentArrayBuffer)}},t._setupVertexArrayObject=function(t){var e=t.getSupportedExtensions;t.getSupportedExtensions=function(){var t=e.call(this)||[];return t.indexOf("OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};var i=t.getExtension;t.getExtension=function(t){var e=i.call(this,t);return e?e:"OES_vertex_array_object"!==t?null:(this.__OESVertexArrayObject||(console.log("Setup OES_vertex_array_object polyfill"),this.__OESVertexArrayObject=new o(this)),this.__OESVertexArrayObject)}},t._forceSetupVertexArrayObject=function(t){var e=t.getSupportedExtensions;t.getSupportedExtensions=function(){var t=e.call(this)||[];return t.indexOf("OES_vertex_array_object")<0&&t.push("OES_vertex_array_object"),t};var i=t.getExtension;t.getExtension=function(t){if("OES_vertex_array_object"===t)return this.__OESVertexArrayObject||(console.log("Setup OES_vertex_array_object polyfill"),this.__OESVertexArrayObject=new o(this)),this.__OESVertexArrayObject;var e=i.call(this,t);return e?e:null}}}()),function(){function t(){}r(t,"laya.display.cmd.AlphaCmd");var e=t.prototype;return e.recover=function(){Ki.recover("AlphaCmd",this)},e.run=function(t){t.alpha(this.alpha)},s(0,e,"cmdID",function(){return"Alpha"}),t.create=function(e){var i=Ki.getItemByClass("AlphaCmd",t);return i.alpha=e,i},t.ID="Alpha",t}()),Qe=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this.vbBuffer=null,this._template=null,this._floatCountPerVertex=29,this._firstNewElement=0,this._firstFreeElement=0,this._firstActiveElement=0,this._firstRetiredElement=0,this._maxParticleNum=0}r(t,"laya.layagl.cmdNative.DrawParticleCmdNative");var e=t.prototype;return e.updateParticle=function(){if(this._template.texture){this._template.updateParticleForNative();var e=this._template.sv,i=this._paramData._int32Data,n=this._paramData._float32Data;n[t._PARAM_CURRENTTIME_POS_]=e.u_CurrentTime,n[t._PARAM_DURATION_POS_]=e.u_Duration,n[t._PARAM_ENDVEL_POS_]=e.u_EndVelocity,n[t._PARAM_GRAVITY_POS_]=e.u_Gravity[0],n[t._PARAM_GRAVITY_POS_+1]=e.u_Gravity[1],n[t._PARAM_GRAVITY_POS_+2]=e.u_Gravity[2],e.size[0]=ci.width,e.size[1]=ci.height,n[t._PARAM_SIZE_POS_]=e.size[0],n[t._PARAM_SIZE_POS_+1]=e.size[1],n[t._PARAM_MAT_POS_]=1,n[t._PARAM_MAT_POS_+1]=0,n[t._PARAM_MAT_POS_+2]=0,n[t._PARAM_MAT_POS_+3]=0,n[t._PARAM_MAT_POS_+4]=0,n[t._PARAM_MAT_POS_+5]=1,n[t._PARAM_MAT_POS_+6]=0,n[t._PARAM_MAT_POS_+7]=0,n[t._PARAM_MAT_POS_+8]=0,n[t._PARAM_MAT_POS_+9]=0,n[t._PARAM_MAT_POS_+10]=1,n[t._PARAM_MAT_POS_+11]=0,n[t._PARAM_MAT_POS_+12]=0,n[t._PARAM_MAT_POS_+13]=0,n[t._PARAM_MAT_POS_+14]=0,n[t._PARAM_MAT_POS_+15]=1,i[t._PARAM_TEXTURE_LOC_POS_]=33984,i[t._PARAM_TEXTURE_POS_]=this._template.texture.bitmap._glTexture.id,this.vbBuffer=this._template.getConchMesh(),this._firstNewElement=this._template.getFirstNewElement(),this._firstFreeElement=this._template.getFirstFreeElement(),this._firstActiveElement=this._template.getFirstActiveElement(),this._firstRetiredElement=this._template.getFirstRetiredElement();var r=0,s=0,a=0,o=0,h=0,_=0;this._firstActiveElement!=this._firstFreeElement&&(this._firstActiveElement<this._firstFreeElement?(i[t._PARAM_REGDATA_POS_]=1,h=this._firstFreeElement-this._firstActiveElement,r=(this._firstFreeElement-this._firstActiveElement)*this._floatCountPerVertex*4*4,a=this._firstActiveElement*this._floatCountPerVertex*4*4):(i[t._PARAM_REGDATA_POS_]=0,h=this._maxParticleNum-this._firstActiveElement,r=(this._maxParticleNum-this._firstActiveElement)*this._floatCountPerVertex*4*4,a=this._firstActiveElement*this._floatCountPerVertex*4*4,this._firstFreeElement>0?(_=this._firstFreeElement,s=this._firstFreeElement*this._floatCountPerVertex*4*4,o=0):i[t._PARAM_REGDATA_POS_]=1)),i[t._PARAM_VB1_POS_]=this.vbBuffer.getPtrID(),i[t._PARAM_RECT1_NUM_POS_]=h,i[t._PARAM_VB1_SIZE_POS_]=r,i[t._PARAM_VB1_OFFSET_POS_]=a,Le.syncBufferToRenderThread(this.vbBuffer),s>0&&(i[t._PARAM_VB2_POS_]=this.vbBuffer.getPtrID(),i[t._PARAM_RECT2_NUM_POS_]=_,i[t._PARAM_VB2_SIZE_POS_]=s,i[t._PARAM_VB2_OFFSET_POS_]=o),Le.syncBufferToRenderThread(this._paramData),this._template.addDrawCounter()}},e.recover=function(){this._template=null,Ki.recover("DrawParticleCmd",this)},s(0,e,"cmdID",function(){return"DrawParticleCmd"}),t.create=function(e){var i=Ki.getItemByClass("DrawParticleCmd",t);i._graphicsCmdEncoder=this._commandEncoder,t._DRAW_PARTICLE_CMD_ENCODER_||(t._DRAW_PARTICLE_CMD_ENCODER_=Le.instance.createCommandEncoder(284,32,!0),t._DRAW_PARTICLE_CMD_ENCODER_.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_PARTICLE_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWPARTICLE),t._DRAW_PARTICLE_CMD_ENCODER_.useVDO(se.VDO_MESHPARTICLE),t._DRAW_PARTICLE_CMD_ENCODER_.uniformByParamData(0,4*t._PARAM_CURRENTTIME_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.uniformByParamData(1,4*t._PARAM_DURATION_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.uniformByParamData(2,4*t._PARAM_ENDVEL_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.uniformByParamData(3,4*t._PARAM_GRAVITY_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.uniformByParamData(4,4*t._PARAM_SIZE_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.uniformByParamData(5,4*t._PARAM_MAT_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.uniformTextureByParamData(4*t._PARAM_TEXTURE_UNIFORMLOC_POS_,4*t._PARAM_TEXTURE_LOC_POS_,4*t._PARAM_TEXTURE_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.setRectMeshExByParamData(4*t._PARAM_RECT1_NUM_POS_,4*t._PARAM_VB1_POS_,4*t._PARAM_VB1_SIZE_POS_,4*t._PARAM_VB1_OFFSET_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,1,7),t._DRAW_PARTICLE_CMD_ENCODER_.loadDataToRegByParamData(0,4*t._PARAM_REGDATA_POS_,4),t._DRAW_PARTICLE_CMD_ENCODER_.ifGreater0(0,2),t._DRAW_PARTICLE_CMD_ENCODER_.setRectMeshExByParamData(4*t._PARAM_RECT2_NUM_POS_,4*t._PARAM_VB2_POS_,4*t._PARAM_VB2_SIZE_POS_,4*t._PARAM_VB2_OFFSET_POS_),t._DRAW_PARTICLE_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,1,7),Le.syncBufferToRenderThread(t._DRAW_PARTICLE_CMD_ENCODER_)),i._paramData||(i._paramData=new ParamData(144,!0)),i._template=e,i._maxParticleNum=e.settings.maxPartices;var n=i._paramData._int32Data,r=(e._sv,i._paramData._float32Data),s=0;for(r[t._PARAM_CURRENTTIME_POS_]=-1,r[t._PARAM_DURATION_POS_]=-1,r[t._PARAM_ENDVEL_POS_]=-1,r[t._PARAM_GRAVITY_POS_]=-1,r[t._PARAM_GRAVITY_POS_+1]=-1,r[t._PARAM_GRAVITY_POS_+2]=-1,r[t._PARAM_SIZE_POS_]=-1,r[t._PARAM_SIZE_POS_+1]=-1,s=0;16>s;s++)r[t._PARAM_MAT_POS_+s]=-1;return n[t._PARAM_TEXTURE_LOC_POS_]=-1,n[t._PARAM_TEXTURE_POS_]=-1,n[t._PARAM_TEXTURE_UNIFORMLOC_POS_]=6,n[t._PARAM_REGDATA_POS_]=0,n[t._PARAM_VB1_POS_]=-1,n[t._PARAM_VB2_POS_]=-1,n[t._PARAM_VB1_SIZE_POS_]=-1,n[t._PARAM_VB2_SIZE_POS_]=-1,n[t._PARAM_RECT1_NUM_POS_]=-1,n[t._PARAM_RECT2_NUM_POS_]=-1,Le.syncBufferToRenderThread(i._paramData),i._graphicsCmdEncoder.useCommandEncoder(t._DRAW_PARTICLE_CMD_ENCODER_.getPtrID(),i._paramData.getPtrID(),-1),Le.syncBufferToRenderThread(i._graphicsCmdEncoder),i},t.ID="DrawParticleCmd",t._DRAW_PARTICLE_CMD_ENCODER_=null,t._PARAM_VB1_POS_=0,t._PARAM_VB2_POS_=1,t._PARAM_VB1_SIZE_POS_=2,t._PARAM_VB2_SIZE_POS_=3,t._PARAM_CURRENTTIME_POS_=4,t._PARAM_DURATION_POS_=5,t._PARAM_ENDVEL_POS_=6,t._PARAM_GRAVITY_POS_=7,t._PARAM_SIZE_POS_=10,t._PARAM_MAT_POS_=12,t._PARAM_TEXTURE_LOC_POS_=28,t._PARAM_TEXTURE_POS_=29,t._PARAM_REGDATA_POS_=30,t._PARAM_TEXTURE_UNIFORMLOC_POS_=31,t._PARAM_RECT1_NUM_POS_=32,t._PARAM_RECT2_NUM_POS_=33,t._PARAM_VB1_OFFSET_POS_=34,t._PARAM_VB2_OFFSET_POS_=35,t}(),function(){function t(){this.json=null}r(t,"laya.components.Prefab");var e=t.prototype;return e.create=function(){return this.json?ce.createByData(null,this.json):null},t}()),Je=function(){function t(){}return r(t,"laya.webgl.shapes.BasePoly"),t.createLine2=function(e,i,n,r,s,a){if(e.length<4)return null;var o=t.tempData.length>e.length+2?t.tempData:new Array(e.length+2);o[0]=e[0],o[1]=e[1];var h=2,_=0,l=e.length;for(_=2;l>_;_+=2)Math.abs(e[_]-e[_-2])+Math.abs(e[_+1]-e[_-1])>.01&&(o[h++]=e[_],o[h++]=e[_+1]);a&&Math.abs(e[0]-o[h-2])+Math.abs(e[1]-o[h-1])>.01&&(o[h++]=e[0],o[h++]=e[1]);var u=s;l=h/2;var c,d,f,p,m,g,v,y,E,A,C,S,D,R,T,x,b,P,L,I,M,w=n/2;f=o[0],p=o[1],m=o[2],g=o[3],E=-(p-g),A=f-m,M=Math.sqrt(E*E+A*A),E=E/M*w,A=A/M*w;for(u.push(f-E,p-A,f+E,p+A),_=1;l-1>_;_++)f=o[2*(_-1)],p=o[2*(_-1)+1],m=o[2*_],g=o[2*_+1],v=o[2*(_+1)],y=o[2*(_+1)+1],E=-(p-g),A=f-m,M=Math.sqrt(E*E+A*A),E=E/M*w,A=A/M*w,C=-(g-y),S=m-v,M=Math.sqrt(C*C+S*S),C=C/M*w,S=S/M*w,D=-A+p-(-A+g),R=-E+m-(-E+f),T=(-E+f)*(-A+g)-(-E+m)*(-A+p),x=-S+y-(-S+g),b=-C+m-(-C+v),P=(-C+v)*(-S+g)-(-C+m)*(-S+y),L=D*b-x*R,Math.abs(L)<.1?(L+=10.1,u.push(m-E,g-A,m+E,g+A)):(c=(R*P-b*T)/L,d=(x*T-D*P)/L,I=(c-m)*(c-m)+(d-g)+(d-g),u.push(c,d,m-(c-m),g-(d-g)));for(f=o[h-4],p=o[h-3],m=o[h-2],g=o[h-1],E=-(p-g),A=f-m,M=Math.sqrt(E*E+A*A),E=E/M*w,A=A/M*w,u.push(m-E,g-A,m+E,g+A),_=1;l>_;_++)i.push(r+2*(_-1),r+2*(_-1)+1,r+2*_+1,r+2*_+1,r+2*_,r+2*(_-1));return u},t.createLineTriangle=function(t,e,i,n){var r=t.slice(),s=r.length,a=r[0],o=r[1],h=r[2],_=r[2],l=0,u=0,c=0,d=0,f=s/2;if(!(1>=f)&&2!=f){for(var p=new Array(4*f),m=0,g=0,v=0;f-1>v;v++)a=r[g++],o=r[g++],h=r[g++],_=r[g++],c=h-a,d=_-o,0!=c&&0!=d&&(l=Math.sqrt(c*c+d*d),l>.001&&(u=4*m,p[u]=a,p[u+1]=o,p[u+2]=c/l,p[u+3]=d/l,m++));for(n?(a=r[s-2],o=r[s-1],h=r[0],_=r[1],c=h-a,d=_-o,0!=c&&0!=d&&(l=Math.sqrt(c*c+d*d),l>.001&&(u=4*m,p[u]=a,p[u+1]=o,p[u+2]=c/l,p[u+3]=d/l,m++))):(u=4*m,p[u]=a,p[u+1]=o,p[u+2]=c/l,p[u+3]=d/l,m++),g=0,v=0;f>v;v++){a=r[g],o=r[g+1],h=r[g+2],_=r[g+3];{r[g+4],r[g+5]}}}},n(t,["tempData",function(){return this.tempData=new Array(256)}]),t}(),ti=function(){function t(){this._saveuse=0}r(t,"laya.webgl.canvas.save.SaveMark");var e=t.prototype;return i.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!0},e.restore=function(e){e._saveMark=this._preSaveMark,t.POOL[t.POOL._length++]=this},t.Create=function(e){var i=t.POOL,n=i._length>0?i[--i._length]:new t;return n._saveuse=0,n._preSaveMark=e._saveMark,e._saveMark=n,n},t.POOL=h._createArray(),t}(),ei=function(){function t(){this.fun=null,this._this=null,this.args=null,this._ref=1,this._key=new He}r(t,"laya.webgl.submit.SubmitCMD");var e=t.prototype;return i.imps(e,{"laya.webgl.submit.ISubmit":!0}),e.renderSubmit=function(){return this.fun.apply(this._this,this.args),1},e.getRenderType=function(){return 0},e.reUse=function(t,e){return this._ref++,e},e.releaseRender=function(){if(--this._ref<1){var e=t.POOL;e[e._length++]=this}},e.clone=function(){return null},t.create=function(e,i,n){var r=t.POOL._length?t.POOL[--t.POOL._length]:new t;return r.fun=i,r.args=e,r._this=n,r._ref=1,r._key.clear(),r},t.POOL=(t.POOL=[],t.POOL._length=0,t.POOL),t}(),ii=function(){function t(){this.gid=0,this.repeat=1,this._count=0}r(t,"laya.utils.Tween");var e=t.prototype;return e.to=function(t,e,i,n,r,s,a){return void 0===s&&(s=0),void 0===a&&(a=!1),this._create(t,e,i,n,r,s,a,!0,!1,!0)},e.from=function(t,e,i,n,r,s,a){return void 0===s&&(s=0),void 0===a&&(a=!1),this._create(t,e,i,n,r,s,a,!1,!1,!0)},e._create=function(e,n,r,s,a,o,h,_,l,u){if(!e)throw new Error("Tween:target is null");this._target=e,this._duration=r,this._ease=s||n.ease||t.easeNone,this._complete=a||n.complete,this._delay=o,this._props=[],this._usedTimer=0,this._startTimer=Me.now(),this._usedPool=l,this._delayParam=null,this.update=n.update;var c=e.$_GID||(e.$_GID=Q.getGID());return t.tweenMap[c]?(h&&t.clearTween(e),t.tweenMap[c].push(this)):t.tweenMap[c]=[this],u?0>=o?this.firstStart(e,n,_):(this._delayParam=[e,n,_],i.timer.once(o,this,this.firstStart,this._delayParam)):this._initProps(e,n,_),this},e.firstStart=function(t,e,i){return this._delayParam=null,t.destroyed?(this.clear(),void 0):(this._initProps(t,e,i),this._beginLoop(),void 0)},e._initProps=function(t,e,i){for(var n in e)if("number"==typeof t[n]){var r=i?t[n]:e[n],s=i?e[n]:t[n];this._props.push([n,r,s-r]),i||(t[n]=r)}},e._beginLoop=function(){i.timer.frameLoop(1,this,this._doEase)},e._doEase=function(){this._updateEase(Me.now())},e._updateEase=function(e){var i=this._target;if(i){if(i.destroyed)return t.clearTween(i);var n=this._usedTimer=e-this._startTimer-this._delay;if(!(0>n)){if(n>=this._duration)return this.complete();for(var r=n>0?this._ease(n,0,1,this._duration):0,s=this._props,a=0,o=s.length;o>a;a++){var h=s[a];i[h[0]]=h[1]+r*h[2]}this.update&&this.update.run()}}},e.complete=function(){if(this._target){i.timer.runTimer(this,this.firstStart);for(var t=this._target,e=this._props,n=this._complete,r=0,s=e.length;s>r;r++){var a=e[r];t[a[0]]=a[1]+a[2]}this.update&&this.update.run(),this._count++,this._count>=this.repeat?(this.clear(),n&&n.run()):this.restart()}},e.pause=function(){i.timer.clear(this,this._beginLoop),i.timer.clear(this,this._doEase),i.timer.clear(this,this.firstStart);var t=Me.now(),e=0/0;e=t-this._startTimer-this._delay,0>e&&(this._usedTimer=e)},e.setStartTime=function(t){this._startTimer=t},e.clear=function(){this._target&&(this._remove(),this._clear())},e._clear=function(){this.pause(),i.timer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,Ki.recover("tween",this))},e.recover=function(){this._usedPool=!0,this._clear()},e._remove=function(){var e=t.tweenMap[this._target.$_GID];if(e)for(var i=0,n=e.length;n>i;i++)if(e[i]===this){e.splice(i,1);break}},e.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=Me.now(),this._delayParam)return i.timer.once(this._delay,this,this.firstStart,this._delayParam),void 0;for(var t=this._props,e=0,n=t.length;n>e;e++){var r=t[e];this._target[r[0]]=r[1]}i.timer.once(this._delay,this,this._beginLoop)},e.resume=function(){this._usedTimer>=this._duration||(this._startTimer=Me.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?i.timer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},s(0,e,"progress",null,function(t){var e=t*this._duration;this._startTimer=Me.now()-this._delay-e}),t.to=function(e,i,n,r,s,a,o,h){return void 0===a&&(a=0),void 0===o&&(o=!1),void 0===h&&(h=!0),Ki.getItemByClass("tween",t)._create(e,i,n,r,s,a,o,!0,h,!0)},t.from=function(e,i,n,r,s,a,o,h){return void 0===a&&(a=0),void 0===o&&(o=!1),void 0===h&&(h=!0),Ki.getItemByClass("tween",t)._create(e,i,n,r,s,a,o,!1,h,!0)
},t.clearAll=function(e){if(e&&e.$_GID){var i=t.tweenMap[e.$_GID];if(i){for(var n=0,r=i.length;r>n;n++)i[n]._clear();i.length=0}}},t.clear=function(t){t.clear()},t.clearTween=function(e){t.clearAll(e)},t.easeNone=function(t,e,i,n){return i*t/n+e},t.tweenMap=[],t}(),ni=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._paramID=null,this._x=0/0,this._y=0/0,this._radius=0/0,this._fillColor=null,this._lineColor=null,this._lineWidth=0/0,this._vertNum=0,this._line_vertNum=0,this.ibBuffer=null,this.vbBuffer=null,this.line_ibBuffer=null,this.line_vbBuffer=null,this._ibSize=0,this._vbSize=0,this._line_ibSize=0,this._line_vbSize=0,this._cmdCurrentPos=0,this._points=[],this._linePoints=[],this._line_vbArray=[],this._line_ibArray=[]}r(t,"laya.layagl.cmdNative.DrawCircleCmdNative");var e=t.prototype;return e._arc=function(t,e,i,n,r){void 0===n&&(n=!1),void 0===r&&(r=!0);var s=[],a=0,o=2*Math.PI,h=0,_=0,l=0,u=0,c=0,d=0,f=0,p=0,m=0,g=0,v=0;if(_=o-a,n)if(Math.abs(_)>=2*Math.PI)_=2*-Math.PI;else for(;_>0;)_-=2*Math.PI;else if(Math.abs(_)>=2*Math.PI)_=2*Math.PI;else for(;0>_;)_+=2*Math.PI;g=101>i?Math.max(10,_*i/5):201>i?Math.max(10,_*i/20):Math.max(10,_*i/40),l=_/g/2,u=Math.abs(4/3*(1-Math.cos(l))/Math.sin(l)),n&&(u=-u),v=0;for(m=0;g>=m;m++)h=a+_*(m/g),c=Math.cos(h),d=Math.sin(h),f=t+c*i,p=e+d*i,s.push(f),s.push(p);return s},e.recover=function(){this._fillColor=null,this._lineColor=null,this._points.length=0,this._linePoints.length=0,this._line_vbArray.length=0,this._line_ibArray.length=0,Ki.recover("DrawCircleCmd",this)},s(0,e,"lineColor",function(){return this._lineColor},function(e){!this._lineColor&&this._lineWidth&&(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_CIRCLE_LINES_CMD_ENCODER_.getPtrID(),Le.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._lineColor=e,this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0;for(var i=0;i<this._points.length;i++)this._linePoints.push(this._points[i]);this._linePoints.push(this._points[0]),this._linePoints.push(this._points[1]),Je.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length;var n=this._line_vertNum;(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(n-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;for(var r=this.line_ibBuffer._int16Data,s=0,a=0;a<3*(this._line_vertNum-2);a++)r[s++]=this._line_ibArray[a];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*n*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var h=o.create(e),_=h.numColor,l=this.line_vbBuffer._float32Data,u=this.line_vbBuffer._int32Data,c=0;for(i=0;i<this._line_vertNum;i++)l[c++]=this._line_vbArray[2*i]+this.x,l[c++]=this._line_vbArray[2*i+1]+this.y,u[c++]=_;var d=this._paramData._int32Data;d[t._PARAM_LINE_VB_POS_]=this.line_vbBuffer.getPtrID(),d[t._PARAM_LINE_IB_POS_]=this.line_ibBuffer.getPtrID(),d[t._PARAM_LINE_VB_SIZE_POS_]=this._line_vbSize,d[t._PARAM_LINE_IB_SIZE_POS_]=this._line_ibSize,Le.syncBufferToRenderThread(this.line_vbBuffer),Le.syncBufferToRenderThread(this.line_ibBuffer),Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"cmdID",function(){return"DrawCircle"}),s(0,e,"fillColor",function(){return this._fillColor},function(t){this._fillColor=t;for(var e=o.create(this._fillColor),i=e.numColor,n=this.vbBuffer._int32Data,r=0,s=0;s<this._vertNum;s++)r++,r++,n[r++]=i;Le.syncBufferToRenderThread(this.vbBuffer)}),s(0,e,"x",function(){return this._x},function(t){this._x=t;for(var e=this.vbBuffer._float32Data,i=0,n=0;n<this._vertNum;n++)e[i++]=this._points[2*n]+this._x,i++,i++;if(this._lineColor){var r=this.line_vbBuffer._float32Data;for(i=0,n=0;n<this._line_vertNum;n++)r[i++]=this._line_vbArray[2*n]+this._x,i++,i++;Le.syncBufferToRenderThread(this.line_vbBuffer)}Le.syncBufferToRenderThread(this.vbBuffer)}),s(0,e,"y",function(){return this._y},function(t){this._y=t;for(var e=this.vbBuffer._float32Data,i=0,n=0;n<this._vertNum;n++)i++,e[i++]=this._points[2*n+1]+this._y,i++;if(this._lineColor){var r=this.line_vbBuffer._float32Data;for(i=0,n=0;n<this._line_vertNum;n++)i++,r[i++]=this._line_vbArray[2*n+1]+this._y,i++;Le.syncBufferToRenderThread(this.line_vbBuffer)}Le.syncBufferToRenderThread(this.vbBuffer)}),s(0,e,"radius",function(){return this._radius},function(e){this._points=this._arc(0,0,e),this._vertNum=this._points.length/2;var i=this._vertNum,n=0;this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0;var r=0,s=this._vertNum-2;(!this.ibBuffer||this.ibBuffer.getByteLength()<3*s*2)&&(this.ibBuffer=new ParamData(3*s*2,!0,!0)),this._ibSize=3*s*2;for(var a=this.ibBuffer._int16Data,h=0,_=0;s>_;_++)a[h++]=r,a[h++]=_+1+r,a[h++]=_+2+r;(!this.vbBuffer||this.vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.vbBuffer=new ParamData(3*i*4,!0)),this._vbSize=3*this._vertNum*4;for(var l=o.create(this._fillColor),u=l.numColor,c=this.vbBuffer._float32Data,d=this.vbBuffer._int32Data,f=0,p=0;p<this._vertNum;p++)c[f++]=this._points[2*p]+this._x,c[f++]=this._points[2*p+1]+this._y,d[f++]=u;if(this._lineColor){for(p=0;p<this._points.length;p++)this._linePoints.push(this._points[p]);this._linePoints.push(this._points[0]),this._linePoints.push(this._points[1]),Je.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length,n=this._line_vertNum,(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(n-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;var m=this.line_ibBuffer._int16Data;h=0;for(var g=0;g<3*(this._line_vertNum-2);g++)m[h++]=this._line_ibArray[g];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*n*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var v=o.create(this._lineColor),y=v.numColor,E=this.line_vbBuffer._float32Data,A=this.line_vbBuffer._int32Data;for(f=0,p=0;p<this._line_vertNum;p++)E[f++]=this._line_vbArray[2*p]+this._x,E[f++]=this._line_vbArray[2*p+1]+this._y,A[f++]=y}var C=this._paramData._int32Data;C[t._PARAM_VB_POS_]=this.vbBuffer.getPtrID(),C[t._PARAM_IB_POS_]=this.ibBuffer.getPtrID(),C[t._PARAM_VB_SIZE_POS_]=this._vbSize,C[t._PARAM_IB_SIZE_POS_]=this._ibSize,Le.syncBufferToRenderThread(this.vbBuffer),Le.syncBufferToRenderThread(this.ibBuffer),this._lineColor&&(C[t._PARAM_LINE_VB_POS_]=this.line_vbBuffer.getPtrID(),C[t._PARAM_LINE_IB_POS_]=this.line_ibBuffer.getPtrID(),C[t._PARAM_LINE_VB_SIZE_POS_]=this._line_vbSize,C[t._PARAM_LINE_IB_SIZE_POS_]=this._line_ibSize,Le.syncBufferToRenderThread(this.line_vbBuffer),Le.syncBufferToRenderThread(this.line_ibBuffer)),Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"lineWidth",function(){return this._lineWidth},function(e){!this._lineWidth&&this._lineColor&&(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_CIRCLE_LINES_CMD_ENCODER_.getPtrID(),Le.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._lineWidth=e,this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0;for(var i=0;i<this._points.length;i++)this._linePoints.push(this._points[i]);this._linePoints.push(this._points[0]),this._linePoints.push(this._points[1]),Je.createLine2(this._linePoints,this._line_ibArray,e,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length;var n=this._line_vertNum;(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(n-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;for(var r=this.line_ibBuffer._int16Data,s=0,a=0;a<3*(this._line_vertNum-2);a++)r[s++]=this._line_ibArray[a];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*n*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var h=o.create(this._lineColor),_=h.numColor,l=this.line_vbBuffer._float32Data,u=this.line_vbBuffer._int32Data,c=0;for(i=0;i<this._line_vertNum;i++)l[c++]=this._line_vbArray[2*i]+this.x,l[c++]=this._line_vbArray[2*i+1]+this.y,u[c++]=_;var d=this._paramData._int32Data;d[t._PARAM_LINE_VB_POS_]=this.line_vbBuffer.getPtrID(),d[t._PARAM_LINE_IB_POS_]=this.line_ibBuffer.getPtrID(),d[t._PARAM_LINE_VB_SIZE_POS_]=this._line_vbSize,d[t._PARAM_LINE_IB_SIZE_POS_]=this._line_ibSize,Le.syncBufferToRenderThread(this.line_vbBuffer),Le.syncBufferToRenderThread(this.line_ibBuffer),Le.syncBufferToRenderThread(this._paramData)}),t.create=function(e,i,n,r,s,a){var h=Ki.getItemByClass("DrawCircleCmd",t);h._graphicsCmdEncoder=this._commandEncoder,t._DRAW_CIRCLE_LINES_CMD_ENCODER_||(t._DRAW_CIRCLE_LINES_CMD_ENCODER_=Le.instance.createCommandEncoder(244,32,!0),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWVG),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.useVDO(se.VDO_MESHVG),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_LINE_VB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINE_VB_SIZE_POS_,4*t._PARAM_LINE_IB_POS_,4*t._PARAM_LINE_IB_OFFSET_POS_,4*t._PARAM_LINE_IB_SIZE_POS_,4*t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_CIRCLE_LINES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._DRAW_CIRCLE_LINES_CMD_ENCODER_)),t._DRAW_CIRCLE_CMD_ENCODER_||(t._DRAW_CIRCLE_CMD_ENCODER_=Le.instance.createCommandEncoder(168,32,!0),t._DRAW_CIRCLE_CMD_ENCODER_.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_CIRCLE_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWVG),t._DRAW_CIRCLE_CMD_ENCODER_.useVDO(se.VDO_MESHVG),t._DRAW_CIRCLE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_CIRCLE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_CIRCLE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_CIRCLE_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_CIRCLE_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_CIRCLE_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._DRAW_CIRCLE_CMD_ENCODER_)),h._paramData||(h._paramData=new ParamData(72,!0)),h._x=e,h._y=i,h._radius=n,h._fillColor=r,h._lineColor=s,h._lineWidth=a,h._points=h._arc(0,0,n),h._vertNum=h._points.length/2;var _=h._vertNum,l=0,u=h._vertNum-2;(!h.ibBuffer||h.ibBuffer.getByteLength()<3*u*2)&&(h.ibBuffer=new ParamData(3*u*2,!0,!0)),h._ibSize=3*u*2;for(var c=h.ibBuffer._int16Data,d=0,f=0;u>f;f++)c[d++]=l,c[d++]=f+1+l,c[d++]=f+2+l;var p=o.create(r),m=p.numColor;(!h.vbBuffer||h.vbBuffer.getByteLength()<3*h._vertNum*4)&&(h.vbBuffer=new ParamData(3*_*4,!0)),h._vbSize=3*h._vertNum*4;for(var g=h.vbBuffer._float32Data,v=h.vbBuffer._int32Data,y=0,E=0;E<h._vertNum;E++)g[y++]=h._points[2*E]+e,g[y++]=h._points[2*E+1]+i,v[y++]=m;var A=0;for(E=0;E<h._points.length;E++)h._linePoints.push(h._points[E]);if(h._linePoints.push(h._points[0]),h._linePoints.push(h._points[1]),s){Je.createLine2(h._linePoints,h._line_ibArray,a,0,h._line_vbArray,!1),h._line_vertNum=h._linePoints.length,A=h._line_vertNum,(!h.line_ibBuffer||h.line_ibBuffer.getByteLength()<3*(h._line_vertNum-2)*2)&&(h.line_ibBuffer=new ParamData(3*(A-2)*2,!0,!0)),h._line_ibSize=3*(h._line_vertNum-2)*2;var C=h.line_ibBuffer._int16Data;d=0;for(var S=0;S<3*(h._line_vertNum-2);S++)C[d++]=h._line_ibArray[S];(!h.line_vbBuffer||h.line_vbBuffer.getByteLength()<3*h._line_vertNum*4)&&(h.line_vbBuffer=new ParamData(3*A*4,!0)),h._line_vbSize=3*h._line_vertNum*4;var D=o.create(s),R=D.numColor,T=h.line_vbBuffer._float32Data,x=h.line_vbBuffer._int32Data;for(y=0,E=0;E<h._line_vertNum;E++)T[y++]=h._line_vbArray[2*E]+e,T[y++]=h._line_vbArray[2*E+1]+i,x[y++]=R}else{h._lineWidth=1;var b="#FFFFFF";for(Je.createLine2(h._linePoints,h._line_ibArray,h._lineWidth,0,h._line_vbArray,!1),h._line_vertNum=h._linePoints.length,A=h._line_vertNum,(!h.line_ibBuffer||h.line_ibBuffer.getByteLength()<3*(h._line_vertNum-2)*2)&&(h.line_ibBuffer=new ParamData(3*(A-2)*2,!0,!0)),h._line_ibSize=3*(h._line_vertNum-2)*2,C=h.line_ibBuffer._int16Data,d=0,S=0;S<3*(h._line_vertNum-2);S++)C[d++]=h._line_ibArray[S];for((!h.line_vbBuffer||h.line_vbBuffer.getByteLength()<3*h._line_vertNum*4)&&(h.line_vbBuffer=new ParamData(3*A*4,!0)),h._line_vbSize=3*h._line_vertNum*4,D=o.create(b),R=D.numColor,T=h.line_vbBuffer._float32Data,x=h.line_vbBuffer._int32Data,y=0,E=0;E<h._line_vertNum;E++)T[y++]=h._line_vbArray[2*E]+e,T[y++]=h._line_vbArray[2*E+1]+i,x[y++]=R}var P=h._paramData._float32Data,L=h._paramData._int32Data;return L[0]=1,L[1]=32,L[t._PARAM_VB_POS_]=h.vbBuffer.getPtrID(),L[t._PARAM_IB_POS_]=h.ibBuffer.getPtrID(),L[t._PARAM_VB_SIZE_POS_]=h._vbSize,L[t._PARAM_IB_SIZE_POS_]=h._ibSize,L[t._PARAM_VB_OFFSET_POS_]=0,L[t._PARAM_IB_OFFSET_POS_]=0,L[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0,Le.syncBufferToRenderThread(h.vbBuffer),Le.syncBufferToRenderThread(h.ibBuffer),L[t._PARAM_LINE_VB_POS_]=h.line_vbBuffer.getPtrID(),L[t._PARAM_LINE_IB_POS_]=h.line_ibBuffer.getPtrID(),P[t._PARAM_LINECOLOR_POS_]=s,P[t._PARAM_LINEWIDTH_POS_]=a,L[t._PARAM_LINE_VB_SIZE_POS_]=h._line_vbSize,L[t._PARAM_LINE_IB_SIZE_POS_]=h._line_ibSize,L[t._PARAM_LINE_VB_OFFSET_POS_]=0,L[t._PARAM_LINE_IB_OFFSET_POS_]=0,L[t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_]=0,Le.syncBufferToRenderThread(h.line_vbBuffer),Le.syncBufferToRenderThread(h.line_ibBuffer),Le.syncBufferToRenderThread(h._paramData),h._cmdCurrentPos=s?h._graphicsCmdEncoder.useCommandEncoder(t._DRAW_CIRCLE_LINES_CMD_ENCODER_.getPtrID(),h._paramData.getPtrID(),-1):h._graphicsCmdEncoder.useCommandEncoder(t._DRAW_CIRCLE_CMD_ENCODER_.getPtrID(),h._paramData.getPtrID(),-1),Le.syncBufferToRenderThread(h._graphicsCmdEncoder),h},t.ID="DrawCircle",t._DRAW_CIRCLE_CMD_ENCODER_=null,t._DRAW_CIRCLE_LINES_CMD_ENCODER_=null,t._PARAM_VB_POS_=2,t._PARAM_IB_POS_=3,t._PARAM_LINE_VB_POS_=4,t._PARAM_LINE_IB_POS_=5,t._PARAM_LINECOLOR_POS_=6,t._PARAM_LINEWIDTH_POS_=7,t._PARAM_VB_SIZE_POS_=8,t._PARAM_IB_SIZE_POS_=9,t._PARAM_LINE_VB_SIZE_POS_=10,t._PARAM_LINE_IB_SIZE_POS_=11,t._PARAM_VB_OFFSET_POS_=12,t._PARAM_IB_OFFSET_POS_=13,t._PARAM_LINE_VB_OFFSET_POS_=14,t._PARAM_LINE_IB_OFFSET_POS_=15,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=16,t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_=17,t}(),function(){function t(){this._textIsWorldText=!1,this._fontColor=4294967295,this._strokeColor=0,this._nTexAlign=0,this._fontObj=t._defFontObj}r(t,"laya.display.cmd.FillTextCmd");var e=t.prototype;return e.recover=function(){Ki.recover("FillTextCmd",this)},e.run=function(t,e,i){this._textIsWorldText&&t._fast_filltext?t._fast_filltext(this._text,this.x+e,this.y+i,this._fontObj,this._fontColor,0,0,this._nTexAlign,0):t.drawText(this._text,this.x+e,this.y+i,this._font,this._color,this._textAlign)},s(0,e,"text",function(){return this._text},function(t){this._text=t,this._textIsWorldText=t instanceof laya.utils.WordText,this._textIsWorldText&&this._text.cleanCache()}),s(0,e,"cmdID",function(){return"FillText"}),s(0,e,"color",function(){return this._color},function(t){this._color=t,this._fontColor=o.create(t).numColor,this._textIsWorldText&&this._text.cleanCache()}),s(0,e,"font",function(){return this._font},function(t){this._font=t,(wi.isWebGL||wi.isConchApp)&&(this._fontObj=le.Parse(t)),this._textIsWorldText&&this._text.cleanCache()}),s(0,e,"textAlign",function(){return this._textAlign},function(t){switch(this._textAlign=t,t){case"center":this._nTexAlign=w.ENUM_TEXTALIGN_CENTER;break;case"right":this._nTexAlign=w.ENUM_TEXTALIGN_RIGHT;break;default:this._nTexAlign=w.ENUM_TEXTALIGN_DEFAULT}this._textIsWorldText&&this._text.cleanCache()}),t.create=function(e,i,n,r,s,a){var o=Ki.getItemByClass("FillTextCmd",t);return o.text=e,o._textIsWorldText=e instanceof laya.utils.WordText,o.x=i,o.y=n,o.font=r,o.color=s,o.textAlign=a,o},t.ID="FillText",n(t,["_defFontObj",function(){return this._defFontObj=new le(null)}]),t}()),ri=function(){function t(){}return r(t,"laya.webgl.resource.WebGLRTMgr"),t.getRT=function(e,i){e=0|e,i=0|i,e>=1e4&&console.error("getRT error! w too big");var n,r=1e4*i+e,s=t.dict[r];return s&&s.length>0?(n=s.pop(),n._mgrKey=r,n):(n=new Gr(e,i,1,-1),n._mgrKey=r,n)},t.releaseRT=function(e){if(!(e._mgrKey<=0)){var i=t.dict[e._mgrKey];!i&&(i=[],t.dict[e._mgrKey]=i),e._mgrKey=0,i.push(e)}},t.dict={},t}(),si=function(){function t(t){this.scale=1,this.currFrame=0,this._delta=0,this._map=[],this._handlers=[],this._temp=[],this._count=0,this.currTimer=Me.now(),this._lastTimer=Me.now(),void 0===t&&(t=!0),t&&i.systemTimer&&i.systemTimer.frameLoop(1,this,this._update)}var e;r(t,"laya.utils.Timer");var n=t.prototype;return n._update=function(){if(this.scale<=0)return this._lastTimer=Me.now(),void 0;var t=this.currFrame=this.currFrame+this.scale,e=Me.now();this._delta=(e-this._lastTimer)*this.scale;var i=this.currTimer=this.currTimer+this._delta;this._lastTimer=e;var n=this._handlers;this._count=0;for(var r=0,s=n.length;s>r;r++){var a=n[r];if(null!==a.method){var o=a.userFrame?t:i;if(o>=a.exeTime)if(a.repeat)if(a.jumpFrame)for(;o>=a.exeTime;)a.exeTime+=a.delay,a.run(!1);else a.exeTime+=a.delay,a.run(!1),o>a.exeTime&&(a.exeTime+=Math.ceil((o-a.exeTime)/a.delay)*a.delay);else a.run(!0)}else this._count++}(this._count>30||t%200===0)&&this._clearHandlers()},n._clearHandlers=function(){for(var t=this._handlers,e=0,i=t.length;i>e;e++){var n=t[e];null!==n.method?this._temp.push(n):this._recoverHandler(n)}this._handlers=this._temp,t.length=0,this._temp=t},n._recoverHandler=function(e){this._map[e.key]==e&&(this._map[e.key]=null),e.clear(),t._pool.push(e)},n._create=function(i,n,r,s,a,o,h){if(!r)return a.apply(s,o),null;if(h){var _=this._getHandler(s,a);if(_)return _.repeat=n,_.userFrame=i,_.delay=r,_.caller=s,_.method=a,_.args=o,_.exeTime=r+(i?this.currFrame:this.currTimer+Me.now()-this._lastTimer),_}return _=t._pool.length>0?t._pool.pop():new e,_.repeat=n,_.userFrame=i,_.delay=r,_.caller=s,_.method=a,_.args=o,_.exeTime=r+(i?this.currFrame:this.currTimer+Me.now()-this._lastTimer),this._indexHandler(_),this._handlers.push(_),_},n._indexHandler=function(e){var i=e.caller,n=e.method,r=i?i.$_GID||(i.$_GID=Q.getGID()):0,s=n.$_TID||(n.$_TID=1e5*t._mid++);e.key=r+s,this._map[e.key]=e},n.once=function(t,e,i,n,r){void 0===r&&(r=!0),this._create(!1,!1,t,e,i,n,r)},n.loop=function(t,e,i,n,r,s){void 0===r&&(r=!0),void 0===s&&(s=!1);var a=this._create(!1,!0,t,e,i,n,r);a&&(a.jumpFrame=s)},n.frameOnce=function(t,e,i,n,r){void 0===r&&(r=!0),this._create(!0,!1,t,e,i,n,r)},n.frameLoop=function(t,e,i,n,r){void 0===r&&(r=!0),this._create(!0,!0,t,e,i,n,r)},n.toString=function(){return" handlers:"+this._handlers.length+" pool:"+t._pool.length},n.clear=function(t,e){var i=this._getHandler(t,e);i&&(this._map[i.key]=null,i.key=0,i.clear())},n.clearAll=function(t){if(t)for(var e=0,i=this._handlers.length;i>e;e++){var n=this._handlers[e];n.caller===t&&(this._map[n.key]=null,n.key=0,n.clear())}},n._getHandler=function(e,i){var n=e?e.$_GID||(e.$_GID=Q.getGID()):0,r=i.$_TID||(i.$_TID=1e5*t._mid++);return this._map[n+r]},n.callLater=function(t,e,i){yi.I.callLater(t,e,i)},n.runCallLater=function(t,e){yi.I.runCallLater(t,e)},n.runTimer=function(t,e){var i=this._getHandler(t,e);i&&null!=i.method&&(this._map[i.key]=null,i.run(!0))},n.pause=function(){this.scale=0},n.resume=function(){this.scale=1},s(0,n,"delta",function(){return this._delta}),t._pool=[],t._mid=1,t.__init$=function(){e=function(){function t(){this.key=0,this.repeat=!1,this.delay=0,this.userFrame=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}r(t,"");var e=t.prototype;return e.clear=function(){this.caller=null,this.method=null,this.args=null},e.run=function(t){var e=this.caller;if(e&&e.destroyed)return this.clear();var i=this.method,n=this.args;t&&this.clear(),null!=i&&(n?i.apply(e,n):i.call(e))},t}()},t}(),ai=function(){function t(){}r(t,"laya.display.cmd.DrawImageCmd");var e=t.prototype;return e.recover=function(){this.texture._removeReference(),this.texture=null,Ki.recover("DrawImageCmd",this)},e.run=function(t,e,i){t.drawTexture(this.texture,this.x+e,this.y+i,this.width,this.height)},s(0,e,"cmdID",function(){return"DrawImage"}),t.create=function(e,i,n,r,s){var a=Ki.getItemByClass("DrawImageCmd",t);return a.texture=e,e._addReference(),a.x=i,a.y=n,a.width=r,a.height=s,a},t.ID="DrawImage",t}(),oi=function(){function t(){this.reset()}r(t,"laya.display.css.CacheStyle");var e=t.prototype;return e.needBitmapCache=function(){return this.cacheForFilters||!!this.mask},e.needEnableCanvasRender=function(){return"none"!=this.userSetCache||this.cacheForFilters||!!this.mask},e.releaseContext=function(){this.canvas&&this.canvas.size&&(Ki.recover("CacheCanvas",this.canvas),this.canvas.size(0,0)),this.canvas=null},e.createContext=function(){if(!this.canvas){this.canvas=Ki.getItem("CacheCanvas")||new yr(!wi.isWebGL);var t=this.canvas.context;t||(t=this.canvas.getContext("2d"))}},e.releaseFilterCache=function(){var t=this.filterCache;t&&(t.destroy(),t.recycle(),this.filterCache=null)},e.recover=function(){this!==t.EMPTY&&Ki.recover("SpriteCache",this.reset())},e.reset=function(){return this.releaseContext(),this.releaseFilterCache(),this.cacheAs="none",this.enableCanvasRender=!1,this.userSetCache="none",this.cacheForFilters=!1,this.staticCache=!1,this.reCache=!0,this.mask=null,this.maskParent=null,this.filterCache=null,this.filters=null,this.hasGlowFilter=!1,this.cacheRect&&this.cacheRect.recover(),this.cacheRect=null,this},e._calculateCacheRect=function(e,n,r,s){var a=!1;(wi.isWebGL||wi.isConchApp)&&(a=!0);var o=e._cacheStyle;o.cacheRect||(o.cacheRect=Ge.create());var h;a&&"bitmap"!==n?o.cacheRect.setTo(-e._style.pivotX,-e._style.pivotY,1,1):(h=e.getSelfBounds(),wi.isConchApp?(h.width=h.x+h.width+32,h.height=h.x+h.height+32):(h.width=h.width+32,h.height=h.height+32),h.x=h.x-e.pivotX,h.y=h.y-e.pivotY,h.x=h.x-16,h.y=h.y-16,h.x=Math.floor(h.x+r)-r,h.y=Math.floor(h.y+s)-s,h.width=Math.floor(h.width),h.height=Math.floor(h.height),o.cacheRect.copyFrom(h)),h=o.cacheRect;var _=a?1:Me.pixelRatio*i.stage.clientScaleX,l=a?1:Me.pixelRatio*i.stage.clientScaleY;if(!a){var u,c=1,d=1;for(u=e;u&&u!=i.stage;)c*=u.scaleX,d*=u.scaleY,u=u.parent;c>1&&(_*=c),d>1&&(l*=d)}if(e._style.scrollRect){var f=e._style.scrollRect;h.x-=f.x,h.y-=f.y}return t._scaleInfo.setTo(_,l),t._scaleInfo},t.create=function(){return Ki.getItemByClass("SpriteCache",t)},t.EMPTY=new t,t.CANVAS_EXTEND_EDGE=16,n(t,["_scaleInfo",function(){return this._scaleInfo=new Zi}]),t}(),hi=function(){function t(){this._clipInfoID=-1,this._globalClipMatrix=new ui,this._clipRect=new Ge}r(t,"laya.webgl.canvas.save.SaveClipRect");var e=t.prototype;return i.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){this._globalClipMatrix.copyTo(e._globalClipMatrix),this._clipRect.clone(e._clipRect),e._clipInfoID=this._clipInfoID,t.POOL[t.POOL._length++]=this},t.save=function(e){if(131072!=(131072&e._saveMark._saveuse)){e._saveMark._saveuse|=131072;var i=t.POOL,n=i._length>0?i[--i._length]:new t;e._globalClipMatrix.copyTo(n._globalClipMatrix),e._clipRect.clone(n._clipRect),n._clipInfoID=e._clipInfoID;var r=e._save;r[r._length++]=n}},t.POOL=h._createArray(),t}(),_i=function(){function t(){this._strsToID={},this._idToStrs=[],this._length=0}r(t,"laya.utils.StringKey");var e=t.prototype;return e.add=function(t){var e=this._strsToID[t];return null!=e?e:(this._idToStrs[this._length]=t,this._strsToID[t]=this._length++)},e.getID=function(t){var e=this._strsToID[t];return null==e?-1:e},e.getName=function(t){var e=this._idToStrs[t];return null==e?void 0:e},t}(),li=function(){function t(){}r(t,"laya.display.cmd.DrawCircleCmd");var e=t.prototype;return e.recover=function(){this.fillColor=null,this.lineColor=null,Ki.recover("DrawCircleCmd",this)},e.run=function(t,e,i){t._drawCircle(this.x+e,this.y+i,this.radius,this.fillColor,this.lineColor,this.lineWidth,this.vid)},s(0,e,"cmdID",function(){return"DrawCircle"}),t.create=function(e,i,n,r,s,a,o){var h=Ki.getItemByClass("DrawCircleCmd",t);return h.x=e,h.y=i,h.radius=n,h.fillColor=r,h.lineColor=s,h.lineWidth=a,h.vid=o,h},t.ID="DrawCircle",t}(),ui=function(){function t(e,i,n,r,s,a,o){return this._bTransform=!1,void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===s&&(s=0),void 0===a&&(a=0),void 0===o&&(o=0),null!=t._createFun?t._createFun(e,i,n,r,s,a,o):(this.a=e,this.b=i,this.c=n,this.d=r,this.tx=s,this.ty=a,this._checkTransform(),void 0)}r(t,"laya.maths.Matrix");var e=t.prototype;return e.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this._bTransform=!1,this},e._checkTransform=function(){return this._bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},e.setTranslate=function(t,e){return this.tx=t,this.ty=e,this},e.translate=function(t,e){return this.tx+=t,this.ty+=e,this},e.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this._bTransform=!0,this},e.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,s=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=s*e-this.ty*i,this.ty=s*i+this.ty*e,this._bTransform=!0,this},e.skew=function(t,e){var i=Math.tan(t),n=Math.tan(e),r=this.a,s=this.b;return this.a+=n*this.c,this.b+=n*this.d,this.c+=i*r,this.d+=i*s,this},e.invertTransformPoint=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,s=this.tx,a=e*r-i*n,o=r/a,h=-i/a,_=-n/a,l=e/a,u=(n*this.ty-r*s)/a,c=-(e*this.ty-i*s)/a;return t.setTo(o*t.x+_*t.y+u,h*t.x+l*t.y+c)},e.transformPoint=function(t){return t.setTo(this.a*t.x+this.c*t.y+this.tx,this.b*t.x+this.d*t.y+this.ty)},e.transformPointN=function(t){return t.setTo(this.a*t.x+this.c*t.y,this.b*t.x+this.d*t.y)},e.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},e.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},e.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s,this},e.setTo=function(t,e,i,n,r,s){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s,this},e.concat=function(t){var e=this.a,i=this.c,n=this.tx;return this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d,this.tx=n*t.a+this.ty*t.c+t.tx,this.ty=n*t.b+this.ty*t.d+t.ty,this},e.scaleEx=function(t,e){var i=this.a,n=this.b,r=this.c,s=this.d;0!==n||0!==r?(this.a=t*i,this.b=t*n,this.c=e*r,this.d=e*s):(this.a=t*i,this.b=0*s,this.c=0*i,this.d=e*s),this._bTransform=!0},e.rotateEx=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.b,s=this.c,a=this.d;0!==r||0!==s?(this.a=e*n+i*s,this.b=e*r+i*a,this.c=-i*n+e*s,this.d=-i*r+e*a):(this.a=e*n,this.b=i*a,this.c=-i*n,this.d=e*a),this._bTransform=!0},e.clone=function(){var e=t.create();return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e._bTransform=this._bTransform,e},e.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t._bTransform=this._bTransform,t},e.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},e.destroy=function(){this.recover()},e.recover=function(){Ki.recover("Matrix",this.identity())},t.mul=function(t,e,i){var n=t.a,r=t.b,s=t.c,a=t.d,o=t.tx,h=t.ty,_=e.a,l=e.b,u=e.c,c=e.d,d=e.tx,f=e.ty;return 0!==l||0!==u?(i.a=n*_+r*u,i.b=n*l+r*c,i.c=s*_+a*u,i.d=s*l+a*c,i.tx=_*o+u*h+d,i.ty=l*o+c*h+f):(i.a=n*_,i.b=r*c,i.c=s*_,i.d=a*c,i.tx=_*o+d,i.ty=c*h+f),i},t.mul16=function(t,e,i){var n=t.a,r=t.b,s=t.c,a=t.d,o=t.tx,h=t.ty,_=e.a,l=e.b,u=e.c,c=e.d,d=e.tx,f=e.ty;return 0!==l||0!==u?(i[0]=n*_+r*u,i[1]=n*l+r*c,i[4]=s*_+a*u,i[5]=s*l+a*c,i[12]=_*o+u*h+d,i[13]=l*o+c*h+f):(i[0]=n*_,i[1]=r*c,i[4]=s*_,i[5]=a*c,i[12]=_*o+d,i[13]=c*h+f),i},t.create=function(){return Ki.getItemByClass("Matrix",t)},t.EMPTY=new t,t.TEMP=new t,t._createFun=null,t}(),ci=function(){function t(){}return r(t,"laya.webgl.utils.RenderState2D"),t.mat2MatArray=function(e,i){var n=e,r=i;return r[0]=n.a,r[1]=n.b,r[2]=t.EMPTYMAT4_ARRAY[2],r[3]=t.EMPTYMAT4_ARRAY[3],r[4]=n.c,r[5]=n.d,r[6]=t.EMPTYMAT4_ARRAY[6],r[7]=t.EMPTYMAT4_ARRAY[7],r[8]=t.EMPTYMAT4_ARRAY[8],r[9]=t.EMPTYMAT4_ARRAY[9],r[10]=t.EMPTYMAT4_ARRAY[10],r[11]=t.EMPTYMAT4_ARRAY[11],r[12]=n.tx,r[13]=n.ty,r[14]=t.EMPTYMAT4_ARRAY[14],r[15]=t.EMPTYMAT4_ARRAY[15],i},t.restoreTempArray=function(){t.TEMPMAT4_ARRAY[0]=1,t.TEMPMAT4_ARRAY[1]=0,t.TEMPMAT4_ARRAY[4]=0,t.TEMPMAT4_ARRAY[5]=1,t.TEMPMAT4_ARRAY[12]=0,t.TEMPMAT4_ARRAY[13]=0},t.clear=function(){t.worldScissorTest=!1,t.worldAlpha=1},t._MAXSIZE=99999999,t.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t.worldMatrix4=t.TEMPMAT4_ARRAY,t.worldAlpha=1,t.worldScissorTest=!1,t.worldShaderDefines=null,t.worldFilters=null,t.width=0,t.height=0,n(t,["worldMatrix",function(){return this.worldMatrix=new ui}]),t}(),di=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._paramID=null,this._x=0/0,this._y=0/0,this._radius=0/0,this._startAngle=0/0,this._endAngle=0/0,this._fillColor=null,this._lineColor=null,this._lineWidth=0/0,this._vertNum=0,this._line_vertNum=0,this.ibBuffer=null,this.vbBuffer=null,this.line_ibBuffer=null,this.line_vbBuffer=null,this._ibSize=0,this._vbSize=0,this._line_ibSize=0,this._line_vbSize=0,this._cmdCurrentPos=0,this._points=[],this._linePoints=[],this._line_vbArray=[],this._line_ibArray=[]}r(t,"laya.layagl.cmdNative.DrawPieCmdNative");var e=t.prototype;return e._arc=function(t,e,i,n,r,s,a){void 0===s&&(s=!1),void 0===a&&(a=!0);var o=[];o.push(0),o.push(0);var h=0,_=0,l=0,u=0,c=0,d=0,f=0,p=0,m=0,g=0,v=0;if(_=r-n,s)if(Math.abs(_)>=2*Math.PI)_=2*-Math.PI;else for(;_>0;)_-=2*Math.PI;else if(Math.abs(_)>=2*Math.PI)_=2*Math.PI;else for(;0>_;)_+=2*Math.PI;g=101>i?Math.max(10,_*i/5):201>i?Math.max(10,_*i/20):Math.max(10,_*i/40),l=_/g/2,u=Math.abs(4/3*(1-Math.cos(l))/Math.sin(l)),s&&(u=-u),v=0;var y=0,E=0;for(m=0;g>=m;m++)h=n+_*(m/g),c=Math.cos(h),d=Math.sin(h),f=t+c*i,p=e+d*i,(f!=y||p!=E)&&(o.push(f),o.push(p)),y=f,E=p;return c=Math.cos(r),d=Math.sin(r),f=t+c*i,p=e+d*i,(f!=y||p!=E)&&(o.push(f),o.push(p)),o},e._setData=function(t,e,i,n,r,s){this._vertNum=n.length/2;var a=this._vertNum,h=0,_=this._vertNum-2;(!this.ibBuffer||this.ibBuffer.getByteLength()<3*_*2)&&(this.ibBuffer=new ParamData(3*_*2,!0,!0)),this._ibSize=3*_*2;for(var l=this.ibBuffer._int16Data,u=0,c=0;_>c;c++)l[u++]=h,l[u++]=c+1+h,l[u++]=c+2+h;(!this.vbBuffer||this.vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.vbBuffer=new ParamData(3*a*4,!0)),this._vbSize=3*this._vertNum*4;for(var d=o.create(i),f=d.numColor,p=this.vbBuffer._float32Data,m=this.vbBuffer._int32Data,g=0,v=0;v<this._vertNum;v++)p[g++]=n[2*v]+t,p[g++]=n[2*v+1]+e,m[g++]=f;var y=0;for(this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0,v=0;v<n.length;v++)this._linePoints.push(n[v]);if(this._linePoints.push(n[0]),this._linePoints.push(n[1]),r){Je.createLine2(this._linePoints,this._line_ibArray,s,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length,y=this._line_vertNum,(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(y-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;
var E=this.line_ibBuffer._int16Data;u=0;for(var A=0;A<3*(this._line_vertNum-2);A++)E[u++]=this._line_ibArray[A];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*y*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var C=o.create(r),S=C.numColor,D=this.line_vbBuffer._float32Data,R=this.line_vbBuffer._int32Data;for(g=0,v=0;v<this._line_vertNum;v++)D[g++]=this._line_vbArray[2*v]+this._x,D[g++]=this._line_vbArray[2*v+1]+this._y,R[g++]=S}else{this._lineWidth=1;var T="#FFFFFF";for(Je.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length,y=this._line_vertNum,(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(y-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2,E=this.line_ibBuffer._int16Data,u=0,A=0;A<3*(this._line_vertNum-2);A++)E[u++]=this._line_ibArray[A];for((!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*y*4,!0)),this._line_vbSize=3*this._line_vertNum*4,C=o.create(T),S=C.numColor,D=this.line_vbBuffer._float32Data,R=this.line_vbBuffer._int32Data,g=0,v=0;v<this._line_vertNum;v++)D[g++]=this._line_vbArray[2*v]+this._x,D[g++]=this._line_vbArray[2*v+1]+this._y,R[g++]=S}},e._saveToParamData=function(){var e=(this._paramData._float32Data,this._paramData._int32Data);e[0]=1,e[1]=32,e[t._PARAM_VB_POS_]=this.vbBuffer.getPtrID(),e[t._PARAM_IB_POS_]=this.ibBuffer.getPtrID(),e[t._PARAM_VB_SIZE_POS_]=this._vbSize,e[t._PARAM_IB_SIZE_POS_]=this._ibSize,e[t._PARAM_VB_OFFSET_POS_]=0,e[t._PARAM_IB_OFFSET_POS_]=0,e[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0,Le.syncBufferToRenderThread(this.vbBuffer),Le.syncBufferToRenderThread(this.ibBuffer),e[t._PARAM_LINE_VB_POS_]=this.line_vbBuffer.getPtrID(),e[t._PARAM_LINE_IB_POS_]=this.line_ibBuffer.getPtrID(),e[t._PARAM_LINE_VB_SIZE_POS_]=this._line_vbSize,e[t._PARAM_LINE_IB_SIZE_POS_]=this._line_ibSize,e[t._PARAM_LINE_VB_OFFSET_POS_]=0,e[t._PARAM_LINE_IB_OFFSET_POS_]=0,e[t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_]=0,Le.syncBufferToRenderThread(this.line_vbBuffer),Le.syncBufferToRenderThread(this.line_ibBuffer)},e.recover=function(){this._fillColor=null,this._lineColor=null,this._points.length=0,this._linePoints.length=0,this._line_vbArray.length=0,this._line_ibArray.length=0,Ki.recover("DrawPieCmd",this)},s(0,e,"lineColor",function(){return this._lineColor},function(e){!this._lineColor&&this._lineWidth&&(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_PIE_LINES_CMD_ENCODER_.getPtrID(),Le.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._lineColor=e,this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0;for(var i=0;i<this._points.length;i++)this._linePoints.push(this._points[i]);this._linePoints.push(this._points[0]),this._linePoints.push(this._points[1]),Je.createLine2(this._linePoints,this._line_ibArray,this._lineWidth,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length;var n=this._line_vertNum;(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(n-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;for(var r=this.line_ibBuffer._int16Data,s=0,a=0;a<3*(this._line_vertNum-2);a++)r[s++]=this._line_ibArray[a];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*n*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var h=o.create(e),_=h.numColor,l=this.line_vbBuffer._float32Data,u=this.line_vbBuffer._int32Data,c=0;for(i=0;i<this._line_vertNum;i++)l[c++]=this._line_vbArray[2*i]+this._x,l[c++]=this._line_vbArray[2*i+1]+this._y,u[c++]=_;Le.syncBufferToRenderThread(this.line_ibBuffer),Le.syncBufferToRenderThread(this.line_vbBuffer)}),s(0,e,"startAngle",function(){return 180*this._startAngle/Math.PI},function(t){this._startAngle=t*Math.PI/180,this._points=this._arc(0,0,this._radius,t*Math.PI/180,this._endAngle),this._setData(this._x,this._y,this._fillColor,this._points,this._lineColor,this._lineWidth),this._saveToParamData(),Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"cmdID",function(){return"DrawPie"}),s(0,e,"fillColor",function(){return this._fillColor},function(t){this._fillColor=t;for(var e=o.create(this._fillColor),i=e.numColor,n=this.vbBuffer._int32Data,r=0,s=0;s<this._vertNum;s++)r++,r++,n[r++]=i;Le.syncBufferToRenderThread(this.vbBuffer)}),s(0,e,"x",function(){return this._x},function(t){this._x=t;for(var e=this.vbBuffer._float32Data,i=0,n=0;n<this._vertNum;n++)e[i++]=this._points[2*n]+this._x,i++,i++;if(this._lineColor){var r=this.line_vbBuffer._float32Data;for(i=0,n=0;n<this._line_vertNum;n++)r[i++]=this._line_vbArray[2*n]+this._x,i++,i++;Le.syncBufferToRenderThread(this.line_vbBuffer)}Le.syncBufferToRenderThread(this.vbBuffer)}),s(0,e,"y",function(){return this._y},function(t){this._y=t;for(var e=this.vbBuffer._float32Data,i=0,n=0;n<this._vertNum;n++)i++,e[i++]=this._points[2*n+1]+this._y,i++;if(this._lineColor){var r=this.line_vbBuffer._float32Data;for(i=0,n=0;n<this._line_vertNum;n++)i++,r[i++]=this._line_vbArray[2*n+1]+this._y,i++;Le.syncBufferToRenderThread(this.line_vbBuffer)}Le.syncBufferToRenderThread(this.vbBuffer)}),s(0,e,"radius",function(){return this._radius},function(t){this._points=this._arc(0,0,t,this._startAngle,this._endAngle),this._setData(this._x,this._y,this._fillColor,this._points,this._lineColor,this._lineWidth),this._saveToParamData(),Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"endAngle",function(){return 180*this._endAngle/Math.PI},function(t){this._endAngle=t*Math.PI/180,this._points=this._arc(0,0,this._radius,this._startAngle,t*Math.PI/180),this._setData(this._x,this._y,this._fillColor,this._points,this._lineColor,this._lineWidth),this._saveToParamData(),Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"lineWidth",function(){return this._lineWidth},function(e){this.lineColor&&(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_PIE_LINES_CMD_ENCODER_.getPtrID(),Le.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._lineWidth=e,this._linePoints.length=0,this._line_ibArray.length=0,this._line_vbArray.length=0;for(var i=0;i<this._points.length;i++)this._linePoints.push(this._points[i]);this._linePoints.push(this._points[0]),this._linePoints.push(this._points[1]),Je.createLine2(this._linePoints,this._line_ibArray,e,0,this._line_vbArray,!1),this._line_vertNum=this._linePoints.length;var n=this._line_vertNum;(!this.line_ibBuffer||this.line_ibBuffer.getByteLength()<3*(this._line_vertNum-2)*2)&&(this.line_ibBuffer=new ParamData(3*(n-2)*2,!0,!0)),this._line_ibSize=3*(this._line_vertNum-2)*2;for(var r=this.line_ibBuffer._int16Data,s=0,a=0;a<3*(this._line_vertNum-2);a++)r[s++]=this._line_ibArray[a];(!this.line_vbBuffer||this.line_vbBuffer.getByteLength()<3*this._line_vertNum*4)&&(this.line_vbBuffer=new ParamData(3*n*4,!0)),this._line_vbSize=3*this._line_vertNum*4;var h=o.create(this.lineColor),_=h.numColor,l=this.line_vbBuffer._float32Data,u=this.line_vbBuffer._int32Data,c=0;for(i=0;i<this._line_vertNum;i++)l[c++]=this._line_vbArray[2*i]+this._x,l[c++]=this._line_vbArray[2*i+1]+this._y,u[c++]=_;Le.syncBufferToRenderThread(this.line_ibBuffer),Le.syncBufferToRenderThread(this.line_vbBuffer)}),t.create=function(e,i,n,r,s,a,o,h){var _=Ki.getItemByClass("DrawPieCmd",t);return _._graphicsCmdEncoder=this._commandEncoder,t._DRAW_PIE_LINES_CMD_ENCODER_||(t._DRAW_PIE_LINES_CMD_ENCODER_=Le.instance.createCommandEncoder(244,32,!0),t._DRAW_PIE_LINES_CMD_ENCODER_.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_PIE_LINES_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWVG),t._DRAW_PIE_LINES_CMD_ENCODER_.useVDO(se.VDO_MESHVG),t._DRAW_PIE_LINES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_PIE_LINES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_PIE_LINES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_PIE_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_PIE_LINES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_PIE_LINES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_PIE_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_LINE_VB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINE_VB_SIZE_POS_,4*t._PARAM_LINE_IB_POS_,4*t._PARAM_LINE_IB_OFFSET_POS_,4*t._PARAM_LINE_IB_SIZE_POS_,4*t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_PIE_LINES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_PIE_LINES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._DRAW_PIE_LINES_CMD_ENCODER_)),t._DRAW_PIE_CMD_ENCODER_||(t._DRAW_PIE_CMD_ENCODER_=Le.instance.createCommandEncoder(168,32,!0),t._DRAW_PIE_CMD_ENCODER_.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_PIE_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWVG),t._DRAW_PIE_CMD_ENCODER_.useVDO(se.VDO_MESHVG),t._DRAW_PIE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_PIE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_PIE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_PIE_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_PIE_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_PIE_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._DRAW_PIE_CMD_ENCODER_)),_._paramData||(_._paramData=new ParamData(64,!0)),_._x=e,_._y=i,_._radius=n,_._startAngle=r,_._endAngle=s,_._fillColor=a,_._lineColor=o,_._lineWidth=h,_._points=_._arc(0,0,n,r,s),_._setData(e,i,a,_._points,o,h),_._saveToParamData(),Le.syncBufferToRenderThread(_._paramData),_._cmdCurrentPos=o?_._graphicsCmdEncoder.useCommandEncoder(t._DRAW_PIE_LINES_CMD_ENCODER_.getPtrID(),_._paramData.getPtrID(),-1):_._graphicsCmdEncoder.useCommandEncoder(t._DRAW_PIE_CMD_ENCODER_.getPtrID(),_._paramData.getPtrID(),-1),Le.syncBufferToRenderThread(_._graphicsCmdEncoder),_},t.ID="DrawPie",t._DRAW_PIE_CMD_ENCODER_=null,t._DRAW_PIE_LINES_CMD_ENCODER_=null,t._PARAM_VB_POS_=2,t._PARAM_IB_POS_=3,t._PARAM_LINE_VB_POS_=4,t._PARAM_LINE_IB_POS_=5,t._PARAM_VB_SIZE_POS_=6,t._PARAM_IB_SIZE_POS_=7,t._PARAM_LINE_VB_SIZE_POS_=8,t._PARAM_LINE_IB_SIZE_POS_=9,t._PARAM_VB_OFFSET_POS_=10,t._PARAM_IB_OFFSET_POS_=11,t._PARAM_LINE_VB_OFFSET_POS_=12,t._PARAM_LINE_IB_OFFSET_POS_=13,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=14,t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_=15,t}(),function(){function t(e,i){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this.ref=1,this._cacheID=0,this.clipMatDir=[99999999,0,0,99999999],this.clipMatPos=[0,0],this.defines=new Dn,this.mainID=e,this.subID=i,this.textureHost=null,this.texture=null,this.color=null,this.colorAdd=null,this.u_mmat2=null,this._cacheID=e|i,this._inClassCache=t._cache[this._cacheID],e>0&&!this._inClassCache&&(this._inClassCache=t._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}r(t,"laya.webgl.shader.d2.value.Value2D");var e=t.prototype;return e.setValue=function(){},e._ShaderWithCompile=function(){var t=vr.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,Wr.create,this._attribLocation);return t},e.upload=function(){var t=ci;ci.worldMatrix4===ci.TEMPMAT4_ARRAY||this.defines.addInt(128),this.mmat=t.worldMatrix4;var e=vr.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();e._shaderValueWidth!==t.width||e._shaderValueHeight!==t.height?(this.size[0]=t.width,this.size[1]=t.height,e._shaderValueWidth=t.width,e._shaderValueHeight=t.height,e.upload(this,null)):e.upload(this,e._params2dQuick2||e._make2dQuick2())},e.setFilters=function(t){if(this.filters=t,t)for(var e,i=t.length,n=0;i>n;n++)e=t[n],e&&(this.defines.add(e.type),e.action.setValue(this))},e.clear=function(){this.defines._value=this.subID+(Ii.shaderHighPrecision?1024:0)},e.release=function(){--this.ref<1&&(this._inClassCache&&(this._inClassCache[this._inClassCache._length++]=this),this.clear(),this.filters=null,this.ref=1)},t._initone=function(e,i){t._typeClass[e]=i,t._cache[e]=[],t._cache[e]._length=0},t.__init__=function(){t._initone(4,wn),t._initone(512,In),t._initone(1,Mn),t._initone(9,Mn)},t.create=function(e,i){var n=t._cache[e|i];return n._length?n[--n._length]:new t._typeClass[e|i](i)},t._cache=[],t._typeClass=[],t.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t}()),fi=function(){function t(){}return r(t,"laya.webgl.shapes.Earcut"),t.earcut=function(e,i,n){n=n||2;var r=i&&i.length,s=r?i[0]*n:e.length,a=t.linkedList(e,0,s,n,!0),o=[];if(!a)return o;var h,_,l,u,c,d,f;if(r&&(a=t.eliminateHoles(e,i,a,n)),e.length>80*n){h=l=e[0],_=u=e[1];for(var p=n;s>p;p+=n)c=e[p],d=e[p+1],h>c&&(h=c),_>d&&(_=d),c>l&&(l=c),d>u&&(u=d);f=Math.max(l-h,u-_),f=0!==f?1/f:0}return t.earcutLinked(a,o,n,h,_,f),o},t.linkedList=function(e,i,n,r,s){var a,o;if(s===t.signedArea(e,i,n,r)>0)for(a=i;n>a;a+=r)o=t.insertNode(a,e[a],e[a+1],o);else for(a=n-r;a>=i;a-=r)o=t.insertNode(a,e[a],e[a+1],o);return o&&t.equals(o,o.next)&&(t.removeNode(o),o=o.next),o},t.filterPoints=function(e,i){if(!e)return e;i||(i=e);var n,r=e;do if(n=!1,r.steiner||!t.equals(r,r.next)&&0!==t.area(r.prev,r,r.next))r=r.next;else{if(t.removeNode(r),r=i=r.prev,r===r.next)break;n=!0}while(n||r!==i);return i},t.earcutLinked=function(e,i,n,r,s,a,o){if(e){!o&&a&&t.indexCurve(e,r,s,a);for(var h,_,l=e;e.prev!==e.next;)if(h=e.prev,_=e.next,a?t.isEarHashed(e,r,s,a):t.isEar(e))i.push(h.i/n),i.push(e.i/n),i.push(_.i/n),t.removeNode(e),e=_.next,l=_.next;else if(e=_,e===l){o?1===o?(e=t.cureLocalIntersections(e,i,n),t.earcutLinked(e,i,n,r,s,a,2)):2===o&&t.splitEarcut(e,i,n,r,s,a):t.earcutLinked(t.filterPoints(e,null),i,n,r,s,a,1);break}}},t.isEar=function(e){var i=e.prev,n=e,r=e.next;if(t.area(i,n,r)>=0)return!1;for(var s=e.next.next;s!==e.prev;){if(t.pointInTriangle(i.x,i.y,n.x,n.y,r.x,r.y,s.x,s.y)&&t.area(s.prev,s,s.next)>=0)return!1;s=s.next}return!0},t.isEarHashed=function(e,i,n,r){var s=e.prev,a=e,o=e.next;if(t.area(s,a,o)>=0)return!1;for(var h=s.x<a.x?s.x<o.x?s.x:o.x:a.x<o.x?a.x:o.x,_=s.y<a.y?s.y<o.y?s.y:o.y:a.y<o.y?a.y:o.y,l=s.x>a.x?s.x>o.x?s.x:o.x:a.x>o.x?a.x:o.x,u=s.y>a.y?s.y>o.y?s.y:o.y:a.y>o.y?a.y:o.y,c=t.zOrder(h,_,i,n,r),d=t.zOrder(l,u,i,n,r),f=e.nextZ;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&t.pointInTriangle(s.x,s.y,a.x,a.y,o.x,o.y,f.x,f.y)&&t.area(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=e.prevZ;f&&f.z>=c;){if(f!==e.prev&&f!==e.next&&t.pointInTriangle(s.x,s.y,a.x,a.y,o.x,o.y,f.x,f.y)&&t.area(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0},t.cureLocalIntersections=function(e,i,n){var r=e;do{var s=r.prev,a=r.next.next;!t.equals(s,a)&&t.intersects(s,r,r.next,a)&&t.locallyInside(s,a)&&t.locallyInside(a,s)&&(i.push(s.i/n),i.push(r.i/n),i.push(a.i/n),t.removeNode(r),t.removeNode(r.next),r=e=a),r=r.next}while(r!==e);return r},t.splitEarcut=function(e,i,n,r,s,a){var o=e;do{for(var h=o.next.next;h!==o.prev;){if(o.i!==h.i&&t.isValidDiagonal(o,h)){var _=t.splitPolygon(o,h);return o=t.filterPoints(o,o.next),_=t.filterPoints(_,_.next),t.earcutLinked(o,i,n,r,s,a),t.earcutLinked(_,i,n,r,s,a),void 0}h=h.next}o=o.next}while(o!==e)},t.eliminateHoles=function(e,i,n,r){var s,a,o,h,_,l=[];for(s=0,a=i.length;a>s;s++)o=i[s]*r,h=a-1>s?i[s+1]*r:e.length,_=t.linkedList(e,o,h,r,!1),_===_.next&&(_.steiner=!0),l.push(t.getLeftmost(_));for(l.sort(t.compareX),s=0;s<l.length;s++)t.eliminateHole(l[s],n),n=t.filterPoints(n,n.next);return n},t.compareX=function(t,e){return t.x-e.x},t.eliminateHole=function(e,i){if(i=t.findHoleBridge(e,i)){var n=t.splitPolygon(i,e);t.filterPoints(n,n.next)}},t.findHoleBridge=function(e,i){var n,r=i,s=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var h=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s>=h&&h>o){if(o=h,h===s){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==i);if(!n)return null;if(s===o)return n.prev;var _,l=n,u=n.x,c=n.y,d=1/0;for(r=n.next;r!==l;)s>=r.x&&r.x>=u&&s!==r.x&&t.pointInTriangle(c>a?s:o,a,u,c,c>a?o:s,a,r.x,r.y)&&(_=Math.abs(a-r.y)/(s-r.x),(d>_||_===d&&r.x>n.x)&&t.locallyInside(r,e)&&(n=r,d=_)),r=r.next;return n},t.indexCurve=function(e,i,n,r){var s=e;do null===s.z&&(s.z=t.zOrder(s.x,s.y,i,n,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,t.sortLinked(s)},t.sortLinked=function(t){var e,i,n,r,s,a,o,h,_=1;do{for(i=t,t=null,s=null,a=0;i;){for(a++,n=i,o=0,e=0;_>e&&(o++,n=n.nextZ,n);e++);for(h=_;o>0||h>0&&n;)0!==o&&(0===h||!n||i.z<=n.z)?(r=i,i=i.nextZ,o--):(r=n,n=n.nextZ,h--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}s.nextZ=null,_*=2}while(a>1);return t},t.zOrder=function(t,e,i,n,r){return t=32767*(t-i)*r,e=32767*(e-n)*r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},t.getLeftmost=function(t){var e=t,i=t;do e.x<i.x&&(i=e),e=e.next;while(e!==t);return i},t.pointInTriangle=function(t,e,i,n,r,s,a,o){return(r-a)*(e-o)-(t-a)*(s-o)>=0&&(t-a)*(n-o)-(i-a)*(e-o)>=0&&(i-a)*(s-o)-(r-a)*(n-o)>=0},t.isValidDiagonal=function(e,i){return e.next.i!==i.i&&e.prev.i!==i.i&&!t.intersectsPolygon(e,i)&&t.locallyInside(e,i)&&t.locallyInside(i,e)&&t.middleInside(e,i)},t.area=function(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)},t.equals=function(t,e){return t.x===e.x&&t.y===e.y},t.intersects=function(e,i,n,r){return t.equals(e,i)&&t.equals(n,r)||t.equals(e,r)&&t.equals(n,i)?!0:t.area(e,i,n)>0!=t.area(e,i,r)>0&&t.area(n,r,e)>0!=t.area(n,r,i)>0},t.intersectsPolygon=function(e,i){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==i.i&&n.next.i!==i.i&&t.intersects(n,n.next,e,i))return!0;n=n.next}while(n!==e);return!1},t.locallyInside=function(e,i){return t.area(e.prev,e,e.next)<0?t.area(e,i,e.next)>=0&&t.area(e,e.prev,i)>=0:t.area(e,i,e.prev)<0||t.area(e,e.next,i)<0},t.middleInside=function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next;while(i!==t);return n},t.splitPolygon=function(t,e){var i=new ne(t.i,t.x,t.y),n=new ne(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n},t.insertNode=function(t,e,i,n){var r=new ne(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r},t.removeNode=function(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)},t.signedArea=function(t,e,i,n){for(var r=0,s=e,a=i-n;i>s;s+=n)r+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return r},t}(),pi=function(){function t(){}r(t,"laya.display.cmd.FillBorderTextCmd");var e=t.prototype;return e.recover=function(){Ki.recover("FillBorderTextCmd",this)},e.run=function(t,e,i){t.fillBorderText(this.text,this.x+e,this.y+i,this.font,this.fillColor,this.borderColor,this.lineWidth,this.textAlign)},s(0,e,"cmdID",function(){return"FillBorderText"}),t.create=function(e,i,n,r,s,a,o,h){var _=Ki.getItemByClass("FillBorderTextCmd",t);return _.text=e,_.x=i,_.y=n,_.font=r,_.fillColor=s,_.borderColor=a,_.lineWidth=o,_.textAlign=h,_},t.ID="FillBorderText",t}(),mi=function(){function t(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],wi.isWebGL&&$i.regCacheByFunction(Q.bind(this.startDispose,this),Q.bind(this.getCacheList,this))}r(t,"laya.utils.VectorGraphManager");var e=t.prototype;return e.getId=function(){return this._id++},e.addShape=function(t,e){this.shapeDic[t]=e,this.useDic[t]||(this.useDic[t]=!0)},e.addLine=function(t,e){this.shapeLineDic[t]=e,this.shapeLineDic[t]||(this.shapeLineDic[t]=!0)},e.getShape=function(t){this._checkKey&&null!=this.useDic[t]&&(this.useDic[t]=!0)},e.deleteShape=function(t){this.shapeDic[t]&&(this.shapeDic[t]=null,delete this.shapeDic[t]),this.shapeLineDic[t]&&(this.shapeLineDic[t]=null,delete this.shapeLineDic[t]),null!=this.useDic[t]&&delete this.useDic[t]},e.getCacheList=function(){var t,e=[];for(t in this.shapeDic)e.push(this.shapeDic[t]);for(t in this.shapeLineDic)e.push(this.shapeLineDic[t]);return e},e.startDispose=function(){var t;for(t in this.useDic)this.useDic[t]=!1;this._checkKey=!0},e.endDispose=function(){if(this._checkKey){var t;for(t in this.useDic)this.useDic[t]||this.deleteShape(t);this._checkKey=!1}},t.getInstance=function(){return t.instance=t.instance||new t},t.instance=null,t}(),gi=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._texture=null,this._x=0/0,this._y=0/0,this._vertices=null,this._uvs=null,this._indices=null,this._matrix=null,this._alpha=0/0,this._color=null,this._blendMode=null,this.vbBuffer=null,this._vbSize=0/0,this.ibBuffer=null,this._ibSize=0/0,this._verticesNum=0/0,this._ibNum=0/0,this._blend_src=0,this._blend_dest=0}r(t,"laya.layagl.cmdNative.DrawTrianglesCmdNative");var e=t.prototype;return e.recover=function(){this._texture=null,this._vertices=null,this._uvs=null,this._indices=null,this._matrix=null,Ki.recover("DrawTrianglesCmd",this)},e._setBlendMode=function(t){switch(t){case"normal":this._blend_src=1,this._blend_dest=771;break;case"add":this._blend_src=1,this._blend_dest=772;break;case"multiply":this._blend_src=774,this._blend_dest=771;break;case"screen":this._blend_src=1,this._blend_dest=1;break;case"light":this._blend_src=1,this._blend_dest=1;break;case"overlay":this._blend_src=1,this._blend_dest=769;break;case"destination-out":this._blend_src=0,this._blend_dest=0;break;case"mask":this._blend_src=0,this._blend_dest=770;break;default:alert("_setBlendMode Unknown type")}},e._mixRGBandAlpha=function(t,e){var i=(4278190080&t)>>>24;return 0!=i?i*=e:i=255*e,16777215&t|i<<24},s(0,e,"vertices",function(){return this._vertices},function(t){this._vertices=t;for(var e=this.vbBuffer._float32Data,i=0,n=0;n<this._verticesNum;n++)e[i++]=this._x+t[2*n],e[i++]=this._y+t[2*n+1],i++,i++,i++,i++;Le.syncBufferToRenderThread(this.vbBuffer)}),s(0,e,"cmdID",function(){return"DrawTriangles"}),s(0,e,"matrix",function(){return this._matrix},function(e){this._matrix=e;var i=this._paramData._float32Data;i[t._PARAM_MATRIX_POS_]=e.a,i[t._PARAM_MATRIX_POS_+1]=e.b,i[t._PARAM_MATRIX_POS_+2]=e.c,i[t._PARAM_MATRIX_POS_+3]=e.d,i[t._PARAM_MATRIX_POS_+4]=e.tx,i[t._PARAM_MATRIX_POS_+5]=e.ty,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"texture",function(){return this._texture},function(e){if(e&&e.url){this._texture=e;var i=this._paramData._int32Data;i[t._PARAM_TEXTURE_POS_]=this._texture.bitmap._glTexture.id,Le.syncBufferToRenderThread(this._paramData)}}),s(0,e,"y",function(){return this._y},function(t){this._y=t;for(var e=this.vbBuffer._float32Data,i=0,n=0;n<this._verticesNum;n++)i++,e[i++]=t+this.vertices[2*n+1],i++,i++,i++,i++;Le.syncBufferToRenderThread(this.vbBuffer)}),s(0,e,"x",function(){return this._x},function(t){this._x=t;for(var e=this.vbBuffer._float32Data,i=0,n=0;n<this._verticesNum;n++)e[i++]=t+this.vertices[2*n],i++,i++,i++,i++,i++;Le.syncBufferToRenderThread(this.vbBuffer)}),s(0,e,"alpha",function(){return this._alpha},function(t){this._alpha=t}),s(0,e,"uvs",function(){return this._uvs},function(t){this._uvs=t;for(var e=this.vbBuffer._float32Data,i=0,n=0;n<this._verticesNum;n++)i++,i++,e[i++]=t[2*n],e[i++]=t[2*n+1],i++,i++;Le.syncBufferToRenderThread(this.vbBuffer)}),s(0,e,"indices",function(){return this._indices},function(t){this._indices=t;for(var e=this.ibBuffer._int16Data,i=0,n=0;n<this._ibNum;n++)e[i++]=t[n];Le.syncBufferToRenderThread(this.ibBuffer)}),s(0,e,"color",function(){return this._color},function(t){this._color=t}),s(0,e,"blendMode",function(){return this._blendMode},function(t){this._blendMode=t}),t.create=function(e,i,n,r,s,a,h,_,l,u){var c=Ki.getItemByClass("DrawTrianglesCmd",t);c._graphicsCmdEncoder=this._commandEncoder,t._DRAW_TRIANGLES_CMD_ENCODER_||(t._DRAW_TRIANGLES_CMD_ENCODER_=Le.instance.createCommandEncoder(152,32,!0),t._DRAW_TRIANGLES_CMD_ENCODER_.save(),t._DRAW_TRIANGLES_CMD_ENCODER_.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_TRIANGLES_CMD_ENCODER_.blendFuncByParamData(4*t._PARAM_BLEND_SRC_POS_,4*t._PARAM_BLEND_DEST_POS_),t._DRAW_TRIANGLES_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWTEXTURE),t._DRAW_TRIANGLES_CMD_ENCODER_.useVDO(se.VDO_MESHQUADTEXTURE),t._DRAW_TRIANGLES_CMD_ENCODER_.setGlobalValueByParamData(se.GLOBALVALUE_MATRIX32,7,4*t._PARAM_MATRIX_POS_),t._DRAW_TRIANGLES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_TRIANGLES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_TRIANGLES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_TRIANGLES_CMD_ENCODER_.uniformTextureByParamData(4*t._PARAM_UNIFORMLOCATION_POS_,4*t._PARAM_TEXLOCATION_POS_,4*t._PARAM_TEXTURE_POS_),t._DRAW_TRIANGLES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_TRIANGLES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_TRIANGLES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_TRIANGLES_CMD_ENCODER_.restore(),Le.syncBufferToRenderThread(t._DRAW_TRIANGLES_CMD_ENCODER_)),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_||(t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_=Le.instance.createCommandEncoder(152,32,!0),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.save(),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.blendFuncByParamData(4*t._PARAM_BLEND_SRC_POS_,4*t._PARAM_BLEND_DEST_POS_),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.addShaderMacro(se.SHADER_MACRO_COLOR_FILTER),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.setGlobalValueByParamData(se.GLOBALVALUE_COLORFILTER_COLOR,8,4*t._PARAM_FILTER_COLOR_POS_),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.setGlobalValueByParamData(se.GLOBALVALUE_COLORFILTER_ALPHA,8,4*t._PARAM_FILTER_ALPHA_POS_),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWTEXTURE),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.useVDO(se.VDO_MESHQUADTEXTURE),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.setGlobalValueByParamData(se.GLOBALVALUE_MATRIX32,7,4*t._PARAM_MATRIX_POS_),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.uniformTextureByParamData(4*t._PARAM_UNIFORMLOCATION_POS_,4*t._PARAM_TEXLOCATION_POS_,4*t._PARAM_TEXTURE_POS_),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.restore(),Le.syncBufferToRenderThread(t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_)),c._paramData||(c._paramData=new ParamData(152,!0)),c._texture=e,c._x=i,c._y=n,c._vertices=r,c._uvs=s,c._indices=a,c._matrix=h?h:new ui,c._alpha=_,c._color=l,c._blendMode=u;var d=new dn,f=o.create(l);d.color(f.arrColor[0],f.arrColor[1],f.arrColor[2],f.arrColor[3]),c._verticesNum=c._vertices.length/2;var p=c._verticesNum;(!c.vbBuffer||c.vbBuffer.getByteLength()<24*p*3)&&(c.vbBuffer=new ParamData(24*p*3,!0)),c._vbSize=24*p*3;var m=c.vbBuffer._float32Data,g=c.vbBuffer._int32Data,v=4294967295;_&&(v=c._mixRGBandAlpha(v,_));for(var y=0,E=0;E<c._verticesNum;E++)m[y++]=i/c._matrix.a+r[2*E],m[y++]=n/c._matrix.d+r[2*E+1],m[y++]=s[2*E],m[y++]=s[2*E+1],g[y++]=v,g[y++]=4294967295;c._ibNum=a.length;var A=c._ibNum;(!c.ibBuffer||c.ibBuffer.getByteLength()<2*A)&&(c.ibBuffer=new ParamData(2*A,!0,!0)),c._ibSize=2*A;for(var C=c.ibBuffer._int16Data,S=0,D=0;D<c._ibNum;D++)C[S++]=a[D];var R=c._paramData._float32Data,T=c._paramData._int32Data;if(T[t._PARAM_UNIFORMLOCATION_POS_]=3,T[t._PARAM_TEXLOCATION_POS_]=33984,T[t._PARAM_TEXTURE_POS_]=e.bitmap._glTexture.id,T[t._PARAM_VB_POS_]=c.vbBuffer.getPtrID(),T[t._PARAM_VB_SIZE_POS_]=c._vbSize,T[t._PARAM_IB_POS_]=c.ibBuffer.getPtrID(),T[t._PARAM_IB_SIZE_POS_]=c._ibSize,T[t._PARAM_VB_OFFSET_POS_]=0,T[t._PARAM_IB_OFFSET_POS_]=0,T[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0,R[t._PARAM_MATRIX_POS_]=c._matrix.a,R[t._PARAM_MATRIX_POS_+1]=c._matrix.b,R[t._PARAM_MATRIX_POS_+2]=c._matrix.c,R[t._PARAM_MATRIX_POS_+3]=c._matrix.d,R[t._PARAM_MATRIX_POS_+4]=c._matrix.tx,R[t._PARAM_MATRIX_POS_+5]=c._matrix.ty,u?(c._setBlendMode(u),T[t._PARAM_BLEND_SRC_POS_]=c._blend_src,T[t._PARAM_BLEND_DEST_POS_]=c._blend_dest):(T[t._PARAM_BLEND_SRC_POS_]=-1,T[t._PARAM_BLEND_DEST_POS_]=-1),l){y=t._PARAM_FILTER_COLOR_POS_;var x=d._mat;R[y++]=x[0],R[y++]=x[1],R[y++]=x[2],R[y++]=x[3],R[y++]=x[4],R[y++]=x[5],R[y++]=x[6],R[y++]=x[7],R[y++]=x[8],R[y++]=x[9],R[y++]=x[10],R[y++]=x[11],R[y++]=x[12],R[y++]=x[13],R[y++]=x[14],R[y++]=x[15],y=t._PARAM_FILTER_ALPHA_POS_;var b=d._alpha;R[y++]=255*b[0],R[y++]=255*b[1],R[y++]=255*b[2],R[y++]=255*b[3]}return Le.syncBufferToRenderThread(c.vbBuffer),Le.syncBufferToRenderThread(c.ibBuffer),Le.syncBufferToRenderThread(c._paramData),l?c._graphicsCmdEncoder.useCommandEncoder(t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_.getPtrID(),c._paramData.getPtrID(),-1):c._graphicsCmdEncoder.useCommandEncoder(t._DRAW_TRIANGLES_CMD_ENCODER_.getPtrID(),c._paramData.getPtrID(),-1),Le.syncBufferToRenderThread(c._graphicsCmdEncoder),c},t.ID="DrawTriangles",t._DRAW_TRIANGLES_CMD_ENCODER_=null,t._DRAW_TRIANGLES_COLORFILTER_CMD_ENCODER_=null,t._PARAM_UNIFORMLOCATION_POS_=0,t._PARAM_TEXLOCATION_POS_=1,t._PARAM_TEXTURE_POS_=2,t._PARAM_VB_POS_=3,t._PARAM_VB_SIZE_POS_=4,t._PARAM_IB_POS_=5,t._PARAM_IB_SIZE_POS_=6,t._PARAM_VB_OFFSET_POS_=7,t._PARAM_IB_OFFSET_POS_=8,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=9,t._PARAM_BLEND_SRC_POS_=10,t._PARAM_BLEND_DEST_POS_=11,t._PARAM_MATRIX_POS_=12,t._PARAM_FILTER_COLOR_POS_=18,t._PARAM_FILTER_ALPHA_POS_=34,t}(),function(){function t(){this._lastOriX=0,this._lastOriY=0,this.paths=[],this._curPath=null}var e;r(t,"laya.webgl.canvas.Path");var i=t.prototype;return i.beginPath=function(t){this.paths.length=1,this._curPath=this.paths[0]=new e,this._curPath.convex=t},i.closePath=function(){this._curPath.loop=!0},i.newPath=function(){this._curPath=new e,this.paths.push(this._curPath)},i.addPoint=function(t,e){this._curPath.path.push(t,e)},i.push=function(t,i){this._curPath?this._curPath.path.length>0&&(this._curPath=new e,this.paths.push(this._curPath)):(this._curPath=new e,this.paths.push(this._curPath));var n=this._curPath;n.path=t.slice(),n.convex=i},i.reset=function(){this.paths.length=0},t.__init$=function(){e=function(){function t(){this.path=[],this.loop=!1,this.convex=!1}return r(t,""),t}()},t}()),vi=function(){function t(){this._customCmds=null,this._targets=null,this._width=0,this._height=0,this._cmdEncoder=null}r(t,"laya.layagl.LayaGLRenderingContext");var e=t.prototype;return e.drawTexture=function(t,e,i,n,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),this.drawImage(t,e,i,n,r)},e.drawImage=function(t,e,i,n,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),this._customCmds.push(ai.create.call(this,t,e,i,n,r))},e.fillText=function(t,e,i,n,r,s){this._customCmds.push(ni.create.call(this,t,e,i,n||ur.defaultFontStr(),r,s))},e.save=function(){this._customCmds.push(je.create.call(this))
},e.restore=function(){this._customCmds.push(ke.create.call(this))},e.translate=function(t,e){this._customCmds.push(fe.create.call(this,t,e))},e.rotate=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._customCmds.push(Ni.create.call(this,t,e,i))},e.scale=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this._customCmds.push(Ke.create.call(this,t,e,i,n))},e.transform=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._customCmds.push(B.create.call(this,t,e,i))},e.beginRT=function(){Gr.pushRT(),this._targets.start(),this.clear()},e.clear=function(){},e.endRT=function(){Gr.popRT()},e.drawCanvas=function(t,e,i){var n=t.context._targets;this._customCmds.push(We.create.call(this,n,e,i,n.width,n.height))},e.drawTarget=function(t,e,i,n,r,s){var a=new ArrayBuffer(96),o=new Int32Array(a),h=new Float32Array(a),_=0!=r?r:e.width,l=0!=s?s:e.height,u=Gr.flipyuv,c=0;h[c++]=i,h[c++]=n,h[c++]=u[0],h[c++]=u[1],o[c++]=4294967295,o[c++]=4294967295,h[c++]=i+_,h[c++]=n,h[c++]=u[2],h[c++]=u[3],o[c++]=4294967295,o[c++]=4294967295,h[c++]=i+_,h[c++]=n+l,h[c++]=u[4],h[c++]=u[5],o[c++]=4294967295,o[c++]=4294967295,h[c++]=i,h[c++]=n+l,h[c++]=u[6],h[c++]=u[7],o[c++]=4294967295,o[c++]=4294967295,t.useProgramEx(se.PROGRAMEX_DRAWTEXTURE),t.useVDO(se.VDO_MESHQUADTEXTURE),t.uniformEx(se.GLOBALVALUE_VIEWS,0),t.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t.uniformTexture(0,33984,e._getSource()),t.setRectMesh(1,a),t.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15)},e.getImageData=function(t,e,i,n,r){var s=this._targets.sourceWidth,a=this._targets.sourceHeight;if(!(0>t||0>e||0>i||0>n||i>s||n>a)){this._cmdEncoder||(this._cmdEncoder=Le.instance.createCommandEncoder(128,64,!1));var o=Le.instance;this._cmdEncoder.beginEncoding(),this._cmdEncoder.clearEncoding(),Gr.pushRT(),this._targets.start(),o.readPixelsAsync(t,e,i,n,6408,5121,function(t){r(t)}),this.endRT(),this._cmdEncoder.endEncoding(),o.useCommandEncoder(this._cmdEncoder.getPtrID(),-1,0)}},e.toBase64=function(t,e,i){var n=this._targets.sourceWidth,r=this._targets.sourceHeight;this.getImageData(0,0,n,r,function(s){var a=conchToBase64(t,e,s,n,r);i(a)})},s(0,e,"asBitmap",function(){return!this._targets},function(t){if(t){if(this._targets||(this._targets=new Gr(this._width,this._height,1,-1)),!this._width||!this._height)throw Error("asBitmap no size!")}else this._targets=null}),t}(),yi=function(){function t(){this._pool=[],this._map=[],this._laters=[]}var e;r(t,"laya.utils.CallLater");var i=t.prototype;return i._update=function(){var t=this._laters,e=t.length;if(e>0){for(var i=0,n=e-1;n>=i;i++){var r=t[i];this._map[r.key]=null,null!==r.method&&(r.run(),r.clear()),this._pool.push(r),i===n&&(n=t.length-1)}t.length=0}},i._getHandler=function(t,e){var i=t?t.$_GID||(t.$_GID=Q.getGID()):0,n=e.$_TID||(e.$_TID=1e5*si._mid++);return this._map[i+n]},i.callLater=function(t,i,n){if(null==this._getHandler(t,i)){if(this._pool.length)var r=this._pool.pop();else r=new e;r.caller=t,r.method=i,r.args=n;var s=t?t.$_GID:0,a=i.$_TID;r.key=s+a,this._map[r.key]=r,this._laters.push(r)}},i.runCallLater=function(t,e){var i=this._getHandler(t,e);i&&null!=i.method&&(this._map[i.key]=null,i.run(),i.clear())},t.I=new t,t.__init$=function(){e=function(){function t(){this.key=0,this.caller=null,this.method=null,this.args=null}r(t,"");var e=t.prototype;return e.clear=function(){this.caller=null,this.method=null,this.args=null},e.run=function(){var t=this.caller;if(t&&t.destroyed)return this.clear();var e=this.method,i=this.args;null!=e&&(i?e.apply(t,i):e.call(t))},t}()},t}(),Ei=function(){function t(){}return r(t,"laya.events.KeyBoardManager"),t.__init__=function(){t._addEvent("keydown"),t._addEvent("keypress"),t._addEvent("keyup")},t._addEvent=function(t){Me.document.addEventListener(t,function(e){laya.events.KeyBoardManager._dispatch(e,t)},!0)},t._dispatch=function(e,n){if(t.enabled){t._event._stoped=!1,t._event.nativeEvent=e,t._event.keyCode=e.keyCode||e.which||e.charCode,"keydown"===n?t._pressKeys[t._event.keyCode]=!0:"keyup"===n&&(t._pressKeys[t._event.keyCode]=null);for(var r=i.stage.focus&&null!=i.stage.focus.event&&i.stage.focus.displayedInStage?i.stage.focus:i.stage,s=r;s;)s.event(n,t._event.setTo(n,s,r)),s=s.parent}},t.hasKeyDown=function(e){return t._pressKeys[e]},t._pressKeys={},t.enabled=!0,n(t,["_event",function(){return this._event=new ee}]),t}(),Ai=function(){function t(){this.ib=null,this.vb=null;Ii.mainContext;this.ib=Ur.create(35048),this.vb=Vr.create(8)}r(t,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var e=t.prototype;return e.addSkinMesh=function(t){t.getData2(this.vb,this.ib,this.vb._byteLength/32)},e.reset=function(){this.vb.clear(),this.ib.clear()},t.getInstance=function(){return t.instance=t.instance||new t},t.instance=null,t}(),Ci=function(){function t(){this.data=null}r(t,"laya.filters.ColorFilterAction");var e=t.prototype;return e.apply=function(t){var e=t.canvas,i=e.context;if(0==e.width||0==e.height)return e;for(var n,r=i.getImageData(0,0,e.width,e.height),s=r.data,a=0,o=s.length;o>a;a+=4)n=this.getColor(s[a],s[a+1],s[a+2],s[a+3]),0!=s[a+3]&&(s[a]=n[0],s[a+1]=n[1],s[a+2]=n[2],s[a+3]=n[3]);return i.putImageData(r,0,0),t},e.getColor=function(t,e,i,n){var r=[];if(this.data._mat&&this.data._alpha){var s=this.data._mat,a=this.data._alpha;r[0]=s[0]*t+s[1]*e+s[2]*i+s[3]*n+a[0],r[1]=s[4]*t+s[5]*e+s[6]*i+s[7]*n+a[1],r[2]=s[8]*t+s[9]*e+s[10]*i+s[11]*n+a[2],r[3]=s[12]*t+s[13]*e+s[14]*i+s[15]*n+a[3]}return r},t}(),Si=function(){function t(){this._hit=null,this._unHit=null}r(t,"laya.utils.HitArea");var e=t.prototype;return e.contains=function(e,i){return t._isHitGraphic(e,i,this.hit)?!t._isHitGraphic(e,i,this.unHit):!1},s(0,e,"hit",function(){return this._hit||(this._hit=new Ue),this._hit},function(t){this._hit=t}),s(0,e,"unHit",function(){return this._unHit||(this._unHit=new Ue),this._unHit},function(t){this._unHit=t}),t._isHitGraphic=function(e,i,n){if(!n)return!1;var r=n.cmds;if(!r&&n._one&&(r=t._cmds,r.length=1,r[0]=n._one),!r)return!1;var s=0,a=0;a=r.length;var o;for(s=0;a>s;s++)if(o=r[s]){switch(o.cmdID){case"Translate":e-=o.tx,i-=o.ty}if(t._isHitCmd(e,i,o))return!0}return!1},t._isHitCmd=function(e,i,n){if(!n)return!1;var r=!1;switch(n.cmdID){case"DrawRect":t._rect.setTo(n.x,n.y,n.width,n.height),r=t._rect.contains(e,i);break;case"DrawCircle":var s=0/0;e-=n.x,i-=n.y,s=e*e+i*i,r=s<n.radius*n.radius;break;case"DrawPoly":e-=n.x,i-=n.y,r=t._ptInPolygon(e,i,n.points)}return r},t._ptInPolygon=function(e,i,n){var r=t._ptPoint;r.setTo(e,i);var s=0,a=0/0,o=0/0,h=0/0,_=0/0,l=0;l=n.length;for(var u=0;l>u;u+=2)if(a=n[u],o=n[u+1],h=n[(u+2)%l],_=n[(u+3)%l],o!=_&&!(r.y<Math.min(o,_)||r.y>=Math.max(o,_))){var c=(r.y-o)*(h-a)/(_-o)+a;c>r.x&&s++}return s%2==1},t._cmds=[],n(t,["_rect",function(){return this._rect=new Ge},"_ptPoint",function(){return this._ptPoint=new Zi}]),t}(),Di=function(){function t(){}return r(t,"Config"),t.animationInterval=50,t.isAntialias=!1,t.isAlpha=!1,t.premultipliedAlpha=!0,t.isStencil=!0,t.preserveDrawingBuffer=!1,t.webGL2D_MeshAllocMaxMem=!0,t.is2DPixelArtGame=!1,t.useWebGL2=!1,t}(),Ri=function(){function t(){this._commStr="",this._commandEncoder=null,this._id=0,this._commandEncoder=Le.instance.createCommandEncoder(64,16,!1)}r(t,"laya.layagl.LayaGLTemplate");var e=t.prototype;return e.addComd=function(t,e){this._commStr+=t+"("+e+");",this._commandEncoder[t].apply(this._commandEncoder,e)},t.createByRenderType=function(e){var i=t.GLS[e]=new t;wi.isConchApp&&Le.instance.setGLTemplate(e,i._commandEncoder.getPtrID());for(var n=1;8192>=n;){var r=e&n;if(r&&t.__FUN_PARAM__[n])for(var s=t.__FUN_PARAM__[n],a=0,o=s.length;o>a;a++){var h=s[a];i.addComd(h.func,h.args)}n<<=1}return i._id=e,console.log("template="+i._commStr),i},t.createByRenderTypeEnd=function(e){var i=t.GLSE[e]=new t;wi.isConchApp&&Le.instance.setEndGLTemplate(e,i._commandEncoder.getPtrID());for(var n=8192;n>1;){var r=e&n;if(r&&t.__FUN_PARAM_END_[n])for(var s=t.__FUN_PARAM_END_[n],a=0,o=s.length;o>a;a++){var h=s[a];i.addComd(h.func,h.args)}n>>=1}return i._id=e,console.log("templateEnd="+i._commStr),i},t.__init__=function(){t.__FUN_PARAM__[1]=[{func:"setGlobalValueByParamData",args:[se.GLOBALVALUE_DRAWTEXTURE_COLOR,15,88]}],t.__FUN_PARAM__[2]=[{func:"calcLocalMatrix32",args:[60,64,24,28,32,36,40,44,48,52,56]},{func:"setGlobalValueByParamData",args:[se.GLOBALVALUE_MATRIX32,7,64]}],t.__FUN_PARAM__[4]=[{func:"setGlobalValueByParamData",args:[se.GLOBALVALUE_BLENDFUNC_SRC,8,284]},{func:"setGlobalValueByParamData",args:[se.GLOBALVALUE_BLENDFUNC_DEST,8,288]}],t.__FUN_PARAM__[256]=[{func:"useCommandEncoderByParamData",args:[96,100,1]}],t.__FUN_PARAM__[512]=[{func:"callbackJSByParamData",args:[216,272]},{func:"useCommandEncoderByParamData",args:[92,-1,1]}],t.__FUN_PARAM__[1024]=[{func:"callbackJSByParamData",args:[216,248]},{func:"useCommandEncoderByParamData",args:[104,-1,3]}],t.__FUN_PARAM__[2048]=[{func:"callbackJSByParamData",args:[216,220]},{func:"useCommandEncoderByParamData",args:[108,-1,1]}],t.__FUN_PARAM__[64]=[{func:"setClipByParamData",args:[se.GLOBALVALUE_CLIP_MAT_DIR,se.GLOBALVALUE_CLIP_MAT_POS,se.GLOBALVALUE_MATRIX32,112]},{func:"setGlobalValueByParamData",args:[se.GLOBALVALUE_MATRIX32,9,128]}],t.__FUN_PARAM__[16]=[{func:"callbackJSByParamData",args:[216,260]},{func:"useCommandEncoderByParamData",args:[256,-1,0]}],t.__FUN_PARAM__[32]=[{func:"callbackJSByParamData",args:[216,276]},{func:"useCommandEncoderByParamData",args:[280,-1,0]}],t.__FUN_PARAM__[8]=[{func:"callbackJSByParamData",args:[216,224]},{func:"loadDataToRegByParamData",args:[0,252,4]},{func:"ifGreater0",args:[0,2147483647]},{func:"useCommandEncoderByParamData",args:[232,-1,0]}],t.__FUN_PARAM__[128]=[{func:"useCommandEncoderByParamData",args:[292,296,1]},{func:"useCommandEncoderByParamData",args:[300,304,1]}]},t.__init_END_=function(){t.__FUN_PARAM_END_[16]=[{func:"loadDataToRegByParamData",args:[0,252,4]},{func:"ifGreater0",args:[0,2]},{func:"callbackJSByParamData",args:[216,268]},{func:"useCommandEncoderByParamData",args:[264,-1,1]}],t.__FUN_PARAM_END_[8]=[{func:"callbackJSByParamData",args:[216,228]},{func:"useCommandEncoderByParamData",args:[236,-1,0]},{func:"useCommandEncoderByParamData",args:[240,244,1]}]},t.GLS=[],t.GLSE=[],t.__FUN_PARAM__=[],t.__FUN_PARAM_END_=[],t}(),Ti=function(){function t(){}r(t,"laya.display.cmd.FillBorderWordsCmd");var e=t.prototype;return e.recover=function(){this.words=null,Ki.recover("FillBorderWordsCmd",this)},e.run=function(t,e,i){t.fillBorderWords(this.words,this.x+e,this.y+i,this.font,this.fillColor,this.borderColor,this.lineWidth)},s(0,e,"cmdID",function(){return"FillBorderWords"}),t.create=function(e,i,n,r,s,a,o){var h=Ki.getItemByClass("FillBorderWordsCmd",t);return h.words=e,h.x=i,h.y=n,h.font=r,h.fillColor=s,h.borderColor=a,h.lineWidth=o,h},t.ID="FillBorderWords",t}(),xi=function(){function t(){}r(t,"laya.display.cmd.DrawTexturesCmd");var e=t.prototype;return e.recover=function(){this.texture._removeReference(),this.texture=null,this.pos=null,Ki.recover("DrawTexturesCmd",this)},e.run=function(t,e,i){t.drawTextures(this.texture,this.pos,e,i)},s(0,e,"cmdID",function(){return"DrawTextures"}),t.create=function(e,i){var n=Ki.getItemByClass("DrawTexturesCmd",t);return n.texture=e,e._addReference(),n.pos=i,n},t.ID="DrawTextures",t}(),bi=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._graphicsCmdEncoder_fill=null,this._paramData_fill=null,this._x=0/0,this._y=0/0,this._paths=null,this._brush=null,this._pen=null,this._vertNum=0,this._startOriX=0,this._startOriY=0,this._lastOriX=0,this._lastOriY=0,this.SEGNUM=32,this.lines_ibBuffer=null,this.lines_vbBuffer=null,this._lines_ibSize=0,this._lines_vbSize=0,this.fill_ibBuffer=null,this.fill_vbBuffer=null,this._fill_ibSize=0,this._fill_vbSize=0,this._cmdCurrentPos=0,this._points=[],this._lines_ibArray=[],this._lines_vbArray=[],this._fill_ibArray=[],this._fill_vbArray=[]}r(t,"laya.layagl.cmdNative.DrawPathCmdNative");var e=t.prototype;return e._arcTo=function(t){var e=t[1],i=t[2],n=t[3],r=t[4],s=t[5],a=0,o=0,h=0,_=this._lastOriX-e,l=this._lastOriY-i,u=Math.sqrt(_*_+l*l);if(!(1e-6>=u)){var c=_/u,d=l/u,f=n-e,p=r-i,m=f*f+p*p,g=Math.sqrt(m);if(!(1e-6>=g)){var v=f/g,y=p/g,E=c+v,A=d+y,C=Math.sqrt(E*E+A*A);if(!(1e-6>=C)){var S=E/C,D=A/C,R=Math.acos(S*c+D*d),T=Math.PI/2-R;u=s/Math.tan(T);var x=u*c+e,b=u*d+i,P=Math.sqrt(u*u+s*s),L=e+S*P,I=i+D*P,M=c*y-d*v,w=0,O=0,B=0;if(M>=0){w=2*T;var N=w/this.SEGNUM;O=Math.sin(N),B=Math.cos(N)}else w=2*-T,N=w/this.SEGNUM,O=Math.sin(N),B=Math.cos(N);var F=this._lastOriX,k=this._lastOriY,V=x-L,U=b-I;for(a=0;a<this.SEGNUM;a++){var W=V*B+U*O,G=-V*O+U*B;o=W+L,h=G+I,(Math.abs(F-o)>.1||Math.abs(k-h)>.1)&&(this._points.push(o),this._points.push(h)),V=W,U=G}}}}},e.recover=function(){this._paths=null,this._brush=null,this._pen=null,this._points.length=0,this._lines_ibArray.length=0,this._lines_vbArray.length=0,this._fill_ibArray.length=0,this._fill_vbArray.length=0,Ki.recover("DrawPathCmd",this)},s(0,e,"cmdID",function(){return"DrawPath"}),s(0,e,"paths",function(){return this._paths},function(t){this._paths=t}),s(0,e,"x",function(){return this._x},function(t){this._x=t;for(var e=this.lines_vbBuffer._float32Data,i=0,n=0;n<this._vertNum;n++)e[i++]=this._lines_vbArray[2*n]+t,i++,i++;Le.syncBufferToRenderThread(this.lines_vbBuffer)}),s(0,e,"y",function(){return this._y},function(t){this._y=t;for(var e=this.lines_vbBuffer._float32Data,i=0,n=0;n<this._vertNum;n++)i++,e[i++]=this._lines_vbArray[2*n+1]+t,i++;Le.syncBufferToRenderThread(this.lines_vbBuffer)}),s(0,e,"brush",function(){return this._brush},function(e){this._brush||(this._graphicsCmdEncoder._idata[this._cmdCurrentPos+1]=t._DRAW_LINES_FILL_CMD_ENCODER_.getPtrID(),Le.syncBufferToRenderThread(this._graphicsCmdEncoder)),this._brush=e;var i=this._vertNum,n=fi.earcut(this._points,null,2);if(n.length>0){(!this.fill_ibBuffer||this.fill_ibBuffer.getByteLength()<2*n.length)&&(this.fill_ibBuffer=new ParamData(2*n.length,!0,!0)),this._fill_ibSize=2*n.length;for(var r=this.fill_ibBuffer._int16Data,s=0,a=0;a<n.length;a++)r[s++]=n[a]}var h=o.create(e.fillStyle),_=h.numColor;(!this.fill_vbBuffer||this.fill_vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.fill_vbBuffer=new ParamData(3*i*4,!0)),this._fill_vbSize=3*this._vertNum*4;for(var l=this.fill_vbBuffer._float32Data,u=this.fill_vbBuffer._int32Data,c=0,d=0;d<this._vertNum;d++)l[c++]=this._points[2*d]+this.x,l[c++]=this._points[2*d+1]+this.y,u[c++]=_;var f=this._paramData._int32Data;f[t._PARAM_FILL_VB_POS_]=this.fill_vbBuffer.getPtrID(),f[t._PARAM_FILL_IB_POS_]=this.fill_ibBuffer.getPtrID(),f[t._PARAM_FILL_VB_SIZE_POS_]=this._fill_vbSize,f[t._PARAM_FILL_IB_SIZE_POS_]=this._fill_ibSize,Le.syncBufferToRenderThread(this.fill_vbBuffer),Le.syncBufferToRenderThread(this.fill_ibBuffer),Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"pen",function(){return this._pen},function(e){this._pen=e,this._lines_ibArray.length=0,this._lines_vbArray.length=0,Je.createLine2(this._points,this._lines_ibArray,e.lineWidth,0,this._lines_vbArray,!1);var i=o.create(e.strokeStyle),n=i.numColor,r=this._vertNum;(!this.lines_vbBuffer||this.lines_vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.lines_vbBuffer=new ParamData(3*r*4,!0)),this._lines_vbSize=3*this._vertNum*4;for(var s=this.lines_vbBuffer._float32Data,a=this.lines_vbBuffer._int32Data,h=0,_=0;_<this._vertNum;_++)s[h++]=this._lines_vbArray[2*_]+this.x,s[h++]=this._lines_vbArray[2*_+1]+this.y,a[h++]=n;(!this.lines_ibBuffer||this.lines_ibBuffer.getByteLength()<3*(this._vertNum-2)*2)&&(this.lines_ibBuffer=new ParamData(3*(r-2)*2,!0,!0)),this._lines_ibSize=3*(this._vertNum-2)*2;for(var l=this.lines_ibBuffer._int16Data,u=0;u<3*(this._vertNum-2);u++)l[u]=this._lines_ibArray[u];a=this._paramData._int32Data,a[t._PARAM_LINES_VB_POS_]=this.lines_vbBuffer.getPtrID(),a[t._PARAM_LINES_IB_POS_]=this.lines_ibBuffer.getPtrID(),a[t._PARAM_LINES_VB_SIZE_POS_]=this._lines_vbSize,a[t._PARAM_LINES_IB_SIZE_POS_]=this._lines_ibSize,Le.syncBufferToRenderThread(this.lines_vbBuffer),Le.syncBufferToRenderThread(this.lines_ibBuffer),Le.syncBufferToRenderThread(this._paramData)}),t.create=function(e,i,n,r,s){var a=Ki.getItemByClass("DrawPathCmd",t);a._graphicsCmdEncoder=this._commandEncoder,t._DRAW_LINES_CMD_ENCODER_||(t._DRAW_LINES_CMD_ENCODER_=Le.instance.createCommandEncoder(188,32,!0),t._DRAW_LINES_CMD_ENCODER_.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_LINES_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWVG),t._DRAW_LINES_CMD_ENCODER_.useVDO(se.VDO_MESHVG),t._DRAW_LINES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_LINES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_LINES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_LINES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_LINES_VB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINES_VB_SIZE_POS_,4*t._PARAM_LINES_IB_POS_,4*t._PARAM_LINE_IB_OFFSET_POS_,4*t._PARAM_LINES_IB_SIZE_POS_,4*t._PARAM_FILL_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_LINES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_LINES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._DRAW_LINES_CMD_ENCODER_)),t._DRAW_FILL_CMD_ENCODER_||(t._DRAW_FILL_CMD_ENCODER_=Le.instance.createCommandEncoder(168,32,!0),t._DRAW_FILL_CMD_ENCODER_.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_FILL_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWVG),t._DRAW_FILL_CMD_ENCODER_.useVDO(se.VDO_MESHVG),t._DRAW_FILL_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_FILL_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_FILL_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_FILL_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_FILL_VB_POS_,4*t._PARAM_FILL_VB_OFFSET_POS_,4*t._PARAM_FILL_VB_SIZE_POS_,4*t._PARAM_FILL_IB_POS_,4*t._PARAM_FILL_IB_OFFSET_POS_,4*t._PARAM_FILL_IB_SIZE_POS_,4*t._PARAM_FILL_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_FILL_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_FILL_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._DRAW_FILL_CMD_ENCODER_)),t._DRAW_LINES_FILL_CMD_ENCODER_||(t._DRAW_LINES_FILL_CMD_ENCODER_=Le.instance.createCommandEncoder(244,32,!0),t._DRAW_LINES_FILL_CMD_ENCODER_.blendFuncByGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,se.GLOBALVALUE_BLENDFUNC_DEST),t._DRAW_LINES_FILL_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWVG),t._DRAW_LINES_FILL_CMD_ENCODER_.useVDO(se.VDO_MESHVG),t._DRAW_LINES_FILL_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_LINES_FILL_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_LINES_FILL_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_LINES_FILL_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_FILL_VB_POS_,4*t._PARAM_FILL_VB_OFFSET_POS_,4*t._PARAM_FILL_VB_SIZE_POS_,4*t._PARAM_FILL_IB_POS_,4*t._PARAM_FILL_IB_OFFSET_POS_,4*t._PARAM_FILL_IB_SIZE_POS_,4*t._PARAM_FILL_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_LINES_FILL_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_LINES_FILL_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),t._DRAW_LINES_FILL_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_LINES_VB_POS_,4*t._PARAM_LINE_VB_OFFSET_POS_,4*t._PARAM_LINES_VB_SIZE_POS_,4*t._PARAM_LINES_IB_POS_,4*t._PARAM_LINE_IB_OFFSET_POS_,4*t._PARAM_LINES_IB_SIZE_POS_,4*t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_LINES_FILL_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_LINES_FILL_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._DRAW_LINES_FILL_CMD_ENCODER_)),a._paramData||(a._paramData=new ParamData(60,!0)),a._x=e,a._y=i,a._paths=n,a._brush=r,a._pen=s;for(var h=0,_=n.length;_>h;h++){var l=n[h];switch(0==h&&(a._startOriX=l[1],a._startOriY=l[2]),l[0]){case"moveTo":a._lastOriX=l[1],a._lastOriY=l[2],a._points.push(l[1]),a._points.push(l[2]);break;case"lineTo":a._lastOriX=l[1],a._lastOriY=l[2],a._points.push(l[1]),a._points.push(l[2]);break;case"arcTo":a._arcTo(l);break;case"closePath":a._points.push(a._startOriX),a._points.push(a._startOriY)}}if(a._vertNum=a._points.length,s){Je.createLine2(a._points,a._lines_ibArray,s.lineWidth,0,a._lines_vbArray,!1);var u=o.create(s.strokeStyle),c=u.numColor,d=a._vertNum;(!a.lines_vbBuffer||a.lines_vbBuffer.getByteLength()<3*a._vertNum*4)&&(a.lines_vbBuffer=new ParamData(3*d*4,!0)),a._lines_vbSize=3*a._vertNum*4;var f=a.lines_vbBuffer._float32Data,p=a.lines_vbBuffer._int32Data,m=0;for(h=0;h<a._vertNum;h++)f[m++]=a._lines_vbArray[2*h]+e,f[m++]=a._lines_vbArray[2*h+1]+i,p[m++]=c;(!a.lines_ibBuffer||a.lines_ibBuffer.getByteLength()<3*(a._vertNum-2)*2)&&(a.lines_ibBuffer=new ParamData(3*(d-2)*2,!0,!0)),a._lines_ibSize=3*(a._vertNum-2)*2;for(var g=a.lines_ibBuffer._int16Data,v=0;v<3*(a._vertNum-2);v++)g[v]=a._lines_ibArray[v]}if(r){d=a._vertNum;var y=fi.earcut(a._points,null,2);if(y.length>0){(!a.fill_ibBuffer||a.fill_ibBuffer.getByteLength()<2*y.length)&&(a.fill_ibBuffer=new ParamData(2*y.length,!0,!0)),a._fill_ibSize=2*y.length,g=a.fill_ibBuffer._int16Data;var E=0;for(v=0;v<y.length;v++)g[E++]=y[v]}u=o.create(r.fillStyle),c=u.numColor,(!a.fill_vbBuffer||a.fill_vbBuffer.getByteLength()<3*a._vertNum*4)&&(a.fill_vbBuffer=new ParamData(3*d*4,!0)),a._fill_vbSize=3*a._vertNum*4,f=a.fill_vbBuffer._float32Data;var A=a.fill_vbBuffer._int32Data;for(A=a.fill_vbBuffer._int32Data,m=0,h=0;h<a._vertNum;h++)f[m++]=a._points[2*h]+e,f[m++]=a._points[2*h+1]+i,A[m++]=c}a._paramData._float32Data;return p=a._paramData._int32Data,p[0]=1,s&&(p[t._PARAM_LINES_VB_POS_]=a.lines_vbBuffer.getPtrID(),p[t._PARAM_LINES_IB_POS_]=a.lines_ibBuffer.getPtrID(),p[t._PARAM_LINES_VB_SIZE_POS_]=a._lines_vbSize,p[t._PARAM_LINES_IB_SIZE_POS_]=a._lines_ibSize,p[t._PARAM_LINE_VB_OFFSET_POS_]=0,p[t._PARAM_LINE_IB_OFFSET_POS_]=0,p[t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_]=0,Le.syncBufferToRenderThread(a.lines_vbBuffer),Le.syncBufferToRenderThread(a.lines_ibBuffer)),r&&(p[t._PARAM_FILL_VB_POS_]=a.fill_vbBuffer.getPtrID(),p[t._PARAM_FILL_IB_POS_]=a.fill_ibBuffer.getPtrID(),p[t._PARAM_FILL_VB_SIZE_POS_]=a._fill_vbSize,p[t._PARAM_FILL_IB_SIZE_POS_]=a._fill_ibSize,p[t._PARAM_FILL_VB_OFFSET_POS_]=0,p[t._PARAM_FILL_IB_OFFSET_POS_]=0,p[t._PARAM_FILL_INDEX_ELEMENT_OFFSET_POS_]=0,Le.syncBufferToRenderThread(a.fill_vbBuffer),Le.syncBufferToRenderThread(a.fill_ibBuffer)),Le.syncBufferToRenderThread(a._paramData),r&&s?a._cmdCurrentPos=a._graphicsCmdEncoder.useCommandEncoder(t._DRAW_LINES_FILL_CMD_ENCODER_.getPtrID(),a._paramData.getPtrID(),-1):r&&!s?a._cmdCurrentPos=a._graphicsCmdEncoder.useCommandEncoder(t._DRAW_FILL_CMD_ENCODER_.getPtrID(),a._paramData.getPtrID(),-1):!r&&s&&(a._cmdCurrentPos=a._graphicsCmdEncoder.useCommandEncoder(t._DRAW_LINES_CMD_ENCODER_.getPtrID(),a._paramData.getPtrID(),-1)),Le.syncBufferToRenderThread(a._graphicsCmdEncoder),a},t.ID="DrawPath",t._DRAW_LINES_CMD_ENCODER_=null,t._DRAW_LINES_FILL_CMD_ENCODER_=null,t._DRAW_FILL_CMD_ENCODER_=null,t._PARAM_LINES_VB_POS_=1,t._PARAM_LINES_IB_POS_=2,t._PARAM_LINES_VB_SIZE_POS_=3,t._PARAM_LINES_IB_SIZE_POS_=4,t._PARAM_FILL_VB_POS_=5,t._PARAM_FILL_IB_POS_=6,t._PARAM_FILL_VB_SIZE_POS_=7,t._PARAM_FILL_IB_SIZE_POS_=8,t._PARAM_FILL_VB_OFFSET_POS_=9,t._PARAM_FILL_IB_OFFSET_POS_=10,t._PARAM_LINE_VB_OFFSET_POS_=11,t._PARAM_LINE_IB_OFFSET_POS_=12,t._PARAM_FILL_INDEX_ELEMENT_OFFSET_POS_=13,t._PARAM_LINE_INDEX_ELEMENT_OFFSET_POS_=14,t}(),function(){function t(){}return r(t,"laya.net.AtlasInfoManager"),t.enable=function(e,n){i.loader.load(e,l.create(null,t._onInfoLoaded,[n]),l.create(null,t._progressData),"json")},t._progressData=function(t){console.log("sss:"+t)},t._onInfoLoaded=function(e,i){var n,r,s,a=0,o=0;for(n in i)for(s=i[n],r=s[0],s=s[1],o=s.length,a=0;o>a;a++)t._fileLoadDic[r+s[a]]=n;e&&e.run()},t.getFileLoadPath=function(e){return t._fileLoadDic[e]||e},t._fileLoadDic={},t}()),Pi=function(){function t(e){this._url=null,this._path=null,this._url=t.formatURL(e),this._path=t.getPath(e)}r(t,"laya.net.URL");var e=t.prototype;return s(0,e,"path",function(){return this._path}),s(0,e,"url",function(){return this._url}),t.formatURL=function(e){if(!e)return"null path";if(e.indexOf(":")>0)return e;if(null!=t.customFormat&&(e=t.customFormat(e)),e.indexOf(":")>0)return e;var i=e.charAt(0);if("."===i)return t._formatRelativePath(t.basePath+e);if("~"===i)return t.rootPath+e.substring(1);if("d"===i){if(0===e.indexOf("data:image"))return e}else if("/"===i)return e;return t.basePath+e},t._formatRelativePath=function(t){for(var e=t.split("/"),i=0,n=e.length;n>i;i++)".."==e[i]&&(e.splice(i-1,2),i-=2);return e.join("/")},t.getPath=function(t){var e=t.lastIndexOf("/");return e>0?t.substr(0,e+1):""},t.getFileName=function(t){var e=t.lastIndexOf("/");return e>0?t.substr(e+1):t},t.getAdptedFilePath=function(e){if(!t.exportSceneToJson||!e)return e;var i=0,n=0;n=t._adpteTypeList.length;var r;for(i=0;n>i;i++)r=t._adpteTypeList[i],e=e.replace(r[0],r[1]);return e},t.version={},t.exportSceneToJson=!1,t.basePath="",t.rootPath="",t.customFormat=function(e){var i=t.version[e];return!wi.isConchApp&&i&&(e+="?v="+i),e},n(t,["_adpteTypeList",function(){return this._adpteTypeList=[[".scene3d",".json"],[".scene",".json"],[".taa",".json"],[".prefab",".json"]]}]),t}(),Li=(function(){function t(){this._graphicsCmdEncoder=null}r(t,"laya.layagl.cmdNative.SaveCmdNative");var e=t.prototype;return e.recover=function(){Ki.recover("SaveCmd",this)},s(0,e,"cmdID",function(){return"Save"}),t.create=function(){var e=Ki.getItemByClass("SaveCmd",t),i=e._graphicsCmdEncoder=this._commandEncoder;return i.save(),Le.syncBufferToRenderThread(i),e},t.ID="Save",t}(),function(){function t(){}return r(t,"laya.utils.Stat"),s(1,t,"onclick",null,function(e){t._sp&&t._sp.on("click",t._sp,e),t._canvas&&(t._canvas.source.onclick=e,t._canvas.source.style.pointerEvents="")}),t.show=function(e,i){void 0===e&&(e=0),void 0===i&&(i=0),Me.onMiniGame||Me.onLimixiu||(t._useCanvas=!0),t._show=!0,t._fpsData.length=60,t._view[0]=wi.isConchApp?{title:"FPS",value:"_fpsStr",color:"yellow",units:"int"}:{title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},t._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},t._view[2]={title:"DrawCall",value:"drawCall",color:"white",units:"int"},t._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},wi.isWebGL&&(t._view[4]={title:"Shader",value:"shaderCall",color:"white",units:"int"},wi.is3DMode?(t._view[0].title="FPS(3D)",t._view[5]={title:"TriFaces",value:"trianglesFaces",color:"white",units:"int"},t._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},t._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"}):(t._view[0].title="FPS(WebGL)",t._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"})),t._useCanvas?t.createUIPre(e,i):t.createUI(e,i),t.enable()},t.createUIPre=function(e,n){var r=Me.pixelRatio;t._width=130*r,t._vx=75*r,t._height=r*(12*t._view.length+3*r)+4,t._fontSize=12*r;for(var s=0;s<t._view.length;s++)t._view[s].x=4,t._view[s].y=s*t._fontSize+2*r;wi.isConchApp?(t._sp=new On,t._titleSp=new On,t._bgSp=new On,t._bgSp.graphics.drawRect(e,n,t._width,t._height,"#969696"),t._bgSp.alpha=.8,t._sp.zOrder=1e5,t._titleSp.zOrder=1e5,t._bgSp.zOrder=1e5,t._bgSp.addChild(t._sp),t._bgSp.addChild(t._titleSp),i.stage.addChild(t._bgSp)):(t._canvas||(t._canvas=new yr(!0),t._canvas.size(t._width,t._height),t._ctx=t._canvas.getContext("2d"),t._ctx.textBaseline="top",t._ctx.font=t._fontSize+"px Arial",t._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+e+"px;top:"+n+"px;width:"+t._width/r+"px;height:"+t._height/r+"px;"),Me.container.appendChild(t._canvas.source)),t._first=!0,t.loop(),t._first=!1},t.createUI=function(e,i){var n=t._sp,r=Me.pixelRatio;n||(n=new On,t._leftText=new ur,t._leftText.pos(5,5),t._leftText.color="#ffffff",n.addChild(t._leftText),t._txt=new ur,t._txt.pos(80*r,5),t._txt.color="#ffffff",n.addChild(t._txt),t._sp=n),n.pos(e,i);for(var s="",a=0;a<t._view.length;a++){var o=t._view[a];s+=o.title+"\n"}t._leftText.text=s;var h=138*r,_=r*(12*t._view.length+3*r)+4;t._txt.fontSize=t._fontSize*r,t._leftText.fontSize=t._fontSize*r,n.size(h,_),n.graphics.clear(),n.graphics.alpha(.5),n.graphics.drawRect(0,0,h,_,"#999999"),n.graphics.alpha(2),t.loop()},t.enable=function(){i.systemTimer.frameLoop(1,t,t.loop)},t.hide=function(){t._show=!1,i.systemTimer.clear(t,t.loop),t._canvas&&Me.removeElement(t._canvas.source)},t.clear=function(){t.trianglesFaces=t.drawCall=t.shaderCall=t.spriteCount=t.spriteRenderUseCacheCount=t.treeNodeCollision=t.treeSpriteCollision=t.canvasNormal=t.canvasBitmap=t.canvasReCache=0},t.loop=function(){t._count++;var e=Me.now();if(!(e-t._timer<1e3)){var i=t._count;if(t.FPS=Math.round(1e3*i/(e-t._timer)),t._show){t.trianglesFaces=Math.round(t.trianglesFaces/i),t._useCanvas?(t.drawCall=Math.round(t.drawCall/i),t.shaderCall=Math.round(t.shaderCall/i),t.spriteCount=Math.round(t.spriteCount/i)-1):(t.drawCall=Math.round(t.drawCall/i)-1,t.shaderCall=Math.round(t.shaderCall/i),t.spriteCount=Math.round(t.spriteCount/i)-4),t.spriteRenderUseCacheCount=Math.round(t.spriteRenderUseCacheCount/i),t.canvasNormal=Math.round(t.canvasNormal/i),t.canvasBitmap=Math.round(t.canvasBitmap/i),t.canvasReCache=Math.ceil(t.canvasReCache/i),t.treeNodeCollision=Math.round(t.treeNodeCollision/i),t.treeSpriteCollision=Math.round(t.treeSpriteCollision/i);var n=t.FPS>0?Math.floor(1e3/t.FPS).toString():" ";t._fpsStr=t.FPS+(t.renderSlow?" slow":"")+" "+n,t._spriteStr=t.spriteCount+(t.spriteRenderUseCacheCount?"/"+t.spriteRenderUseCacheCount:""),t._canvasStr=t.canvasReCache+"/"+t.canvasNormal+"/"+t.canvasBitmap,t.currentMemorySize=Wi.systemResourceManager.memorySize,t._useCanvas?t.renderInfoPre():t.renderInfo(),t.clear()}t._count=0,t._timer=e}},t.renderInfoPre=function(){var e,i,n=0;if(wi.isConchApp)for(t._sp.graphics.clear(),n=0;n<t._view.length;n++)e=t._view[n],t._first&&t._titleSp.graphics.fillText(e.title,e.x,e.y,t._fontSize+"px Arial","#ffffff","left"),i=t[e.value],"M"==e.units&&(i=Math.floor(i/1048576*100)/100+" M"),t._sp.graphics.fillText(i+"",e.x+t._vx,e.y,t._fontSize+"px Arial",e.color,"left");else if(t._canvas){var r=t._ctx;for(r.clearRect(t._first?0:t._vx,0,t._width,t._height),n=0;n<t._view.length;n++)e=t._view[n],t._first&&(r.fillStyle="white",r.fillText(e.title,e.x,e.y)),r.fillStyle=e.color,i=t[e.value],"M"==e.units&&(i=Math.floor(i/1048576*100)/100+" M"),r.fillText(i+"",e.x+t._vx,e.y)}},t.renderInfo=function(){for(var e="",i=0;i<t._view.length;i++){var n=t._view[i],r=t[n.value];"M"==n.units&&(r=Math.floor(r/1048576*100)/100+" M"),"K"==n.units&&(r=Math.floor(r/1024*100)/100+" K"),e+=r+"\n"}t._txt.text=e},t.FPS=0,t.loopCount=0,t.shaderCall=0,t.drawCall=0,t.trianglesFaces=0,t.spriteCount=0,t.spriteRenderUseCacheCount=0,t.treeNodeCollision=0,t.treeSpriteCollision=0,t.canvasNormal=0,t.canvasBitmap=0,t.canvasReCache=0,t.renderSlow=!1,t.currentMemorySize=0,t._fpsStr=null,t._canvasStr=null,t._spriteStr=null,t._fpsData=[],t._timer=0,t._count=0,t._view=[],t._fontSize=12,t._txt=null,t._leftText=null,t._sp=null,t._titleSp=null,t._bgSp=null,t._show=!1,t._useCanvas=!1,t._canvas=null,t._ctx=null,t._first=!1,t._vx=0/0,t._width=0,t._height=100,t}()),Ii=function(){function e(){}return r(e,"laya.webgl.WebGL"),e._uint8ArraySlice=function(){for(var t=this,e=t.length,i=new Uint8Array(t.length),n=0;e>n;n++)i[n]=t[n];return i},e._float32ArraySlice=function(){for(var t=this,e=t.length,i=new Float32Array(t.length),n=0;e>n;n++)i[n]=t[n];return i},e._uint16ArraySlice=function(){var t,e=arguments,i=this,n=0,r=0;if(0===e.length)for(n=i.length,t=new Uint16Array(n),r=0;n>r;r++)t[r]=i[r];else if(2===e.length){var s=e[0],a=e[1];if(a>s)for(n=a-s,t=new Uint16Array(n),r=s;a>r;r++)t[r-s]=i[r];else t=new Uint16Array(0)}return t},e._nativeRender_enable=function(){e.isNativeRender_enable||(e.isNativeRender_enable=!0,Er.create=function(t,e){return new Xr(t,e,1,!1,!1)
},me.__init_native(),ci.width=Me.window.innerWidth,ci.height=Me.window.innerHeight,Yi.measureText=function(e,i){return t.conchTextCanvas.font=i,t.conchTextCanvas.measureText(e)},Yi.enableNative=function(){ze.uploadShaderUniforms=ze.uploadShaderUniformsForNative;var e=pr;e.prototype.repaint=e.prototype.repaintForNative,e.prototype.render=e.prototype.renderToNative;var i=Ye;if(i.prototype.bind=Ye.prototype.bindForNative,i.prototype.unBind=Ye.prototype.unBindForNative,wi.isConchApp){Xe=t.GLCommandEncoder,Le=t.LayaGLContext;var n=t.CanvasRenderingContext.prototype,r=vi.prototype;vi=t.CanvasRenderingContext,n.drawImage=r.drawImage,n.drawTexture=r.drawTexture,n.fillText=r.fillText,n.save=r.save,n.restore=r.restore,n.translate=r.translate,n.scale=r.scale,n.rotate=r.rotate,n.transform=r.transform,n.beginRT=r.beginRT,n.endRT=r.endRT,n.drawCanvas=r.drawCanvas,n.drawTarget=r.drawTarget,n._$get_asBitmap=r._$get_asBitmap,n._$set_asBitmap=r._$set_asBitmap,n.toBase64=r.toBase64,n.getImageData=r.getImageData,s(0,n,"asBitmap",n._$get_asBitmap,n._$set_asBitmap),k.rewriteProperties()}ir.init(),se.__init__()},Yi.clear=function(t){var e=o.create(t).arrColor,i=Le.instance;e&&i.clearColor(e[0],e[1],e[2],e[3]),i.clear(17664)},Yi.drawToCanvas=function(t,e,i,n,r,s){var a=new yr(!0);a.size(i,n);var o=a.getContext("2d");o.asBitmap=!0;var h=Le.instance.createCommandEncoder(128,64,!1);h.beginEncoding(),h.clearEncoding();var _=Le.instance,l=_.getCurrentContext();_.setCurrentContext(o),o.beginRT(),_.save();var u=ir._tempFloatArrayMatrix;return u[0]=1,u[1]=0,u[2]=0,u[3]=1,u[4]=r,u[5]=s,_.setGlobalValue(se.GLOBALVALUE_MATRIX32,8,u),t.writeBlockToNative(),_.restore(),_.setCurrentContext(l),_.commitContextToGPU(o),o.endRT(),h.endEncoding(),_.useCommandEncoder(h.getPtrID(),-1,0),a},yr.prototype.getTexture=function(){return this._texture||(this._texture=this.context._targets,this._texture.uv=Gr.flipyuv,this._texture.bitmap=this._texture),this._texture})},e._webglRender_enable=function(){wi.isWebGL||(wi.isWebGL=!0,Yi.initRender=function(t,i,n){function r(t){var e,i=["webgl2","webgl","experimental-webgl","webkit-3d","moz-webgl"];Di.useWebGL2||i.shift();for(var n=0;n<i.length;n++){try{e=t.getContext(i[n],{stencil:Di.isStencil,alpha:Di.isAlpha,antialias:Di.isAntialias,premultipliedAlpha:Di.premultipliedAlpha,preserveDrawingBuffer:Di.preserveDrawingBuffer})}catch(r){}if(e)return"webgl2"===i[n]&&(laya.webgl.WebGL._isWebGL2=!0),new Le,e}return null}var s=Le.instance=laya.webgl.WebGL.mainContext=r(wi._mainCanvas.source);if(!s)return!1;t.size(i,n),me.__init__(s),_n.__init__(),j.__init__();var a=new _n;wi._context=a,t._setContext(a),laya.webgl.WebGL.shaderHighPrecision=!1;try{var o=s.getShaderPrecisionFormat(35632,36338);e.shaderHighPrecision=o.precision?!0:!1}catch(h){}return Le.instance=s,Re.__init__(),Dn.__init__(),di.__init__(),Mi.__init__(),gr.__int__(s),ue._init_(s),!0},Er.create=function(t,e){return new Xr(t,e,1,!1,!1)},Yi.createRenderSprite=function(t,e){return new Cn(t,e)},Yi.changeWebGLSize=function(t,e){laya.webgl.WebGL.onStageResize(t,e)},Yi.clear=function(t){_n.set2DRenderConfig(),ci.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var e=wi.context,n=0==e._submits._length||Di.preserveDrawingBuffer?o.create(t).arrColor:i.stage._wgColor;n&&e.clearBG(n[0],n[1],n[2],n[3]),ci.clear()},Yi.drawToCanvas=function(t,e,i,n,r,s){r-=t.x,s-=t.y,r|=0,s|=0,i|=0,n|=0;var a=new _n;a.size(i,n),a.asBitmap=!0,a._targets.start(),U.renders[e]._fun(t,a,r,s),a.flush(),a._targets.end(),a._targets.restore();var o=a._targets.getData(0,0,i,n);a.destroy();for(var h=new ImageData(i,n),_=4*i,l=(new Uint8Array(_),h.data),u=n-1,c=u*_,d=0;u>=0;u--)l.set(o.subarray(d,d+_),c),c-=_,d+=_;var f=new yr(!0);f.size(i,n);var p=f.getContext("2d");return p.putImageData(h,0,0),f},Yi.getTexturePixels=function(t,e,i,n,r){var s=0,a=0,o=0,h=t.bitmap,_=h.width,l=h.height;if(e+n>_&&(n-=e+n-_),i+r>l&&(r-=i+r-l),0>=n||0>=r)return null;var u=4*n,c=null;try{c=h.getPixels()}catch(d){}if(c){if(0==e&&0==i&&n==_&&r==l)return c;var f=new Uint8Array(n*r*4);for(u=4*_,s=4*e,a=(i+r-1)*u+4*e,o=r-1;o>=0;o--)f.set(S.slice(a,a+4*n),s),s+=u,a-=u;return f}var p=new _n;p.size(n,r),p.asBitmap=!0;var m=null;if(0!=e||0!=i||n!=_||r!=l){m=t.uv.concat();var g=m[0],v=m[1],y=m[2]-g,E=m[7]-v,A=y/_,C=E/l;m=[g+e*A,v+i*C,g+(e+n)*A,v+i*C,g+(e+n)*A,v+(i+r)*C,g+e*A,v+(i+r)*C]}p._drawTextureM(t,0,0,n,r,null,1,m),p._targets.start(),p.flush(),p._targets.end(),p._targets.restore();var S=p._targets.getData(0,0,n,r);for(p.destroy(),f=new Uint8Array(n*r*4),s=0,a=(r-1)*u,o=r-1;o>=0;o--)f.set(S.slice(a,a+u),s),s+=u,a-=u;return f},$._filter=function(t,e,i,n){var r=e,s=this._next;if(s){var a=t.filters,o=a.length;if(1==o&&32==a[0].type)return e.save(),e.setColorFilter(a[0]),s._fun.call(s,t,e,i,n),e.restore(),void 0;var h,_=di.create(1,0),l=Zi.TEMP,u=r._curMat,c=ui.create();u.copyTo(c);var d=0,f=0,p=!1,m=t._cacheStyle.filterCache||null;if(m&&0==t.getRepaint()){if(p=t._cacheStyle.hasGlowFilter||!1,p&&(d=50,f=25),h=t.getBounds(),h.width<=0||h.height<=0)return;h.width+=d,h.height+=d,l.x=h.x*c.a+h.y*c.c,l.y=h.y*c.d+h.x*c.b,h.x=l.x,h.y=l.y,l.x=h.width*c.a+h.height*c.c,l.y=h.height*c.d+h.width*c.b,h.width=l.x,h.height=l.y}else{p=t._isHaveGlowFilter(),p&&(d=50,f=25),h=new Ge,h.copyFrom(t.getSelfBounds()),h.x+=t.x,h.y+=t.y,h.x-=t.pivotX+4,h.y-=t.pivotY+4;var g=h.x,v=h.y;if(h.width+=d+8,h.height+=d+8,l.x=h.x*c.a+h.y*c.c,l.y=h.y*c.d+h.x*c.b,h.x=l.x,h.y=l.y,l.x=h.width*c.a+h.height*c.c,l.y=h.height*c.d+h.width*c.b,h.width=l.x,h.height=l.y,h.width<=0||h.height<=0)return;m&&ri.releaseRT(m);var y=ri.getRT(h.width,h.height),E=ri.getRT(h.width,h.height);t._getCacheStyle().filterCache=m,r.pushRT(),r.useRT(y);var A=t.x-g+f,C=t.y-v+f;s._fun.call(s,t,e,A,C),r.useRT(E);for(var S=0;o>S;S++){0!=S&&(r.useRT(y),r.drawTarget(E,0,0,h.width,h.height,ui.TEMP.identity(),_,null,ue.TOINT.overlay),r.useRT(E));var D=a[S];switch(D.type){case 16:D._glRender&&D._glRender.render(y,e,h.width,h.height,D);break;case 8:D._glRender&&D._glRender.render(y,e,h.width,h.height,D);break;case 32:r.setColorFilter(D),r.drawTarget(y,0,0,h.width,h.height,ui.EMPTY.identity(),di.create(1,0)),r.setColorFilter(null)}}r.popRT()}i=i-f-t.x,n=n-f-t.y,l.setTo(i,n),c.transformPoint(l),i=l.x+h.x,n=l.y+h.y,r._drawRenderTexture(E,i,n,h.width,h.height,ui.TEMP.identity(),1,Gr.defuv),c.destroy()}},yr.prototype.getTexture=function(){if(!this._texture){var t=new Xr;t.loadImageSource(this.source),this._texture=new on(t)}return this._texture},Float32Array.prototype.slice||(Float32Array.prototype.slice=e._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=e._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=e._uint8ArraySlice))},e.enable=function(){return Me.__init__(),Me._supportWebGL?(wi.isConchApp?e._nativeRender_enable():e._webglRender_enable(),!0):!1},e.onStageResize=function(t,i){null!=e.mainContext&&(e.mainContext.viewport(0,0,t,i),ci.width=t,ci.height=i)},e.mainContext=null,e.shaderHighPrecision=!1,e._isWebGL2=!1,e.isNativeRender_enable=!1,e}(),Mi=function(){function t(){this.ALPHA=1,this.shaderType=0,this.defines=new Dn,this.fillStyle=Oi.DEFAULT,this.strokeStyle=Oi.DEFAULT}r(t,"laya.webgl.shader.d2.Shader2D");var e=t.prototype;return e.destroy=function(){this.defines=null,this.filters=null},t.__init__=function(){var t,e;t="/*\n	texture和fillrect使用的。\n*/\nattribute vec4 posuv;\nattribute vec4 attribColor;\nattribute vec4 attribFlags;\n//attribute vec4 clipDir;\n//attribute vec2 clipRect;\nuniform vec4 clipMatDir;\nuniform vec2 clipMatPos;		// 这个是全局的，不用再应用矩阵了。\nvarying vec2 cliped;\nuniform vec2 size;\n\n#ifdef WORLDMAT\n	uniform mat4 mmat;\n#endif\n\nvarying vec4 v_texcoordAlpha;\nvarying vec4 v_color;\nvarying float v_useTex;\n\nvoid main() {\n\n	vec4 pos = vec4(posuv.xy,0.,1.);\n#ifdef WORLDMAT\n	pos=mmat*pos;\n#endif\n	gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,0.,1.0);\n  \n	v_texcoordAlpha.xy = posuv.zw;\n	//v_texcoordAlpha.z = attribColor.a/255.0;\n	v_color = attribColor/255.0;\n	v_color.xyz*=v_color.w;//反正后面也要预乘\n	\n	v_useTex = attribFlags.r/255.0;\n	float clipw = length(clipMatDir.xy);\n	float cliph = length(clipMatDir.zw);\n	vec2 clippos = pos.xy - clipMatPos.xy;	//pos已经应用矩阵了，为了减的有意义，clip的位置也要缩放\n	if(clipw>20000. && cliph>20000.)\n		cliped = vec2(0.5,0.5);\n	else {\n		//转成0到1之间。/clipw/clipw 表示clippos与normalize之后的clip朝向点积之后，再除以clipw\n		cliped=vec2( dot(clippos,clipMatDir.xy)/clipw/clipw, dot(clippos,clipMatDir.zw)/cliph/cliph);\n	}\n\n}",e="/*\n	texture和fillrect使用的。\n*/\n\nprecision mediump float;\n//precision highp float;\nvarying vec4 v_texcoordAlpha;\nvarying vec4 v_color;\nvarying float v_useTex;\nuniform sampler2D texture;\nvarying vec2 cliped;\n\n#ifdef BLUR_FILTER\nuniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoordAlpha.xy-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4Color += texture2D(texture, ctexcoord)*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}\n#endif\n\n#ifdef COLOR_FILTER\nuniform vec4 colorAlpha;\nuniform mat4 colorMat;\n#endif\n\n#ifdef GLOW_FILTER\nuniform vec4 u_color;\nuniform vec4 u_blurInfo1;\nuniform vec4 u_blurInfo2;\n#endif\n\n#ifdef COLOR_ADD\nuniform vec4 colorAdd;\n#endif\n\n//FILLTEXTURE\nuniform vec4 u_TexRange;//startu,startv,urange, vrange\n\nvoid main() {\n	if(cliped.x<0.) discard;\n	if(cliped.x>1.) discard;\n	if(cliped.y<0.) discard;\n	if(cliped.y>1.) discard;\n	\n#ifdef FILLTEXTURE	\n   vec4 color= texture2D(texture, fract(v_texcoordAlpha.xy)*u_TexRange.zw + u_TexRange.xy);\n#else\n   vec4 color= texture2D(texture, v_texcoordAlpha.xy);\n#endif\n\n   if(v_useTex<=0.)color = vec4(1.,1.,1.,1.);\n   color.a*=v_color.w;\n   //color.rgb*=v_color.w;\n   color.rgb*=v_color.rgb;\n   gl_FragColor=color;\n   \n   #ifdef COLOR_ADD\n	gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\n	gl_FragColor.xyz *= colorAdd.a;\n   #endif\n   \n   #ifdef BLUR_FILTER\n	gl_FragColor =   blur();\n	gl_FragColor.w*=v_color.w;   \n   #endif\n   \n   #ifdef COLOR_FILTER\n	mat4 alphaMat =colorMat;\n\n	alphaMat[0][3] *= gl_FragColor.a;\n	alphaMat[1][3] *= gl_FragColor.a;\n	alphaMat[2][3] *= gl_FragColor.a;\n\n	gl_FragColor = gl_FragColor * alphaMat;\n	gl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n   #endif\n   \n   #ifdef GLOW_FILTER\n	const float c_IterationTime = 10.0;\n	float floatIterationTotalTime = c_IterationTime * c_IterationTime;\n	vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n	vec2 vec2FilterDir = vec2(-(u_blurInfo1.z)/u_blurInfo2.x,-(u_blurInfo1.w)/u_blurInfo2.y);\n	vec2 vec2FilterOff = vec2(u_blurInfo1.x/u_blurInfo2.x/c_IterationTime * 2.0,u_blurInfo1.y/u_blurInfo2.y/c_IterationTime * 2.0);\n	float maxNum = u_blurInfo1.x * u_blurInfo1.y;\n	vec2 vec2Off = vec2(0.0,0.0);\n	float floatOff = c_IterationTime/2.0;\n	for(float i = 0.0;i<=c_IterationTime; ++i){\n		for(float j = 0.0;j<=c_IterationTime; ++j){\n			vec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n			vec4Color += texture2D(texture, v_texcoordAlpha.xy + vec2FilterDir + vec2Off)/floatIterationTotalTime;\n		}\n	}\n	gl_FragColor = vec4(u_color.rgb,vec4Color.a * u_blurInfo2.z);\n	gl_FragColor.rgb *= gl_FragColor.a;   \n   #endif\n   \n}",vr.preCompile2D(0,1,t,e,null),t="attribute vec4 position;\nattribute vec4 attribColor;\n//attribute vec4 clipDir;\n//attribute vec2 clipRect;\nuniform vec4 clipMatDir;\nuniform vec2 clipMatPos;\n#ifdef WORLDMAT\n	uniform mat4 mmat;\n#endif\nuniform mat4 u_mmat2;\n//uniform vec2 u_pos;\nuniform vec2 size;\nvarying vec4 color;\n//vec4 dirxy=vec4(0.9,0.1, -0.1,0.9);\n//vec4 clip=vec4(100.,30.,300.,600.);\nvarying vec2 cliped;\nvoid main(){\n	\n#ifdef WORLDMAT\n	vec4 pos=mmat*vec4(position.xy,0.,1.);\n	gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n#else\n	gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n#endif	\n	float clipw = length(clipMatDir.xy);\n	float cliph = length(clipMatDir.zw);\n	vec2 clippos = position.xy - clipMatPos.xy;	//pos已经应用矩阵了，为了减的有意义，clip的位置也要缩放\n	if(clipw>20000. && cliph>20000.)\n		cliped = vec2(0.5,0.5);\n	else {\n		//clipdir是带缩放的方向，由于上面clippos是在缩放后的空间计算的，所以需要把方向先normalize一下\n		cliped=vec2( dot(clippos,clipMatDir.xy)/clipw/clipw, dot(clippos,clipMatDir.zw)/cliph/cliph);\n	}\n  //pos2d.x = dot(clippos,dirx);\n  color=attribColor/255.;\n}",e="precision mediump float;\n//precision mediump float;\nvarying vec4 color;\n//uniform float alpha;\nvarying vec2 cliped;\nvoid main(){\n	//vec4 a=vec4(color.r, color.g, color.b, 1);\n	//a.a*=alpha;\n    gl_FragColor= color;// vec4(color.r, color.g, color.b, alpha);\n	gl_FragColor.rgb*=color.a;\n	if(cliped.x<0.) discard;\n	if(cliped.x>1.) discard;\n	if(cliped.y<0.) discard;\n	if(cliped.y>1.) discard;\n}",vr.preCompile2D(0,4,t,e,null),t="/*\n	texture和fillrect使用的。\n*/\nattribute vec4 posuv;\nattribute vec4 attribColor;\nattribute vec4 attribFlags;\n//attribute vec4 clipDir;\n//attribute vec2 clipRect;\nuniform vec4 clipMatDir;\nuniform vec2 clipMatPos;		// 这个是全局的，不用再应用矩阵了。\nvarying vec2 cliped;\nuniform vec2 size;\n\n#ifdef WORLDMAT\n	uniform mat4 mmat;\n#endif\n\nvarying vec4 v_texcoordAlpha;\nvarying vec4 v_color;\nvarying float v_useTex;\n\nvoid main() {\n\n	vec4 pos = vec4(posuv.xy,0.,1.);\n#ifdef WORLDMAT\n	pos=mmat*pos;\n#endif\n	gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,0.,1.0);\n  \n	v_texcoordAlpha.xy = posuv.zw;\n	//v_texcoordAlpha.z = attribColor.a/255.0;\n	v_color = attribColor/255.0;\n	v_color.xyz*=v_color.w;//反正后面也要预乘\n	\n	v_useTex = attribFlags.r/255.0;\n	float clipw = length(clipMatDir.xy);\n	float cliph = length(clipMatDir.zw);\n	vec2 clippos = pos.xy - clipMatPos.xy;	//pos已经应用矩阵了，为了减的有意义，clip的位置也要缩放\n	if(clipw>20000. && cliph>20000.)\n		cliped = vec2(0.5,0.5);\n	else {\n		//转成0到1之间。/clipw/clipw 表示clippos与normalize之后的clip朝向点积之后，再除以clipw\n		cliped=vec2( dot(clippos,clipMatDir.xy)/clipw/clipw, dot(clippos,clipMatDir.zw)/cliph/cliph);\n	}\n\n}",e='#ifdef FSHIGHPRECISION\n	precision highp float;\n#else\n	precision mediump float;\n#endif\n\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n\n#import?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n\n#import?COLOR_FILTER "parts/ColorFilter.glsl" with ColorFilter_ps_uniform;\n\n#import?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n\n#import?COLOR_ADD "parts/ColorAdd.glsl" with ColorAdd_ps_uniform;\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n   color.a*=alpha;\n   gl_FragColor=color;\n   \n   #import?COLOR_ADD "parts/ColorAdd.glsl" with ColorAdd_ps_logic;\n   \n   #import?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   \n   #import?COLOR_FILTER "parts/ColorFilter.glsl" with ColorFilter_ps_logic;\n   \n   #import?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',vr.preCompile2D(0,256,t,e,null),t="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",e="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\nuniform float alpha;\nvoid main() {\n	vec4 t_color = texture2D(texture, v_texcoord);\n	gl_FragColor = t_color.rgba * v_color;\n	gl_FragColor *= alpha;\n}",vr.preCompile2D(0,512,t,e,null)},t}(),wi=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._fromX=0/0,this._fromY=0/0,this._toX=0/0,this._toY=0/0,this._lineColor=null,this._lineWidth=0/0,this._vid=0}r(t,"laya.layagl.cmdNative.DrawLineCmdNative");var e=t.prototype;return e.recover=function(){Ki.recover("DrawLineCmd",this)},s(0,e,"lineColor",function(){return this._lineColor},function(e){this._lineColor=e;var i=o.create(this.lineColor),n=i.numColor,r=this._paramData._int32Data,s=t._PARAM_VB_POS_;s++,s++,r[s++]=n,s++,s++,r[s++]=n,s++,s++,r[s++]=n,s++,s++,r[s++]=n,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"cmdID",function(){return"DrawLine"}),s(0,e,"toY",function(){return this._toY},function(e){this._toY=e;var i=[this._fromX,this._fromY,this._toX,this._toY],n=[],r=[];Je.createLine2(i,r,this._lineWidth,0,n,!1);var s=this._paramData._float32Data,a=(this._paramData._int32Data,this._paramData._int16Data),o=t._PARAM_VB_POS_;s[o++]=n[0],s[o++]=n[1],o++,s[o++]=n[2],s[o++]=n[3],o++,s[o++]=n[4],s[o++]=n[5],o++,s[o++]=n[6],s[o++]=n[7],o++;var h=2*t._PARAM_IB_POS_;a[h++]=r[0],a[h++]=r[1],a[h++]=r[2],a[h++]=r[3],a[h++]=r[4],a[h++]=r[5],Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"fromX",function(){return this._fromX},function(e){this._fromX=e;var i=[this._fromX,this._fromY,this._toX,this._toY],n=[],r=[];Je.createLine2(i,r,this._lineWidth,0,n,!1);var s=this._paramData._float32Data,a=(this._paramData._int32Data,this._paramData._int16Data),o=t._PARAM_VB_POS_;s[o++]=n[0],s[o++]=n[1],o++,s[o++]=n[2],s[o++]=n[3],o++,s[o++]=n[4],s[o++]=n[5],o++,s[o++]=n[6],s[o++]=n[7],o++;var h=2*t._PARAM_IB_POS_;a[h++]=r[0],a[h++]=r[1],a[h++]=r[2],a[h++]=r[3],a[h++]=r[4],a[h++]=r[5],Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"vid",function(){return this._vid},function(t){this._vid=t}),s(0,e,"toX",function(){return this._toX},function(e){this._toX=e;var i=[this._fromX,this._fromY,this._toX,this._toY],n=[],r=[];Je.createLine2(i,r,this._lineWidth,0,n,!1);var s=this._paramData._float32Data,a=(this._paramData._int32Data,this._paramData._int16Data),o=t._PARAM_VB_POS_;s[o++]=n[0],s[o++]=n[1],o++,s[o++]=n[2],s[o++]=n[3],o++,s[o++]=n[4],s[o++]=n[5],o++,s[o++]=n[6],s[o++]=n[7],o++;var h=2*t._PARAM_IB_POS_;a[h++]=r[0],a[h++]=r[1],a[h++]=r[2],a[h++]=r[3],a[h++]=r[4],a[h++]=r[5],Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"fromY",function(){return this._fromY},function(e){this._fromY=e;var i=[this._fromX,this._fromY,this._toX,this._toY],n=[],r=[];Je.createLine2(i,r,this._lineWidth,0,n,!1);var s=this._paramData._float32Data,a=(this._paramData._int32Data,this._paramData._int16Data),o=t._PARAM_VB_POS_;s[o++]=n[0],s[o++]=n[1],o++,s[o++]=n[2],s[o++]=n[3],o++,s[o++]=n[4],s[o++]=n[5],o++,s[o++]=n[6],s[o++]=n[7],o++;var h=2*t._PARAM_IB_POS_;a[h++]=r[0],a[h++]=r[1],a[h++]=r[2],a[h++]=r[3],a[h++]=r[4],a[h++]=r[5],Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"lineWidth",function(){return this._lineWidth},function(e){this._lineWidth=e;var i=[this._fromX,this._fromY,this._toX,this._toY],n=[],r=[];Je.createLine2(i,r,this.lineWidth,0,n,!1);var s=this._paramData._float32Data,a=(this._paramData._int32Data,this._paramData._int16Data),o=t._PARAM_VB_POS_;s[o++]=n[0],s[o++]=n[1],o++,s[o++]=n[2],s[o++]=n[3],o++,s[o++]=n[4],s[o++]=n[5],o++,s[o++]=n[6],s[o++]=n[7],o++;var h=2*t._PARAM_IB_POS_;a[h++]=r[0],a[h++]=r[1],a[h++]=r[2],a[h++]=r[3],a[h++]=r[4],a[h++]=r[5],Le.syncBufferToRenderThread(this._paramData)}),t.create=function(e,i,n,r,s,a,h){var _=Ki.getItemByClass("DrawLineCmd",t);_._graphicsCmdEncoder=this._commandEncoder,t._DRAW_LINE_CMD_ENCODER_||(t._DRAW_LINE_CMD_ENCODER_=Le.instance.createCommandEncoder(152,32,!0),t._DRAW_LINE_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWVG),t._DRAW_LINE_CMD_ENCODER_.useVDO(se.VDO_MESHVG),t._DRAW_LINE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_LINE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_LINE_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_LINE_CMD_ENCODER_.setMeshByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,8,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_LINE_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_LINE_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._DRAW_LINE_CMD_ENCODER_)),_._paramData||(_._paramData=new ParamData(96,!0)),_._fromX=e,_._fromY=i,_._toX=n,_._toY=r,_._lineColor=s,_._lineWidth=a,_._vid=h;var l=o.create(s),u=l.numColor,c=[e,i,n,r],d=[],f=[];Je.createLine2(c,f,a,0,d,!1);var p=_._paramData._float32Data,m=_._paramData._int32Data,g=_._paramData._int16Data;m[0]=1,m[1]=48,m[2]=12,m[t._PARAM_VB_OFFSET_POS_]=0,m[t._PARAM_IB_OFFSET_POS_]=0,m[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0;var v=t._PARAM_VB_POS_;p[v++]=d[0],p[v++]=d[1],m[v++]=u,p[v++]=d[2],p[v++]=d[3],m[v++]=u,p[v++]=d[4],p[v++]=d[5],m[v++]=u,p[v++]=d[6],p[v++]=d[7],m[v++]=u;var y=2*t._PARAM_IB_POS_;return g[y++]=f[0],g[y++]=f[1],g[y++]=f[2],g[y++]=f[3],g[y++]=f[4],g[y++]=f[5],p[t._PARAM_LINECOLOR_POS_]=s?s:4278190335,p[t._PARAM_LINEWIDTH_POS_]=a,p[t._PARAM_VID_POS_]=h,Le.syncBufferToRenderThread(_._paramData),_._graphicsCmdEncoder.useCommandEncoder(t._DRAW_LINE_CMD_ENCODER_.getPtrID(),_._paramData.getPtrID(),-1),Le.syncBufferToRenderThread(_._graphicsCmdEncoder),_},t.ID="DrawLine",t._DRAW_LINE_CMD_ENCODER_=null,t._PARAM_VB_POS_=3,t._PARAM_IB_POS_=15,t._PARAM_LINECOLOR_POS_=18,t._PARAM_LINEWIDTH_POS_=19,t._PARAM_VID_POS_=20,t._PARAM_VB_OFFSET_POS_=21,t._PARAM_IB_OFFSET_POS_=22,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=23,t}(),function(){function e(t,n){function r(){i.stage._loop(),Me.window.requestAnimationFrame(r)}this._timeId=0,e._mainCanvas.source.id="layaCanvas",e._mainCanvas.source.width=t,e._mainCanvas.source.height=n,laya.renders.Render.isConchApp?Me.document.body.appendChild(e._mainCanvas.source):Me.container.appendChild(e._mainCanvas.source),Yi.initRender(e._mainCanvas,t,n),Me.window.requestAnimationFrame(r),i.stage.on("visibilitychange",this,this._onVisibilitychange)}r(e,"laya.renders.Render");var a=e.prototype;return a._onVisibilitychange=function(){i.stage.isVisibility?0!=this._timeId&&Me.window.clearInterval(this._timeId):this._timeId=Me.window.setInterval(this._enterFrame,1e3)},a._enterFrame=function(){i.stage._loop()},s(1,e,"context",function(){return e._context}),s(1,e,"canvas",function(){return e._mainCanvas.source}),e._context=null,e._mainCanvas=null,e.isWebGL=!1,e.is3DMode=!1,n(e,["isConchApp",function(){return this.isConchApp=null!=t.conch}]),e}()),Oi=function(){function t(t){this._color=null,this.setValue(t)}r(t,"laya.webgl.canvas.DrawStyle");var e=t.prototype;return e.setValue=function(t){this._color=t?t instanceof laya.utils.ColorUtils?t:o.create(t):o.create("#000000")},e.reset=function(){this._color=o.create("#000000")},e.toInt=function(){return this._color.numColor},e.equal=function(t){return"string"==typeof t?this._color.strColor===t:t instanceof laya.utils.ColorUtils?this._color.numColor===t.numColor:!1},e.toColorStr=function(){return this._color.strColor},t.create=function(e){if(e){var i=e instanceof laya.utils.ColorUtils?e:o.create(e);return i._drawStyle||(i._drawStyle=new t(e))}return t.DEFAULT},n(t,["DEFAULT",function(){return this.DEFAULT=new t("#000000")}]),t}(),Bi=function(){function t(t,e,i,n,r,s,a){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===s&&(s=0),this._nums=a=a?a:new Float32Array(6),a[0]=t,a[1]=e,a[2]=i,a[3]=n,a[4]=r,a[5]=s,this._checkTransform()}r(t,"laya.layagl.MatrixConch");var e=t.prototype;return e.identity=function(){var t=this._nums;return t[0]=t[3]=1,t[1]=t[4]=t[5]=t[2]=0,this._bTransform=!1,this},e._checkTransform=function(){var t=this._nums;return this._bTransform=1!==t[0]||0!==t[1]||0!==t[2]||1!==t[3]},e.setTranslate=function(t,e){return this._nums[4]=t,this._nums[5]=e,this},e.translate=function(t,e){return this._nums[4]+=t,this._nums[5]+=e,this},e.scale=function(t,e){var i=this._nums;return i[0]*=t,i[3]*=e,i[2]*=t,i[1]*=e,i[4]*=t,i[5]*=e,this._bTransform=!0,this},e.rotate=function(t){var e=this._nums,i=Math.cos(t),n=Math.sin(t),r=e[0],s=e[2],a=e[4];return e[0]=r*i-e[1]*n,e[1]=r*n+e[1]*i,e[2]=s*i-e[3]*n,e[3]=s*n+e[3]*i,e[4]=a*i-e[5]*n,e[5]=a*n+e[5]*i,this._bTransform=!0,this},e.skew=function(t,e){var i=this._nums,n=Math.tan(t),r=Math.tan(e),s=i[0],a=i[1];return i[0]+=r*i[2],i[1]+=r*i[3],i[2]+=n*s,i[3]+=n*a,this},e.invertTransformPoint=function(t){var e=this._nums,i=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=i*s-n*r,h=s/o,_=-n/o,l=-r/o,u=i/o,c=(r*e[5]-s*a)/o,d=-(i*e[5]-n*a)/o;return t.setTo(h*t.x+l*t.y+c,_*t.x+u*t.y+d)},e.transformPoint=function(t){var e=this._nums;return t.setTo(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},e.transformPointN=function(t){var e=this._nums;return t.setTo(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y)},e.getScaleX=function(){var t=this._nums;return 0===t[1]?this.a:Math.sqrt(t[0]*t[0]+t[1]*t[1])},e.getScaleY=function(){var t=this._nums;return 0===t[2]?t[3]:Math.sqrt(t[2]*t[2]+t[3]*t[3])},e.invert=function(){var t=this._nums,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=e*r-i*n;return t[0]=r/a,t[1]=-i/a,t[2]=-n/a,t[3]=e/a,t[4]=(n*this.ty-r*s)/a,t[5]=-(e*this.ty-i*s)/a,this},e.setTo=function(t,e,i,n,r,s){var a=this._nums;return a[0]=t,a[1]=e,a[2]=i,a[3]=n,a[4]=r,a[5]=s,this},e.concat=function(t){var e=this._nums,i=t._nums,n=e[0],r=e[2],s=e[4];return e[0]=n*i[0]+e[1]*i[2],e[1]=n*i[1]+e[1]*i[3],e[2]=r*i[0]+e[3]*i[2],e[3]=r*i[1]+e[3]*i[3],e[4]=s*i[0]+e[5]*i[2]+i[4],e[5]=s*i[1]+e[5]*i[3]+i[5],this},e.scaleEx=function(t,e){var i=this._nums,n=i[0],r=i[1],s=i[2],a=i[3];0!==r||0!==s?(i[0]=t*n,i[1]=t*r,i[2]=e*s,i[3]=e*a):(i[0]=t*n,i[1]=0*a,i[2]=0*n,i[3]=e*a),this._bTransform=!0},e.rotateEx=function(t){var e=this._nums,i=Math.cos(t),n=Math.sin(t),r=e[0],s=e[1],a=e[2],o=e[3];0!==s||0!==a?(e[0]=i*r+n*a,e[1]=i*s+n*o,e[2]=-n*r+i*a,e[3]=-n*s+i*o):(e[0]=i*r,e[1]=n*o,e[2]=-n*r,e[3]=i*o),this._bTransform=!0},e.clone=function(){var e=this._nums,i=t.create(),n=i._nums;return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],i._bTransform=this._bTransform,i},e.copyTo=function(t){var e=this._nums,i=t._nums;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],t._bTransform=this._bTransform,t},e.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},e.destroy=function(){this.recover()},e.recover=function(){t._pool.push(this)},s(0,e,"a",function(){return this._nums[0]},function(t){this._nums[0]=t}),s(0,e,"b",function(){return this._nums[1]},function(t){this._nums[1]=t}),s(0,e,"c",function(){return this._nums[2]},function(t){this._nums[2]=t}),s(0,e,"d",function(){return this._nums[3]},function(t){this._nums[3]=t}),s(0,e,"tx",function(){return this._nums[4]},function(t){this._nums[4]=t}),s(0,e,"ty",function(){return this._nums[5]},function(t){this._nums[5]=t}),t.mul=function(t,e,i){var n=t._nums,r=e._nums,s=i._nums,a=n[0],o=n[1],h=n[2],_=n[3],l=n[4],u=n[5],c=r[0],d=r[1],f=r[2],p=r[3],m=r[4],g=r[5];return 0!==d||0!==f?(s[0]=a*c+o*f,s[1]=a*d+o*p,s[2]=h*c+_*f,s[3]=h*d+_*p,s[4]=c*l+f*u+m,s[5]=d*l+p*u+g):(s[0]=a*c,s[1]=o*p,s[2]=h*c,s[3]=_*p,s[4]=c*l+m,s[5]=p*u+g),i},t.mul16=function(t,e,i){var n=t._nums,r=e._nums,s=n[0],a=n[1],o=n[2],h=n[3],_=n[4],l=n[5],u=r[0],c=r[1],d=r[2],f=r[3],p=r[4],m=r[5];return 0!==c||0!==d?(i[0]=s*u+a*d,i[1]=s*c+a*f,i[4]=o*u+h*d,i[5]=o*c+h*f,i[12]=u*_+d*l+p,i[13]=c*_+f*l+m):(i[0]=s*u,i[1]=a*f,i[4]=o*u,i[5]=h*f,i[12]=u*_+p,i[13]=f*l+m),i},t.create=function(e){var i;return t._pool.length?(i=t._pool.pop(),e&&(i._nums=e),i.identity(),i):new t(1,0,0,1,0,0,e)},t.A=0,t.B=1,t.C=2,t.D=3,t.TX=4,t.TY=5,t.EMPTY=new t,t.TEMP=new t,t._pool=[],t}(),Ni=function(){function t(){}r(t,"laya.display.cmd.RotateCmd");var e=t.prototype;return e.recover=function(){Ki.recover("RotateCmd",this)},e.run=function(t,e,i){t._rotate(this.angle,this.pivotX+e,this.pivotY+i)},s(0,e,"cmdID",function(){return"Rotate"}),t.create=function(e,i,n){var r=Ki.getItemByClass("RotateCmd",t);return r.angle=e,r.pivotX=i,r.pivotY=n,r},t.ID="Rotate",t}(),Fi=function(){function t(){}return r(t,"UIConfig"),t.touchScrollEnable=!0,t.mouseWheelEnable=!0,t.showButtons=!0,t.popupBgColor="#000000",t.popupBgAlpha=.5,t.closeDialogOnSide=!0,t}(),ki=function(){function t(){this._controlPoints=[new Zi,new Zi,new Zi],this._calFun=this.getPoint2}r(t,"laya.maths.Bezier");var e=t.prototype;return e._switchPoint=function(t,e){var i=this._controlPoints.shift();i.setTo(t,e),this._controlPoints.push(i)},e.getPoint2=function(t,e){var i=this._controlPoints[0],n=this._controlPoints[1],r=this._controlPoints[2],s=Math.pow(1-t,2)*i.x+2*t*(1-t)*n.x+Math.pow(t,2)*r.x,a=Math.pow(1-t,2)*i.y+2*t*(1-t)*n.y+Math.pow(t,2)*r.y;e.push(s,a)},e.getPoint3=function(t,e){var i=this._controlPoints[0],n=this._controlPoints[1],r=this._controlPoints[2],s=this._controlPoints[3],a=Math.pow(1-t,3)*i.x+3*n.x*t*(1-t)*(1-t)+3*r.x*t*t*(1-t)+s.x*Math.pow(t,3),o=Math.pow(1-t,3)*i.y+3*n.y*t*(1-t)*(1-t)+3*r.y*t*t*(1-t)+s.y*Math.pow(t,3);e.push(a,o)},e.insertPoints=function(t,e){var i=0/0;t=t>0?t:5;var n=0/0;for(n=1/t,i=0;1>=i;i+=n)this._calFun(i,e)},e.getBezierPoints=function(t,e,i){void 0===e&&(e=5),void 0===i&&(i=2);var n=0,r=0;if(r=t.length,2*(i+1)>r)return[];var s=[];switch(i){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=i;)this._controlPoints.push(Zi.create());for(n=0;2*i>n;n+=2)this._switchPoint(t[n],t[n+1]);for(n=2*i;r>n;n+=2)this._switchPoint(t[n],t[n+1]),n/2%i==0&&this.insertPoints(e,s);return s},n(t,["I",function(){return this.I=new t}]),t}(),Vi=function(){function t(){}return r(t,"laya.media.SoundManager"),s(1,t,"useAudioMusic",function(){return t._useAudioMusic},function(e){t._useAudioMusic=e,t._musicClass=e?pn:null}),s(1,t,"autoStopMusic",function(){return t._autoStopMusic},function(e){i.stage.off("blur",null,t._stageOnBlur),i.stage.off("focus",null,t._stageOnFocus),i.stage.off("visibilitychange",null,t._visibilityChange),t._autoStopMusic=e,e&&(i.stage.on("blur",null,t._stageOnBlur),i.stage.on("focus",null,t._stageOnFocus),i.stage.on("visibilitychange",null,t._visibilityChange))}),s(1,t,"muted",function(){return t._muted},function(e){e!=t._muted&&(e&&t.stopAllSound(),t.musicMuted=e,t._muted=e)}),s(1,t,"musicMuted",function(){return t._musicMuted},function(e){e!=t._musicMuted&&(e?(t._bgMusic?t._musicChannel&&!t._musicChannel.isStopped?wi.isConchApp?t._musicChannel._audio&&(t._musicChannel._audio.muted=!0):t._musicChannel.pause():t._musicChannel=null:t._musicChannel=null,t._musicMuted=e):(t._musicMuted=e,t._bgMusic&&t._musicChannel&&(wi.isConchApp?t._musicChannel._audio&&(t._musicChannel._audio.muted=!1):t._musicChannel.resume())))}),s(1,t,"soundMuted",function(){return t._soundMuted},function(e){t._soundMuted=e}),t.__init__=function(){var e=Me.window,i=e.AudioContext||e.webkitAudioContext||e.mozAudioContext?!0:!1;return i&&un.initWebAudio(),t._soundClass=i?un:pn,pn._initMusicAudio(),t._musicClass=pn,i},t.addChannel=function(e){t._channels.indexOf(e)>=0||t._channels.push(e)},t.removeChannel=function(e){var i=0;for(i=t._channels.length-1;i>=0;i--)t._channels[i]==e&&t._channels.splice(i,1)},t.disposeSoundLater=function(e){t._lastSoundUsedTimeDic[e]=Me.now(),t._isCheckingDispose||(t._isCheckingDispose=!0,i.timer.loop(5e3,null,t._checkDisposeSound))},t._checkDisposeSound=function(){var e,n=Me.now(),r=!1;for(e in t._lastSoundUsedTimeDic)n-t._lastSoundUsedTimeDic[e]>3e4?(delete t._lastSoundUsedTimeDic[e],t.disposeSoundIfNotUsed(e)):r=!0;r||(t._isCheckingDispose=!1,i.timer.clear(null,t._checkDisposeSound))
},t.disposeSoundIfNotUsed=function(e){var i=0;for(i=t._channels.length-1;i>=0;i--)if(t._channels[i].url==e)return;t.destroySound(e)},t._visibilityChange=function(){i.stage.isVisibility?t._stageOnFocus():t._stageOnBlur()},t._stageOnBlur=function(){t._isActive=!1,t._musicChannel&&(t._musicChannel.isStopped||(t._blurPaused=!0,t._musicChannel.pause())),t.stopAllSound(),i.stage.once("mousedown",null,t._stageOnFocus)},t._recoverWebAudio=function(){un.ctx&&"running"!=un.ctx.state&&un.ctx.resume&&un.ctx.resume()},t._stageOnFocus=function(){t._isActive=!0,t._recoverWebAudio(),i.stage.off("mousedown",null,t._stageOnFocus),t._blurPaused&&t._musicChannel&&t._musicChannel.isStopped&&(t._blurPaused=!1,t._musicChannel.resume())},t.playSound=function(e,n,r,s,a){if(void 0===n&&(n=1),void 0===a&&(a=0),!t._isActive||!e)return null;if(t._muted)return null;if(t._recoverWebAudio(),e=Pi.formatURL(e),e==t._bgMusic){if(t._musicMuted)return null}else{if(wi.isConchApp){var o=Q.getFileExtension(e);if("wav"!=o&&"ogg"!=o)return alert("The sound only supports wav or ogg format,for optimal performance reason,please refer to the official website document."),null}if(t._soundMuted)return null}var h;Me.onMiniGame||(h=i.loader.getRes(e)),s||(s=t._soundClass),h||(h=new s,h.load(e),Me.onMiniGame||hn.cacheRes(e,h));var _;return(_=h.play(a,n))?(_.url=e,_.volume=e==t._bgMusic?t.musicVolume:t.soundVolume,_.completeHandler=r,_):null},t.destroySound=function(t){var e=i.loader.getRes(t);e&&(hn.clearRes(t),e.dispose())},t.playMusic=function(e,i,n,r){return void 0===i&&(i=0),void 0===r&&(r=0),e=Pi.formatURL(e),t._bgMusic=e,t._musicChannel&&t._musicChannel.stop(),t._musicChannel=t.playSound(e,i,n,t._musicClass,r)},t.stopSound=function(e){e=Pi.formatURL(e);var i,n=0;for(n=t._channels.length-1;n>=0;n--)i=t._channels[n],i.url==e&&i.stop()},t.stopAll=function(){t._bgMusic=null;var e,i=0;for(i=t._channels.length-1;i>=0;i--)e=t._channels[i],e.stop()},t.stopAllSound=function(){var e,i=0;for(i=t._channels.length-1;i>=0;i--)e=t._channels[i],e.url!=t._bgMusic&&e.stop()},t.stopMusic=function(){t._musicChannel&&t._musicChannel.stop(),t._bgMusic=null},t.setSoundVolume=function(e,i){if(i)i=Pi.formatURL(i),t._setVolume(i,e);else{t.soundVolume=e;var n,r=0;for(r=t._channels.length-1;r>=0;r--)n=t._channels[r],n.url!=t._bgMusic&&(n.volume=e)}},t.setMusicVolume=function(e){t.musicVolume=e,t._setVolume(t._bgMusic,e)},t._setVolume=function(e,i){e=Pi.formatURL(e);var n,r=0;for(r=t._channels.length-1;r>=0;r--)n=t._channels[r],n.url==e&&(n.volume=i)},t.musicVolume=1,t.soundVolume=1,t.playbackRate=1,t._useAudioMusic=!0,t._muted=!1,t._soundMuted=!1,t._musicMuted=!1,t._bgMusic=null,t._musicChannel=null,t._channels=[],t._autoStopMusic=!1,t._blurPaused=!1,t._isActive=!0,t._soundClass=null,t._musicClass=null,t._lastSoundUsedTimeDic={},t._isCheckingDispose=!1,t.autoReleaseSound=!0,t}(),Ui=function(){function t(){this._cacheBoundsType=!1}r(t,"laya.display.GraphicsBounds");var e=t.prototype;return e.destroy=function(){this._graphics=null,this._cacheBoundsType=!1,this._temp&&(this._temp.length=0),this._rstBoundPoints&&(this._rstBoundPoints.length=0),this._bounds&&this._bounds.recover(),this._bounds=null,Ki.recover("GraphicsBounds",this)},e.reset=function(){this._temp&&(this._temp.length=0)},e.getBounds=function(t){return void 0===t&&(t=!1),(!this._bounds||!this._temp||this._temp.length<1||t!=this._cacheBoundsType)&&(this._bounds=Ge._getWrapRec(this.getBoundPoints(t),this._bounds)),this._cacheBoundsType=t,this._bounds},e.getBoundPoints=function(t){return void 0===t&&(t=!1),(!this._temp||this._temp.length<1||t!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(t)),this._cacheBoundsType=t,this._rstBoundPoints=Q.copyArray(this._rstBoundPoints,this._temp)},e._getCmdPoints=function(e){void 0===e&&(e=!1);var i,n=(wi._context,this._graphics.cmds);if(i=this._temp||(this._temp=[]),i.length=0,n||null==this._graphics._one||(t._tempCmds.length=0,t._tempCmds.push(this._graphics._one),n=t._tempCmds),!n)return i;var r=t._tempMatrixArrays;r.length=0;var s=t._initMatrix;s.identity();for(var a,o,h=t._tempMatrix,_=0,l=n.length;l>_;_++)switch(a=n[_],a.cmdID){case"Alpha":r.push(s),s=s.clone();break;case"Restore":s=r.pop();break;case"Scale":h.identity(),h.translate(-a.pivotX,-a.pivotY),h.scale(a.scaleX,a.scaleY),h.translate(a.pivotX,a.pivotY),this._switchMatrix(s,h);break;case"Rotate":h.identity(),h.translate(-a.pivotX,-a.pivotY),h.rotate(a.angle),h.translate(a.pivotX,a.pivotY),this._switchMatrix(s,h);break;case"Translate":h.identity(),h.translate(a.tx,a.ty),this._switchMatrix(s,h);break;case"Transform":h.identity(),h.translate(-a.pivotX,-a.pivotY),h.concat(a.matrix),h.translate(a.pivotX,a.pivotY),this._switchMatrix(s,h);break;case"DrawImage":case"FillTexture":t._addPointArrToRst(i,Ge._getBoundPointS(a.x,a.y,a.width,a.height),s);break;case"DrawTexture":s.copyTo(h),a.matrix&&h.concat(a.matrix),t._addPointArrToRst(i,Ge._getBoundPointS(a.x,a.y,a.width,a.height),h);break;case"DrawImage":if(o=a.texture,e)a.width&&a.height?t._addPointArrToRst(i,Ge._getBoundPointS(a.x,a.y,a.width,a.height),s):t._addPointArrToRst(i,Ge._getBoundPointS(a.x,a.y,o.width,o.height),s);else{var u=(a.width||o.sourceWidth)/o.width,c=(a.height||o.sourceHeight)/o.height,d=u*o.sourceWidth,f=c*o.sourceHeight,p=o.offsetX>0?o.offsetX:0,m=o.offsetY>0?o.offsetY:0;p*=u,m*=c,t._addPointArrToRst(i,Ge._getBoundPointS(a.x-p,a.y-m,d,f),s)}break;case"FillTexture":a.width&&a.height?t._addPointArrToRst(i,Ge._getBoundPointS(a.x,a.y,a.width,a.height),s):(o=a.texture,t._addPointArrToRst(i,Ge._getBoundPointS(a.x,a.y,o.width,o.height),s));break;case"DrawTexture":var g;a.matrix?(s.copyTo(h),h.concat(a.matrix),g=h):g=s,e?a.width&&a.height?t._addPointArrToRst(i,Ge._getBoundPointS(a.x,a.y,a.width,a.height),g):(o=a.texture,t._addPointArrToRst(i,Ge._getBoundPointS(a.x,a.y,o.width,o.height),g)):(o=a.texture,u=(a.width||o.sourceWidth)/o.width,c=(a.height||o.sourceHeight)/o.height,d=u*o.sourceWidth,f=c*o.sourceHeight,p=o.offsetX>0?o.offsetX:0,m=o.offsetY>0?o.offsetY:0,p*=u,m*=c,t._addPointArrToRst(i,Ge._getBoundPointS(a.x-p,a.y-m,d,f),g));break;case"DrawRect":t._addPointArrToRst(i,Ge._getBoundPointS(a.x,a.y,a.width,a.height),s);break;case"DrawCircle":t._addPointArrToRst(i,Ge._getBoundPointS(a.x-a.radius,a.y-a.radius,a.radius+a.radius,a.radius+a.radius),s);break;case"DrawLine":t._tempPoints.length=0;var v=0/0;v=.5*a.lineWidth,a.fromX==a.toX?t._tempPoints.push(a.fromX+v,a.fromY,a.toX+v,a.toY,a.fromX-v,a.fromY,a.toX-v,a.toY):a.fromY==a.toY?t._tempPoints.push(a.fromX,a.fromY+v,a.toX,a.toY+v,a.fromX,a.fromY-v,a.toX,a.toY-v):t._tempPoints.push(a.fromX,a.fromY,a.toX,a.toY),t._addPointArrToRst(i,t._tempPoints,s);break;case"DrawCurves":t._addPointArrToRst(i,ki.I.getBezierPoints(a.points),s,a.x,a.y);break;case"DrawLines":case"DrawPoly":t._addPointArrToRst(i,a.points,s,a.x,a.y);break;case"DrawPath":t._addPointArrToRst(i,this._getPathPoints(a.paths),s,a.x,a.y);break;case"DrawPie":t._addPointArrToRst(i,this._getPiePoints(a.x,a.y,a.radius,a.startAngle,a.endAngle),s)}return i.length>200?i=Q.copyArray(i,Ge._getWrapRec(i)._getBoundPoints()):i.length>8&&(i=Y.scanPList(i)),i},e._switchMatrix=function(t,e){e.concat(t),e.copyTo(t)},e._getPiePoints=function(e,i,n,r,s){var a=t._tempPoints;t._tempPoints.length=0,a.push(e,i);var o=Math.PI/10,h=0/0;for(h=r;s>h;h+=o)a.push(e+n*Math.cos(h),i+n*Math.sin(h));return s!=h&&a.push(e+n*Math.cos(s),i+n*Math.sin(s)),a},e._getPathPoints=function(e){var i=0,n=0,r=t._tempPoints;r.length=0,n=e.length;var s;for(i=0;n>i;i++)s=e[i],s.length>1&&(r.push(s[1],s[2]),s.length>3&&r.push(s[3],s[4]));return r},t.create=function(){return Ki.getItemByClass("GraphicsBounds",t)},t._addPointArrToRst=function(e,i,n,r,s){void 0===r&&(r=0),void 0===s&&(s=0);var a=0,o=0;for(o=i.length,a=0;o>a;a+=2)t._addPointToRst(e,i[a]+r,i[a+1]+s,n)},t._addPointToRst=function(t,e,i,n){var r=Zi.TEMP;r.setTo(e?e:0,i?i:0),n.transformPoint(r),t.push(r.x,r.y)},t._tempPoints=[],t._tempMatrixArrays=[],t._tempCmds=[],n(t,["_tempMatrix",function(){return this._tempMatrix=new ui},"_initMatrix",function(){return this._initMatrix=new ui}]),t}(),Wi=function(){function t(e){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._id=++t._uniqueIDCounter,this._name=e?e:"Content Manager",t._isResourceManagersSorted=!1,this._memorySize=0,t._resourceManagers.push(this),this._resources=[]}r(t,"laya.resource.ResourceManager");var e=t.prototype;return i.imps(e,{"laya.resource.IDispose":!0}),e.getResourceByIndex=function(t){return this._resources[t]},e.getResourcesLength=function(){return this._resources.length},e.addResource=function(t){t.resourceManager&&t.resourceManager.removeResource(t);var e=this._resources.indexOf(t);return-1===e?(t._resourceManager=this,this._resources.push(t),this.addSize(t.gpuMemory),!0):!1},e.removeResource=function(t){var e=this._resources.indexOf(t);return-1!==e?(this._resources.splice(e,1),t._resourceManager=null,this._memorySize-=t.gpuMemory,!0):!1},e.unload=function(){for(var t=this._resources.slice(0,this._resources.length),e=0;e<t.length;e++){var i=t[e];i.destroy()}t.length=0},e.dispose=function(){if(this===t._systemResourceManager)throw new Error("systemResourceManager不能被释放！");t._resourceManagers.splice(t._resourceManagers.indexOf(this),1),t._isResourceManagersSorted=!1;for(var e=this._resources.slice(0,this._resources.length),i=0;i<e.length;i++){var n=e[i];n.resourceManager.removeResource(n),n.destroy()}e.length=0},e.addSize=function(t){t&&(this._memorySize+=t)},s(0,e,"id",function(){return this._id}),s(0,e,"name",function(){return this._name},function(e){!e&&""===e||this._name===e||(this._name=e,t._isResourceManagersSorted=!1)}),s(0,e,"memorySize",function(){return this._memorySize}),s(1,t,"systemResourceManager",function(){return t._systemResourceManager}),t.__init__=function(){t.currentResourceManager=t.systemResourceManager},t.getLoadedResourceManagerByIndex=function(e){return t._resourceManagers[e]},t.getLoadedResourceManagersCount=function(){return t._resourceManagers.length},t.recreateContentManagers=function(t){void 0===t&&(t=!1)},t.releaseContentManagers=function(e){void 0===e&&(e=!1);for(var i=t.currentResourceManager,n=0;n<t._resourceManagers.length;n++){t.currentResourceManager=t._resourceManagers[n];for(var r=0;r<t.currentResourceManager._resources.length;r++){var s=t.currentResourceManager._resources[r];!s.released&&s.releaseResource(e)}}t.currentResourceManager=i},t._uniqueIDCounter=0,t._isResourceManagersSorted=!1,t._resourceManagers=[],n(t,["_systemResourceManager",function(){return this._systemResourceManager=new t("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=t._systemResourceManager}]),t}(),Gi=function(){function t(){this.padding=t._PADDING,this.reset()}r(t,"laya.html.utils.HTMLStyle");var e=t.prototype;return e._getExtendStyle=function(){return this._extendStyle===G.EMPTY&&(this._extendStyle=G.create()),this._extendStyle},e.reset=function(){return this.ower=null,this._type=0,this.wordWrap=!0,this.fontSize=ur.defaultFontSize,this.family=ur.defaultFont,this.color="#000000",this.valign="top",this.padding=t._PADDING,this.bold=!1,this.italic=!1,this.align="left",this.textDecoration=null,this.bgColor=null,this.borderColor=null,this._extendStyle&&this._extendStyle.recover(),this._extendStyle=G.EMPTY,this},e.recover=function(){Ki.recover("HTMLStyle",this.reset())},e.inherit=function(e){var i,n=0,r=0;i=t._inheritProps,r=i.length;var s;for(n=0;r>n;n++)s=i[n],this[s]=e[s]},e._widthAuto=function(){return 0!==(262144&this._type)},e.widthed=function(){return 0!=(8&this._type)},e._calculation=function(){return!1},e.heighted=function(){return 0!=(8192&this._type)},e.size=function(t,e){var i=this.ower,n=!1;-1!==t&&t!=i.width&&(this._type|=8,i.width=t,n=!0),-1!==e&&e!=i.height&&(this._type|=8192,i.height=e,n=!0),n&&i._layoutLater()},e.getLineElement=function(){return 0!=(65536&this._type)},e.setLineElement=function(t){t?this._type|=65536:this._type&=-65537},e._enableLayout=function(){return 0===(2&this._type)&&0===(4&this._type)},e.cssText=function(e){this.attrs(t.parseOneCSS(e,";"))},e.attrs=function(t){if(t)for(var e=0,i=t.length;i>e;e++){var n=t[e];this[n[0]]=n[1]}},s(0,e,"font",function(){return(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(Me.onIPhone?ur.fontFamilyMap[this.family]||this.family:this.family)},function(t){for(var e=t.split(" "),i=0,n=e.length;n>i;i++){var r=e[i];switch(r){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}r.indexOf("px")>0&&(this.fontSize=parseInt(r),this.family=e[i+1],i++)}}),s(0,e,"href",function(){return this._extendStyle.href},function(t){t!==this._extendStyle.href&&(this._getExtendStyle().href=t)}),s(0,e,"lineHeight",function(){return this._extendStyle.lineHeight},function(t){this._extendStyle.lineHeight!==t&&(this._getExtendStyle().lineHeight=t)}),s(0,e,"strokeColor",function(){return this._extendStyle.strokeColor},function(t){this._extendStyle.strokeColor!==t&&(this._getExtendStyle().strokeColor=t)}),s(0,e,"stroke",function(){return this._extendStyle.stroke},function(t){this._extendStyle.stroke!==t&&(this._getExtendStyle().stroke=t)}),s(0,e,"leading",function(){return this._extendStyle.leading},function(t){this._extendStyle.leading!==t&&(this._getExtendStyle().leading=t)}),s(0,e,"align",function(){var e=48&this._type;return t.align_Value[e]},function(e){e in t.alignVDic&&(this._type&=-49,this._type|=t.alignVDic[e])}),s(0,e,"valign",function(){var e=192&this._type;return t.vAlign_Value[e]},function(e){e in t.alignVDic&&(this._type&=-193,this._type|=t.alignVDic[e])}),s(0,e,"block",function(){return 0!=(1&this._type)},function(t){t?this._type|=1:this._type&=-2}),s(0,e,"wordWrap",function(){return 0===(131072&this._type)},function(t){t?this._type&=-131073:this._type|=131072}),s(0,e,"bold",function(){return 0!=(1024&this._type)},function(t){t?this._type|=1024:this._type&=-1025}),s(0,e,"italic",function(){return 0!=(2048&this._type)},function(t){t?this._type|=2048:this._type&=-2049}),s(0,e,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(t){"nowrap"===t&&(this._type|=131072),"none"===t&&(this._type&=-131073)}),s(0,e,"width",null,function(t){if(this._type|=8,"string"==typeof t){var e=t.indexOf("auto");if(e>=0&&(this._type|=262144,t=t.substr(0,e)),this._calculation("width",t))return;t=parseInt(t)}this.size(t,-1)}),s(0,e,"height",null,function(t){if(this._type|=8192,"string"==typeof t){if(this._calculation("height",t))return;t=parseInt(t)}this.size(-1,t)}),s(0,e,"letterSpacing",function(){return this._extendStyle.letterSpacing},function(t){"string"==typeof t&&(t=parseInt(t+"")),t!=this._extendStyle.letterSpacing&&(this._getExtendStyle().letterSpacing=t)}),s(0,e,"position",function(){return 4&this._type?"absolute":""},function(t){"absolute"===t?this._type|=4:this._type&=-5}),s(0,e,"absolute",function(){return 0!==(4&this._type)}),s(0,e,"paddingLeft",function(){return this.padding[3]}),s(0,e,"paddingTop",function(){return this.padding[0]}),t.create=function(){return Ki.getItemByClass("HTMLStyle",t)},t.parseOneCSS=function(e,i){for(var n,r=[],s=e.split(i),a=0,o=s.length;o>a;a++){var h=s[a],_=h.indexOf(":"),l=h.substr(0,_).replace(/^\s+|\s+$/g,"");if(0!==l.length){var u=h.substr(_+1).replace(/^\s+|\s+$/g,""),c=[l,u];switch(l){case"italic":case"bold":c[1]="true"==u;break;case"font-weight":"bold"==u&&(c[1]=!0,c[0]="bold");break;case"line-height":c[0]="lineHeight",c[1]=parseInt(u);break;case"font-size":c[0]="fontSize",c[1]=parseInt(u);break;case"stroke":c[0]="stroke",c[1]=parseInt(u);break;case"padding":n=u.split(" "),n.length>1||(n[1]=n[2]=n[3]=n[0]),c[1]=[parseInt(n[0]),parseInt(n[1]),parseInt(n[2]),parseInt(n[3])];break;default:(c[0]=t._CSSTOVALUE[l])||(c[0]=l)}r.push(c)}}return r},t.parseCSS=function(e){for(var i;null!=(i=t._parseCSSRegExp.exec(e));)t.styleSheets[i[1]]=t.parseOneCSS(i[2],";")},t._CSSTOVALUE={"letter-spacing":"letterSpacing","white-space":"whiteSpace","line-height":"lineHeight","font-family":"family","vertical-align":"valign","text-decoration":"textDecoration","background-color":"bgColor","border-color":"borderColor"},t._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),t.ALIGN_LEFT="left",t.ALIGN_CENTER="center",t.ALIGN_RIGHT="right",t.VALIGN_TOP="top",t.VALIGN_MIDDLE="middle",t.VALIGN_BOTTOM="bottom",t.styleSheets={},t.ADDLAYOUTED=512,t._PADDING=[0,0,0,0],t._HEIGHT_SET=8192,t._LINE_ELEMENT=65536,t._NOWARP=131072,t._WIDTHAUTO=262144,t._BOLD=1024,t._ITALIC=2048,t._CSS_BLOCK=1,t._DISPLAY_NONE=2,t._ABSOLUTE=4,t._WIDTH_SET=8,t._ALIGN=48,t._VALIGN=192,n(t,["_inheritProps",function(){return this._inheritProps=["italic","align","valign","leading","stroke","strokeColor","bold","fontSize","lineHeight","wordWrap","color"]},"alignVDic",function(){return this.alignVDic={left:0,center:16,right:32,top:0,middle:64,bottom:128}},"align_Value",function(){return this.align_Value={0:"left",16:"center",32:"right"}},"vAlign_Value",function(){return this.vAlign_Value={0:"top",64:"middle",128:"bottom"}}]),t}(),Xi=function(){function t(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}r(t,"laya.utils.Dragging");var e=t.prototype;return e.start=function(t,e,n,r,s,a,o,h){void 0===h&&(h=.92),this.clearTimer(),this.target=t,this.area=e,this.hasInertia=n,this.elasticDistance=e?r:0,this.elasticBackTime=s,this.data=a,this._disableMouseEvent=o,this.ratio=h,this._parent=t.parent,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,i.stage.on("mouseup",this,this.onStageMouseUp),i.stage.on("mouseout",this,this.onStageMouseUp),i.systemTimer.frameLoop(1,this,this.loop)},e.clearTimer=function(){i.systemTimer.clear(this,this.loop),i.systemTimer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},e.stop=function(){this._dragging&&(oe.instance.disableMouseEvent=!1,i.stage.off("mouseup",this,this.onStageMouseUp),i.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},e.loop=function(){var t=this._parent.getMousePoint(),e=t.x,n=t.y,r=e-this._lastX,s=n-this._lastY;if(this._clickOnly){if(!(Math.abs(r*i.stage._canvasTransform.getScaleX())>1||Math.abs(s*i.stage._canvasTransform.getScaleY())>1))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),oe.instance.disableMouseEvent=this._disableMouseEvent}else this._offsets.push(r,s);(0!==r||0!==s)&&(this._lastX=e,this._lastY=n,this.target.x+=r*this._elasticRateX,this.target.y+=s*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},e.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target._x<this.area.x)var t=this.area.x-this.target._x;else t=this.target._x>this.area.x+this.area.width?this.target._x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-t/this.elasticDistance),this.target._y<this.area.y)var e=this.area.y-this.target.y;else e=this.target._y>this.area.y+this.area.height?this.target._y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-e/this.elasticDistance)}},e.backToArea=function(){this.target.x=Math.min(Math.max(this.target._x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target._y,this.area.y),this.area.y+this.area.height)},e.onStageMouseUp=function(){if(oe.instance.disableMouseEvent=!1,i.stage.off("mouseup",this,this.onStageMouseUp),i.stage.off("mouseout",this,this.onStageMouseUp),i.systemTimer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var t=this._offsets.length,e=Math.min(t,6),n=this._offsets.length-e,r=t-1;r>n;r--)this._offsetY+=this._offsets[r--],this._offsetX+=this._offsets[r];this._offsetX=this._offsetX/e*2,this._offsetY=this._offsetY/e*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=this._offsetX>0?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=this._offsetY>0?this.maxOffset:-this.maxOffset),i.systemTimer.frameLoop(1,this,this.tweenMove)}else this.elasticDistance>0?this.checkElastic():this.clear()},e.checkElastic=function(){var t=0/0,e=0/0;if(this.target.x<this.area.x?t=this.area.x:this.target._x>this.area.x+this.area.width&&(t=this.area.x+this.area.width),this.target.y<this.area.y?e=this.area.y:this.target._y>this.area.y+this.area.height&&(e=this.area.y+this.area.height),isNaN(t)&&isNaN(e))this.clear();else{var i={};isNaN(t)||(i.x=t),isNaN(e)||(i.y=e),this._tween=ii.to(this.target,i,this.elasticBackTime,Ne.sineOut,l.create(this,this.clear),0,!1,!1)}},e.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(i.systemTimer.clear(this,this.tweenMove),this.elasticDistance>0?this.checkElastic():this.clear())},e.clear=function(){if(this.target){this.clearTimer();var t=this.target;this.target=null,this._parent=null,t.event("dragend",this.data)}},t}(),zi=(function(){function t(){this._graphicsCmdEncoder=null,this._matrix=null,this._paramData=new ParamData(32,!0)}r(t,"laya.layagl.cmdNative.TransformCmdNative");var e=t.prototype;return e.recover=function(){this._matrix=null,Ki.recover("TransformCmd",this)},s(0,e,"cmdID",function(){return"Transform"}),s(0,e,"matrix",function(){return this._matrix},function(t){this._matrix=t;var e=this._paramData._float32Data;e[0]=this._matrix.a,e[1]=this._matrix.b,e[2]=this._matrix.c,e[3]=this._matrix.d,e[4]=this._matrix.tx,e[5]=this._matrix.ty,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"pivotX",function(){return this._paramData._float32Data[6]},function(t){this._paramData._float32Data[6]=t,Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"pivotY",function(){return this._paramData._float32Data[7]},function(t){this._paramData._float32Data[7]=t,Le.syncBufferToRenderThread(this._paramData)}),t.create=function(e,i,n){var r=Ki.getItemByClass("TransformCmd",t),s=r._graphicsCmdEncoder=this._commandEncoder,a=r._paramData._float32Data;a[0]=e.a,a[1]=e.b,a[2]=e.c,a[3]=e.d,a[4]=e.tx,a[5]=e.ty,a[6]=i,a[7]=n,r._matrix=e;var o=r._paramData.getPtrID();return Le.syncBufferToRenderThread(r._paramData),s.setGlobalValueEx(se.GLOBALVALUE_MATRIX32,14,o,0),Le.syncBufferToRenderThread(s),r},t.ID="Transform",t}(),function(){function t(){this._mat=new ui}r(t,"laya.webgl.canvas.save.SaveTranslate");var e=t.prototype;return i.imps(e,{"laya.webgl.canvas.save.ISaveData":!0}),e.isSaveMark=function(){return!1},e.restore=function(e){this._mat.copyTo(e._curMat),t.POOL[t.POOL._length++]=this},t.save=function(e){var i=t.POOL,n=i._length>0?i[--i._length]:new t;e._curMat.copyTo(n._mat);var r=e._save;r[r._length++]=n},t.POOL=h._createArray(),t}()),Hi=function(){function t(){}r(t,"laya.display.cmd.DrawTrianglesCmd");var e=t.prototype;return e.recover=function(){this.texture=null,this.vertices=null,this.uvs=null,this.indices=null,this.matrix=null,Ki.recover("DrawTrianglesCmd",this)},e.run=function(t,e,i){t.drawTriangles(this.texture,this.x+e,this.y+i,this.vertices,this.uvs,this.indices,this.matrix,this.alpha,this.color,this.blendMode)},s(0,e,"cmdID",function(){return"DrawTriangles"}),t.create=function(e,i,n,r,s,a,h,_,l,u){var c=Ki.getItemByClass("DrawTrianglesCmd",t);if(c.texture=e,c.x=i,c.y=n,c.vertices=r,c.uvs=s,c.indices=a,c.matrix=h,c.alpha=_,l){c.color=new dn;var d=o.create(l).arrColor;c.color.color(255*d[0],255*d[1],255*d[2],255*d[3])}return c.blendMode=u,c},t.ID="DrawTriangles",t}(),Yi=function(){function t(){}return r(t,"laya.utils.RunDriver"),t.getIncludeStr=function(){return null},t.createShaderCondition=function(t){var e="(function() {return "+t+";})";return i._runScript(e)},t.fontMap=[],t.measureText=function(e,i){var n=t.hanzi.test(e);if(n&&t.fontMap[i])return t.fontMap[i];var r=Me.context;r.font=i;var s=r.measureText(e);return n&&(t.fontMap[i]=s),s},t.drawToCanvas=function(t,e,i,n,r,s){i|=0,n|=0,r|=0,s|=0;var a=new yr,o=a.getContext("2d");return a.size(i,n),U.renders[e]._fun(t,o,r,s),a},t.initRender=function(t,e,i){return wi._context=t.getContext("2d"),t.size(e,i),!0},t.createParticleTemplate2D=null,t.changeWebGLSize=function(){},t.createRenderSprite=function(t,e){return new U(t,e)},t.clear=function(){wi.isConchApp||wi._context.clear()},t.getTexturePixels=function(){return null},t.skinAniSprite=function(){return null},t.cancelLoadByUrl=function(){},t.enableNative=null,n(t,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),t}(),ji=function(){function t(t){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=t}r(t,"laya.webgl.utils.ShaderNode");var e=t.prototype;return e.setParent=function(t){t.childs.push(this),this.z=t.z+1,this.parent=t},e.setCondition=function(t,e){t&&(this.conditionType=e,t=t.replace(/(\s*$)/g,""),this.condition=function(){return this[t]},this.condition.__condition=t)},e.toscript=function(e,i){return this._toscript(e,i,++t.__id)},e._toscript=function(t,e,i){if(this.childs.length<1&&!this.text)return e;e.length;if(this.condition){var n=!!this.condition.call(t);if(2===this.conditionType&&(n=!n),!n)return e}if(this.text&&e.push(this.text),this.childs.length>0&&this.childs.forEach(function(n){n._toscript(t,e,i)}),this.includefiles.length>0&&this.useFuns.length>0)for(var r,s=0,a=this.includefiles.length;a>s;s++)this.includefiles[s].curUseID!=i&&(r=this.includefiles[s].file.getFunsScript(this.useFuns),r.length>0&&(this.includefiles[s].curUseID=i,e[0]=r+e[0]));return e},t.__id=1,t}(),Zi=(function(){function t(){this._paramData=new ParamData(4,!0)}r(t,"laya.layagl.cmdNative.AlphaCmdNative");var e=t.prototype;return e.recover=function(){Ki.recover("AlphaCmd",this)},e.run=function(t){t.alpha(this._alpha)},s(0,e,"cmdID",function(){return"Alpha"}),s(0,e,"alpha",function(){return this._alpha},function(t){t=t>1?1:t,t=0>t?0:t,this._alpha=t;var e=16777215;e=255*t<<24|e,this._paramData._int32Data[0]=e,Le.syncBufferToRenderThread(this._paramData)}),t.create=function(e){var i=Ki.getItemByClass("AlphaCmd",t),n=i._graphicsCmdEncoder=this._commandEncoder;return i.alpha=e,n.setGlobalValueEx(se.GLOBALVALUE_DRAWTEXTURE_COLOR,15,i._paramData.getPtrID(),0),Le.syncBufferToRenderThread(n),i},t.ID="Alpha",t}(),function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}r(t,"laya.maths.Point");var e=t.prototype;return e.setTo=function(t,e){return this.x=t,this.y=e,this},e.reset=function(){return this.x=this.y=0,this},e.recover=function(){Ki.recover("Point",this.reset())},e.distance=function(t,e){return Math.sqrt((this.x-t)*(this.x-t)+(this.y-e)*(this.y-e))},e.toString=function(){return this.x+","+this.y},e.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(t>0){var e=1/t;this.x*=e,this.y*=e}},e.copy=function(t){return this.setTo(t.x,t.y)},t.create=function(){return Ki.getItemByClass("Point",t)},t.TEMP=new t,t.EMPTY=new t,t}()),Ki=function(){function t(){}return r(t,"laya.utils.Pool"),t.getPoolBySign=function(e){return t._poolDic[e]||(t._poolDic[e]=[])},t.clearBySign=function(e){t._poolDic[e]&&(t._poolDic[e].length=0)},t.recover=function(e,i){i.__InPool||(i.__InPool=!0,t.getPoolBySign(e).push(i))},t.recoverByClass=function(e){if(e){var i=e.__className||e.constructor._$gid;i&&t.recover(i,e)}},t._getClassSign=function(t){var e=t.__className||t._$gid;return e||(t._$gid=e=Q.getGID()+""),e},t.createByClass=function(e){return t.getItemByClass(t._getClassSign(e),e)},t.getItemByClass=function(e,i){if(!t._poolDic[e])return new i;var n=t.getPoolBySign(e);if(n.length){var r=n.pop();r.__InPool=!1}else r=new i;return r},t.getItemByCreateFun=function(e,i,n){var r=t.getPoolBySign(e),s=r.length?r.pop():i.call(n);return s.__InPool=!1,s},t.getItem=function(e){var i=t.getPoolBySign(e),n=i.length?i.pop():null;return n&&(n.__InPool=!1),n},t.POOLSIGN="__InPool",t._poolDic={},t}(),$i=function(){function t(){}return r(t,"laya.utils.CacheManger"),t.regCacheByFunction=function(e,i){t.unRegCacheByFunction(e,i);var n;n={tryDispose:e,getCacheList:i},t._cacheList.push(n)},t.unRegCacheByFunction=function(e,i){var n=0,r=0;for(r=t._cacheList.length,n=0;r>n;n++)if(t._cacheList[n].tryDispose==e&&t._cacheList[n].getCacheList==i)return t._cacheList.splice(n,1),void 0},t.forceDispose=function(){var e=0,i=t._cacheList.length;for(e=0;i>e;e++)t._cacheList[e].tryDispose(!0)},t.beginCheck=function(e){void 0===e&&(e=15e3),i.systemTimer.loop(e,null,t._checkLoop)},t.stopCheck=function(){i.systemTimer.clear(null,t._checkLoop)},t._checkLoop=function(){var e=t._cacheList;if(!(e.length<1)){var i=Me.now(),n=0,r=0;for(r=n=e.length;n>0&&(t._index++,t._index=t._index%r,e[t._index].tryDispose(!1),!(Me.now()-i>t.loopTimeLimit));)n--}},t.loopTimeLimit=2,t._cacheList=[],t._index=0,t}(),qi=function(){function t(){}return r(t,"laya.ui.Styles"),t.labelColor="#000000",t.buttonStateNum=3,t.scrollBarMinNum=15,t.scrollBarDelayTime=500,n(t,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),t}(),Qi=(function(){function t(){this._graphicsCmdEncoder=null,this._paramData=null,this._x=0,this._y=0,this._points=[],this._lineColor=null,this._lineWidth=0/0,this.lastOriX=0,this.lastOriY=0,this.tArray=[],this._vertNum=0,this.ibBuffer=null,this.vbBuffer=null,this._ibSize=0,this._vbSize=0,this._ibArray=[],this._vbArray=[]}r(t,"laya.layagl.cmdNative.DrawCurvesCmdNative");var e=t.prototype;return e._getPoints=function(t){var e=[];this._points.push(t[0]),this._points.push(t[1]);for(var i=2,n=t.length;n>i;)this._quadraticCurveTo(e,t[i++],t[i++],t[i++],t[i++]);return e},e._quadraticCurveTo=function(t,e,i,n,r){var s=ki.I;0==this.tArray.length?(this.lastOriX=this._points[0],this.lastOriY=this._points[1]):(this.lastOriX=this.tArray[this.tArray.length-2],this.lastOriY=this.tArray[this.tArray.length-1]),this.tArray=s.getBezierPoints([this.lastOriX,this.lastOriY,e,i,n,r],30,2);for(var a=2,o=this.tArray.length;o>a;a++)t.push(this.tArray[a])},e.recover=function(){this._lineColor=null,this._points.length=0,this.tArray.length=0,this._ibArray.length=0,this._vbArray.length=0,Ki.recover("DrawCurvesCmd",this)},s(0,e,"lineColor",function(){return this._lineColor},function(t){this._lineColor=t;for(var e=o.create(this._lineColor),i=e.numColor,n=this.vbBuffer._int32Data,r=0,s=0;s<this._vertNum;s++)r++,r++,n[r++]=i;Le.syncBufferToRenderThread(this.vbBuffer)}),s(0,e,"points",function(){return this._points},function(e){this._points.length=0,this.lastOriX=0,this.lastOriY=0,this._points=this._getPoints(e),this._ibArray.length=0,this._vbArray.length=0,Je.createLine2(this._points,this._ibArray,this.lineWidth,0,this._vbArray,!1);var i=o.create(this._lineColor),n=i.numColor;this._vertNum=this._points.length;var r=this._vertNum;(!this.vbBuffer||this.vbBuffer.getByteLength()<3*this._vertNum*4)&&(this.vbBuffer=new ParamData(3*r*4,!0)),this._vbSize=3*this._vertNum*4;for(var s=this.vbBuffer._float32Data,a=this.vbBuffer._int32Data,h=0,_=0;_<this._vertNum;_++)s[h++]=this._vbArray[2*_]+this.x,s[h++]=this._vbArray[2*_+1]+this.y,a[h++]=n;(!this.ibBuffer||this.ibBuffer.getByteLength()<3*(this._vertNum-2)*2)&&(this.ibBuffer=new ParamData(3*(r-2)*2,!0,!0)),this._ibSize=3*(this._vertNum-2)*2;for(var l=this.ibBuffer._int16Data,u=0;u<3*(this._vertNum-2);u++)l[u]=this._ibArray[u];
a=this._paramData._int32Data,a[t._PARAM_VB_SIZE_POS_]=this._vbSize,a[t._PARAM_IB_SIZE_POS_]=this._ibSize,Le.syncBufferToRenderThread(this.ibBuffer),Le.syncBufferToRenderThread(this.vbBuffer),Le.syncBufferToRenderThread(this._paramData)}),s(0,e,"cmdID",function(){return"DrawCurves"}),s(0,e,"x",function(){return this._x},function(t){this._x=t;for(var e=this.vbBuffer._float32Data,i=0,n=0;n<this._vertNum;n++)e[i++]=this._vbArray[2*n]+this._x,i++,i++;Le.syncBufferToRenderThread(this.vbBuffer)}),s(0,e,"y",function(){return this._y},function(t){this._y=t;for(var e=this.vbBuffer._float32Data,i=0,n=0;n<this._vertNum;n++)i++,e[i++]=this._vbArray[2*n+1]+this._y,i++;Le.syncBufferToRenderThread(this.vbBuffer)}),s(0,e,"lineWidth",function(){return this._lineWidth},function(t){this._lineWidth=t,this._ibArray.length=0,this._vbArray.length=0,Je.createLine2(this._points,this._ibArray,this._lineWidth,0,this._vbArray,!1);for(var e=this.vbBuffer._float32Data,i=0,n=0;n<this._vertNum;n++)e[i++]=this._vbArray[2*n]+this.x,e[i++]=this._vbArray[2*n+1]+this.y,i++;Le.syncBufferToRenderThread(this.vbBuffer)}),t.create=function(e,i,n,r,s){var a=Ki.getItemByClass("DrawCurvesCmd",t);a._graphicsCmdEncoder=this._commandEncoder,t._DRAW_CURVES_CMD_ENCODER_||(t._DRAW_CURVES_CMD_ENCODER_=Le.instance.createCommandEncoder(152,32,!0),t._DRAW_CURVES_CMD_ENCODER_.useProgramEx(se.PROGRAMEX_DRAWVG),t._DRAW_CURVES_CMD_ENCODER_.useVDO(se.VDO_MESHVG),t._DRAW_CURVES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_VIEWS,0),t._DRAW_CURVES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_DIR,1),t._DRAW_CURVES_CMD_ENCODER_.uniformEx(se.GLOBALVALUE_CLIP_MAT_POS,2),t._DRAW_CURVES_CMD_ENCODER_.setMeshExByParamData(4*t._PARAM_VB_POS_,4*t._PARAM_VB_OFFSET_POS_,4*t._PARAM_VB_SIZE_POS_,4*t._PARAM_IB_POS_,4*t._PARAM_IB_OFFSET_POS_,4*t._PARAM_IB_SIZE_POS_,4*t._PARAM_INDEX_ELEMENT_OFFSET_POS_),t._DRAW_CURVES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_MATRIX32,0,7),t._DRAW_CURVES_CMD_ENCODER_.modifyMesh(se.GLOBALVALUE_DRAWTEXTURE_COLOR,1,15),Le.syncBufferToRenderThread(t._DRAW_CURVES_CMD_ENCODER_)),a._paramData||(a._paramData=new ParamData(32,!0)),a._x=e,a._y=i,a._lineColor=r,a._lineWidth=s,a._points=a._getPoints(n),Je.createLine2(a._points,a._ibArray,s,0,a._vbArray,!1);var h=o.create(r),_=h.numColor;a._vertNum=a._points.length;var l=a._vertNum;(!a.vbBuffer||a.vbBuffer.getByteLength()<3*a._vertNum*4)&&(a.vbBuffer=new ParamData(3*l*4,!0)),a._vbSize=3*a._vertNum*4;for(var u=a.vbBuffer._float32Data,c=a.vbBuffer._int32Data,d=0,f=0;f<a._vertNum;f++)u[d++]=a._vbArray[2*f]+e,u[d++]=a._vbArray[2*f+1]+i,c[d++]=_;(!a.ibBuffer||a.ibBuffer.getByteLength()<3*(a._vertNum-2)*2)&&(a.ibBuffer=new ParamData(3*(l-2)*2,!0,!0)),a._ibSize=3*(a._vertNum-2)*2;for(var p=a.ibBuffer._int16Data,m=0;m<3*(a._vertNum-2);m++)p[m]=a._ibArray[m];a._paramData._float32Data;return c=a._paramData._int32Data,c[0]=1,c[t._PARAM_VB_POS_]=a.vbBuffer.getPtrID(),c[t._PARAM_IB_POS_]=a.ibBuffer.getPtrID(),c[t._PARAM_VB_SIZE_POS_]=a._vbSize,c[t._PARAM_IB_SIZE_POS_]=a._ibSize,c[t._PARAM_VB_OFFSET_POS_]=0,c[t._PARAM_IB_OFFSET_POS_]=0,c[t._PARAM_INDEX_ELEMENT_OFFSET_POS_]=0,Le.syncBufferToRenderThread(a.vbBuffer),Le.syncBufferToRenderThread(a.ibBuffer),Le.syncBufferToRenderThread(a._paramData),a._graphicsCmdEncoder.useCommandEncoder(t._DRAW_CURVES_CMD_ENCODER_.getPtrID(),a._paramData.getPtrID(),-1),Le.syncBufferToRenderThread(a._graphicsCmdEncoder),a},t.ID="DrawCurves",t._DRAW_CURVES_CMD_ENCODER_=null,t._PARAM_VB_POS_=1,t._PARAM_IB_POS_=2,t._PARAM_VB_SIZE_POS_=3,t._PARAM_IB_SIZE_POS_=4,t._PARAM_VB_OFFSET_POS_=5,t._PARAM_IB_OFFSET_POS_=6,t._PARAM_INDEX_ELEMENT_OFFSET_POS_=7,t}(),function(){function t(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}r(t,"laya.html.utils.LayoutLine");var e=t.prototype;return e.updatePos=function(t,e,i,n,r,s,a){var o,h=0;this.elements.length>0&&(o=this.elements[this.elements.length-1],h=o.x+o.width-this.elements[0].x),a=a||this.h;var _=0,l=0/0;"center"===r&&(_=(e-h)/2),"right"===r&&(_=e-h);for(var u=0,c=this.elements.length;c>u;u++){o=this.elements[u];var d=o._getCSSStyle();switch(0!==_&&(o.x+=_),d.valign){case"top":o.y=n;break;case"middle":var f=0;99999!=this.minTextHeight&&(f=this.minTextHeight);var p=(f+a)/2;p=Math.max(p,this.h),l=o instanceof laya.html.dom.HTMLImageElement?n+p-o.height:n+p-o.height,o.y=l;break;case"bottom":o.y=n+(a-o.height)}}},t}()),Ji=function(){function t(){}r(t,"laya.display.cmd.StrokeTextCmd");var e=t.prototype;return e.recover=function(){Ki.recover("StrokeTextCmd",this)},e.run=function(t,e,i){t.strokeWord(this.text,this.x+e,this.y+i,this.font,this.color,this.lineWidth,this.textAlign)},s(0,e,"cmdID",function(){return"StrokeText"}),t.create=function(e,i,n,r,s,a,o){var h=Ki.getItemByClass("StrokeTextCmd",t);return h.text=e,h.x=i,h.y=n,h.font=r,h.color=s,h.lineWidth=a,h.textAlign=o,h},t.ID="StrokeText",t}(),tn=function(){function t(){this.reset()}r(t,"laya.utils.HTMLChar");var e=t.prototype;return e.setData=function(e,i,n,r){return this.char=e,this.charNum=e.charCodeAt(0),this.x=this.y=0,this.width=i,this.height=n,this.style=r,this.isWord=!t._isWordRegExp.test(e),this},e.reset=function(){return this.x=this.y=this.width=this.height=0,this.isWord=!1,this.char=null,this.charNum=0,this.style=null,this},e.recover=function(){Ki.recover("HTMLChar",this.reset())},e._isChar=function(){return!0},e._getCSSStyle=function(){return this.style},t.create=function(){return Ki.getItemByClass("HTMLChar",t)},t._isWordRegExp=new RegExp("[\\w.]",""),t}(),en=function(t){function e(){this._bits=0,this._parent=null,this.name="",this.destroyed=!1,this._conchData=null,this._components=null,this._scene=null,e.__super.call(this),this._children=e.ARRAY_EMPTY,this.createGLBuffer()}r(e,"laya.display.Node",t);var n=e.prototype;return n.createGLBuffer=function(){},n._setBit=function(t,e){if(16===t){var i=this._getBit(t);i!=e&&this._updateDisplayedInstage()}e?this._bits|=t:this._bits&=~t},n._getBit=function(t){return 0!=(this._bits&t)},n._setUpNoticeChain=function(){this._getBit(16)&&this._setBitUp(16)},n._setBitUp=function(t){var e=this;for(e._setBit(t,!0),e=e._parent;e;){if(e._getBit(t))return;e._setBit(t,!0),e=e._parent}},n.on=function(t,e,i,n){return("display"===t||"undisplay"===t)&&(this._getBit(16)||this._setBitUp(16)),this._createListener(t,e,i,n,!1)},n.once=function(t,e,i,n){return("display"===t||"undisplay"===t)&&(this._getBit(16)||this._setBitUp(16)),this._createListener(t,e,i,n,!0)},n.destroy=function(t){void 0===t&&(t=!0),this.destroyed=!0,this._destroyAllComponent(),this._parent&&this._parent.removeChild(this),this._children&&(t?this.destroyChildren():this.removeChildren()),this.onDestroy(),this._children=null,this.offAll()},n.onDestroy=function(){},n.destroyChildren=function(){if(this._children)for(var t=0,e=this._children.length;e>t;t++)this._children[0].destroy(!0)},n.addChild=function(t){if(!t||this.destroyed||t===this)return t;if(t._zOrder&&this._setBit(32,!0),t._parent===this){var i=this.getChildIndex(t);i!==this._children.length-1&&(this._children.splice(i,1),this._children.push(t),this._childChanged())}else t._parent&&t._parent.removeChild(t),this._children===e.ARRAY_EMPTY&&(this._children=[]),this._children.push(t),t._setParent(this),this._childChanged();return t},n.addChildren=function(){for(var t=arguments,e=0,i=t.length;i>e;)this.addChild(t[e++])},n.addChildAt=function(t,i){if(!t||this.destroyed||t===this)return t;if(t._zOrder&&this._setBit(32,!0),i>=0&&i<=this._children.length){if(t._parent===this){var n=this.getChildIndex(t);this._children.splice(n,1),this._children.splice(i,0,t),this._childChanged()}else t._parent&&t._parent.removeChild(t),this._children===e.ARRAY_EMPTY&&(this._children=[]),this._children.splice(i,0,t),t._setParent(this);return t}throw new Error("appendChildAt:The index is out of bounds")},n.getChildIndex=function(t){return this._children.indexOf(t)},n.getChildByName=function(t){var e=this._children;if(e)for(var i=0,n=e.length;n>i;i++){var r=e[i];if(r.name===t)return r}return null},n.getChildAt=function(t){return this._children[t]||null},n.setChildIndex=function(t,e){var i=this._children;if(0>e||e>=i.length)throw new Error("setChildIndex:The index is out of bounds.");var n=this.getChildIndex(t);if(0>n)throw new Error("setChildIndex:node is must child of this object.");return i.splice(n,1),i.splice(e,0,t),this._childChanged(),t},n._childChanged=function(){},n.removeChild=function(t){if(!this._children)return t;var e=this._children.indexOf(t);return this.removeChildAt(e)},n.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},n.removeChildByName=function(t){var e=this.getChildByName(t);return e&&this.removeChild(e),e},n.removeChildAt=function(t){var e=this.getChildAt(t);return e&&(this._children.splice(t,1),e._setParent(null)),e},n.removeChildren=function(t,i){if(void 0===t&&(t=0),void 0===i&&(i=2147483647),this._children&&this._children.length>0){var n=this._children;if(0===t&&i>=n.length-1){var r=n;this._children=e.ARRAY_EMPTY}else r=n.splice(t,i-t);for(var s=0,a=r.length;a>s;s++)r[s]._setParent(null)}return this},n.replaceChild=function(t,e){var i=this._children.indexOf(e);return i>-1?(this._children.splice(i,1,t),e._setParent(null),t._setParent(this),t):null},n._setParent=function(t){this._parent!==t&&(t?(this._parent=t,this._onAdded(),this.event("added"),this._getBit(16)&&(this._setUpNoticeChain(),t.displayedInStage&&this._displayChild(this,!0)),t._childChanged(this)):(this._onRemoved(),this.event("removed"),this._parent._childChanged(),this._getBit(16)&&this._displayChild(this,!1),this._parent=t))},n._updateDisplayedInstage=function(){var t;t=this;for(var e=i.stage,n=!1;t;){if(t._getBit(16)){n=t._getBit(128);break}if(t===e||t._getBit(128)){n=!0;break}t=t._parent}this._setBit(128,n)},n._setDisplay=function(t){this._getBit(128)!==t&&(this._setBit(128,t),t?this.event("display"):this.event("undisplay"))},n._displayChild=function(t,e){var i=t._children;if(i)for(var n=0,r=i.length;r>n;n++){var s=i[n];s._getBit(16)&&(s._children.length>0?this._displayChild(s,e):s._setDisplay(e))}t._setDisplay(e)},n.contains=function(t){if(t===this)return!0;for(;t;){if(t._parent===this)return!0;t=t._parent}return!1},n.timerLoop=function(t,e,n,r,s,a){void 0===s&&(s=!0),void 0===a&&(a=!1);var o=this.scene?this.scene.timer:i.timer;o.loop(t,e,n,r,s,a)},n.timerOnce=function(t,e,n,r,s){void 0===s&&(s=!0);var a=this.scene?this.scene.timer:i.timer;a._create(!1,!1,t,e,n,r,s)},n.frameLoop=function(t,e,n,r,s){void 0===s&&(s=!0);var a=this.scene?this.scene.timer:i.timer;a._create(!0,!0,t,e,n,r,s)},n.frameOnce=function(t,e,n,r,s){void 0===s&&(s=!0);var a=this.scene?this.scene.timer:i.timer;a._create(!0,!1,t,e,n,r,s)},n.clearTimer=function(t,e){var n=this.scene?this.scene.timer:i.timer;n.clear(t,e)},n.callLater=function(t,e){var n=this.scene?this.scene.timer:i.timer;n.callLater(this,t,e)},n.runCallLater=function(t){var e=this.scene?this.scene.timer:i.timer;e.runCallLater(this,t)},n._onActive=function(){},n._onInActive=function(){},n._onActiveInScene=function(){},n._onInActiveInScene=function(){},n._parse=function(){},n._setBelongScene=function(t){if(!this._scene){if(this._scene=t,this._components)for(var e=0,i=this._components.length;i>e;e++)this._components[e]._setActiveInScene(!0);for(this._onActiveInScene(),e=0,i=this._children.length;i>e;e++)this._children[e]._setBelongScene(t)}},n._setUnBelongScene=function(){if(this._scene!==this){if(this._onInActiveInScene(),this._components)for(var t=0,e=this._components.length;e>t;t++)this._components[t]._setActiveInScene(!1);for(this._scene=null,t=0,e=this._children.length;e>t;t++)this._children[t]._setUnBelongScene()}},n._activeHierarchy=function(){if(this._setBit(2,!0),this._components)for(var t=0,e=this._components.length;e>t;t++)this._components[t]._setActive(!0);for(this._onActive(),t=0,e=this._children.length;e>t;t++){var i=this._children[t];!i._getBit(1)&&i._activeHierarchy()}this._getBit(4)||(this._setBit(4,!0),this.onAwake()),this.onEnable()},n.onAwake=function(){},n.onEnable=function(){},n._inActiveHierarchy=function(){if(this._onInActive(),this._components)for(var t=0,e=this._components.length;e>t;t++)this._components[t]._setActive(!1);for(this._setBit(2,!1),t=0,e=this._children.length;e>t;t++){var i=this._children[t];!i._getBit(1)&&i._inActiveHierarchy()}this.onDisable()},n.onDisable=function(){},n._onAdded=function(){var t=this._parent.scene;t&&this._setBelongScene(t),this._parent.activeInHierarchy&&this.active&&this._activeHierarchy()},n._onRemoved=function(){this._parent.activeInHierarchy&&this.active&&this._inActiveHierarchy(),this._parent.scene&&this._setUnBelongScene()},n._addComponentInstance=function(t){this._components=this._components||[],this._components.push(t),t.owner=this,t._onAdded(),this.activeInHierarchy&&t._setActive(!0),this._scene&&t._setActiveInScene(!0)},n._destroyComponent=function(t){if(this._components)for(var e=0,i=this._components.length;i>e;e++){var n=this._components[e];if(n===t){n._destroy(),this._components.splice(e,1);break}}},n._destroyAllComponent=function(){if(this._components){for(var t=0,e=this._components.length;e>t;t++){var i=this._components[t];i._destroy()}this._components.length=0}},n._cloneTo=function(t){var e=t;if(this._components)for(var i=0,n=this._components.length;n>i;i++){var r=e.addComponent(this._components[i].constructor);this._components[i]._cloneTo(r)}},n.addComponentIntance=function(t){if(t.owner)throw"Node:the component has belong to other node.";if(t.isSingleton&&this.getComponent(t.constructor))throw"Node:the component is singleton,can't add the second one.";return this._addComponentInstance(t),t},n.addComponent=function(t){var e=Ki.createByClass(t);if(e._destroyed=!1,e.isSingleton&&this.getComponent(t))throw"无法实例"+t+"组件，"+t+"组件已存在！";return this._addComponentInstance(e),e},n.getComponent=function(t){if(this._components)for(var e=0,n=this._components.length;n>e;e++){var r=this._components[e];if(i.__typeof(r,t))return r}return null},n.getComponents=function(t){var e;if(this._components)for(var n=0,r=this._components.length;r>n;n++){var s=this._components[n];i.__typeof(s,t)&&(e=e||[],e.push(s))}return e},s(0,n,"numChildren",function(){return this._children.length}),s(0,n,"parent",function(){return this._parent}),s(0,n,"activeInHierarchy",function(){return this._getBit(2)}),s(0,n,"active",function(){return!this._getBit(8)&&!this._getBit(1)},function(t){t=!!t,!this._getBit(1)!==t&&(this._setBit(1,!t),this._parent&&this._parent.activeInHierarchy&&(t?this._activeHierarchy():this._inActiveHierarchy()))}),s(0,n,"displayedInStage",function(){return this._getBit(16)?this._getBit(128):(this._setBitUp(16),this._getBit(128))}),s(0,n,"scene",function(){return this._scene}),s(0,n,"timer",function(){return this.scene?this.scene.timer:i.timer}),e.ARRAY_EMPTY=[],e}(_),nn=function(t){function e(){e.__super.call(this)}r(e,"laya.components.Script",t);var n=e.prototype;return n._onAwake=function(){this.onAwake(),this.onStart!==laya.components.Script.prototype.onStart&&i.startTimer.callLater(this,this.onStart)},n._onEnable=function(){var t=laya.components.Script.prototype;this.onTriggerEnter!==t.onTriggerEnter&&this.owner.on("triggerenter",this,this.onTriggerEnter),this.onTriggerStay!==t.onTriggerStay&&this.owner.on("triggerstay",this,this.onTriggerStay),this.onTriggerExit!==t.onTriggerExit&&this.owner.on("triggerexit",this,this.onTriggerExit),this.onMouseDown!==t.onMouseDown&&this.owner.on("mousedown",this,this.onMouseDown),this.onMouseUp!==t.onMouseUp&&this.owner.on("mouseup",this,this.onMouseUp),this.onClick!==t.onClick&&this.owner.on("click",this,this.onClick),this.onStageMouseDown!==t.onStageMouseDown&&i.stage.on("mousedown",this,this.onStageMouseDown),this.onStageMouseUp!==t.onStageMouseUp&&i.stage.on("mouseup",this,this.onStageMouseUp),this.onStageClick!==t.onStageClick&&i.stage.on("click",this,this.onStageClick),this.onStageMouseMove!==t.onStageMouseMove&&i.stage.on("mousemove",this,this.onStageMouseMove),this.onDoubleClick!==t.onDoubleClick&&this.owner.on("doubleclick",this,this.onDoubleClick),this.onRightClick!==t.onRightClick&&this.owner.on("rightclick",this,this.onRightClick),this.onMouseMove!==t.onMouseMove&&this.owner.on("mousemove",this,this.onMouseMove),this.onMouseOver!==t.onMouseOver&&this.owner.on("mouseover",this,this.onMouseOver),this.onMouseOut!==t.onMouseOut&&this.owner.on("mouseout",this,this.onMouseOut),this.onKeyDown!==t.onKeyDown&&i.stage.on("keydown",this,this.onKeyDown),this.onKeyPress!==t.onKeyPress&&i.stage.on("keypress",this,this.onKeyPress),this.onKeyUp!==t.onKeyUp&&i.stage.on("keyup",this,this.onKeyUp),this.onUpdate!==t.onUpdate&&i.updateTimer.frameLoop(1,this,this.onUpdate),this.onLateUpdate!==t.onLateUpdate&&i.lateTimer.frameLoop(1,this,this.onLateUpdate),this.onPreRender!==t.onPreRender&&i.lateTimer.frameLoop(1,this,this.onPreRender),this.onEnable()},n._onDisable=function(){this.owner.offAllCaller(this),i.stage.offAllCaller(this),i.startTimer.clearAll(this),i.updateTimer.clearAll(this),i.lateTimer.clearAll(this),this.onDisable()},n._onDestroy=function(){this.onDestroy()},n.onAwake=function(){},n.onEnable=function(){},n.onStart=function(){},n.onTriggerEnter=function(){},n.onTriggerStay=function(){},n.onTriggerExit=function(){},n.onMouseDown=function(){},n.onMouseUp=function(){},n.onClick=function(){},n.onStageMouseDown=function(){},n.onStageMouseUp=function(){},n.onStageClick=function(){},n.onStageMouseMove=function(){},n.onDoubleClick=function(){},n.onRightClick=function(){},n.onMouseMove=function(){},n.onMouseOver=function(){},n.onMouseOut=function(){},n.onKeyDown=function(){},n.onKeyPress=function(){},n.onKeyUp=function(){},n.onUpdate=function(){},n.onLateUpdate=function(){},n.onPreRender=function(){},n.onPostRender=function(){},n.onDisable=function(){},n.onDestroy=function(){},s(0,n,"isSingleton",function(){return!1}),e}(u),rn=function(t){function e(){e.__super.call(this)}var i;return r(e,"eventUtil.EventCenter",t),s(1,e,"instance",function(){return null==e._eventCenter&&(e._eventCenter=new e(new i)),e._eventCenter},laya.events.EventDispatcher._$SET_instance),e.LOGIN_SUCESS="LOGIN_SUCESS",e.SELECT_FOLDER="SELECT_FOLDER",e.UPDATE_FILE_LIST="UPDATE_FILE_LIST",e.SELECT_PIC_ORDER="SELECT_PIC_ORDER",e.SELECT_ORDER_ADDRESS="SELECT_ORDER_ADDRESS",e.ADD_PIC_FOR_ORDER="ADD_PIC_FOR_ORDER",e.DELETE_PIC_ORDER="DELETE_PIC_ORDER",e.ADJUST_PIC_ORDER_TECH="ADJUST_PIC_ORDER_TECH",e.UPDATE_LOADING_PROGRESS="UPDATE_LOADING_PROGRESS",e._eventCenter=null,e.__init$=function(){i=function(){function t(){}return r(t,""),t}()},e}(_),sn=function(t){function e(){e.__super.call(this),this._id=++e._uniqueIDCounter,this._destroyed=!1,this._referenceCount=0,e._idResourcesMap[this.id]=this,this._released=!0,this.lock=!1,this._gpuMemory=0,Wi.currentResourceManager&&Wi.currentResourceManager.addResource(this)}r(e,"laya.resource.Resource",t);var n=e.prototype;return i.imps(n,{"laya.resource.ICreateResource":!0,"laya.resource.IDestroy":!0}),n._setCPUMemory=function(t){t-this._cpuMemory;this._cpuMemory=t},n._setGPUMemory=function(t){var e=t-this._gpuMemory;this._gpuMemory=t,this.resourceManager&&this.resourceManager.addSize(e)},n._setUrl=function(t){if(this._url!==t){var i;this._url&&(i=e._urlResourcesMap[this._url],i.splice(i.indexOf(this),1),0===i.length&&delete e._urlResourcesMap[this._url]),t&&(i=e._urlResourcesMap[t],i||(e._urlResourcesMap[t]=i=[]),i.push(this)),this._url=t}},n._getGroup=function(){return this._group},n._setGroup=function(t){if(this._group!==t){var i;this._group&&(i=e._groupResourcesMap[this._group],i.splice(i.indexOf(this),1),0===i.length&&delete e._groupResourcesMap[this._group]),t&&(i=e._groupResourcesMap[t],i||(e._groupResourcesMap[t]=i=[]),i.push(this)),this._group=t}},n._addReference=function(t){void 0===t&&(t=1),this._referenceCount+=t},n._removeReference=function(t){void 0===t&&(t=1),this._referenceCount-=t},n._clearReference=function(){this._referenceCount=0},n._completeLoad=function(){this._released=!1},n._recoverResource=function(){},n._disposeResource=function(){},n._activeResource=function(){this._released=!1},n._onAsynLoaded=function(){throw new Error("Resource: must override this function!")},n.releaseResource=function(t){return void 0===t&&(t=!1),!t&&this.lock?!1:!this._released||t?(this._disposeResource(),this._released=!0,!0):!1},n.destroy=function(){if(!this._destroyed){null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete e._idResourcesMap[this.id];var t;if(this._url){t=e._urlResourcesMap[this._url],t&&(t.splice(t.indexOf(this),1),0===t.length&&delete e._urlResourcesMap[this.url]);var i=hn.getRes(this._url);i==this&&delete hn.loadedMap[this._url],Yi.cancelLoadByUrl(this._url)}this._group&&(t=e._groupResourcesMap[this._group],t.splice(t.indexOf(this),1),0===t.length&&delete e._groupResourcesMap[this.url])}},s(0,n,"id",function(){return this._id}),s(0,n,"released",function(){return this._released}),s(0,n,"url",function(){return this._url}),s(0,n,"gpuMemory",function(){return this._gpuMemory}),s(0,n,"group",function(){return this._getGroup()},function(t){this._setGroup(t)}),s(0,n,"destroyed",function(){return this._destroyed}),s(0,n,"resourceManager",function(){return this._resourceManager}),s(0,n,"cpuMemory",function(){return this._cpuMemory}),s(0,n,"referenceCount",function(){return this._referenceCount}),e.getResourceByID=function(t){return e._idResourcesMap[t]},e.getResourceByURL=function(t,i){return void 0===i&&(i=0),e._urlResourcesMap[t][i]},e.destroyUnusedResources=function(t){var i;if(t){var n=e._groupResourcesMap[t];if(n)for(var r=n.slice(),s=0,a=r.length;a>s;s++)i=r[s],i.lock||0!==i._referenceCount||i.destroy()}else for(var o in e._idResourcesMap)i=e._idResourcesMap[o],i.lock||0!==i._referenceCount||i.destroy()},e._uniqueIDCounter=0,e._idResourcesMap={},e._urlResourcesMap={},e._groupResourcesMap={},e}(_),an=function(t){function e(){this.url=null,this.loops=0,this.startTime=0/0,this.isStopped=!1,this.completeHandler=null,e.__super.call(this)}r(e,"laya.media.SoundChannel",t);var i=e.prototype;return i.play=function(){},i.stop=function(){},i.pause=function(){},i.resume=function(){},i.__runComplete=function(t){t&&t.run()},s(0,i,"volume",function(){return 1},function(){}),s(0,i,"position",function(){return 0}),s(0,i,"duration",function(){return 0}),e}(_),on=function(t){function e(t,i,n,r){this.uvrect=[0,0,1,1],this._w=0,this._h=0,this._destroyed=!1,this._referenceCount=0,this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this.scaleRate=1,e.__super.call(this),void 0===n&&(n=0),void 0===r&&(r=0),this.setTo(t,i,n,r)}r(e,"laya.resource.Texture",t);var n=e.prototype;return n._addReference=function(){this._bitmap&&this._bitmap._addReference(),this._referenceCount++},n._removeReference=function(){this._bitmap&&this._bitmap._removeReference(),this._referenceCount--},n._getSource=function(){return this._destroyed||!this._bitmap?null:(this.recoverBitmap(),this._bitmap.destroyed?null:this.bitmap._getSource())},n._onLoaded=function(t,i){if(i)if(i==this);else if(i instanceof laya.resource.Texture){var n=i;e._create(i,0,0,n.width,n.height,0,0,n.sourceWidth,n.sourceHeight,this)}else this.bitmap=i,this.sourceWidth=this._w=i.width,this.sourceHeight=this._h=i.height;else;t&&t.run(),this.event("ready",this)},n.getIsReady=function(){return this._destroyed?!1:this._bitmap?!0:!1},n.setTo=function(t,i,n,r){if(void 0===n&&(n=0),void 0===r&&(r=0),this.bitmap=t,this.sourceWidth=n,this.sourceHeight=r,t){this._w=t.width,this._h=t.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h}this.uv=i||e.DEF_UV},n.load=function(t,e){this._destroyed||i.loader.load(t,l.create(this,this._onLoaded,[e]),null,"htmlimage",1,!1,null,!0)},n.getPixels=function(t,e,i,n){if(wi.isWebGL)return Yi.getTexturePixels(this,t,e,i,n);if(wi.isConchApp)return this._nativeObj.getImageData(t,e,i,n);var r=this.width,s=this.height;if(t+i>r&&(i-=t+i-r),e+n>s&&(n-=e+n-s),0>=i||0>=n)return null;Me.canvas.size(i,n),Me.canvas.clear(),Me.context.drawImage(this.bitmap._source,t,e,i,n,0,0,i,n);var a=Me.context.getImageData(0,0,i,n);return a.data},n.recoverBitmap=function(){this._destroyed||this._bitmap&&!this._bitmap.destroyed||!this.url||this.load(this.url)},n.disposeBitmap=function(){!this._destroyed&&this._bitmap&&this._bitmap.destroy()},n.destroy=function(){this._destroyed||(this._destroyed=!0,this.bitmap&&(this.bitmap._removeReference(this._referenceCount),this.bitmap=null),this.url&&this===i.loader.getRes(this.url)&&i.loader.clearRes(this.url))},s(0,n,"height",function(){return this._h?this._h:this.bitmap?this.uv&&this.uv!==e.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height:0},function(t){this._h=t,this.sourceHeight||(this.sourceHeight=t)}),s(0,n,"uv",function(){return this._uv},function(t){this.uvrect[0]=Math.min(t[0],t[2],t[4],t[6]),this.uvrect[1]=Math.min(t[1],t[3],t[5],t[7]),this.uvrect[2]=Math.max(t[0],t[2],t[4],t[6])-this.uvrect[0],this.uvrect[3]=Math.max(t[1],t[3],t[5],t[7])-this.uvrect[1],this._uv=t}),s(0,n,"width",function(){return this._w?this._w:this.bitmap?this.uv&&this.uv!==e.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width:0},function(t){this._w=t,this.sourceWidth||(this.sourceWidth=t)}),s(0,n,"bitmap",function(){return this._bitmap},function(t){this._bitmap&&this._bitmap._removeReference(this._referenceCount),this._bitmap=t,t&&t._addReference(this._referenceCount)}),s(0,n,"destroyed",function(){return this._destroyed}),e.moveUV=function(t,e,i){for(var n=0;8>n;n+=2)i[n]+=t,i[n+1]+=e;return i},e.create=function(t,i,n,r,s,a,o,h,_){return void 0===a&&(a=0),void 0===o&&(o=0),void 0===h&&(h=0),void 0===_&&(_=0),e._create(t,i,n,r,s,a,o,h,_)},e._create=function(t,i,n,r,s,a,o,h,_,l){void 0===a&&(a=0),void 0===o&&(o=0),void 0===h&&(h=0),void 0===_&&(_=0);var u=t instanceof laya.resource.Texture,c=u?t.uv:e.DEF_UV,d=u?t.bitmap:t;d.width&&i+r>d.width&&(r=d.width-i),d.height&&n+s>d.height&&(s=d.height-n);var f;l?(f=l,f.setTo(d,null,h||r,_||s)):f=new e(d,null,h||r,_||s),f.width=r,f.height=s,f.offsetX=a,f.offsetY=o;var p=1/d.width,m=1/d.height;i*=p,n*=m,r*=p,s*=m;var g=f.uv[0],v=f.uv[1],y=f.uv[4],E=f.uv[5],A=y-g,C=E-v,S=e.moveUV(c[0],c[1],[i,n,i+r,n,i+r,n+s,i,n+s]);f.uv=[g+S[0]*A,v+S[1]*C,y-(1-S[2])*A,v+S[3]*C,y-(1-S[4])*A,E-(1-S[5])*C,g+S[6]*A,E-(1-S[7])*C];var D=d.scaleRate;return D&&1!=D?(f.sourceWidth/=D,f.sourceHeight/=D,f.width/=D,f.height/=D,f.scaleRate=D):f.scaleRate=1,f},e.createFromTexture=function(t,i,n,r,s){var a=t.scaleRate;1!=a&&(i*=a,n*=a,r*=a,s*=a);var o=Ge.TEMP.setTo(i-t.offsetX,n-t.offsetY,r,s),h=o.intersection(e._rect1.setTo(0,0,t.width,t.height),e._rect2);if(!h)return null;var _=e.create(t,h.x,h.y,h.width,h.height,h.x-o.x,h.y-o.y,r,s);return _},e.DEF_UV=[0,0,1,0,1,1,0,1],e.NO_UV=[0,0,0,0,0,0,0,0],e.INV_UV=[0,1,1,1,1,0,0,0],e._rect1=new Ge,e._rect2=new Ge,e}(_),hn=function(t){function e(){this._data=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._useWorkerLoader=!1,this._customParse=!1,this._constructParams=null,this._propertyParams=null,this._createCache=!1,e.__super.call(this)}r(e,"laya.net.Loader",t);var n=e.prototype;return n.load=function(t,i,n,r,s,a){if(void 0===n&&(n=!0),void 0===s&&(s=!1),void 0===a&&(a=!1),!t)return this.onLoaded(null),void 0;if(e.setGroup(t,"666"),this._url=t,0===t.indexOf("data:image")?i="image":t=Pi.formatURL(t),this._type=i||(i=e.getTypeFromUrl(t)),this._cache=n,this._useWorkerLoader=a,this._data=null,a&&mn.enableWorkerLoader(),!s&&e.loadedMap[t])return this._data=e.loadedMap[t],this.event("progress",1),this.event("complete",this._data),void 0;if(r&&e.setGroup(t,r),null!=e.parserMap[i])return this._customParse=!0,e.parserMap[i]instanceof laya.utils.Handler?e.parserMap[i].runWith(this):e.parserMap[i].call(null,this),void 0;if("image"===i||"htmlimage"===i||"nativeimage"===i)return this._loadImage(t);if("sound"===i)return this._loadSound(t);if("ttf"===i)return this._loadTTF(t);var o;switch(i){case"atlas":case"prefab":case"plf":o="json";break;case"font":o="xml";break;default:o=i}e.preLoadedMap[t]?this.onLoaded(e.preLoadedMap[t]):(this._http||(this._http=new cn,this._http.on("progress",this,this.onProgress),this._http.on("error",this,this.onError),this._http.on("complete",this,this.onLoaded)),this._http.send(t,null,"get",o))},n._loadTTF=function(t){t=Pi.formatURL(t);var e=new V;e.complete=l.create(this,this.onLoaded),e.load(t)},n._loadImage=function(t){function i(){var i=n;i&&(i.onload=null,i.onerror=null,delete e._imgCache[t])}t=Pi.formatURL(t);var n,r=this,s=function(){i(),r.event("error","Load image failed")};if("nativeimage"===this._type){var a=function(){i(),r.onLoaded(n)};n=new Me.window.Image,n.crossOrigin="",n.onload=a,n.onerror=s,n.src=t,e._imgCache[t]=n}else{var o=new Me.window.Image;a=function(){n=Er.create(o.width,o.height),n.loadImageSource(o,!0),n._setUrl(t),i(),r.onLoaded(n)},o.crossOrigin="",o.onload=a,o.onerror=s,o.src=t,n=o,e._imgCache[t]=o}},n._loadSound=function(t){function e(){n(),s.onLoaded(r)}function i(){n(),r.dispose(),s.event("error","Load sound failed")}function n(){r.offAll()}var r=new Vi._soundClass,s=this;r.on("complete",this,e),r.on("error",this,i),r.load(t)},n.onProgress=function(t){"atlas"===this._type?this.event("progress",.3*t):this.event("progress",t)},n.onError=function(t){this.event("error",t)},n.onLoaded=function(t){var i=this._type;if("plf"==i)this.parsePLFData(t),this.complete(t);else if("image"===i){var n=new on(t);n.url=this._url,this.complete(n)}else if("sound"===i||"htmlimage"===i||"nativeimage"===i)this.complete(t);else if("atlas"===i){if(!t.url&&!t._setContext){if(!this._data){if(this._data=t,t.meta&&t.meta.image)for(var r=t.meta.image.split(","),s=this._url.indexOf("/")>=0?"/":"\\",a=this._url.lastIndexOf(s),o=a>=0?this._url.substr(0,a+1):"",h=0,_=r.length;_>h;h++)r[h]=o+r[h];else r=[this._url.replace(".json",".png")];r.reverse(),t.toLoads=r,t.pics=[]}return this.event("progress",.3+1/r.length*.6),this._loadImage(r.pop())}if(this._data.pics.push(t),this._data.toLoads.length>0)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var l=this._data.frames,u=this._url.split("?")[0],c=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:u.substring(0,u.lastIndexOf("."))+"/",d=this._data.pics,f=Pi.formatURL(this._url),p=e.atlasMap[f]||(e.atlasMap[f]=[]);p.dir=c;var m=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale){m=parseFloat(this._data.meta.scale);for(var g in l){var v=l[g],y=d[v.frame.idx?v.frame.idx:0],E=Pi.formatURL(c+g);y.scaleRate=m;var A;A=on._create(y,v.frame.x,v.frame.y,v.frame.w,v.frame.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.sourceSize.w,v.sourceSize.h,laya.net.Loader.getRes(E)),e.cacheRes(E,A),A.url=E,p.push(E)}}else for(g in l)v=l[g],y=d[v.frame.idx?v.frame.idx:0],E=Pi.formatURL(c+g),A=on._create(y,v.frame.x,v.frame.y,v.frame.w,v.frame.h,v.spriteSourceSize.x,v.spriteSourceSize.y,v.sourceSize.w,v.sourceSize.h,laya.net.Loader.getRes(E)),e.cacheRes(E,A),A.url=E,p.push(E);delete this._data.pics,this.complete(this._data)}else if("font"===i){if(!t._source)return this._data=t,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var C=new J;C.parseFont(this._data,new on(t));var S=this._url.split(".fnt")[0].split("/"),D=S[S.length-1];ur.registerBitmapFont(D,C),this._data=C,this.complete(this._data)}else if("prefab"===i){var R=new Qe;R.json=t,this.complete(R)}else this.complete(t)},n.parsePLFData=function(t){var i,n,r;for(i in t)switch(r=t[i],i){case"json":case"text":for(n in r)e.preLoadedMap[Pi.formatURL(n)]=r[n];break;default:for(n in r)e.preLoadedMap[Pi.formatURL(n)]=r[n]}},n.complete=function(t){this._data=t,this._customParse?this.event("loaded",t instanceof Array?[t]:t):(e._loaders.push(this),e._isWorking||e.checkNext())},n.endLoad=function(t){t&&(this._data=t),this._cache&&e.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)
},s(0,n,"url",function(){return this._url}),s(0,n,"data",function(){return this._data}),s(0,n,"cache",function(){return this._cache}),s(0,n,"type",function(){return this._type}),e.getTypeFromUrl=function(t){var i=Q.getFileExtension(t);return i?e.typeMap[i]:(console.warn("Not recognize the resources suffix",t),"text")},e.checkNext=function(){e._isWorking=!0;for(var t=Me.now(),n=t;e._startIndex<e._loaders.length;)if(n=Me.now(),e._loaders[e._startIndex].endLoad(),e._startIndex++,Me.now()-t>e.maxTimeOut)return console.warn("loader callback cost a long time:"+(Me.now()-t)+" url="+e._loaders[e._startIndex-1].url),i.systemTimer.frameOnce(1,null,e.checkNext),void 0;e._loaders.length=0,e._startIndex=0,e._isWorking=!1},e.clearRes=function(t){t=Pi.formatURL(t);var i=e.getAtlas(t);if(i){for(var n=0,r=i.length;r>n;n++){var s=i[n],a=e.getRes(s);delete e.loadedMap[s],a&&a.destroy()}i.length=0,delete e.atlasMap[t],delete e.loadedMap[t]}else{var o=e.loadedMap[t];o&&(delete e.loadedMap[t],o instanceof laya.resource.Texture&&o.bitmap&&o.destroy())}},e.clearTextureRes=function(t){t=Pi.formatURL(t);var e=laya.net.Loader.getAtlas(t),i=e&&e.length>0?laya.net.Loader.getRes(e[0]):laya.net.Loader.getRes(t);i instanceof laya.resource.Texture&&i.disposeBitmap()},e.getRes=function(t){return e.loadedMap[Pi.formatURL(t)]},e.getAtlas=function(t){return e.atlasMap[Pi.formatURL(t)]},e.cacheRes=function(t,i){t=Pi.formatURL(t),null!=e.loadedMap[t]?console.warn("Resources already exist,is repeated loading:",t):e.loadedMap[t]=i},e.setGroup=function(t,i){e.groupMap[i]||(e.groupMap[i]=[]),e.groupMap[i].push(t)},e.clearResByGroup=function(t){if(e.groupMap[t]){var i=e.groupMap[t],n=0,r=i.length;for(n=0;r>n;n++)e.clearRes(i[n]);i.length=0}},e.TEXT="text",e.JSON="json",e.PREFAB="prefab",e.XML="xml",e.BUFFER="arraybuffer",e.IMAGE="image",e.SOUND="sound",e.ATLAS="atlas",e.FONT="font",e.TTF="ttf",e.PLF="plf",e.HIERARCHY="HIERARCHY",e.MESH="MESH",e.MATERIAL="MATERIAL",e.TEXTURE2D="TEXTURE2D",e.TEXTURECUBE="TEXTURECUBE",e.ANIMATIONCLIP="ANIMATIONCLIP",e.AVATAR="AVATAR",e.TERRAINHEIGHTDATA="TERRAINHEIGHTDATA",e.TERRAINRES="TERRAIN",e.typeMap={ttf:"ttf",png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",prefab:"prefab",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",plf:"plf",scene:"json",ani:"json",sk:"arraybuffer"},e.parserMap={},e.maxTimeOut=100,e.groupMap={},e.loadedMap={},e.atlasMap={},e.preLoadedMap={},e._imgCache={},e._loaders=[],e._isWorking=!1,e._startIndex=0,e}(_),_n=function(t){function e(){if(this._drawTriUseAbsMatrix=!1,this._id=++e._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._renderCount=0,this._isConvexCmd=!0,this._submits=null,this._curSubmit=null,this.meshlist=[],this._clipInfoID=0,this._lastMatScaleX=1,this._lastMatScaleY=1,this._lastMat_a=1,this._lastMat_b=0,this._lastMat_c=0,this._lastMat_d=1,this._nBlendType=0,this._saveMark=null,this._drawTextureUseColor=!1,this._italicDeg=0,this._lastTex=null,this._fillColor=0,this._flushCnt=0,this.drawTexAlign=!1,this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,e.__super.call(this),this._width=99999999,this._height=99999999,this._submitKey=new He,this._transedPoints=new Array(8),this._temp4Points=new Array(8),this._clipRect=e.MAXCLIPRECT,this._globalClipMatrix=new ui(99999999,0,0,99999999,0,0),this._shader2D=new Mi,this.mOutPoint,e._contextcount++,!e.defTexture){var t=new Xr(2,2);t.setPixels(new Uint8Array(16)),e.defTexture=new on(t)}this._lastTex=e.defTexture,this.clear()}var a;r(e,"laya.webgl.canvas.WebGLContext2D",t);var _=e.prototype;return _.clearBG=function(t,e,i,n){var r=Ii.mainContext;r.clearColor(t,e,i,n),r.clear(16384)},_._getSubmits=function(){return this._submits},_._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var t=0,e=this._submits._length;e>t;t++)this._submits[t].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path=null,this._save=null;var i=0;for(t=0,i=this.meshlist.length;i>t;t++){var n=this.meshlist[t];n.destroy()}this.meshlist.length=0,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}},_.destroy=function(){--e._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._mesh.destroy()},_.clear=function(){this._submits||(this._other=a.DEFAULT,this._curMat=ui.create(),this._mesh=bn.getAMesh(),this.meshlist.push(this._mesh),this._pathMesh=fn.getAMesh(),this.meshlist.push(this._pathMesh),this._triangleMesh=Rn.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits=[],this._save=[ti.Create(this)],this._save.length=10,this._shader2D=new Mi),this._submitKey.clear(),this._mesh.clearVB(),this._renderCount++,this._drawCount=1,this._other=a.DEFAULT,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=e.MAXCLIPRECT,this._curSubmit=j.RENDERBASE,j.RENDERBASE._ref=16777215,j.RENDERBASE._numEle=0,this._shader2D.fillStyle=this._shader2D.strokeStyle=Oi.DEFAULT;for(var t=0,i=this._submits._length;i>t;t++)this._submits[t].releaseRender();this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},_.size=function(t,e){(this._width!=t||this._height!=e)&&(this._width=t,this._height=e,this._targets&&(this._targets.destroy(),this._targets=new Gr(t,e,1,-1)),wi._context==this&&(Ii.mainContext.viewport(0,0,t,e),ci.width=t,ci.height=e)),0===t&&0===e&&this._releaseMem()},_.getMatScaleX=function(){return this._lastMat_a==this._curMat.a&&this._lastMat_b==this._curMat.b?this._lastMatScaleX:(this._lastMatScaleX=this._curMat.getScaleX(),this._lastMat_a=this._curMat.a,this._lastMat_b=this._curMat.b,this._lastMatScaleX)},_.getMatScaleY=function(){return this._lastMat_c==this._curMat.c&&this._lastMat_d==this._curMat.d?this._lastMatScaleY:(this._lastMatScaleY=this._curMat.getScaleY(),this._lastMat_c=this._curMat.c,this._lastMat_d=this._curMat.d,this._lastMatScaleY)},_.setFillColor=function(t){this._fillColor=t},_.getFillColor=function(){return this._fillColor},_.translate=function(t,e){(0!==t||0!==e)&&(zi.save(this),this._curMat._bTransform?(re.save(this),this._curMat.tx+=t*this._curMat.a+e*this._curMat.c,this._curMat.ty+=t*this._curMat.b+e*this._curMat.d):(this._curMat.tx=t,this._curMat.ty=e))},_.save=function(){this._save[this._save._length++]=ti.Create(this)},_.restore=function(){var t=this._save._length,e=this._nBlendType;if(!(1>t)){for(var i=t-1;i>=0;i--){var n=this._save[i];if(n.restore(this),n.isSaveMark())return this._save._length=i,void 0}e!=this._nBlendType&&(this._curSubmit=j.RENDERBASE)}},_.fillText=function(t,e,i,n,r){this._fillText(t,null,e,i,n,r,null,0,null)},_._fillText=function(t,i,n,r,s,a,o,h,_,l){void 0===l&&(l=0),t?e._charBook.filltext(this,t,n,r,s,a,o,h,_,l):i&&e._charBook.fillWords(this,i,n,r,s,a,o,h)},_._fast_filltext=function(t,i,n,r,s,a,o,h,_){void 0===_&&(_=0),e._charBook._fast_filltext(this,t,null,i,n,r,s,a,o,h,_)},_.fillWords=function(t,e,i,n,r){this._fillText(null,t,e,i,n,r,null,-1,null,0)},_.fillBorderWords=function(t,e,i,n,r,s,a){this._fillBorderText(null,t,e,i,n,r,s,a,null)},_.drawText=function(t,e,i,n,r,s){this._fillText(t,null,e,i,n,o.create(r).strColor,null,-1,s)},_.strokeWord=function(t,e,i,n,r,s,a){this._fillText(t,null,e,i,n,null,o.create(r).strColor,s||1,a)},_.fillBorderText=function(t,e,i,n,r,s,a,h){this._fillBorderText(t,null,e,i,n,o.create(r).strColor,o.create(s).strColor,a,h)},_._fillBorderText=function(t,e,i,n,r,s,a,o,h){this._fillText(t,e,i,n,r,s,a,o||1,h)},_._fillRect=function(t,e,i,n,r){var s=this._curSubmit,a=s&&2===s._key.submitType&&s._key.blendShader===this._submitKey.blendShader;this._mesh.vertNum+4>65535&&(this._mesh=bn.getAMesh(),this.meshlist.push(this._mesh),a=!1),a&&(a=a&&this.isSameClipInfo(s)),this.transformQuad(t,e,i,n,0,this._curMat,this._transedPoints),this.clipedOff(this._transedPoints)||(this._mesh.addQuad(this._transedPoints,on.NO_UV,r,!1),a||(s=this._curSubmit=gn.create(this,this._mesh,di.create(1,0)),this._submits[this._submits._length++]=s,this.copyClipInfo(s,this._globalClipMatrix),s.shaderValue.textureHost=this._lastTex,s._key.copyFrom2(this._submitKey,2,this._lastTex&&this._lastTex.bitmap?this._lastTex.bitmap.id:-1),s._renderType=10016),this._curSubmit._numEle+=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4)},_.fillRect=function(t,e,i,n,r){var s=r?Oi.create(r):this._shader2D.fillStyle,a=this.mixRGBandAlpha(s.toInt());this._fillRect(t,e,i,n,a)},_.fillTexture=function(t,e,n,r,s,a,o){if(!t._getSource())return this.sprite&&i.systemTimer.callLater(this,this._repaintSprite),void 0;var h=this._curSubmit,_=!1;this._mesh.vertNum+4>65535&&(this._mesh=bn.getAMesh(),this.meshlist.push(this._mesh),_=!1);var l=(t.bitmap,!0),u=!0;switch(a){case"repeat":break;case"repeat-x":u=!1;break;case"repeat-y":l=!1;break;case"no-repeat":l=u=!1}var c=this._temp4Points,d=0,f=0,p=0,m=0,g=0,v=0;if(o.x<0?(p=e,d=-o.x%t.width/t.width):p=e+o.x,o.y<0?(m=n,f=-o.y%t.height/t.height):m=n+o.y,g=e+r,v=n+s,!l&&(g=Math.min(g,e+o.x+t.width)),!u&&(v=Math.min(v,n+o.y+t.height)),!(e>g||n>v||p>g||m>v)){var y=(g-e-o.x)/t.width,E=(v-n-o.y)/t.height;if(this.transformQuad(p,m,g-p,v-m,0,this._curMat,this._transedPoints),c[0]=d,c[1]=f,c[2]=y,c[3]=f,c[4]=y,c[5]=E,c[6]=d,c[7]=E,!this.clipedOff(this._transedPoints)){var A=this._mixRGBandAlpha(4294967295,this._shader2D.ALPHA);this._mesh.addQuad(this._transedPoints,c,A,!0);var C=di.create(1,0);C.defines.add(256),C.u_TexRange=t.uvrect,h=this._curSubmit=gn.create(this,this._mesh,C),this._submits[this._submits._length++]=h,this.copyClipInfo(h,this._globalClipMatrix),h.shaderValue.textureHost=t,h._renderType=10016,this._curSubmit._numEle+=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4}this.breakNextMerge()}},_.setColorFilter=function(t){h.save(this,8388608,this,!0),this._colorFiler=t,this._curSubmit=j.RENDERBASE},_.drawTexture=function(t,e,i,n,r){this._drawTextureM(t,e,i,n,r,null,1,null)},_.drawTextures=function(t,e,n,r){if(!t._getSource())return this.sprite&&i.systemTimer.callLater(this,this._repaintSprite),void 0;for(var s=e.length/2,a=0,o=0;s>o;o++)this._inner_drawTexture(t,t.bitmap.id,e[a++]+n,e[a++]+r,0,0,null,null,1)},_._drawTextureAddSubmit=function(t,e){var i=null;i=gn.create(this,this._mesh,di.create(1,0)),this._submits[this._submits._length++]=i,i.shaderValue.textureHost=e,i._key.copyFrom2(this._submitKey,2,t),i._renderType=10016,this._curSubmit=i},_._drawTextureM=function(t,e,n,r,s,a,o,h){return t._getSource()?this._inner_drawTexture(t,t.bitmap.id,e,n,r,s,a,h,o):(this.sprite&&i.systemTimer.callLater(this,this._repaintSprite),!1)},_._drawRenderTexture=function(t,e,i,n,r,s,a,o){return this._inner_drawTexture(t,-1,e,i,n,r,s,o,1)},_.submitDebugger=function(){this._submits[this._submits._length++]=ei.create([],function(){},this)},_.copyClipInfo=function(t,e){var i=t.shaderValue.clipMatDir;i[0]=e.a,i[1]=e.b,i[2]=e.c,i[3]=e.d;var n=t.shaderValue.clipMatPos;n[0]=e.tx,n[1]=e.ty,t.clipInfoID=this._clipInfoID},_.isSameClipInfo=function(t){return t.clipInfoID===this._clipInfoID},_._useNewTex2DSubmit=function(t,e){this._mesh.vertNum+e>65535&&(this._mesh=bn.getAMesh(),this.meshlist.push(this._mesh));var i=gn.create(this,this._mesh,di.create(1,0));this._submits[this._submits._length++]=this._curSubmit=i,i.shaderValue.textureHost=t,this.copyClipInfo(i,this._globalClipMatrix)},_._drawTexRect=function(t,e,i,n,r){this.transformQuad(t,e,i,n,this._italicDeg,this._curMat,this._transedPoints);var s=this._transedPoints;s[0]=s[0]+.5|0,s[1]=s[1]+.5|0,s[2]=s[2]+.5|0,s[3]=s[3]+.5|0,s[4]=s[4]+.5|0,s[5]=s[5]+.5|0,s[6]=s[6]+.5|0,s[7]=s[7]+.5|0,this.clipedOff(this._transedPoints)||(this._mesh.addQuad(this._transedPoints,r,this._fillColor,!0),this._curSubmit._numEle+=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4)},_._inner_drawTexture=function(t,i,n,r,s,a,o,h,_){var l=this._curSubmit._key;if(h=h||t._uv,4===l.submitType&&l.other===i){var u=e._drawTexToDrawTri_Vert;return u[0]=n,u[1]=r,u[2]=n+s,u[3]=r,u[4]=n+s,u[5]=r+a,u[6]=n,u[7]=r+a,this._drawTriUseAbsMatrix=!0,this.drawTriangles(t,0,0,u,h,e._drawTexToDrawTri_Index,o,_,null,"normal"),this._drawTriUseAbsMatrix=!1,!0}this._drawCount++;var c=i>=0&&2===l.submitType&&l.other===i;c&&(c=c&&this.isSameClipInfo(this._curSubmit)),this._lastTex=t;var d=this._mixRGBandAlpha(4294967295,this._shader2D.ALPHA*_);if(this._mesh.vertNum+4>65535&&(this._mesh=bn.getAMesh(),this.meshlist.push(this._mesh),c=!1),this.transformQuad(n,r,s||t.width,a||t.height,this._italicDeg,o||this._curMat,this._transedPoints),this.drawTexAlign){var f=this._transedPoints;f[0]=f[0]+.5|0,f[1]=f[1]+.5|0,f[2]=f[2]+.5|0,f[3]=f[3]+.5|0,f[4]=f[4]+.5|0,f[5]=f[5]+.5|0,f[6]=f[6]+.5|0,f[7]=f[7]+.5|0,this.drawTexAlign=!1}if(!this.clipedOff(this._transedPoints)){if(this._mesh.addQuad(this._transedPoints,h,d,!0),!c){var p=gn.create(this,this._mesh,di.create(1,0));this._submits[this._submits._length++]=this._curSubmit=p,p.shaderValue.textureHost=t,p._key.other=i,this.copyClipInfo(p,this._globalClipMatrix)}return this._curSubmit._numEle+=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4,!0}return!1},_.transform4Points=function(t,e,i){var n=e.tx,r=e.ty;e._bTransform?(i[0]=t[0]*e.a+t[1]*e.c+n,i[1]=t[0]*e.b+t[1]*e.d+r,i[2]=t[2]*e.a+t[3]*e.c+n,i[3]=t[2]*e.b+t[3]*e.d+r,i[4]=t[4]*e.a+t[5]*e.c+n,i[5]=t[4]*e.b+t[5]*e.d+r,i[6]=t[6]*e.a+t[7]*e.c+n,i[7]=t[6]*e.b+t[7]*e.d+r):(i[0]=t[0]+n,i[1]=t[1]+r,i[2]=t[2]+n,i[3]=t[3]+r,i[4]=t[4]+n,i[5]=t[5]+r,i[6]=t[6]+n,i[7]=t[7]+r)},_.clipedOff=function(){return this._clipRect.width<=0||this._clipRect.height<=0?!0:!1},_.transformQuad=function(t,e,i,n,r,s,a){var o=0;0!=r&&(o=Math.tan(r*Math.PI/180)*n);var h=t+i,_=e+n;this._temp4Points[0]=t+o,this._temp4Points[1]=e,this._temp4Points[2]=h+o,this._temp4Points[3]=e,this._temp4Points[4]=h,this._temp4Points[5]=_,this._temp4Points[6]=t,this._temp4Points[7]=_,this.transform4Points(this._temp4Points,s,a)},_.pushRT=function(){this.addRenderObject(ei.create(null,Gr.pushRT,this))},_.popRT=function(){this.addRenderObject(ei.create(null,Gr.popRT,this)),this.breakNextMerge()},_.useRT=function(t){function e(t){if(!t)throw"error useRT";t.start(),t.clear(0,0,0,0)}this.addRenderObject(ei.create([t],e,this)),this.breakNextMerge()},_.RTRestore=function(t){function e(t){t.restore()}this.addRenderObject(ei.create([t],e,this)),this.breakNextMerge()},_.breakNextMerge=function(){this._curSubmit=j.RENDERBASE},_._repaintSprite=function(){this.sprite&&this.sprite.repaint()},_.drawTextureWithTransform=function(t,i,n,r,s,a,o,h,_){if(!a)return this._drawTextureM(t,i+o,n+h,r,s,null,_,null),void 0;var l=this._curMat;e._tmpMatrix.a=a.a,e._tmpMatrix.b=a.b,e._tmpMatrix.c=a.c,e._tmpMatrix.d=a.d,e._tmpMatrix.tx=a.tx+o,e._tmpMatrix.ty=a.ty+h,e._tmpMatrix._bTransform=a._bTransform,a&&l._bTransform?(ui.mul(e._tmpMatrix,l,e._tmpMatrix),a=e._tmpMatrix,a._bTransform=!0):a=e._tmpMatrix,this._drawTextureM(t,i,n,r,s,a,_,null)},_._flushToTarget=function(t,e){ci.worldScissorTest=!1,Ii.mainContext.disable(3089);{var i=ci.worldAlpha,n=ci.worldMatrix4,r=ci.worldMatrix;ci.worldShaderDefines}ci.worldMatrix=ui.EMPTY,ci.restoreTempArray(),ci.worldMatrix4=ci.TEMPMAT4_ARRAY,ci.worldAlpha=1,nr.activeShader=null,e.start(),t._submits._length>0&&e.clear(0,0,0,0),t._curSubmit=j.RENDERBASE,t.flush(),t.clear(),e.restore(),t._curSubmit=j.RENDERBASE,nr.activeShader=null,ci.worldAlpha=i,ci.worldMatrix4=n,ci.worldMatrix=r},_.drawCanvas=function(t,e,i,n,r){var s,a=t.context;if(a._targets)a._submits._length>0&&(s=ei.create([a,a._targets],this._flushToTarget,this),this._submits[this._submits._length++]=s),this._drawRenderTexture(a._targets,e,i,n,r,null,1,Gr.flipyuv),this._curSubmit=j.RENDERBASE;else{t.touches&&t.touches.forEach(function(t){t.touch()}),s=vn.create(t,this._shader2D.ALPHA,this._shader2D.filters),this._submits[this._submits._length++]=s,s._key.clear();var o=s._matrix;this._curMat.copyTo(o);var h=o.tx,_=o.ty;o.tx=o.ty=0,o.transformPoint(Zi.TEMP.setTo(e,i)),o.translate(Zi.TEMP.x+h,Zi.TEMP.y+_),this._curSubmit=j.RENDERBASE}},_.drawTarget=function(t,e,i,n,r,s,a,o,h){void 0===h&&(h=-1),this._drawCount++;this.mixRGBandAlpha(this._drawTextureUseColor?this.fillStyle?this.fillStyle.toInt():0:4294967295);if(this._mesh.vertNum+4>65535&&(this._mesh=bn.getAMesh(),this.meshlist.push(this._mesh)),this.transformQuad(e,i,n,r,0,s||this._curMat,this._transedPoints),!this.clipedOff(this._transedPoints)){this._mesh.addQuad(this._transedPoints,o||on.DEF_UV,4294967295,!0);var _=this._curSubmit=pe.create(this,this._mesh,a,t);return _.blendType=-1==h?this._nBlendType:h,this.copyClipInfo(_,this._globalClipMatrix),_._numEle=6,this._mesh.indexNum+=6,this._mesh.vertNum+=4,this._maxNumEle=Math.max(this._maxNumEle,_._numEle),this._submits[this._submits._length++]=_,this._curSubmit=j.RENDERBASE,!0}return this._curSubmit=j.RENDERBASE,!1},_.drawTriangles=function(t,n,r,s,a,o,h,_,l,u){if(!t._getSource())return this.sprite&&i.systemTimer.callLater(this,this._repaintSprite),void 0;this._drawCount++;var c=null,d=!1;l&&(c=this._colorFiler,this._colorFiler=l,this._curSubmit=j.RENDERBASE,d=c!=l);var f=ue.TOINT[u]||0,p=t.bitmap,m=this._curSubmit._key,g=4===m.submitType&&m.other===p.id&&m.blendShader==f,v=this._mixRGBandAlpha(4294967295,this._shader2D.ALPHA*_),y=s.length/2,E=o.length;if(this._triangleMesh.vertNum+y>65535&&(this._triangleMesh=Rn.getAMesh(),this.meshlist.push(this._triangleMesh),g=!1),!g){var A=this._curSubmit=gn.create(this,this._triangleMesh,di.create(1,0));A.shaderValue.textureHost=t,A._renderType=10016,A._key.blendShader=f,A._blendFn=this._targets?ue.targetFns[f]:ue.fns[f],A._key.submitType=4,A._key.other=p.id,this.copyClipInfo(A,this._globalClipMatrix),this._submits[this._submits._length++]=A}h?(e._tmpMatrix.a=h.a,e._tmpMatrix.b=h.b,e._tmpMatrix.c=h.c,e._tmpMatrix.d=h.d,e._tmpMatrix.tx=h.tx+n,e._tmpMatrix.ty=h.ty+r):(e._tmpMatrix.a=1,e._tmpMatrix.b=0,e._tmpMatrix.c=0,e._tmpMatrix.d=1,e._tmpMatrix.tx=n,e._tmpMatrix.ty=r),this._drawTriUseAbsMatrix||ui.mul(e._tmpMatrix,this._curMat,e._tmpMatrix),this._triangleMesh.addData(s,a,o,e._tmpMatrix,v,this),this._curSubmit._numEle+=E,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),d&&(this._colorFiler=c,this._curSubmit=j.RENDERBASE)},_.transform=function(t,e,i,n,r,s){re.save(this),ui.mul(ui.TEMP.setTo(t,e,i,n,r,s),this._curMat,this._curMat),this._curMat._checkTransform()},_._transformByMatrix=function(t,e,i){t.setTranslate(e,i),ui.mul(t,this._curMat,this._curMat),t.setTranslate(0,0),this._curMat._bTransform=!0},_.setTransformByMatrix=function(t){t.copyTo(this._curMat)},_.rotate=function(t){re.save(this),this._curMat.rotateEx(t)},_.scale=function(t,e){re.save(this),this._curMat.scaleEx(t,e)},_.clipRect=function(t,i,n,r){hi.save(this),this._clipRect==e.MAXCLIPRECT?this._clipRect=new Ge(t,i,n,r):(this._clipRect.width=n,this._clipRect.height=r,this._clipRect.x=t,this._clipRect.y=i),e._clipID_Gen++,e._clipID_Gen%=1e4,this._clipInfoID=e._clipID_Gen;var s=this._globalClipMatrix,a=s.tx,o=s.ty,h=a+s.a,_=o+s.d;if(this._clipRect.width>=99999999?(s.a=s.d=99999999,s.b=s.c=s.tx=s.ty=0):this._curMat._bTransform?(s.tx=this._clipRect.x*this._curMat.a+this._clipRect.y*this._curMat.c+this._curMat.tx,s.ty=this._clipRect.x*this._curMat.b+this._clipRect.y*this._curMat.d+this._curMat.ty,s.a=this._clipRect.width*this._curMat.a,s.b=this._clipRect.width*this._curMat.b,s.c=this._clipRect.height*this._curMat.c,s.d=this._clipRect.height*this._curMat.d):(s.tx=this._clipRect.x+this._curMat.tx,s.ty=this._clipRect.y+this._curMat.ty,s.a=this._clipRect.width,s.b=s.c=0,s.d=this._clipRect.height),s.a>0&&s.d>0){var l=s.tx+s.a,u=s.ty+s.d;a>=l||o>=u||s.tx>=h||s.ty>=_?(s.a=-.1,s.d=-.1):(s.tx<a&&(s.a-=a-s.tx,s.tx=a),l>h&&(s.a-=l-h),s.ty<o&&(s.d-=o-s.ty,s.ty=o),u>_&&(s.d-=u-_),s.a<=0&&(s.a=-.1),s.d<=0&&(s.d=-.1))}},_.drawMesh=function(t,e,i,n,r,s,a,o,h){void 0===h&&(h=0)},_.addRenderObject=function(t){this._submits[this._submits._length++]=t},_.submitElement=function(t,e){var i=(wi._context===this,this._submits),n=i._length;0>e&&(e=i._length);for(var r=j.RENDERBASE;e>t;)this._renderNextSubmitIndex=t+1,i[t]!==j.RENDERBASE?(j.preRender=r,r=i[t],t+=r.renderSubmit()):t++;return n},_.flush=function(){var t=this.submitElement(0,this._submits._length);this._path&&this._path.reset(),Ai.instance&&Ai.getInstance().reset(),this._curSubmit=j.RENDERBASE;for(var e=0,i=this.meshlist.length;i>e;e++){var n=this.meshlist[e];n.canReuse?n.releaseMesh():n.destroy()}return this.meshlist.length=0,this._mesh=bn.getAMesh(),this._pathMesh=fn.getAMesh(),this._triangleMesh=Rn.getAMesh(),this.meshlist.push(this._mesh,this._pathMesh,this._triangleMesh),this._flushCnt++,this._flushCnt%600==0&&wi._context==this&&Ce.charbookInst&&Ce.charbookInst.GC(),t},_.setPathId=function(t){if(this.mId=t,-1!=this.mId){this.mHaveKey=!1;var e=mi.getInstance();e.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,e.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},_.beginPath=function(t){void 0===t&&(t=!1);var e=this._getPath();e.beginPath(t)},_.closePath=function(){this._path.closePath()},_.addPath=function(t,e,i){this._getPath().push(t,i)},_.fill=function(){var t=this._curMat,e=this._getPath(),i=this._curSubmit,n=3===i._key.submitType&&i._key.blendShader===this._submitKey.blendShader;n&&(n=n&&this.isSameClipInfo(i)),n||(this._curSubmit=this.addVGSubmit(this._pathMesh));for(var r,s=this.mixRGBandAlpha(this.fillStyle.toInt()),a=0,o=0,h=e.paths.length;h>o;o++){var _=e.paths[o],l=_.path.length/2;if(!(3>l||3==l&&!_.convex)){var u=_.path.concat(),c=0,d=0,f=0,p=0/0,m=0/0;if(t._bTransform)for(c=0;l>c;c++)d=c<<1,f=d+1,p=u[d],m=u[f],u[d]=t.a*p+t.c*m+t.tx,u[f]=t.b*p+t.d*m+t.ty;else for(c=0;l>c;c++)d=c<<1,f=d+1,p=u[d],m=u[f],u[d]=p+t.tx,u[f]=m+t.ty;this._pathMesh.vertNum+l>65535&&(this._curSubmit._numEle+=a,a=0,this._pathMesh=fn.getAMesh(),this._curSubmit=this.addVGSubmit(this._pathMesh));var g=this._pathMesh.vertNum;if(_.convex){var v=l-2;r=new Array(3*v);for(var y=0,E=0;v>E;E++)r[y++]=g,r[y++]=E+1+g,r[y++]=E+2+g}else if(r=fi.earcut(u,null,2),g>0)for(var A=0;A<r.length;A++)r[A]+=g;this._pathMesh.addVertAndIBToMesh(this,u,s,r),a+=r.length}}this._curSubmit._numEle+=a},_.addVGSubmit=function(t){var e=j.createShape(this,t,0,di.create(4,0));return e._key.blendShader=this._submitKey.blendShader,e._key.submitType=3,this._submits[this._submits._length++]=e,this.copyClipInfo(e,this._globalClipMatrix),e},_.stroke=function(){if(this.lineWidth>0){var t=this.mixRGBandAlpha(this.strokeStyle._color.numColor),e=this._getPath(),i=this._curSubmit,n=3===i._key.submitType&&i._key.blendShader===this._submitKey.blendShader;n&&(n=n&&this.isSameClipInfo(i)),n||(this._curSubmit=this.addVGSubmit(this._pathMesh));for(var r=0,s=0,a=e.paths.length;a>s;s++){var o=e.paths[s];if(!(o.path.length<=0)){var h=[],_=[],l=2*o.path.length;if(!(2>l)){this._pathMesh.vertNum+l>65535&&(this._curSubmit._numEle+=r,r=0,this._pathMesh=fn.getAMesh(),this.meshlist.push(this._pathMesh),this._curSubmit=this.addVGSubmit(this._pathMesh)),Je.createLine2(o.path,h,this.lineWidth,this._pathMesh.vertNum,_,o.loop);var u=_.length/2,c=this._curMat,d=0,f=0,p=0,m=0/0,g=0/0;if(c._bTransform)for(d=0;u>d;d++)f=d<<1,p=f+1,m=_[f],g=_[p],_[f]=c.a*m+c.c*g+c.tx,_[p]=c.b*m+c.d*g+c.ty;else for(d=0;u>d;d++)f=d<<1,p=f+1,m=_[f],g=_[p],_[f]=m+c.tx,_[p]=g+c.ty;this._pathMesh.addVertAndIBToMesh(this,_,t,h),r+=h.length}}}this._curSubmit._numEle+=r}},_.moveTo=function(t,e){var i=this._getPath();i.newPath(),i._lastOriX=t,i._lastOriY=e,i.addPoint(t,e)},_.lineTo=function(t,e){var i=this._getPath();Math.abs(t-i._lastOriX)<.001&&Math.abs(e-i._lastOriY)<.001||(i._lastOriX=t,i._lastOriY=e,i.addPoint(t,e))},_.arcTo=function(t,i,n,r,s){var a=0,o=0,h=0,_=this._path._lastOriX-t,l=this._path._lastOriY-i,u=Math.sqrt(_*_+l*l);if(!(1e-6>=u)){var c=_/u,d=l/u,f=n-t,p=r-i,m=f*f+p*p,g=Math.sqrt(m);if(!(1e-6>=g)){var v=f/g,y=p/g,E=c+v,A=d+y,C=Math.sqrt(E*E+A*A);if(!(1e-6>=C)){var S=E/C,D=A/C,R=Math.acos(S*c+D*d),T=Math.PI/2-R;u=s/Math.tan(T);var x=u*c+t,b=u*d+i,P=Math.sqrt(u*u+s*s),L=t+S*P,I=i+D*P,M=c*y-d*v,w=0,O=0,B=0;if(M>=0){w=2*T;var N=w/e.SEGNUM;O=Math.sin(N),B=Math.cos(N)}else w=2*-T,N=w/e.SEGNUM,O=Math.sin(N),B=Math.cos(N);var F=this._path._lastOriX,k=this._path._lastOriY,V=x,U=b;(Math.abs(V-this._path._lastOriX)>.1||Math.abs(U-this._path._lastOriY)>.1)&&(o=V,h=U,F=V,k=U,this._path.addPoint(o,h));var W=x-L,G=b-I;for(a=0;a<e.SEGNUM;a++){var X=W*B+G*O,z=-W*O+G*B;o=X+L,h=z+I,(Math.abs(F-o)>.1||Math.abs(k-h)>.1)&&(this._path.addPoint(o,h),F=o,k=h),W=X,G=z}}}}},_.arc=function(t,e,i,n,r,s,a){void 0===s&&(s=!1),void 0===a&&(a=!0);var o=0,h=0,_=0,l=0,u=0,c=0,d=0,f=0,p=0,m=0,g=0;if(h=r-n,s)if(Math.abs(h)>=2*Math.PI)h=2*-Math.PI;else for(;h>0;)h-=2*Math.PI;else if(Math.abs(h)>=2*Math.PI)h=2*Math.PI;else for(;0>h;)h+=2*Math.PI;var v=this.getMatScaleX(),y=this.getMatScaleY(),E=i*(v>y?v:y),A=2*Math.PI*E;m=0|Math.max(A/10,10),_=h/m/2,l=Math.abs(4/3*(1-Math.cos(_))/Math.sin(_)),s&&(l=-l),g=0;var C=this._getPath();for(p=0;m>=p;p++)o=n+h*(p/m),u=Math.cos(o),c=Math.sin(o),d=t+u*i,f=e+c*i,(d!=this._path._lastOriX||f!=this._path._lastOriY)&&C.addPoint(d,f);u=Math.cos(r),c=Math.sin(r),d=t+u*i,f=e+c*i,(d!=this._path._lastOriX||f!=this._path._lastOriY)&&C.addPoint(d,f)},_.quadraticCurveTo=function(t,e,i,n){for(var r=ki.I,s=r.getBezierPoints([this._path._lastOriX,this._path._lastOriY,t,e,i,n],30,2),a=0,o=s.length/2;o>a;a++)this.lineTo(s[2*a],s[2*a+1]);this.lineTo(i,n)},_.rect=function(t,e,i,n){this._other=this._other.make(),this._other.path||(this._other.path=new gi),this._other.path.rect(t,e,i,n)},_.mixRGBandAlpha=function(t){return this._mixRGBandAlpha(t,this._shader2D.ALPHA)},_._mixRGBandAlpha=function(t,e){var i=(4278190080&t)>>>24;return 0!=i?i*=e:i=255*e,16777215&t|i<<24},_.strokeRect=function(t,e,i,n,r){if(this.lineWidth>0){var s=this.mixRGBandAlpha(this.strokeStyle._color.numColor),a=this.lineWidth/2;this._fillRect(t-a,e-a,i+this.lineWidth,this.lineWidth,s),this._fillRect(t-a,e-a+n,i+this.lineWidth,this.lineWidth,s),this._fillRect(t-a,e+a,this.lineWidth,n-this.lineWidth,s),this._fillRect(t-a+i,e+a,this.lineWidth,n-this.lineWidth,s)}},_.clip=function(){},_.drawParticle=function(t,e,i){i.x=t,i.y=e,this._submits[this._submits._length++]=i},_._getPath=function(){return this._path||(this._path=new gi)},s(0,_,"globalCompositeOperation",function(){return ue.NAMES[this._nBlendType]},function(t){var e=ue.TOINT[t];null==e||this._nBlendType===e||(h.save(this,65536,this,!0),this._curSubmit=j.RENDERBASE,this._nBlendType=e)}),s(0,_,"strokeStyle",function(){return this._shader2D.strokeStyle},function(t){this._shader2D.strokeStyle.equal(t)||(h.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=Oi.create(t),this._submitKey.other=-this._shader2D.strokeStyle.toInt())}),s(0,_,"globalAlpha",function(){return this._shader2D.ALPHA},function(t){t=Math.floor(1e3*t)/1e3,t!=this._shader2D.ALPHA&&(h.save(this,1,this._shader2D,!1),this._shader2D.ALPHA=t)}),s(0,_,"asBitmap",null,function(t){if(t){if(this._targets||(this._targets=new Gr(this._width,this._height,1,-1)),!this._width||!this._height)throw Error("asBitmap no size!")}else this._targets&&this._targets.destroy(),this._targets=null}),s(0,_,"fillStyle",function(){return this._shader2D.fillStyle},function(t){this._shader2D.fillStyle.equal(t)||(h.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=Oi.create(t),this._submitKey.other=-this._shader2D.fillStyle.toInt())}),s(0,_,"textAlign",function(){return this._other.textAlign},function(t){this._other.textAlign===t||(this._other=this._other.make(),h.save(this,32768,this._other,!1),this._other.textAlign=t)}),s(0,_,"lineWidth",function(){return this._other.lineWidth},function(t){this._other.lineWidth===t||(this._other=this._other.make(),h.save(this,256,this._other,!1),this._other.lineWidth=t)}),s(0,_,"textBaseline",function(){return this._other.textBaseline},function(t){this._other.textBaseline===t||(this._other=this._other.make(),h.save(this,16384,this._other,!1),this._other.textBaseline=t)}),s(0,_,"font",null,function(){this._other=this._other.make(),h.save(this,8,this._other,!1)}),s(0,_,"canvas",function(){return this._canvas}),e.__init__=function(){a.DEFAULT=new a},e.set2DRenderConfig=function(){var t=Le.instance;me.setBlend(t,!0),me.setBlendFunc(t,1,771),me.setDepthTest(t,!1),me.setCullFace(t,!1),me.setDepthMask(t,!0),me.setFrontFace(t,2305),t.viewport(0,0,ci.width,ci.height)},e._tempPoint=new Zi,e._SUBMITVBSIZE=32e3,e._MAXSIZE=99999999,e._MAXVERTNUM=65535,e.MAXCLIPRECT=new Ge(0,0,99999999,99999999),e._COUNT=0,e._tmpMatrix=new ui,e.SEGNUM=32,e._contextcount=0,e._clipID_Gen=0,e.defTexture=null,n(e,["_drawStyleTemp",function(){return this._drawStyleTemp=new Oi(null)},"_keyMap",function(){return this._keyMap=new _i},"_drawTexToDrawTri_Vert",function(){return this._drawTexToDrawTri_Vert=new Float32Array(8)},"_drawTexToDrawTri_Index",function(){return this._drawTexToDrawTri_Index=new Uint16Array([0,1,2,0,2,3])},"_charBook",function(){return this._charBook=new Ce}]),e.__init$=function(){a=function(){function t(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null}r(t,"");var e=t.prototype;return e.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null},e.make=function(){return this===t.DEFAULT?new t:this},t.DEFAULT=null,t}()},e}(w),ln=function(t){function e(){this.retryNum=1,this.retryDelay=0,this.maxLoader=5,this._loaders=[],this._loaderCount=0,this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},this._statInfo={count:1,loaded:1},e.__super.call(this);for(var t=0;t<this._maxPriority;t++)this._resInfos[t]=[]}var s;r(e,"laya.net.LoaderManager",t);var a=e.prototype;return a.getProgress=function(){return this._statInfo.loaded/this._statInfo.count},a.resetProgress=function(){this._statInfo.count=this._statInfo.loaded=1},a.create=function(t,e,i,n,r,s,a,o){void 0===a&&(a=1),void 0===o&&(o=!0),this._create(t,!0,e,i,n,r,s,a,o)},a._create=function(t,e,i,n,r,s,a,o,h){function _(t){f++,t.progress=1,f===d&&i&&i.run()}function u(t,e){t.progress=e;for(var i=0,n=0;d>n;n++){var r=c[n];i+=r.progress}var s=i/d;p.runWith(s)}if(void 0===o&&(o=1),void 0===h&&(h=!0),t instanceof Array){var c=t,d=c.length,f=0;if(n)var p=l.create(n.caller,n.method,n.args,!1);for(var m=0;d>m;m++){var g=c[m];"string"==typeof g&&(g=c[m]={url:g}),g.progress=0}for(m=0;d>m;m++){g=c[m];var v=n?l.create(null,u,[g],!1):null,y=n||i?l.create(null,_,[g]):null;this._createOne(g.url,e,y,v,g.type||r,g.constructParams||s,g.propertyParams||a,g.priority||o,h)}}else this._createOne(t,e,i,n,r,s,a,o,h)},a._createOne=function(t,n,r,s,a,o,h,_,u){function c(e){!n&&e instanceof laya.resource.Resource&&e._addReference(),r&&r.runWith(e),i.loader.event(t)}void 0===_&&(_=1),void 0===u&&(u=!0);var d=this.getRes(t);if(d)!n&&d instanceof laya.resource.Resource&&d._addReference(),s&&s.runWith(1),r&&r.runWith(d);else{var f=Q.getFileExtension(t);if(a||(a=e.createMap[f]?e.createMap[f][0]:null),!a)return this.load(t,r,s,a,_,u),void 0;var p=hn.parserMap;if(!p[a])return this.load(t,r,s,a,_,u),void 0;this._createLoad(t,l.create(null,c),s,a,o,h,_,u,!0)}},a.load=function(t,n,r,a,o,h,_,l,u){var c=this;if(void 0===o&&(o=1),void 0===h&&(h=!0),void 0===l&&(l=!1),void 0===u&&(u=!1),t instanceof Array)return this._loadAssets(t,n,r,a,o,h,_);var d=hn.getRes(t);if(l||null==d){var f;f=t,t=bi.getFileLoadPath(t),t!=f&&"nativeimage"!==a?a="atlas":f=null;var p=e._resMap[t];p?(n&&(f?n&&p._createListener("complete",this,this._resInfoLoaded,[f,n],!1,!1):n&&p._createListener("complete",n.caller,n.method,n.args,!1,!1)),r&&p._createListener("progress",r.caller,r.method,r.args,!1,!1)):(p=this._infoPool.length?this._infoPool.pop():new s,p.url=t,p.type=a,p.cache=h,p.group=_,p.ignoreCache=l,p.useWorkerLoader=u,p.originalUrl=f,n&&p.on("complete",n.caller,n.method,n.args),r&&p.on("progress",r.caller,r.method,r.args),e._resMap[t]=p,o=o<this._maxPriority?o:this._maxPriority-1,this._resInfos[o].push(p),this._statInfo.count++,this.event("progress",this.getProgress()),this._next())
}else i.systemTimer.frameOnce(1,null,function(){r&&r.runWith(1),n&&n.runWith(d),c._loaderCount||c.event("complete")});return this},a._resInfoLoaded=function(t,e){e.runWith(hn.getRes(t))},a._createLoad=function(t,n,r,a,o,h,_,l,u){var c=this;if(void 0===_&&(_=1),void 0===l&&(l=!0),void 0===u&&(u=!1),t instanceof Array)return this._loadAssets(t,n,r,a,_,l);var d=hn.getRes(t);if(null!=d)i.systemTimer.frameOnce(1,null,function(){r&&r.runWith(1),n&&n.runWith(d),c._loaderCount||c.event("complete")});else{var f=e._resMap[t];f?(n&&f._createListener("complete",n.caller,n.method,n.args,!1,!1),r&&f._createListener("progress",r.caller,r.method,r.args,!1,!1)):(f=this._infoPool.length?this._infoPool.pop():new s,f.url=t,f.type=a,f.cache=!1,f.ignoreCache=u,f.originalUrl=null,f.createCache=l,f.createConstructParams=o,f.createPropertyParams=h,n&&f.on("complete",n.caller,n.method,n.args),r&&f.on("progress",r.caller,r.method,r.args),e._resMap[t]=f,_=_<this._maxPriority?_:this._maxPriority-1,this._resInfos[_].push(f),this._statInfo.count++,this.event("progress",this.getProgress()),this._next())}return this},a._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var t=0;t<this._maxPriority;t++)for(var e=this._resInfos[t];e.length>0;){var i=e.shift();if(i)return this._doLoad(i)}this._loaderCount||this.event("complete")}},a._doLoad=function(t){function e(e){i.offAll(),i._data=null,i._customParse=!1,n._loaders.push(i),n._endLoad(t,e instanceof Array?[e]:e),n._loaderCount--,n._next()}this._loaderCount++;var i=this._loaders.length?this._loaders.pop():new hn;i.on("complete",null,e),i.on("progress",null,function(e){t.event("progress",e)}),i.on("error",null,function(){e(null)});var n=this;i._constructParams=t.createConstructParams,i._propertyParams=t.createPropertyParams,i._createCache=t.createCache,i.load(t.url,t.type,t.cache,t.group,t.ignoreCache,t.useWorkerLoader)},a._endLoad=function(t,n){var r=t.url;if(null==n){var s=this._failRes[r]||0;if(s<this.retryNum)return console.warn("[warn]Retry to load:",r),this._failRes[r]=s+1,i.systemTimer.once(this.retryDelay,this,this._addReTry,[t],!1),void 0;hn.clearRes(r),console.warn("[error]Failed to load:",r),this.event("error",r)}this._failRes[r]&&(this._failRes[r]=0),delete e._resMap[r],t.originalUrl&&(n=hn.getRes(t.originalUrl)),t.event("complete",n),t.offAll(),this._infoPool.push(t),this._statInfo.loaded++,this.event("progress",this.getProgress())},a._addReTry=function(t){this._resInfos[this._maxPriority-1].push(t),this._next()},a.clearRes=function(t){hn.clearRes(t)},a.clearTextureRes=function(t){hn.clearTextureRes(t)},a.getRes=function(t){return hn.getRes(t)},a.cacheRes=function(t,e){hn.cacheRes(t,e)},a.setGroup=function(t,e){hn.setGroup(t,e)},a.clearResByGroup=function(t){hn.clearResByGroup(t)},a.clearUnLoaded=function(){for(var t=0;t<this._maxPriority;t++){for(var i=this._resInfos[t],n=i.length-1;n>-1;n--){var r=i[n];r&&(r.offAll(),this._infoPool.push(r))}i.length=0}this._loaderCount=0,e._resMap={}},a.cancelLoadByUrls=function(t){if(t)for(var e=0,i=t.length;i>e;e++)this.cancelLoadByUrl(t[e])},a.cancelLoadByUrl=function(t){for(var i=0;i<this._maxPriority;i++)for(var n=this._resInfos[i],r=n.length-1;r>-1;r--){var s=n[r];s&&s.url===t&&(n[r]=null,s.offAll(),this._infoPool.push(s))}e._resMap[t]&&delete e._resMap[t]},a._loadAssets=function(t,e,i,n,r,s,a){function o(t,i){u++,t.progress=1,i||(f=!1),u===_&&e&&e.runWith(f)}function h(t,e){if(null!=i){t.progress=e;for(var n=0,r=0;r<d.length;r++){var s=d[r];n+=s.size*s.progress}var a=n/c;i.runWith(a)}}void 0===r&&(r=1),void 0===s&&(s=!0);for(var _=t.length,u=0,c=0,d=[],f=!0,p=0;_>p;p++){var m=t[p];"string"==typeof m&&(m={url:m,type:n,size:1,priority:r}),m.size||(m.size=1),m.progress=0,c+=m.size,d.push(m);var g=i?l.create(null,h,[m],!1):null,v=e||i?l.create(null,o,[m]):null;this.load(m.url,v,g,m.type,m.priority||1,s,m.group||a,!1,m.useWorkerLoader)}return this},a.decodeBitmaps=function(t){var e,i=0,n=t.length;for(e=wi._context,i=0;n>i;i++){var r;if(r=hn.getAtlas(t[i]))this._decodeTexture(r[0],e);else{var s;s=this.getRes(t[i]),s&&s instanceof laya.resource.Texture&&this._decodeTexture(s,e)}}},a._decodeTexture=function(t,e){var n=t.bitmap;if(t&&n){var r=n.source||n.image;if(r&&i.__typeof(r,Me.window.HTMLImageElement)){e.drawImage(r,0,0,1,1);{e.getImageData(0,0,1,1)}}}},e.cacheRes=function(t,e){hn.cacheRes(t,e)},e._resMap={},n(e,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),e.__init$=function(){s=function(t){function e(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.useWorkerLoader=!1,this.originalUrl=null,this.createCache=!1,this.createConstructParams=null,this.createPropertyParams=null,e.__super.call(this)}return r(e,"",t),e}(_)},e}(_),un=function(t){function e(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,e.__super.call(this)}r(e,"laya.media.webaudio.WebAudioSound",t);var i=e.prototype;return i.load=function(t){var i=this;if(t=Pi.formatURL(t),this.url=t,this.audioBuffer=e._dataCache[t],this.audioBuffer)return this._loaded(this.audioBuffer),void 0;if(e.e.on("loaded:"+t,this,this._loaded),e.e.on("err:"+t,this,this._err),!e.__loadingSound[t]){e.__loadingSound[t]=!0;var n=new Me.window.XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){return i._disposed?(i._removeLoadEvents(),void 0):(i.data=n.response,e.buffs.push({buffer:i.data,url:i.url}),e.decode(),void 0)},n.onerror=function(){i._err()},n.send()}},i._err=function(){this._removeLoadEvents(),e.__loadingSound[this.url]=!1,this.event("error")},i._loaded=function(t){this._removeLoadEvents(),this._disposed||(this.audioBuffer=t,e._dataCache[this.url]=this.audioBuffer,this.loaded=!0,this.event("complete"))},i._removeLoadEvents=function(){e.e.off("loaded:"+this.url,this,this._loaded),e.e.off("err:"+this.url,this,this._err)},i.__playAfterLoaded=function(){if(this.__toPlays){var t,e=0,i=0;t=this.__toPlays,i=t.length;var n;for(e=0;i>e;e++)n=t[e],n[2]&&!n[2].isStopped&&this.play(n[0],n[1],n[2]);this.__toPlays.length=0}},i.play=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),i=i?i:new sr,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([t,e,i]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),i.url=this.url,i.loops=e,i.audioBuffer=this.audioBuffer,i.startTime=t,i.play(),Vi.addChannel(i),i},i.dispose=function(){this._disposed=!0,delete e._dataCache[this.url],delete e.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},s(0,i,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),e.decode=function(){e.buffs.length<=0||e.isDecoding||(e.isDecoding=!0,e.tInfo=e.buffs.shift(),e.ctx.decodeAudioData(e.tInfo.buffer,e._done,e._fail))},e._done=function(t){e.e.event("loaded:"+e.tInfo.url,t),e.isDecoding=!1,e.decode()},e._fail=function(){e.e.event("err:"+e.tInfo.url,null),e.isDecoding=!1,e.decode()},e._playEmptySound=function(){if(null!=e.ctx){var t=e.ctx.createBufferSource();t.buffer=e._miniBuffer,t.connect(e.ctx.destination),t.start(0,0,0)}},e._unlock=function(){e._unlocked||(e._playEmptySound(),"running"==e.ctx.state&&(Me.document.removeEventListener("mousedown",e._unlock,!0),Me.document.removeEventListener("touchend",e._unlock,!0),Me.document.removeEventListener("touchstart",e._unlock,!0),e._unlocked=!0))},e.initWebAudio=function(){"running"!=e.ctx.state&&(e._unlock(),Me.document.addEventListener("mousedown",e._unlock,!0),Me.document.addEventListener("touchend",e._unlock,!0),Me.document.addEventListener("touchstart",e._unlock,!0))},e._dataCache={},e.buffs=[],e.isDecoding=!1,e._unlocked=!1,e.tInfo=null,e.__loadingSound={},n(e,["window",function(){return this.window=Me.window},"webAudioEnabled",function(){return this.webAudioEnabled=e.window.AudioContext||e.window.webkitAudioContext||e.window.mozAudioContext},"ctx",function(){return this.ctx=e.webAudioEnabled?new(e.window.AudioContext||e.window.webkitAudioContext||e.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=e.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new _}]),e}(_),cn=(function(t){function e(){e.__super.call(this)}r(e,"laya.html.dom.HTMLStyleElement",t);var i=e.prototype;return i._creates=function(){},i.drawToGraphic=function(){},i.reset=function(){return this},s(0,i,"innerTEXT",t.prototype._$get_innerTEXT,function(t){Gi.parseCSS(t,null)}),e}(W),function(t){function e(){e.__super.call(this)}r(e,"laya.media.Sound",t);var i=e.prototype;return i.load=function(){},i.play=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),null},i.dispose=function(){},s(0,i,"duration",function(){return 0}),e}(_),function(t){function e(){this._responseType=null,this._data=null,this._url=null,e.__super.call(this),this._http=new Me.window.XMLHttpRequest}r(e,"laya.net.HttpRequest",t);var i=e.prototype;return i.send=function(t,e,i,n,r){void 0===i&&(i="get"),void 0===n&&(n="text"),this._responseType=n,this._data=null,this._url=t;var s=this,a=this._http;if(t=Pi.getAdptedFilePath(t),a.open(i,t,!0),r)for(var o=0;o<r.length;o++)a.setRequestHeader(r[o++],r[o]);else wi.isConchApp||(e&&"string"!=typeof e?a.setRequestHeader("Content-Type","application/json"):a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));a.responseType="arraybuffer"!==n?"text":"arraybuffer",a.onerror=function(t){s._onError(t)},a.onabort=function(t){s._onAbort(t)},a.onprogress=function(t){s._onProgress(t)},a.onload=function(t){s._onLoad(t)},a.send(e)},i._onProgress=function(t){t&&t.lengthComputable&&this.event("progress",t.loaded/t.total)},i._onAbort=function(){this.error("Request was aborted by user")},i._onError=function(){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},i._onLoad=function(){var t=this._http,e=void 0!==t.status?t.status:200;200===e||204===e||0===e?this.complete():this.error("["+t.status+"]"+t.statusText+":"+t.responseURL)},i.error=function(t){this.clear(),console.warn(this.url,t),this.event("error",t)},i.complete=function(){this.clear();var t=!0;try{this._data="json"===this._responseType?JSON.parse(this._http.responseText):"xml"===this._responseType?Q.parseXMLFromString(this._http.responseText):this._http.response||this._http.responseText}catch(e){t=!1,this.error(e.message)}t&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},i.clear=function(){var t=this._http;t.onerror=t.onabort=t.onprogress=t.onload=null},s(0,i,"url",function(){return this._url}),s(0,i,"http",function(){return this._http}),s(0,i,"data",function(){return this._data}),e}(_)),dn=function(t){function e(t){e.__super.call(this),t||(t=this._copyMatrix(e.IDENTITY_MATRIX)),this._mat=new Float32Array(16),this._alpha=new Float32Array(4),this.setByMatrix(t),this._action=new Ci,this._action.data=this}r(e,"laya.filters.ColorFilter",t);var a=e.prototype;return i.imps(a,{"laya.filters.IFilter":!0}),a.gray=function(){return this.setByMatrix(e.GRAY_MATRIX)},a.color=function(t,e,i,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),this.setByMatrix([1,0,0,0,t,0,1,0,0,e,0,0,1,0,i,0,0,0,1,n])},a.setByMatrix=function(t){this._matrix!=t&&this._copyMatrix(t);for(var e=0,i=0,n=0;20>n;n++)n%5!=4?this._mat[e++]=t[n]:this._alpha[i++]=t[n];return this},a.adjustColor=function(t,e,i,n){return this.adjustHue(n),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i),this},a.adjustBrightness=function(t){return t=this._clampValue(t,100),0==t||isNaN(t)?this:this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])},a.adjustContrast=function(t){if(t=this._clampValue(t,100),0==t||isNaN(t))return this;var i=0/0;0>t?i=127+t/100*127:(i=t%1,i=0==i?e.DELTA_INDEX[t]:e.DELTA_INDEX[t<<0]*(1-i)+e.DELTA_INDEX[(t<<0)+1]*i,i=127*i+127);var n=i/127,r=.5*(127-i);return this._multiplyMatrix([n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0,0,0,0,0,1])},a.adjustSaturation=function(t){if(t=this._clampValue(t,100),0==t||isNaN(t))return this;var e=1+(t>0?3*t/100:t/100),i=1-e,n=.3086*i,r=.6094*i,s=.082*i;return this._multiplyMatrix([n+e,r,s,0,0,n,r+e,s,0,0,n,r,s+e,0,0,0,0,0,1,0,0,0,0,0,1])},a.adjustHue=function(t){if(t=this._clampValue(t,180)/180*Math.PI,0==t||isNaN(t))return this;var e=Math.cos(t),i=Math.sin(t),n=.213,r=.715,s=.072;return this._multiplyMatrix([n+e*(1-n)+i*-n,r+e*-r+i*-r,s+e*-s+i*(1-s),0,0,n+e*-n+.143*i,r+e*(1-r)+.14*i,s+e*-s+i*-.283,0,0,n+e*-n+i*-(1-n),r+e*-r+i*r,s+e*(1-s)+i*s,0,0,0,0,0,1,0,0,0,0,0,1])},a.reset=function(){return this.setByMatrix(this._copyMatrix(e.IDENTITY_MATRIX))},a._multiplyMatrix=function(t){var e=[];this._matrix=this._fixMatrix(this._matrix);for(var i=0;5>i;i++){for(var n=0;5>n;n++)e[n]=this._matrix[n+5*i];for(n=0;5>n;n++){for(var r=0,s=0;5>s;s++)r+=t[n+5*s]*e[s];this._matrix[n+5*i]=r}}return this.setByMatrix(this._matrix)},a._clampValue=function(t,e){return Math.min(e,Math.max(-e,t))},a._fixMatrix=function(t){return null==t?e.IDENTITY_MATRIX:(t.length<25?t=t.slice(0,t.length).concat(e.IDENTITY_MATRIX.slice(t.length,25)):t.length>25&&(t=t.slice(0,25)),t)},a._copyMatrix=function(t){var e=25;this._matrix||(this._matrix=[]);for(var i=0;e>i;i++)this._matrix[i]=t[i];return this._matrix},s(0,a,"type",function(){return 32}),e.LENGTH=25,n(e,["DELTA_INDEX",function(){return this.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10]},"GRAY_MATRIX",function(){return this.GRAY_MATRIX=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0]},"IDENTITY_MATRIX",function(){return this.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]}]),e}($),fn=function(t){function e(){e.__super.call(this,laya.webgl.utils.MeshVG.const_stride,4,4),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshVG._fixattriInfo)}r(e,"laya.webgl.utils.MeshVG",t);var i=e.prototype;return i.addVertAndIBToMesh=function(t,i,n,r){for(var s=this._vb.needSize(i.length/2*e.const_stride),a=s>>2,o=this._vb._floatArray32||this._vb.getFloat32Array(),h=this._vb._uint32Array,_=0,l=i.length/2,u=0;l>u;u++)o[a++]=i[_],o[a++]=i[_+1],_+=2,h[a++]=n;this._vb.setNeedUpload(),this._ib.append(new Uint16Array(r)),this._ib.setNeedUpload(),this.vertNum+=l,this.indexNum+=r.length},i.releaseMesh=function(){this._vb.setByteLength(0),this._ib.setByteLength(0),this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshVG._POOL.push(this)},i.destroy=function(){this._ib.destroy(),this._vb.destroy(),this._ib.disposeResource(),this._vb.deleteBuffer()},e.getAMesh=function(){return laya.webgl.utils.MeshVG._POOL.length?laya.webgl.utils.MeshVG._POOL.pop():new e},e.const_stride=12,e._POOL=[],n(e,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5121,4,8]}]),e}(H),pn=(function(t){function e(){e.__super.call(this)}return r(e,"laya.ui.UIEvent",t),e.SHOW_TIP="showtip",e.HIDE_TIP="hidetip",e}(ee),function(t){function e(){this.url=null,this.audio=null,this.loaded=!1,e.__super.call(this)}r(e,"laya.media.h5audio.AudioSound",t);var i=e.prototype;return i.dispose=function(){var t=e._audioCache[this.url];t&&(t.src="",delete e._audioCache[this.url])},i.load=function(t){function i(){r(),a.loaded=!0,a.event("complete")}function n(){s.load=null,r(),a.event("error")}function r(){s.removeEventListener("canplaythrough",i),s.removeEventListener("error",n)}t=Pi.formatURL(t),this.url=t;var s;if(t==Vi._bgMusic?(e._initMusicAudio(),s=e._musicAudio,s.src!=t&&(e._audioCache[s.src]=null,s=null)):s=e._audioCache[t],s&&s.readyState>=2)return this.event("complete"),void 0;s||(t==Vi._bgMusic?(e._initMusicAudio(),s=e._musicAudio):s=Me.createElement("audio"),e._audioCache[t]=s,s.src=t),s.addEventListener("canplaythrough",i),s.addEventListener("error",n);var a=this;this.audio=s,s.load?s.load():n()},i.play=function(t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),!this.url)return null;var n;if(n=this.url==Vi._bgMusic?e._musicAudio:e._audioCache[this.url],!n)return null;var r;r=Ki.getItem("audio:"+this.url),wi.isConchApp?r||(r=Me.createElement("audio"),r.src=this.url):this.url==Vi._bgMusic?(e._initMusicAudio(),r=e._musicAudio,r.src=this.url):r=r?r:n.cloneNode(!0);var s=new or(r);return s.url=this.url,s.loops=i,s.startTime=t,s.play(),Vi.addChannel(s),s},s(0,i,"duration",function(){var t;return t=e._audioCache[this.url],t?t.duration:0}),e._initMusicAudio=function(){e._musicAudio||(e._musicAudio||(e._musicAudio=Me.createElement("audio")),wi.isConchApp||Me.document.addEventListener("mousedown",e._makeMusicOK))},e._makeMusicOK=function(){Me.document.removeEventListener("mousedown",e._makeMusicOK),e._musicAudio.src?e._musicAudio.play():(e._musicAudio.src="",e._musicAudio.load())},e._audioCache={},e._musicAudio=null,e}(_)),mn=function(t){function e(){this.worker=null,this._useWorkerLoader=!1,e.__super.call(this);var t=this;this.worker=new Me.window.Worker(e.workerPath),this.worker.onmessage=function(e){t.workerMessage(e.data)}}r(e,"laya.net.WorkerLoader",t);var i=e.prototype;return i.workerMessage=function(t){if(t)switch(t.type){case"Image":this.imageLoaded(t);break;case"Disable":e.enable=!1}},i.imageLoaded=function(t){if(!t.dataType||"imageBitmap"!=t.dataType)return this.event(t.url,null),void 0;var e=new yr(!0),i=e.source.getContext("2d");switch(t.dataType){case"imageBitmap":var n=t.imageBitmap;e.size(n.width,n.height),i.drawImage(n,0,0)}if(console.log("load:",t.url),wi.isWebGL){e._setGPUMemory(0);var r=new laya.webgl.resource.Texture2D;r.loadImageSource(e),e=r}this.event(t.url,e)},i.loadImage=function(t){this.worker.postMessage(t)},i._loadImage=function(t){function i(){laya.net.WorkerLoader.I.off(t,n,r)}var n=this;if(!this._useWorkerLoader||!e._enable)return e._preLoadFun.call(n,t),void 0;t=Pi.formatURL(t);var r=function(r){i(),r?n.onLoaded(r):e._preLoadFun.call(n,t)};laya.net.WorkerLoader.I.on(t,n,r),laya.net.WorkerLoader.I.loadImage(t)},s(1,e,"enable",function(){return e._enable},function(t){e._enable!=t&&(e._enable=t,t&&null==e._preLoadFun&&(e._enable=e.__init__()))}),e.__init__=function(){return null!=e._preLoadFun?!1:Me.window.Worker?(e._preLoadFun=hn.prototype._loadImage,hn.prototype._loadImage=e.prototype._loadImage,e.I||(e.I=new e),!0):!1},e.workerSupported=function(){return Me.window.Worker?!0:!1},e.enableWorkerLoader=function(){e._tryEnabled||(e.enable=!0,e._tryEnabled=!0)},e.I=null,e.workerPath="libs/workerloader.js",e._preLoadFun=null,e._enable=!1,e._tryEnabled=!1,e}(_),gn=function(t){function e(t){void 0===t&&(t=1e4),e.__super.call(this,t)}r(e,"laya.webgl.submit.SubmitTexture",t);var i=e.prototype;return i.clone=function(t,i,n){var r=e._poolSize?e.POOL[--e._poolSize]:new e;return this._cloneInit(r,t,i,n),r},i.releaseRender=function(){--this._ref<1&&(e.POOL[e._poolSize++]=this,this.shaderValue.release(),this._mesh=null,this._parent&&(this._parent.releaseRender(),this._parent=null))},i.renderSubmit=function(){if(0===this._numEle)return 1;var t=this.shaderValue.textureHost;if(t){var e=t?t._getSource():null;if(!e)return 1}var i=Ii.mainContext;this._mesh.useMesh(i);var n=j.preRender,r=j.preRender._key;return 0===this._key.blendShader&&this._key.submitType===r.submitType&&this._key.blendShader===r.blendShader&&nr.activeShader&&j.preRender.clipInfoID==this.clipInfoID&&n.shaderValue.defines._value===this.shaderValue.defines._value&&0==(this.shaderValue.defines._value&Dn.NOOPTMASK)?nr.activeShader.uploadTexture2D(e):(ue.activeBlendFunction!==this._blendFn&&(me.setBlend(i,!0),this._blendFn(i),ue.activeBlendFunction=this._blendFn),this.shaderValue.texture=e,this.shaderValue.upload()),i.drawElements(4,this._numEle,5123,this._startIdx),Li.drawCall++,Li.trianglesFaces+=this._numEle/3,1},e.create=function(t,i,n){var r=e._poolSize?e.POOL[--e._poolSize]:new e(10016);r._mesh=i,r._key.clear(),r._key.submitType=2,r._ref=1,r._startIdx=i.indexNum*be.BYTES_PIDX,r._numEle=0;var s=t._nBlendType;if(r._key.blendShader=s,r._blendFn=t._targets?ue.targetFns[s]:ue.fns[s],r.shaderValue=n,t._colorFiler){var a=t._colorFiler;n.defines.add(a.type),n.colorMat=a._mat,n.colorAlpha=a._alpha}return r},e._poolSize=0,e.POOL=[],e}(j),vn=function(t){function e(){this._matrix=new ui,this._matrix4=be.defaultMatrix4.concat(),e.__super.call(this,1e4),this.shaderValue=new di(0,0)}r(e,"laya.webgl.submit.SubmitCanvas",t);var i=e.prototype;return i.renderSubmit=function(){var t=ci.worldAlpha,e=ci.worldMatrix4,i=ci.worldMatrix,n=ci.worldFilters,r=ci.worldShaderDefines,s=this.shaderValue,a=this._matrix,o=this._matrix4,h=ui.TEMP;return ui.mul(a,i,h),o[0]=h.a,o[1]=h.b,o[4]=h.c,o[5]=h.d,o[12]=h.tx,o[13]=h.ty,ci.worldMatrix=h.clone(),ci.worldMatrix4=o,ci.worldAlpha=ci.worldAlpha*s.alpha,s.filters&&s.filters.length&&(ci.worldFilters=s.filters,ci.worldShaderDefines=s.defines),this.canv.flushsubmit(),ci.worldAlpha=t,ci.worldMatrix4=e,ci.worldMatrix.destroy(),ci.worldMatrix=i,ci.worldFilters=n,ci.worldShaderDefines=r,1},i.releaseRender=function(){if(--this._ref<1){var t=e.POOL;this._mesh=null,t[t._length++]=this}},i.clone=function(){return null},i.getRenderType=function(){return 10003},e.create=function(t,i,n){var r=e.POOL._length?e.POOL[--e.POOL._length]:new e;r.canv=t,r._ref=1,r._numEle=0;var s=r.shaderValue;return s.alpha=i,s.defines.setValue(0),n&&n.length&&s.setFilters(n),r},e.POOL=(e.POOL=[],e.POOL._length=0,e.POOL),e}(j),yn=(function(t){function e(t){e.__super.call(this,laya.webgl.utils.MeshParticle2D.const_stride,4*t*e.const_stride,4),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshParticle2D._fixattriInfo),this.createQuadIB(t),this._quadNum=t}r(e,"laya.webgl.utils.MeshParticle2D",t);var i=e.prototype;return i.setMaxParticleNum=function(t){this._vb._resizeBuffer(4*t*e.const_stride,!1),this.createQuadIB(t)},i.releaseMesh=function(){this._vb.setByteLength(0),this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshParticle2D._POOL.push(this)},i.destroy=function(){this._ib.destroy(),this._vb.destroy(),this._vb.deleteBuffer()},e.getAMesh=function(t){if(laya.webgl.utils.MeshParticle2D._POOL.length){var i=laya.webgl.utils.MeshParticle2D._POOL.pop();return i.setMaxParticleNum(t),i}return new e(t)},e.const_stride=116,e._POOL=[],n(e,["_fixattriInfo",function(){return this._fixattriInfo=[5126,4,0,5126,3,16,5126,3,28,5126,4,40,5126,4,56,5126,3,72,5126,2,84,5126,4,92,5126,1,108,5126,1,112]}]),e}(H),function(t){function e(){e.__super.call(this),this._top=0/0,this._bottom=0/0,this._left=0/0,this._right=0/0,this._centerX=0/0,this._centerY=0/0}r(e,"laya.ui.Widget",t);var i=e.prototype;return i.onReset=function(){this._top=this._bottom=this._left=this._right=this._centerX=this._centerY=0/0},i._onEnable=function(){this.owner.parent?this._onAdded():this.owner.once("added",this,this._onAdded)},i._onDisable=function(){this.owner.off("added",this,this._onAdded),this.owner.parent&&this.owner.parent.off("resize",this,this._onParentResize)},i._onAdded=function(){this.owner.parent&&this.owner.parent.on("resize",this,this._onParentResize),this.resetLayoutX(),this.resetLayoutY()},i._onParentResize=function(){(this.resetLayoutX()||this.resetLayoutY())&&this.owner.event("resize")},i.resetLayoutX=function(){var t=this.owner;if(!t)return!1;var e=t.parent;if(e)if(isNaN(this.centerX)){if(isNaN(this.left))isNaN(this.right)||(t.x=Math.round(e.width-t.displayWidth-this.right+t.pivotX*t.scaleX));else if(t.x=Math.round(this.left+t.pivotX*t.scaleX),!isNaN(this.right)){var i=(e._width-this.left-this.right)/(t.scaleX||.01);if(i!=t.width)return t.width=i,!0}}else t.x=Math.round(.5*(e.width-t.displayWidth)+this.centerX+t.pivotX*t.scaleX);return!1},i.resetLayoutY=function(){var t=this.owner;if(!t)return!1;var e=t.parent;if(e)if(isNaN(this.centerY)){if(isNaN(this.top))isNaN(this.bottom)||(t.y=Math.round(e.height-t.displayHeight-this.bottom+t.pivotY*t.scaleY));else if(t.y=Math.round(this.top+t.pivotY*t.scaleY),!isNaN(this.bottom)){var i=(e._height-this.top-this.bottom)/(t.scaleY||.01);if(i!=t.height)return t.height=i,!0}}else t.y=Math.round(.5*(e.height-t.displayHeight)+this.centerY+t.pivotY*t.scaleY);return!1},i.resetLayout=function(){this.owner&&(this.resetLayoutX(),this.resetLayoutY())},s(0,i,"centerX",function(){return this._centerX},function(t){this._centerX!=t&&(this._centerX=t,this.resetLayoutX())}),s(0,i,"top",function(){return this._top},function(t){this._top!=t&&(this._top=t,this.resetLayoutY())}),s(0,i,"bottom",function(){return this._bottom},function(t){this._bottom!=t&&(this._bottom=t,this.resetLayoutY())}),s(0,i,"left",function(){return this._left},function(t){this._left!=t&&(this._left=t,this.resetLayoutX())}),s(0,i,"right",function(){return this._right},function(t){this._right!=t&&(this._right=t,this.resetLayoutX())}),s(0,i,"centerY",function(){return this._centerY},function(t){this._centerY!=t&&(this._centerY=t,this.resetLayoutY())}),n(e,["EMPTY",function(){return this.EMPTY=new e}]),e}(u)),En=function(t){function e(){this.totalCount=0,this._completeHandler=null,this._toLoadList=null,this._isLoading=!1,this._curUrl=null,e.__super.call(this),this._completeHandler=new l(this,this.onOneLoadComplete),this.reset()}r(e,"laya.net.SceneLoader",t);var a=e.prototype;return a.reset=function(){this._toLoadList=[],this._isLoading=!1,this.totalCount=0},a.load=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!0),t instanceof Array){var n=0,r=0;for(r=t.length,n=0;r>n;n++)this._addToLoadList(t[n],e)}else this._addToLoadList(t,e);i&&this._checkNext()},a._addToLoadList=function(t,e){void 0===e&&(e=!1),this._toLoadList.indexOf(t)>=0||hn.getRes(t)||(e?this._toLoadList.push({url:t}):this._toLoadList.push(t),this.totalCount++)},a._checkNext=function(){if(!this._isLoading){if(0==this._toLoadList.length)return this.event("complete"),void 0;var t;t=this._toLoadList.pop(),"string"==typeof t?this.loadOne(t):this.loadOne(t.url,!0)}},a.loadOne=function(t,n){void 0===n&&(n=!1),this._curUrl=t;var r=Q.getFileExtension(this._curUrl);n?i.loader.create(t,this._completeHandler):e.LoadableExtensions[r]?i.loader.load(t,this._completeHandler,null,e.LoadableExtensions[r]):t!=bi.getFileLoadPath(t)||e.No3dLoadTypes[r]||!ln.createMap[r]?i.loader.load(t,this._completeHandler):i.loader.create(t,this._completeHandler)},a.onOneLoadComplete=function(){this._isLoading=!1,hn.getRes(this._curUrl)||console.log("Fail to load:",this._curUrl);var t=Q.getFileExtension(this._curUrl);if(e.LoadableExtensions[t]){var i;i=hn.getRes(this._curUrl),i&&i instanceof laya.components.Prefab&&(i=i.json),i&&(i.loadList&&this.load(i.loadList,!1,!1),i.loadList3D&&this.load(i.loadList3D,!0,!1))}this.event("progress",this.getProgress()),this._checkNext()},a.getProgress=function(){return this.loadedCount/this.totalCount},s(0,a,"loadedCount",function(){return this.totalCount-this.leftCount}),s(0,a,"leftCount",function(){return this._isLoading?this._toLoadList.length+1:this._toLoadList.length}),n(e,["LoadableExtensions",function(){return this.LoadableExtensions={scene:"json",scene3d:"json",ani:"json",ui:"json",prefab:"prefab"}},"No3dLoadTypes",function(){return this.No3dLoadTypes={png:!0,jpg:!0,txt:!0}}]),e}(_),An=function(t){function e(){this.italic=!1,e.__super.call(this)}r(e,"laya.display.css.TextStyle",t);var i=e.prototype;return i.reset=function(){return t.prototype.reset.call(this),this.italic=!1,this.align="left",this.wordWrap=!1,this.leading=0,this.padding=[0,0,0,0],this.bgColor=null,this.borderColor=null,this.asPassword=!1,this.stroke=0,this.strokeColor="#000000",this.bold=!1,this.underline=!1,this.underlineColor=null,this.currBitmapFont=null,this},i.recover=function(){this!==e.EMPTY&&Ki.recover("TextStyle",this.reset())},i.render=function(t,e,i,n){(this.bgColor||this.borderColor)&&e.drawRect(i,n,t.width,t.height,this.bgColor,this.borderColor,1)},e.create=function(){return Ki.getItemByClass("TextStyle",e)},e.EMPTY=new e,e}(ae),Cn=function(t){function e(t,i){e.__super.call(this,t,i)}r(e,"laya.webgl.utils.RenderSprite3D",t);var i=e.prototype;return i.onCreate=function(t){switch(t){case 4:return this._fun=this._blend,void 0}},i._mask=function(t,e,i,n){var r=this._next,s=t.mask,a=e;if(s){a.save();var o=a.globalCompositeOperation,h=new Ge;if(h.copyFrom(s.getBounds()),h.width=Math.round(h.width),h.height=Math.round(h.height),h.x=Math.round(h.x),h.y=Math.round(h.y),h.width>0&&h.height>0){var _=h.width,l=h.height,u=ri.getRT(_,l);a.breakNextMerge(),a.pushRT(),a.addRenderObject(ei.create([a,u,_,l],laya.webgl.utils.RenderSprite3D.tmpTarget,this)),s.render(a,-h.x,-h.y),a.breakNextMerge(),a.popRT(),a.save(),a.clipRect(i+h.x-t.getStyle().pivotX,n+h.y-t.getStyle().pivotY,_,l),r._fun.call(r,t,a,i,n),a.restore(),o=a.globalCompositeOperation,a.addRenderObject(ei.create(["mask"],laya.webgl.utils.RenderSprite3D.setBlendMode,this));var c=di.create(1,0),d=on.INV_UV;a.drawTarget(u,i+h.x-t.getStyle().pivotX,n+h.y-t.getStyle().pivotY,_,l,ui.TEMP.identity(),c,d,6),a.addRenderObject(ei.create([u],laya.webgl.utils.RenderSprite3D.recycleTarget,this)),a.addRenderObject(ei.create([o],laya.webgl.utils.RenderSprite3D.setBlendMode,this))}a.restore()}else r._fun.call(r,t,e,i,n)},i._blend=function(t,e,i,n){var r=t._style,s=this._next;r.blendMode?(e.save(),e.globalCompositeOperation=r.blendMode,s._fun.call(s,t,e,i,n),e.restore()):s._fun.call(s,t,e,i,n)},e.tmpTarget=function(t,e){e.start(),e.clear(0,0,0,0)},e.recycleTarget=function(t){ri.releaseRT(t)},e.setBlendMode=function(t){var e=Ii.mainContext;ue.targetFns[ue.TOINT[t]](e)},n(e,["tempUV",function(){return this.tempUV=new Array(8)}]),e}(U),Sn=function(i){function n(){this.lastScaleX=1,this.lastScaleY=1,this.needResetScale=!1,n.__super.call(this),n.canvas||(n.canvas=t.document.createElement("canvas"),n.canvas.width=512,n.canvas.height=512,n.canvas.style.left="-1000px",n.canvas.style.position="absolute",e.body.appendChild(n.canvas),n.ctx=n.canvas.getContext("2d"))}r(n,"laya.webgl.resource.CharRender_Canvas",i);var s=n.prototype;return s.getWidth=function(t){return n.ctx?(n.ctx._lastFont!=Ce._curFont&&(n.ctx.font=Ce._curFont,n.ctx._lastFont=Ce._curFont),n.ctx.measureText(t).width):0},s.scale=function(t,e){(this.lastScaleX!=t||this.lastScaleY!=e)&&(this.needResetScale&&(n.ctx.restore(),this.lastScaleX=this.lastScaleY=1),n.ctx.save(),this.needResetScale=!0,Ce.isWan1Wan||n.ctx.scale(t,e),this.lastScaleX=t,this.lastScaleY=e)},s.getCharBmp=function(t,e,i,r,s,a,o,h,_,l){if(Ce.isWan1Wan)return this.getCharCanvas(t,e,i,r,s,a,o,h,_,l);n.ctx.font!=e&&(n.ctx.font=e,n.ctx._lastFont=e),a.width=n.ctx.measureText(t).width;var u=a.width*this.lastScaleX,c=a.height*this.lastScaleY;return u+=(o+_)*this.lastScaleX,c+=(h+l)*this.lastScaleY,u=Math.min(u,laya.webgl.resource.CharRender_Canvas.canvas.width),c=Math.min(c,laya.webgl.resource.CharRender_Canvas.canvas.height),n.ctx.clearRect(0,0,u+1,c+1),n.ctx.textBaseline="top",i>0&&(n.ctx.strokeStyle=s,n.ctx.lineWidth=i,n.ctx.strokeText(t,o,h)),n.ctx.fillStyle=r,n.ctx.fillText(t,o,h),Ce.debug&&(n.ctx.strokeStyle="#ff0000",n.ctx.strokeRect(0,0,u,c),n.ctx.strokeStyle="#00ff00",n.ctx.strokeRect(o,h,a.width,a.height)),n.ctx.getImageData(0,0,0|u,0|c)},s.getCharCanvas=function(t,e,i,r,s,a,o,h,_,l){n.ctx.font!=e&&(n.ctx.font=e,n.ctx._lastFont=e),a.width=n.ctx.measureText(t).width;var u=a.width*this.lastScaleX,c=a.height*this.lastScaleY;return u+=(o+_)*this.lastScaleX,c+=(h+l)*this.lastScaleY,u=Math.min(u,Ce.textureWidth),c=Math.min(c,Ce.textureWidth),n.canvas.width=Math.min(u+1,Ce.textureWidth),n.canvas.height=Math.min(c+1,Ce.textureWidth),n.ctx.font=e,this.needResetScale=!1,n.ctx.clearRect(0,0,u+1,c+1),n.ctx.save(),n.ctx.translate(o,h),Ce.scaleFontWithCtx&&n.ctx.scale(this.lastScaleX,this.lastScaleY),n.ctx.textAlign="left",n.ctx.textBaseline="top",i>0?(n.ctx.strokeStyle=s,n.ctx.fillStyle=r,n.ctx.lineWidth=i,n.ctx.strokeText(t,0,0),n.ctx.fillText(t,0,0)):(n.ctx.fillStyle=r,n.ctx.fillText(t,0,0)),Ce.debug&&(n.ctx.strokeStyle="#ff0000",n.ctx.strokeRect(0,0,u,c),n.ctx.strokeStyle="#00ff00",n.ctx.strokeRect(0,0,a.width,a.height)),n.ctx.restore(),n.canvas
},n.canvas=null,n.ctx=null,n}(F),Dn=function(t){function e(){e.__super.call(this,e.__name2int,e.__int2name,e.__int2nameMap)}return r(e,"laya.webgl.shader.d2.ShaderDefines2D",t),e.__init__=function(){e.reg("TEXTURE2D",1),e.reg("PRIMITIVE",4),e.reg("GLOW_FILTER",8),e.reg("BLUR_FILTER",16),e.reg("COLOR_FILTER",32),e.reg("COLOR_ADD",64),e.reg("WORLDMAT",128),e.reg("FILLTEXTURE",256),e.reg("FSHIGHPRECISION",1024)},e.reg=function(t,i){P._reg(t,i,e.__name2int,e.__int2name)},e.toText=function(t,e,i){return P._toText(t,e,i)},e.toInt=function(t){return P._toInt(t,e.__name2int)},e.TEXTURE2D=1,e.PRIMITIVE=4,e.FILTERGLOW=8,e.FILTERBLUR=16,e.FILTERCOLOR=32,e.COLORADD=64,e.WORLDMAT=128,e.FILLTEXTURE=256,e.SKINMESH=512,e.SHADERDEFINE_FSHIGHPRECISION=1024,e.NOOPTMASK=312,e.__name2int={},e.__int2name=[],e.__int2nameMap=[],e}(P),Rn=function(t){function e(){e.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,4,4),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}r(e,"laya.webgl.utils.MeshTexture",t);var i=e.prototype;return i.addData=function(t,i,n,r,s){for(var a=t.length/2,o=this._vb.needSize(a*e.const_stride),h=o>>2,_=this._vb._floatArray32||this._vb.getFloat32Array(),l=this._vb._uint32Array,u=0,c=0;a>c;c++){var d=t[u],f=t[u+1],p=d*r.a+f*r.c+r.tx,m=d*r.b+f*r.d+r.ty;_[h++]=p,_[h++]=m,_[h++]=i[u],_[h++]=i[u+1],u+=2,l[h++]=s,l[h++]=255}this._vb.setNeedUpload();var g=this.vertNum;if(g>0){var v=n.length;v>e.tmpIdx.length&&(e.tmpIdx=new Uint16Array(v));for(var y=0;v>y;y++)e.tmpIdx[y]=n[y]+g;this._ib.appendU16Array(e.tmpIdx,n.length)}else this._ib.append(n);this._ib.setNeedUpload(),this.vertNum+=a,this.indexNum+=n.length},i.releaseMesh=function(){this._vb.setByteLength(0),this._ib.setByteLength(0),this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},i.destroy=function(){this._ib.destroy(),this._vb.destroy(),this._ib.disposeResource(),this._vb.deleteBuffer()},e.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new e},e.const_stride=24,e._POOL=[],n(e,["_fixattriInfo",function(){return this._fixattriInfo=[5126,4,0,5121,4,16,5121,4,20]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),e}(H),Tn=function(e){function i(){this.lastFont="",i.__super.call(this)}r(i,"laya.webgl.resource.CharRender_Native",e);var n=i.prototype;return n.getWidth=function(e){return t.conchTextCanvas?(this.lastFont!=Ce._curFont&&(t.conchTextCanvas.font=Ce._curFont,this.lastFont=Ce._curFont),t.conchTextCanvas.measureText(e).width):0},n.scale=function(){},n.getCharBmp=function(e,i,n,r,s,a,h,_,l,u){if(!t.conchTextCanvas)return null;this.lastFont!=i&&(t.conchTextCanvas.font=Ce._curFont,this.lastFont=Ce._curFont);var c=a.width=t.conchTextCanvas.measureText(e).width,d=a.height;c+=h+l,d+=_+u;var f=o.create(s),p=f.numColor,m=o.create(r),g=m.numColor,v=t.conchTextCanvas.getTextBitmapData(e,g,n>2?2:n,p);return v},i}(F),xn=function(t){function e(){this.contextHeight=0/0,this.contextWidth=0/0,this._htmlBounds=null,this._boundsRec=null,this.repaintHandler=null,e.__super.call(this)}r(e,"laya.html.dom.HTMLDivParser",t);var n=e.prototype;return n.reset=function(){return t.prototype.reset.call(this),this._style.block=!0,this._style.setLineElement(!0),this._style.width=200,this._style.height=200,this.repaintHandler=null,this.contextHeight=0,this.contextWidth=0,this},n.appendHTML=function(t){Ae.parse(this,t,this.URI),this.layout()},n._addChildsToLayout=function(t){var e=this._getWords();if(null==e&&(!this._children||0==this._children.length))return!1;e&&e.forEach(function(e){t.push(e)});for(var i=!0,n=0,r=this._children.length;r>n;n++){var s=this._children[n];i?i=!1:t.push(null),s._addToLayout(t)}return!0},n._addToLayout=function(t){this.layout(),!this.style.absolute&&t.push(this)},n.getBounds=function(){return this._htmlBounds?(this._boundsRec||(this._boundsRec=Ge.create()),this._boundsRec.copyFrom(this._htmlBounds)):null},n.parentRepaint=function(e){void 0===e&&(e=!1),t.prototype.parentRepaint.call(this),this.repaintHandler&&this.repaintHandler.runWith(e)},n.layout=function(){this.style._type|=512;var t=de.layout(this);if(t){this._htmlBounds||(this._htmlBounds=Ge.create());var e=this._htmlBounds;e.x=e.y=0,e.width=this.contextWidth=t[0],e.height=this.contextHeight=t[1]}},s(0,n,"height",function(){return this._height?this._height:this.contextHeight},t.prototype._$set_height),s(0,n,"innerHTML",null,function(t){this.destroyChildren(),this.appendHTML(t)}),s(0,n,"width",function(){return this._width?this._width:this.contextWidth},function(t){var e=!1;e=0===t?t!=this._width:t!=this.width,i.superSet(W,this,"width",t),e&&this.layout()}),e}(W),bn=function(t){function e(){e.__super.call(this,laya.webgl.utils.MeshQuadTexture.const_stride,4,4),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshQuadTexture._fixattriInfo),laya.webgl.utils.MeshQuadTexture._fixib?(this._ib=laya.webgl.utils.MeshQuadTexture._fixib,this._quadNum=e._maxIB):(this.createQuadIB(e._maxIB),laya.webgl.utils.MeshQuadTexture._fixib=this._ib)}r(e,"laya.webgl.utils.MeshQuadTexture",t);var i=e.prototype;return i.releaseMesh=function(){this._vb.setByteLength(0),this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshQuadTexture._POOL.push(this)},i.destroy=function(){this._vb.destroy(),this._vb.deleteBuffer()},i.addQuad=function(t,e,i,n){var r=this._vb,s=r._byteLength>>2;r.setByteLength(s+laya.webgl.utils.MeshQuadTexture.const_stride<<2);var a=r._floatArray32||r.getFloat32Array(),o=r._uint32Array,h=s,_=n?255:0;a[h++]=t[0],a[h++]=t[1],a[h++]=e[0],a[h++]=e[1],o[h++]=i,o[h++]=_,a[h++]=t[2],a[h++]=t[3],a[h++]=e[2],a[h++]=e[3],o[h++]=i,o[h++]=_,a[h++]=t[4],a[h++]=t[5],a[h++]=e[4],a[h++]=e[5],o[h++]=i,o[h++]=_,a[h++]=t[6],a[h++]=t[7],a[h++]=e[6],a[h++]=e[7],o[h++]=i,o[h++]=_,r._upload=!0},e.getAMesh=function(){return laya.webgl.utils.MeshQuadTexture._POOL.length?laya.webgl.utils.MeshQuadTexture._POOL.pop():new e},e.const_stride=24,e._fixib=null,e._maxIB=16384,e._POOL=[],n(e,["_fixattriInfo",function(){return this._fixattriInfo=[5126,4,0,5121,4,16,5121,4,20]}]),e}(H),Pn=(function(t){function e(){e.__super.call(this)}r(e,"laya.html.dom.HTMLLinkElement",t);var i=e.prototype;return i._creates=function(){},i.drawToGraphic=function(){},i.reset=function(){return this._loader&&this._loader.off("complete",this,this._onload),this._loader=null,this},i._onload=function(t){switch(this._loader&&(this._loader=null),this.type){case"text/css":Gi.parseCSS(t,this.URI)}this.repaint(!0)},s(0,i,"href",t.prototype._$get_href,function(t){if(t){if(t=this.formatURL(t),this.URI=new Pi(t),this._loader&&this._loader.off("complete",this,this._onload),hn.getRes(t))return"text/css"==this.type&&Gi.parseCSS(hn.getRes(t),this.URI),void 0;this._loader=new hn,this._loader.once("complete",this,this._onload),this._loader.load(t,"text")}}),e._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g"),e}(W),function(t){function e(){e.__super.call(this)}r(e,"laya.html.dom.HTMLImageElement",t);var i=e.prototype;return i.reset=function(){return t.prototype.reset.call(this),this._tex&&this._tex.off("loaded",this,this.onloaded),this._tex=null,this._url=null,this},i.onloaded=function(){{var t=this._style;t.widthed(this)?-1:this._tex.width,t.heighted(this)?-1:this._tex.height}t.widthed(this)||this._width==this._tex.width||(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),t.heighted(this)||this._height==this._tex.height||(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),this.repaint()},i._addToLayout=function(t){var e=this._style;!e.absolute&&t.push(this)},i.renderSelfToGraphic=function(t,e,i){this._tex&&t.drawImage(this._tex,e,i,this.width||this._tex.width,this.height||this._tex.height)},s(0,i,"src",null,function(t){if(t=this.formatURL(t),this._url!==t){this._url=t;var e=this._tex=hn.getRes(t);e||(this._tex=e=new on,e.load(t),hn.cacheRes(t,e)),e.getIsReady()?this.onloaded():e.once("ready",this,this.onloaded)}}),e}(W),function(t){function e(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,e.__super.call(this)}r(e,"laya.ui.AutoBitmap",t);var n=e.prototype;return n.destroy=function(){t.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},n._setChanged=function(){this._isChanged||(this._isChanged=!0,i.timer.callLater(this,this.changeSource))},n.changeSource=function(){this._isChanged=!1;var t=this._source;if(t&&t.bitmap){var i=this.width,n=this.height,r=this._sizeGrid,s=t.sourceWidth,a=t.sourceHeight;if(!r||s===i&&a===n)this.clear(),this.drawTexture(t,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,i,n);else{this.clear();var o=r[0],h=r[1],_=r[2],l=r[3],u=r[4],c=!1;if(i==s&&(l=h=0),n==a&&(o=_=0),l+h>i){var d=i;c=!0,i=l+h,this.save(),this.clipRect(0,0,d,n)}l&&o&&this.drawImage(e.getTexture(t,0,0,l,o),0,0,l,o),h&&o&&this.drawImage(e.getTexture(t,s-h,0,h,o),i-h,0,h,o),l&&_&&this.drawImage(e.getTexture(t,0,a-_,l,_),0,n-_,l,_),h&&_&&this.drawImage(e.getTexture(t,s-h,a-_,h,_),i-h,n-_,h,_),o&&this.drawBitmap(u,e.getTexture(t,l,0,s-l-h,o),l,0,i-l-h,o),_&&this.drawBitmap(u,e.getTexture(t,l,a-_,s-l-h,_),l,n-_,i-l-h,_),l&&this.drawBitmap(u,e.getTexture(t,0,o,l,a-o-_),0,o,l,n-o-_),h&&this.drawBitmap(u,e.getTexture(t,s-h,o,h,a-o-_),i-h,o,h,n-o-_),this.drawBitmap(u,e.getTexture(t,l,o,s-l-h,a-o-_),l,o,i-l-h,n-o-_),c&&this.restore()}this._repaint()}},n.drawBitmap=function(t,e,i,n,r,s){void 0===r&&(r=0),void 0===s&&(s=0),.1>r||.1>s||(!t||e.width==r&&e.height==s?this.drawImage(e,i,n,r,s):this.fillTexture(e,i,n,r,s))},s(0,n,"sizeGrid",function(){return this._sizeGrid},function(t){this._sizeGrid=t,this._setChanged()}),s(0,n,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(t){this._width!=t&&(this._width=t,this._setChanged())}),s(0,n,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(t){this._height!=t&&(this._height=t,this._setChanged())}),s(0,n,"source",function(){return this._source},function(t){t?(this._source=t,this._setChanged()):(this._source=null,this.clear())}),e.getTexture=function(t,e,i,n,r){0>=n&&(n=1),0>=r&&(r=1),t.$_GID||(t.$_GID=Q.getGID());var s;return s&&s._getSource()||(s=on.createFromTexture(t,e,i,n,r)),s},e}(Ue)),Ln=function(t){function e(){e.__super.call(this)}return r(e,"laya.webgl.BufferState2D",t),e}(Ye),In=function(t){function e(){this.texcoord=null,this.position=null,this.offsetX=300,this.offsetY=0,e.__super.call(this,512,0);var t=8*be.BYTES_PE;this.position=[2,5126,!1,t,0],this.texcoord=[2,5126,!1,t,2*be.BYTES_PE],this.color=[4,5126,!1,t,4*be.BYTES_PE]}return r(e,"laya.webgl.shader.d2.skinAnishader.SkinSV",t),e}(di),Mn=function(t){function e(t){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,void 0===t&&(t=0),e.__super.call(this,1,t),this._attribLocation=["posuv",0,"attribColor",1,"attribFlags",2]}r(e,"laya.webgl.shader.d2.value.TextureSV",t);var i=e.prototype;return i.clear=function(){this.texture=null,this.shader=null,this.defines._value=this.subID+(Ii.shaderHighPrecision?1024:0)},e}(di),wn=function(t){function e(){e.__super.call(this,4,0),this._attribLocation=["position",0,"attribColor",1]}return r(e,"laya.webgl.shader.d2.value.PrimitiveSV",t),e}(di),On=function(t){function e(){this._x=0,this._y=0,this._width=0,this._height=0,this._visible=!0,this._mouseState=0,this._zOrder=0,this._renderType=0,this._transform=null,this._tfChanged=!1,this._texture=null,this._boundStyle=null,this._graphics=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,e.__super.call(this),this._repaint=0,this._style=ae.EMPTY,this._cacheStyle=oi.EMPTY}r(e,"laya.display.Sprite",t);var n=e.prototype;return n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._style&&this._style.recover(),this._cacheStyle&&this._cacheStyle.recover(),this._boundStyle&&this._boundStyle.recover(),this._style=null,this._cacheStyle=null,this._boundStyle=null,this._transform=null,this._graphics&&this._graphics.autoDestroy&&this._graphics.destroy(),this._graphics=null,this.texture=null},n.updateZOrder=function(){Q.updateOrder(this._children)&&this.repaint()},n._getBoundsStyle=function(){return this._boundStyle||(this._boundStyle=De.create()),this._boundStyle},n._setCustomRender=function(){},n._setCacheAs=function(){},n._checkCanvasEnable=function(){var t=this._cacheStyle.needEnableCanvasRender();this._getCacheStyle().enableCanvasRender=t,t?(this._cacheStyle.cacheAs=this._cacheStyle.needBitmapCache()?"bitmap":this._cacheStyle.userSetCache,this._cacheStyle.reCache=!0,this._renderType|=8):(this._cacheStyle.cacheAs="none",this._cacheStyle.releaseContext(),this._renderType&=-9),this._setCacheAs(this._cacheStyle.cacheAs),this._setRenderType(this._renderType)},n.reCache=function(){this._cacheStyle.reCache=!0,this._repaint|=2},n.getRepaint=function(){return this._repaint},n._setX=function(t){this._x=t},n._setY=function(t){this._y=t},n.setSelfBounds=function(t){this._getBoundsStyle().userBounds=t},n.getBounds=function(){return this._getBoundsStyle().bounds=Ge._getWrapRec(this._boundPointsToParent())},n.getSelfBounds=function(){return this._boundStyle&&this._boundStyle.userBounds?this._boundStyle.userBounds:this._graphics||0!==this._children.length||this._texture?this._getBoundsStyle().bounds=Ge._getWrapRec(this._getBoundPointsM(!1)):Ge.TEMP.setTo(0,0,0,0)},n._boundPointsToParent=function(t){void 0===t&&(t=!1);var e=0,i=0;this._style&&(e=this.pivotX,i=this.pivotY,t=t||0!==this._style.rotation,this._style.scrollRect&&(e+=this._style.scrollRect.x,i+=this._style.scrollRect.y));var n=this._getBoundPointsM(t);if(!n||n.length<1)return n;if(8!=n.length&&(n=t?Y.scanPList(n):Ge._getWrapRec(n,Ge.TEMP)._getBoundPoints()),!this.transform)return Q.transPointList(n,this._x-e,this._y-i),n;var r=Zi.TEMP,s=0,a=n.length;for(s=0;a>s;s+=2)r.x=n[s],r.y=n[s+1],this.toParentPoint(r),n[s]=r.x,n[s+1]=r.y;return n},n.getGraphicBounds=function(t){return void 0===t&&(t=!1),this._graphics?this._graphics.getBounds(t):Ge.TEMP.setTo(0,0,0,0)},n._getBoundPointsM=function(t){if(void 0===t&&(t=!1),this._boundStyle&&this._boundStyle.userBounds)return this._boundStyle.userBounds._getBoundPoints();if(this._boundStyle||this._getBoundsStyle(),this._boundStyle.temBM||(this._boundStyle.temBM=[]),this._style.scrollRect){var e=Q.clearArray(this._boundStyle.temBM),i=Ge.TEMP;return i.copyFrom(this._style.scrollRect),Q.concatArray(e,i._getBoundPoints()),e}var n;this._graphics?n=this._graphics.getBoundPoints():(n=Q.clearArray(this._boundStyle.temBM),this._texture&&(i=Ge.TEMP,i.setTo(0,0,this._texture.width,this._texture.height),Q.concatArray(n,i._getBoundPoints())));var r,s,a;a=this._children;for(var o=0,h=a.length;h>o;o++)r=a[o],r instanceof laya.display.Sprite&&r._visible===!0&&(s=r._boundPointsToParent(t),s&&(n=n?Q.concatArray(n,s):s));return n},n._getCacheStyle=function(){return this._cacheStyle===oi.EMPTY&&(this._cacheStyle=oi.create()),this._cacheStyle},n.getStyle=function(){return this._style===ae.EMPTY&&(this._style=ae.create()),this._style},n.setStyle=function(t){this._style=t},n._setScaleX=function(t){this._style.scaleX=t},n._setScaleY=function(t){this._style.scaleY=t},n._setRotation=function(t){this._style.rotation=t},n._setSkewX=function(t){this._style.skewX=t},n._setSkewY=function(t){this._style.skewY=t},n._createTransform=function(){return ui.create()},n._adjustTransform=function(){this._tfChanged=!1;var t=this._style,e=t.scaleX,i=t.scaleY,n=this._transform||(this._transform=this._createTransform());if(t.rotation||1!==e||1!==i||0!==t.skewX||0!==t.skewY){n._bTransform=!0;var r=.0174532922222222*(t.rotation-t.skewX),s=.0174532922222222*(t.rotation+t.skewY),a=Math.cos(s),o=Math.sin(s),h=Math.sin(r),_=Math.cos(r);n.a=e*a,n.b=e*o,n.c=-i*h,n.d=i*_,n.tx=n.ty=0}else n.identity(),this._renderType&=-3,this._setRenderType(this._renderType);return n},n._setTransform=function(){},n._setPivotX=function(t){var e=this.getStyle();e&&(e.pivotX=t)},n._getPivotX=function(){return this._style.pivotX},n._setPivotY=function(t){var e=this.getStyle();e&&(e.pivotY=t)},n._getPivotY=function(){return this._style.pivotY},n._setAlpha=function(t){if(this._style.alpha!==t){var e=this.getStyle();e.alpha=t,1!==t?this._renderType|=1:this._renderType&=-2,this._setRenderType(this._renderType),this.parentRepaint()}},n._getAlpha=function(){return this._style.alpha},n._setBlendMode=function(){},n._setGraphics=function(){},n._setGraphicsCallBack=function(){},n._setScrollRect=function(){},n.pos=function(t,e,i){if(void 0===i&&(i=!1),this._x!==t||this._y!==e){if(this.destroyed)return this;if(i){this._setX(t),this._setY(e),this.parentRepaint(2);var n=this._cacheStyle.maskParent;n&&n.repaint(2)}else this.x=t,this.y=e}return this},n.pivot=function(t,e){return this.pivotX=t,this.pivotY=e,this},n.size=function(t,e){return this.width=t,this.height=e,this},n.scale=function(t,e,i){void 0===i&&(i=!1);var n=this.getStyle();if(n.scaleX!=t||n.scaleY!=e){if(this.destroyed)return this;i?(this._setScaleX(t),this._setScaleY(e),this._setTranformChange()):(this.scaleX=t,this.scaleY=e)}return this},n.skew=function(t,e){return this.skewX=t,this.skewY=e,this},n.render=function(t,e,i){Li.spriteCount++,U.renders[this._renderType]._fun(this,t,e+this._x,i+this._y),this._repaint=0},n.drawToCanvas=function(t,e,i,n){return Yi.drawToCanvas(this,this._renderType,t,e,i,n)},n.customRender=function(){this._repaint=3},n._applyFilters=function(){if(!wi.isWebGL){var t;if(t=this._cacheStyle.filters,t&&!(t.length<1))for(var e=0,i=t.length;i>e;e++)t[e]._action&&t[e]._action.apply(this._cacheStyle)}},n._setColorFilter=function(){},n._isHaveGlowFilter=function(){var t=0,e=0;if(this.filters)for(t=0;t<this.filters.length;t++)if(8==this.filters[t].type)return!0;for(t=0,e=this._children.length;e>t;t++)if(this._children[t]._isHaveGlowFilter())return!0;return!1},n.localToGlobal=function(t,e,n){void 0===e&&(e=!1),e===!0&&(t=new Zi(t.x,t.y));var r=this;for(n=n||i.stage;r&&r!=n;)t=r.toParentPoint(t),r=r.parent;return t},n.globalToLocal=function(t,e,n){void 0===e&&(e=!1),e&&(t=new Zi(t.x,t.y));var r=this,s=[];for(n=n||i.stage;r&&r!=n;)s.push(r),r=r.parent;for(var a=s.length-1;a>=0;)r=s[a],t=r.fromParentPoint(t),a--;return t},n.toParentPoint=function(t){if(!t)return t;t.x-=this.pivotX,t.y-=this.pivotY,this.transform&&this._transform.transformPoint(t),t.x+=this._x,t.y+=this._y;var e=this._style.scrollRect;return e&&(t.x-=e.x,t.y-=e.y),t},n.fromParentPoint=function(t){if(!t)return t;t.x-=this._x,t.y-=this._y;var e=this._style.scrollRect;return e&&(t.x+=e.x,t.y+=e.y),this.transform&&this._transform.invertTransformPoint(t),t.x+=this.pivotX,t.y+=this.pivotY,t},n.on=function(e,i,n,r){return 1!==this._mouseState&&this.isMouseEvent(e)?(this.mouseEnabled=!0,this._setBit(64,!0),this._parent&&this._$2__onDisplay(),this._createListener(e,i,n,r,!1)):t.prototype.on.call(this,e,i,n,r)},n.once=function(e,i,n,r){return 1!==this._mouseState&&this.isMouseEvent(e)?(this.mouseEnabled=!0,this._setBit(64,!0),this._parent&&this._$2__onDisplay(),this._createListener(e,i,n,r,!0)):t.prototype.once.call(this,e,i,n,r)},n._$2__onDisplay=function(){if(1!==this._mouseState){var t=this;for(t=t.parent;t&&1!==t._mouseState&&!t._getBit(64);)t.mouseEnabled=!0,t._setBit(64,!0),t=t.parent}},n._setParent=function(e){t.prototype._setParent.call(this,e),e&&this._getBit(64)&&this._$2__onDisplay()},n.loadImage=function(t,e){function i(){n.repaint(3),e&&e.run()}var n=this;if(null==t)this.texture=null,i();else{var r=hn.getRes(t);r||(r=new on,r.load(t),hn.cacheRes(t,r)),this.texture=r,r.getIsReady()?i():r.once("ready",null,i)}return this},n.repaint=function(t){void 0===t&&(t=2),this._repaint&t||(this._repaint|=t,this.parentRepaint(t)),this._cacheStyle&&this._cacheStyle.maskParent&&this._cacheStyle.maskParent.repaint(t)},n._needRepaint=function(){return 2&this._repaint&&this._cacheStyle.enableCanvasRender&&this._cacheStyle.reCache},n._childChanged=function(t){this._children.length?this._renderType|=8192:this._renderType&=-8193,this._setRenderType(this._renderType),t&&this._getBit(32)&&i.systemTimer.callLater(this,this.updateZOrder),this.repaint(3)},n.parentRepaint=function(t){void 0===t&&(t=2);var e=this._parent;!e||e._repaint&t||(e._repaint|=t,e.parentRepaint(t))},n._setMask=function(){},n.startDrag=function(t,e,i,n,r,s,a){void 0===e&&(e=!1),void 0===i&&(i=0),void 0===n&&(n=300),void 0===s&&(s=!1),void 0===a&&(a=.92),this._style.dragging||(this.getStyle().dragging=new Xi),this._style.dragging.start(this,t,e,i,n,r,s,a)},n.stopDrag=function(){this._style.dragging&&this._style.dragging.stop()},n._setDisplay=function(e){e||this._cacheStyle&&(this._cacheStyle.releaseContext(),this._cacheStyle.releaseFilterCache(),this._cacheStyle.hasGlowFilter&&(this._cacheStyle.hasGlowFilter=!1)),t.prototype._setDisplay.call(this,e)},n.hitTestPoint=function(t,e){var i=this.globalToLocal(Zi.TEMP.setTo(t,e));t=i.x,e=i.y;var n=this._style.hitArea?this._style.hitArea:this._width>0&&this._height>0?Ge.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds();return n.contains(t,e)},n.getMousePoint=function(){return this.globalToLocal(Zi.TEMP.setTo(i.stage.mouseX,i.stage.mouseY))},n._setTexture=function(){},n._setRenderType=function(){},n._setTranformChange=function(){this._tfChanged=!0,this._renderType|=2,this._setRenderType(this._renderType),this.parentRepaint(2)},n._setBgStyleColor=function(){},n._setBorderStyleColor=function(){},s(0,n,"customRenderEnable",null,function(t){t&&(this._renderType|=2048,this._setRenderType(this._renderType),this._setCustomRender())}),s(0,n,"cacheAs",function(){return this._cacheStyle.cacheAs},function(t){t!==this._cacheStyle.userSetCache&&(wi.isConchApp&&"bitmap"!=t||this.mask&&"normal"===t||(this._setCacheAs(t),this._getCacheStyle().userSetCache=t,this._checkCanvasEnable(),this.repaint()))}),s(0,n,"globalScaleY",function(){for(var t=1,e=this;e&&e!==i.stage;)t*=e.scaleY,e=e.parent;return t}),s(0,n,"hitArea",function(){return this._style.hitArea},function(t){this.getStyle().hitArea=t}),s(0,n,"staticCache",function(){return this._cacheStyle.staticCache},function(t){this._getCacheStyle().staticCache=t,t||this.reCache()}),s(0,n,"displayWidth",function(){return this.width*this.scaleX}),s(0,n,"zOrder",function(){return this._zOrder},function(t){this._zOrder!=t&&(this._zOrder=t,this._parent&&(t&&this._parent._setBit(32,!0),i.systemTimer.callLater(this._parent,this.updateZOrder)))}),s(0,n,"rotation",function(){return this._style.rotation},function(t){var e=this.getStyle();e.rotation!==t&&(this._setRotation(t),this._setTranformChange())}),s(0,n,"width",function(){return this.autoSize?this.texture?this.texture.width:this._graphics||0!==this._children.length?this.getSelfBounds().width:0:this._width||(this.texture?this.texture.width:0)},function(t){this._width!==t&&(this._width=t,this.repaint())}),s(0,n,"x",function(){return this._x},function(t){if(!this.destroyed&&this._x!==t){this._setX(t),this.parentRepaint(2);var e=this._cacheStyle.maskParent;e&&e.repaint(2)}}),s(0,n,"texture",function(){return this._texture},function(t){"string"==typeof t?this.loadImage(t):this._texture!=t&&(this._texture&&this._texture._removeReference(),this._texture=t,t&&t._addReference(),this._setTexture(t),t?this._renderType|=256:this._renderType&=-257,this._setRenderType(this._renderType),this.repaint())}),s(0,n,"globalRotation",function(){for(var t=0,e=this;e&&e!==i.stage;)t+=e.rotation,e=e.parent;return t}),s(0,n,"y",function(){return this._y},function(t){if(!this.destroyed&&this._y!==t){this._setY(t),this.parentRepaint(2);var e=this._cacheStyle.maskParent;e&&e.repaint(2)}}),s(0,n,"displayHeight",function(){return this.height*this.scaleY}),s(0,n,"height",function(){return this.autoSize?this.texture?this.texture.height:this._graphics||0!==this._children.length?this.getSelfBounds().height:0:this._height||(this.texture?this.texture.height:0)},function(t){this._height!==t&&(this._height=t,this.repaint())}),s(0,n,"blendMode",function(){return this._style.blendMode},function(t){this._setBlendMode(t),this.getStyle().blendMode=t,t&&"source-over"!=t?this._renderType|=4:this._renderType&=-5,this._setRenderType(this._renderType),this.parentRepaint()}),s(0,n,"scaleX",function(){return this._style.scaleX},function(t){var e=this.getStyle();e.scaleX!==t&&(this._setScaleX(t),this._setTranformChange())}),s(0,n,"scaleY",function(){return this._style.scaleY},function(t){var e=this.getStyle();e.scaleY!==t&&(this._setScaleY(t),this._setTranformChange())}),s(0,n,"stage",function(){return i.stage}),s(0,n,"skewX",function(){return this._style.skewX},function(t){var e=this.getStyle();e.skewX!==t&&(this._setSkewX(t),this._setTranformChange())}),s(0,n,"scrollRect",function(){return this._style.scrollRect},function(t){this.getStyle().scrollRect=t,this._setScrollRect(t),this.repaint(),t?this._renderType|=64:this._renderType&=-65,this._setRenderType(this._renderType)}),s(0,n,"skewY",function(){return this._style.skewY},function(t){var e=this.getStyle();e.skewY!==t&&(this._setSkewY(t),this._setTranformChange())}),s(0,n,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(t){this._tfChanged=!1;var e=this._transform||(this._transform=this._createTransform());t.copyTo(e),this._setTransform(e),t&&(this._x=t.tx,this._y=t.ty,t.tx=t.ty=0),t?this._renderType|=2:this._renderType&=-3,this._setRenderType(this._renderType),this.parentRepaint()}),s(0,n,"pivotX",function(){return this._getPivotX()},function(t){this._setPivotX(t),this.repaint()}),s(0,n,"pivotY",function(){return this._getPivotY()},function(t){this._setPivotY(t),this.repaint()}),s(0,n,"alpha",function(){return this._getAlpha()},function(t){t=0>t?0:t>1?1:t,this._setAlpha(t)}),s(0,n,"visible",function(){return this._visible},function(t){this._visible!==t&&(this._visible=t,this.parentRepaint(3))}),s(0,n,"graphics",function(){return this._graphics||(this.graphics=new Ue,this._graphics.autoDestroy=!0),this._graphics},function(t){this._graphics&&(this._graphics._sp=null),this._graphics=t,t?(this._setGraphics(t),this._renderType|=512,t._sp=this):this._renderType&=-513,this._setRenderType(this._renderType),this.repaint()}),s(0,n,"filters",function(){return this._cacheStyle.filters},function(t){t&&0===t.length&&(t=null),this._cacheStyle.filters!=t&&(this._getCacheStyle().filters=t?t.slice():null,(wi.isWebGL||wi.isConchApp)&&(t&&t.length?(this._setColorFilter(t[0]),this._renderType|=16):(this._setColorFilter(null),this._renderType&=-17),this._setRenderType(this._renderType)),t&&t.length>0?(this._getBit(16)||this._setBitUp(16),(wi.isWebGL||wi.isConchApp)&&1==t.length&&t[0]instanceof laya.filters.ColorFilter||(this._getCacheStyle().cacheForFilters=!0,this._checkCanvasEnable())):this._cacheStyle.cacheForFilters&&(this._cacheStyle.cacheForFilters=!1,this._checkCanvasEnable()),this._getCacheStyle().hasGlowFilter=this._isHaveGlowFilter(),this.repaint())}),s(0,n,"mask",function(){return this._cacheStyle.mask},function(t){t&&this.mask&&this.mask._cacheStyle.maskParent||(this._getCacheStyle().mask=t,this._setMask(t),this._checkCanvasEnable(),t?t._getCacheStyle().maskParent=this:this.mask&&(this.mask._getCacheStyle().maskParent=null),this._renderType|=32,this._setRenderType(this._renderType),this.parentRepaint(3))}),s(0,n,"mouseEnabled",function(){return this._mouseState>1},function(t){this._mouseState=t?2:1}),s(0,n,"globalScaleX",function(){for(var t=1,e=this;e&&e!==i.stage;)t*=e.scaleX,e=e.parent;return t}),s(0,n,"mouseX",function(){return this.getMousePoint().x}),s(0,n,"mouseY",function(){return this.getMousePoint().y}),s(0,n,"viewport",function(){return this._style.viewport},function(t){if("string"==typeof t){var e;e=t.split(","),e.length>3&&(t=new Ge(parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])))}this.getStyle().viewport=t}),e.fromImage=function(t){return(new e).loadImage(t)},e}(en),Bn=function(t){function e(){this.hr=null,this.txtLogin=null,this.txtReg=null,e.__super.call(this),oe.multiTouchEnabled=!1}r(e,"script.MainPageControl",t);var i=e.prototype;return i.onStart=function(){this.txtLogin=this.owner.txt_login,this.txtLogin.on("click",this,this.onShowLogin),this.txtReg=this.owner.txt_reg,this.txtReg.on("click",this,this.onShowReg);var t=this.owner.btnUpload;t.on("click",this,this.onShowUpload);var e=this.owner.btnUserCenter;e.on("click",this,this.onShowUserCenter),rn.instance.on("LOGIN_SUCESS",this,this.onSucessLogin)},i.onShowUpload=function(){y.instance.openView("VIEW_PICMANAGER",!0)},i.onShowUserCenter=function(){y.instance.openView("VIEW_USERCENTER",!0)},i.onShowLogin=function(){f.instance.isLogin||y.instance.openView("VIEW_lOGPANEL")},i.onShowReg=function(){f.instance.isLogin?T.instance.Request("http://47.101.178.87/account/logout?",this,this.onLoginOutBack,"","post"):y.instance.openView("VIEW_REGPANEL")},i.onLoginOutBack=function(t){var e=JSON.parse(t);0==e.status&&(f.instance.isLogin=!1,this.txtLogin.text="登录",this.txtReg.text="注册")},i.onSucessLogin=function(t){this.txtLogin.text=t,this.txtReg.text="退出"},i.onEnable=function(){oe.multiTouchEnabled=!1;var t=this.owner.panel_main;t.vScrollBarSkin=""},i.onHttpRequestError=function(t){console.log(t)},i.onHttpRequestProgress=function(t){console.log(t)},i.onHttpRequestComplete=function(t){console.log(t)},i.onBrowerResize=function(){console.log("wid:"+Me.width);this.owner},i.onTipClick=function(){},e}(nn),Nn=function(t){function e(){this.uiSkin=null,this.viewArr=null,this.btntxtArr=null,this.curView=null,e.__super.call(this)}r(e,"script.usercenter.UserMainControl",t);var i=e.prototype;return i.onStart=function(){this.uiSkin=this.owner,this.uiSkin.panel_main.vScrollBarSkin="",this.uiSkin.sp_container.autoSize=!0,this.uiSkin.firstpage.on("click",this,this.onBackToMain),this.viewArr=[$r,Qr,null],this.btntxtArr=[];for(var t=0;9>t;t++)this.uiSkin["btntxt"+t].on("click",this,this.onShowEditView,[t]),this.uiSkin["btntxt"+t].on("mouseover",this,this.onMouseOverHandler),this.uiSkin["btntxt"+t].on("mouseout",this,this.onMouseOutHandler),this.btntxtArr.push(this.uiSkin["btntxt"+t]);this.onShowEditView(0)},i.onMouseOutHandler=function(){K.cursor="auto"},i.onMouseOverHandler=function(){K.cursor="hand"},i.onShowEditView=function(t){for(;this.uiSkin.sp_container.numChildren>0;)this.uiSkin.sp_container.removeChildAt(0);for(var e=0;e<this.btntxtArr.length;e++)this.btntxtArr[e].color="#272524";this.btntxtArr[t].color="#FF00000",this.viewArr[t]?(this.curView=new this.viewArr[t],this.curView.on("resize",this,this.onLoadComplete),this.uiSkin.sp_container.addChild(this.curView),this.uiSkin.sp_container.height=this.curView.height):this.uiSkin.sp_container.height=0,this.uiSkin.panel_main.refresh(),this.uiSkin.panel_main.scrollTo(0,0)},i.onLoadComplete=function(){this.curView&&(this.uiSkin.sp_container.height=this.curView.height,this.uiSkin.panel_main.refresh())},i.onBackToMain=function(){y.instance.closeView("VIEW_USERCENTER")},e}(nn),Fn=function(t){function e(){this.uiSkin=null,this.directTree=[],e.__super.call(this)}r(e,"script.order.SelectPicControl",t);var n=e.prototype;return n.onStart=function(){var t=this;this.uiSkin=this.owner,this.directTree=[],this.uiSkin.folderList.itemRender=zs,this.uiSkin.folderList.vScrollBarSkin="",this.uiSkin.folderList.selectEnable=!0,this.uiSkin.folderList.spaceY=2,this.uiSkin.folderList.renderHandler=new l(this,this.updateDirectItem),this.uiSkin.folderList.selectHandler=new l(this,this.onSlecteDirect),this.uiSkin.picList.itemRender=Xs,this.uiSkin.picList.vScrollBarSkin="",this.uiSkin.picList.selectEnable=!1,this.uiSkin.picList.spaceY=0,this.uiSkin.picList.renderHandler=new l(this,this.updatePicInfoItem),this.uiSkin.flder0.visible=!1,this.uiSkin.flder1.visible=!1,this.uiSkin.flder2.visible=!1;for(var e=0;3>e;e++)this.uiSkin["flder"+e].on("click",this,this.onClickTopDirectLbl,[e]);i.timer.once(10,this,function(){t.uiSkin.folderList.array=[],t.uiSkin.picList.array=[],T.instance.Request("http://47.101.178.87/dir/list?",this,t.onGetTopDirListBack,"path=0|","post")
}),this.uiSkin.htmltext.style.fontSize=20,this.uiSkin.htmltext.innerHTML="<span color='#222222' size='20'>已选择</span><span color='#FF0000' size='20'>0</span><span color='#222222' size='20'>张图片</span>",this.uiSkin.btncancel.on("click",this,this.onCloseView),this.uiSkin.btnok.on("click",this,this.onConfirmSelect),rn.instance.on("SELECT_FOLDER",this,this.onSelectChildFolder),rn.instance.on("UPDATE_FILE_LIST",this,this.getFileList),rn.instance.on("SELECT_PIC_ORDER",this,this.seletPicToOrder)},n.onConfirmSelect=function(){rn.instance.event("ADD_PIC_FOR_ORDER"),this.onCloseView()},n.onCloseView=function(){y.instance.closeView("VIEW_SELECT_PIC_TO_ORDER")},n.seletPicToOrder=function(t){var e=S.instance.haselectPic.hasOwnProperty(t.fid);e?delete S.instance.haselectPic[t.fid]:S.instance.haselectPic[t.fid]=t;var i,n=0;for(var r in S.instance.haselectPic)i=S.instance.haselectPic[r],n++;this.uiSkin.htmltext.innerHTML="<span color='#222222' size='20'>已选择</span><span color='#FF0000' size='20'>"+n+"</span><span color='#222222' size='20'>张图片</span>"},n.onGetTopDirListBack=function(t){var e=JSON.parse(t);0==e.status&&(S.instance.initTopDirectoryList(e),this.uiSkin.folderList.array=S.instance.topDirectList,this.uiSkin.picList.array=S.instance.curFileList,S.instance.topDirectList.length>0&&(S.instance.curSelectDir=S.instance.topDirectList[0],this.directTree.push(S.instance.curSelectDir),this.updateCurDirectLabel(),this.uiSkin.folderList.cells[0].ShowSelected=!0,this.getFileList()))},n.getFileList=function(){T.instance.Request("http://47.101.178.87/dir/list?",this,this.onGetDirFileListBack,"path="+S.instance.curSelectDir.dpath,"post")},n.onGetDirFileListBack=function(t){var e=JSON.parse(t);0==e.status&&(S.instance.initCurDirFiles(e),this.uiSkin.picList.array=S.instance.curFileList)},n.onDestroy=function(){rn.instance.off("SELECT_FOLDER",this,this.onSelectChildFolder),rn.instance.off("UPDATE_FILE_LIST",this,this.getFileList),rn.instance.off("SELECT_PIC_ORDER",this,this.seletPicToOrder)},n.onSlecteDirect=function(t){var e;for(var i in this.uiSkin.folderList.cells)e=this.uiSkin.folderList.cells[i],e.ShowSelected=e.directData==this.uiSkin.folderList.array[t];var n=this.uiSkin.folderList.array[t];S.instance.curSelectDir=n,this.directTree=[],this.directTree.push(S.instance.curSelectDir),this.updateCurDirectLabel(),this.getFileList()},n.onSelectChildFolder=function(t){S.instance.curSelectDir=t,this.directTree.push(S.instance.curSelectDir),this.updateCurDirectLabel(),this.getFileList()},n.onClickTopDirectLbl=function(t){t!=this.directTree.length-1&&(S.instance.curSelectDir=this.directTree[t],this.directTree.splice(t+1,this.directTree.length-t-1),this.updateCurDirectLabel(),this.getFileList())},n.updateCurDirectLabel=function(){this.uiSkin.flder0.visible=!1,this.uiSkin.flder1.visible=!1,this.uiSkin.flder2.visible=!1;for(var t=0;t<this.directTree.length;t++)3>t&&(this.uiSkin["flder"+t].text=this.directTree[t].directName+">",this.uiSkin["flder"+t].visible=!0)},n.updateDirectItem=function(t){t.setData(t.dataSource)},n.updatePicInfoItem=function(t){t.setData(t.dataSource)},e}(nn),kn=function(t){function e(){this.uiSKin=null,this.param=null,e.__super.call(this)}r(e,"script.login.LogPanelControl",t);var i=e.prototype;return i.onStart=function(){this.uiSKin=this.owner,this.owner.closebtn.on("click",this,this.onCloseScene),this.owner.bgimg.alpha=.5,this.uiSKin.input_account.maxChars=11,this.uiSKin.input_account.restrict="0-9",this.uiSKin.input_pwd.maxChars=20,this.uiSKin.input_pwd.type="password",this.uiSKin.txt_reg.underline=!0,this.uiSKin.txt_reg.underlineColor="#121212",this.uiSKin.txt_forget.underline=!0,this.uiSKin.txt_forget.underlineColor="#121212",this.uiSKin.txt_reg.on("click",this,this.onRegister),this.uiSKin.txt_forget.on("click",this,this.onResetpwd),this.uiSKin.btn_login.on("click",this,this.onLogin)},i.onLogin=function(){if(11!=this.uiSKin.input_account.text.length)return y.showAlert("请填写正确的账号"),void 0;if(this.uiSKin.input_pwd.text.length<6)return y.showAlert("密码位数至少是6位"),void 0;var t="phone="+this.uiSKin.input_account.text+"&pwd="+this.uiSKin.input_pwd.text+"&mode=0";T.instance.Request("http://47.101.178.87/account/login?",this,this.onLoginBack,t,"post")},i.onLoginBack=function(t){var e=JSON.parse(t);0==e.status&&(f.instance.isLogin=!0,y.showAlert("登陆成功"),rn.instance.event("LOGIN_SUCESS",this.uiSKin.input_account.text),y.instance.closeView("VIEW_lOGPANEL"))},i.onRegister=function(){y.instance.openView("VIEW_REGPANEL",!0)},i.onResetpwd=function(){y.instance.openView("VIEW_CHANGEPWD",!0)},i.onEnable=function(){},i.onCloseScene=function(){y.instance.closeView("VIEW_lOGPANEL")},e}(nn),Vn=function(t){function e(){this.txt=null,this.undercolor="#222222",e.__super.call(this)}r(e,"script.prefabScript.LinkTextControl",t);var i=e.prototype;return i.onStart=function(){this.txt=this.owner,this.txt.underline=!0,this.txt.underlineColor=this.undercolor,this.txt.on("mouseover",this,this.onMouseOverHandler),this.txt.on("mouseout",this,this.onMouseOutHandler)},i.onMouseOutHandler=function(){K.cursor="auto"},i.onMouseOverHandler=function(){K.cursor="hand"},e}(nn),Un=function(t){function e(){this.uiSkin=null,this.param=null,e.__super.call(this)}r(e,"utils.AddMsgControl",t);var i=e.prototype;return i.onStart=function(){this.uiSkin=this.owner,this.uiSkin.inputmsg.maxChars=50,this.uiSkin.btnok.on("click",this,this.onClickOk),this.uiSkin.btncancel.on("click",this,this.onCloseView),this.param&&null!=this.param.msg&&(this.uiSkin.inputmsg.text=this.param.msg)},i.onClickOk=function(){null!=this.param.callback&&this.param.callback.call(this.param.caller,this.uiSkin.inputmsg.text),this.onCloseView()},i.onCloseView=function(){y.instance.closeView("VIEW_ADD_MESSAGE")},e}(nn),Wn=function(t){function e(){this.uiSkin=null,this.createbox=null,this.isCreateTopDir=!0,this.directTree=[],this.param=null,e.__super.call(this)}r(e,"script.picUpload.PicManagerControl",t);var n=e.prototype;return n.onStart=function(){var t=this;this.directTree=[],this.uiSkin=this.owner,this.uiSkin.btnNewDir.on("click",this,this.onCreateNewDirect),this.uiSkin.btnNewFolder.on("click",this,this.onCreateNewFolder),this.uiSkin.btnorder.on("click",this,this.onshowOrder),this.createbox=this.uiSkin.boxNewFolder,this.createbox.visible=!1,this.uiSkin.firstpage.underline=!0,this.uiSkin.firstpage.underlineColor="#121212",this.uiSkin.firstpage.on("click",this,this.onBackToMain),this.uiSkin.input_folename.maxChars=10,this.uiSkin.btnCloseInput.on("click",this,this.onCloseCreateFolder),this.uiSkin.folderList.itemRender=zs,this.uiSkin.folderList.vScrollBarSkin="",this.uiSkin.folderList.selectEnable=!0,this.uiSkin.folderList.spaceY=2,this.uiSkin.folderList.renderHandler=new l(this,this.updateDirectItem),this.uiSkin.folderList.selectHandler=new l(this,this.onSlecteDirect),this.uiSkin.picList.itemRender=Xs,this.uiSkin.picList.vScrollBarSkin="",this.uiSkin.picList.selectEnable=!1,this.uiSkin.picList.spaceY=0,this.uiSkin.picList.renderHandler=new l(this,this.updatePicInfoItem),this.uiSkin.flder0.visible=!1,this.uiSkin.flder1.visible=!1,this.uiSkin.flder2.visible=!1;for(var e=0;3>e;e++)this.uiSkin["flder"+e].on("click",this,this.onClickTopDirectLbl,[e]);this.uiSkin.btnUploadPic.on("click",this,this.onShowUploadView),i.timer.once(10,this,function(){t.uiSkin.folderList.array=[],t.uiSkin.picList.array=[],T.instance.Request("http://47.101.178.87/dir/list?",this,t.onGetTopDirListBack,"path=0|","post")}),this.uiSkin.htmltext.style.fontSize=20,this.uiSkin.htmltext.innerHTML="<span color='#222222' size='20'>已选择</span><span color='#FF0000' size='20'>0</span><span color='#222222' size='20'>张图片</span>",this.uiSkin.btnSureCreate.on("click",this,this.onSureCreeate),rn.instance.on("SELECT_FOLDER",this,this.onSelectChildFolder),rn.instance.on("UPDATE_FILE_LIST",this,this.getFileList),rn.instance.on("SELECT_PIC_ORDER",this,this.seletPicToOrder),S.instance.haselectPic={},this.uiSkin.on("removed",this,this.onRemovedFromStage)},n.onshowOrder=function(){y.instance.openView("VIEW_PAINT_ORDER",!0)},n.seletPicToOrder=function(t){var e=S.instance.haselectPic.hasOwnProperty(t.fid);e?delete S.instance.haselectPic[t.fid]:S.instance.haselectPic[t.fid]=t;var i,n=0;for(var r in S.instance.haselectPic)i=S.instance.haselectPic[r],n++;this.uiSkin.htmltext.innerHTML="<span color='#222222' size='20'>已选择</span><span color='#FF0000' size='20'>"+n+"</span><span color='#222222' size='20'>张图片</span>"},n.onGetTopDirListBack=function(t){var e=JSON.parse(t);0==e.status&&(S.instance.initTopDirectoryList(e),this.uiSkin.folderList.array=S.instance.topDirectList,this.uiSkin.picList.array=S.instance.curFileList,S.instance.topDirectList.length>0&&(S.instance.curSelectDir=S.instance.topDirectList[0],this.directTree.push(S.instance.curSelectDir),this.updateCurDirectLabel(),this.uiSkin.folderList.cells[0].ShowSelected=!0,this.getFileList()))},n.getFileList=function(){T.instance.Request("http://47.101.178.87/dir/list?",this,this.onGetDirFileListBack,"path="+S.instance.curSelectDir.dpath,"post")},n.onGetDirFileListBack=function(t){var e=JSON.parse(t);0==e.status&&(S.instance.initCurDirFiles(e),this.uiSkin.picList.array=S.instance.curFileList)},n.onBackToMain=function(){y.instance.closeView("VIEW_PICMANAGER")},n.onDestroy=function(){rn.instance.off("SELECT_FOLDER",this,this.onSelectChildFolder),rn.instance.off("UPDATE_FILE_LIST",this,this.getFileList),rn.instance.off("SELECT_PIC_ORDER",this,this.seletPicToOrder)},n.onRemovedFromStage=function(){rn.instance.off("SELECT_FOLDER",this,this.onSelectChildFolder),rn.instance.off("UPDATE_FILE_LIST",this,this.getFileList),rn.instance.off("SELECT_PIC_ORDER",this,this.seletPicToOrder)},n.onShowUploadView=function(){return null==S.instance.curSelectDir?(y.showAlert("请先创建一个目录"),void 0):(y.instance.openView("VIEW_MYPICPANEL"),void 0)},n.onSureCreeate=function(){""!=this.uiSkin.input_folename.text&&(this.isCreateTopDir?T.instance.Request("http://47.101.178.87/dir/create?",this,this.onCreateDirBack,"path=0|&name="+this.uiSkin.input_folename.text,"post"):T.instance.Request("http://47.101.178.87/dir/create?",this,this.onCreateDirBack,"path="+S.instance.curSelectDir.dpath+"&name="+this.uiSkin.input_folename.text,"post"),this.createbox.visible=!1)},n.onCreateDirBack=function(t){var e=JSON.parse(t);if(0==e.status)if(this.isCreateTopDir){var i=new C(e.dir,0);this.uiSkin.folderList.addItem(i),1==S.instance.topDirectList.length&&(this.uiSkin.folderList.cells[0].ShowSelected=!0,S.instance.curSelectDir=S.instance.topDirectList[0],this.directTree.push(S.instance.curSelectDir),this.updateCurDirectLabel())}else i=new C(e.dir,0),this.uiSkin.picList.addItem(i)},n.onSlecteDirect=function(t){var e;for(var i in this.uiSkin.folderList.cells)e=this.uiSkin.folderList.cells[i],e.ShowSelected=e.directData==this.uiSkin.folderList.array[t];var n=this.uiSkin.folderList.array[t];S.instance.curSelectDir=n,this.directTree=[],this.directTree.push(S.instance.curSelectDir),this.updateCurDirectLabel(),this.getFileList()},n.onSelectChildFolder=function(t){S.instance.curSelectDir=t,this.directTree.push(S.instance.curSelectDir),this.updateCurDirectLabel(),this.getFileList()},n.onClickTopDirectLbl=function(t){t!=this.directTree.length-1&&(S.instance.curSelectDir=this.directTree[t],this.directTree.splice(t+1,this.directTree.length-t-1),this.updateCurDirectLabel(),this.getFileList())},n.updateCurDirectLabel=function(){this.uiSkin.flder0.visible=!1,this.uiSkin.flder1.visible=!1,this.uiSkin.flder2.visible=!1;for(var t=0;t<this.directTree.length;t++)3>t&&(this.uiSkin["flder"+t].text=this.directTree[t].directName+">",this.uiSkin["flder"+t].visible=!0)},n.updateDirectItem=function(t){t.setData(t.dataSource)},n.updatePicInfoItem=function(t){t.setData(t.dataSource)},n.onCloseCreateFolder=function(){this.createbox.visible=!1},n.onCreateNewDirect=function(){this.isCreateTopDir=!0,this.createbox.visible=!0},n.onCreateNewFolder=function(){this.isCreateTopDir=!1,this.createbox.visible=!0},e}(nn),Gn=function(t){function e(){this.uiSkin=null,this.param=null,e.__super.call(this)}r(e,"script.picUpload.PictureCheckControl",t);var i=e.prototype;return i.onStart=function(){this.uiSkin=this.owner,this.uiSkin.closeBtn.on("click",this,this.onClosePanel),this.uiSkin.mainpanel.vScrollBarSkin="",null!=this.param&&(this.uiSkin.img.skin="http://m-scfy-763.oss-cn-shanghai.aliyuncs.com/"+this.param.fid+".jpg",this.param.picWidth>this.param.picHeight?(this.uiSkin.img.width=1e3,this.uiSkin.img.height=1e3/this.param.picWidth*this.param.picHeight):(this.uiSkin.img.height=1e3,this.uiSkin.img.width=1e3/this.param.picHeight*this.param.picWidth))},i.onClosePanel=function(){y.instance.closeView("VIEW_PICTURE_CHECK")},e}(nn),Xn=function(t){function e(){this.uiSkin=null,this.param=null,e.__super.call(this)}r(e,"utils.PopUpWindowControl",t);var i=e.prototype;return i.onStart=function(){this.uiSkin=this.owner,this.uiSkin.closebtn.on("click",this,this.onCloseScene),this.uiSkin.msgtxt.text=this.param.msg,this.uiSkin.okbtn.on("click",this,this.onConfirmHandler),this.uiSkin.cancelbtn.on("click",this,this.onCancelHandler)},i.onConfirmHandler=function(){null!=this.param.callback&&this.param.callback.call(this.param.caller,!0),this.onCloseScene()},i.onCancelHandler=function(){null!=this.param.callback&&this.param.callback.call(this.param.caller,!1),this.onCloseScene()},i.onCloseScene=function(){y.instance.closeView("VIEW_POPUPDIALOG")},e}(nn),zn=function(t){function e(){this.uiSkin=null,e.__super.call(this)}r(e,"utils.LoadingPrgControl",t);var i=e.prototype;return i.onStart=function(){this.uiSkin=this.owner,this.uiSkin.prg.value=0,this.uiSkin.prgtxt.text="0%",rn.instance.on("UPDATE_LOADING_PROGRESS",this,this.onUpdatePrg)},i.onUpdatePrg=function(t){console.log("prg rec:"+t),this.uiSkin.prg.value=t,this.uiSkin.prgtxt.text=Math.floor(100*t)+"%",t>=1&&y.instance.closeView("VIEW_LOADING_PRO")},i.onDestroy=function(){rn.instance.off("UPDATE_LOADING_PROGRESS",this,this.onUpdatePrg)},e}(nn),Hn=function(t){function e(){this.uiSkin=null,this.param=null,e.__super.call(this)}r(e,"script.order.PaintOrderControl",t);var i=e.prototype;return i.onStart=function(){this.uiSkin=this.owner,this.uiSkin.firstpage.on("click",this,this.onClosePanel),this.uiSkin.panel_main.vScrollBarSkin="",this.uiSkin.mainvbox.autoSize=!0,this.uiSkin.btn_addattach.on("click",this,this.onAddPart),this.uiSkin.btnaddpic.on("click",this,this.onShowSelectPic);var t,e=1,i=0,n=0;for(var r in S.instance.haselectPic){t=S.instance.haselectPic[r];var s=new D(t);s.indexNum=e++;var a=new ls(s);this.uiSkin.ordervbox.addChild(a),n+=a.height+this.uiSkin.ordervbox.space,i++}this.uiSkin.ordervbox.size(this.uiSkin.ordervbox.width,n-this.uiSkin.ordervbox.space),S.instance.haselectPic={},this.uiSkin.changemyadd.underline=!0,this.uiSkin.changemyadd.underlineColor="#222222",this.uiSkin.changefactory.underline=!0,this.uiSkin.changefactory.underlineColor="#222222",this.uiSkin.changemyadd.on("click",this,this.onShowSelectAddress),this.uiSkin.changefactory.on("click",this,this.onShowSelectFactory),rn.instance.on("SELECT_ORDER_ADDRESS",this,this.onSelectedAddress),rn.instance.on("ADD_PIC_FOR_ORDER",this,this.onUpdateOrderPic),rn.instance.on("DELETE_PIC_ORDER",this,this.onDeletePicOrder),rn.instance.on("ADJUST_PIC_ORDER_TECH",this,this.onAdjustHeight)},i.onShowSelectPic=function(){y.instance.openView("VIEW_SELECT_PIC_TO_ORDER")},i.onShowSelectFactory=function(){y.instance.openView("VIEW_SELECT_FACTORY")},i.onSelectedAddress=function(){this.uiSkin.myaddresstxt.text=b.instance.selectAddress.addressDetail},i.onShowSelectAddress=function(){y.instance.openView("VIEW_SELECT_ADDRESS")},i.onUpdateOrderPic=function(){var t=this.uiSkin.ordervbox.numChildren;t++;var e;for(var i in S.instance.haselectPic){e=S.instance.haselectPic[i],this.uiSkin.ordervbox.numChildren>0&&(this.uiSkin.ordervbox.height+=this.uiSkin.ordervbox.space);var n=new D(e);n.indexNum=t++;var r=new ls(n);this.uiSkin.ordervbox.height+=r.height,this.uiSkin.ordervbox.addChild(r)}for(var s=0;s<this.uiSkin.ordervbox.numChildren;s++)0==s?this.uiSkin.ordervbox.getChildAt(0).y=0:this.uiSkin.ordervbox.getChildAt(s).y=this.uiSkin.ordervbox.getChildAt(s-1).y+this.uiSkin.ordervbox.getChildAt(s-1).height+this.uiSkin.ordervbox.space;this.uiSkin.ordervbox.refresh(),S.instance.haselectPic={}},i.onDeletePicOrder=function(t){for(var e=t.ordervo,i=0;i<this.uiSkin.ordervbox.numChildren;i++){var n=this.uiSkin.ordervbox.getChildAt(i).ordervo;n.indexNum>e.indexNum&&n.indexNum--,this.uiSkin.ordervbox.getChildAt(i).updateIndex()}this.uiSkin.ordervbox.removeChild(t),this.uiSkin.ordervbox.height-t.height-this.uiSkin.ordervbox.space<0?this.uiSkin.ordervbox.height=0:this.uiSkin.ordervbox.height-=t.height+this.uiSkin.ordervbox.space,0==this.uiSkin.ordervbox.numChildren&&(this.uiSkin.ordervbox.height=0),this.uiSkin.ordervbox.size(this.uiSkin.ordervbox.width,0),this.uiSkin.ordervbox.refresh()},i.onAdjustHeight=function(t){this.uiSkin.ordervbox.height+=t},i.onAddPart=function(){this.uiSkin.partvbox.addChild(new ms(new A))},i.onDestroy=function(){rn.instance.off("SELECT_ORDER_ADDRESS",this,this.onSelectedAddress),rn.instance.off("ADD_PIC_FOR_ORDER",this,this.onUpdateOrderPic),rn.instance.off("DELETE_PIC_ORDER",this,this.onDeletePicOrder),rn.instance.off("ADJUST_PIC_ORDER_TECH",this,this.onAdjustHeight)},i.onClosePanel=function(){y.instance.closeView("VIEW_PAINT_ORDER")},e}(nn),Yn=function(t){function e(){this.uiSkin=null,this.province="",this.cityname="",this.areaname="",e.__super.call(this)}r(e,"script.usercenter.EnterPrizeInfoControl",t);var i=e.prototype;return i.onStart=function(){this.uiSkin=this.owner,this.uiSkin.provList.itemRender=Ws,this.uiSkin.provList.vScrollBarSkin="",this.uiSkin.provList.repeatX=1,this.uiSkin.provList.spaceY=2,this.uiSkin.provList.renderHandler=new l(this,this.updateCityList),this.uiSkin.provList.selectEnable=!0,this.uiSkin.provList.selectHandler=new l(this,this.selectProvince),this.uiSkin.provList.array=g.instance.getAllProvince(),this.selectProvince(0),this.uiSkin.provList.refresh(),this.uiSkin.cityList.itemRender=Ws,this.uiSkin.cityList.vScrollBarSkin="",this.uiSkin.cityList.repeatX=1,this.uiSkin.cityList.spaceY=2,this.uiSkin.cityList.selectEnable=!0,this.uiSkin.cityList.renderHandler=new l(this,this.updateCityList),this.uiSkin.cityList.selectHandler=new l(this,this.selectCity),this.uiSkin.areaList.itemRender=Ws,this.uiSkin.areaList.vScrollBarSkin="",this.uiSkin.areaList.selectEnable=!0,this.uiSkin.areaList.repeatX=1,this.uiSkin.areaList.spaceY=2,this.uiSkin.areaList.renderHandler=new l(this,this.updateCityList),this.uiSkin.areaList.selectHandler=new l(this,this.selectArea),this.uiSkin.btnSelProv.on("click",this,this.onShowProvince),this.uiSkin.btnSelCity.on("click",this,this.onShowCity),this.uiSkin.btnSelArea.on("click",this,this.onShowArea),this.uiSkin.areabox.visible=!1,this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1},i.onShowProvince=function(t){this.uiSkin.provbox.visible=!0,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1,t.stopPropagation()},i.onShowCity=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!0,this.uiSkin.areabox.visible=!1,t.stopPropagation()},i.onShowArea=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!0,t.stopPropagation()},i.updateCityList=function(t){t.setData(t.dataSource)},i.selectProvince=function(t){this.province=this.uiSkin.provList.array[t],console.log(this.province),this.uiSkin.provbox.visible=!1,this.uiSkin.cityList.array=g.instance.getAllCity(this.province),this.uiSkin.cityList.refresh(),this.uiSkin.province.text=this.province,this.uiSkin.citytxt.text=this.uiSkin.cityList.array[0],this.uiSkin.cityList.selectedIndex=0,this.uiSkin.areaList.array=g.instance.getAllArea(this.province,this.uiSkin.cityList.array[0]),this.uiSkin.areaList.refresh(),this.uiSkin.areatxt.text="",this.uiSkin.areaList.selectedIndex=-1},i.selectCity=function(t){this.uiSkin.citybox.visible=!1,this.uiSkin.areaList.array=g.instance.getAllArea(this.province,this.uiSkin.cityList.array[t]),this.uiSkin.areaList.refresh(),this.uiSkin.citytxt.text=this.uiSkin.cityList.array[t],this.uiSkin.areatxt.text="",this.uiSkin.areaList.selectedIndex=-1},i.selectArea=function(t){-1!=t&&(this.uiSkin.areabox.visible=!1,this.uiSkin.areatxt.text=this.uiSkin.areaList.array[t])},e}(nn),jn=function(t){function e(){this.uiSKin=null,e.__super.call(this)}r(e,"script.order.SelectTechControl",t);var i=e.prototype;return i.onStart=function(){this.uiSKin=this.owner;var t=18*Math.random(),e=0;this.uiSKin.techcontent.vScrollBarSkin="";for(var i=0;t>i;i++){var n=new R,r=new Gs(n);r.y=e,e+=r.height+20,this.uiSKin.techcontent.addChild(r)}this.uiSKin.btnok.on("click",this,this.onCloseView),this.uiSKin.btncancel.on("click",this,this.onCloseView)},i.onCloseView=function(){y.instance.closeView("VIEW_SELECT_TECHNORLOGY")},e}(nn),Zn=function(t){function e(){this.uiSkin=null,this.param=null,e.__super.call(this)}r(e,"script.login.ResetPwdControl",t);var i=e.prototype;return i.onStart=function(){this.uiSkin=this.owner,this.uiSkin.btnClose.on("click",this,this.onCloseScen)},i.onCloseScen=function(){y.instance.closeView("VIEW_CHANGEPWD")},e}(nn),Kn=function(t){function e(){this.uiSkin=null,e.__super.call(this)}r(e,"script.order.SelectAddressControl",t);var i=e.prototype;return i.onStart=function(){this.uiSkin=this.owner,this.uiSkin.list_address.itemRender=Vs,this.uiSkin.list_address.vScrollBarSkin="",this.uiSkin.list_address.selectEnable=!0,this.uiSkin.list_address.spaceY=2,this.uiSkin.list_address.renderHandler=new l(this,this.updateAddressItem),this.uiSkin.list_address.selectHandler=new l(this,this.onSlecteAddress),this.uiSkin.btncancel.on("click",this,this.onCloseView),this.uiSkin.btnok.on("click",this,this.onConfirmSelectAddress);for(var t=[],e=0;20>e;e++){var i=new c;i.city="浦东新区"+e,t.push(i)}this.uiSkin.list_address.array=t,b.instance.selectAddress=null},i.onSlecteAddress=function(t){var e;for(var i in this.uiSkin.list_address.cells)e=this.uiSkin.list_address.cells[i],e.ShowSelected=e.address==this.uiSkin.list_address.array[t];b.instance.selectAddress=this.uiSkin.list_address.array[t]},i.updateAddressItem=function(t){t.setData(t.dataSource)},i.onConfirmSelectAddress=function(){null!=b.instance.selectAddress&&rn.instance.event("SELECT_ORDER_ADDRESS"),this.onCloseView()},i.onCloseView=function(){y.instance.closeView("VIEW_SELECT_ADDRESS")},e}(nn),$n=function(t){function e(){this.uiSkin=null,e.__super.call(this)}r(e,"script.order.SelectFactoryControl",t);var i=e.prototype;return i.onStart=function(){this.uiSkin=this.owner,this.uiSkin.list_address.itemRender=Vs,this.uiSkin.list_address.vScrollBarSkin="",this.uiSkin.list_address.selectEnable=!0,this.uiSkin.list_address.spaceY=2,this.uiSkin.list_address.renderHandler=new l(this,this.updateAddressItem),this.uiSkin.list_address.selectHandler=new l(this,this.onSlecteAddress),this.uiSkin.cancelbtn.on("click",this,this.onCloseView),this.uiSkin.okbtn.on("click",this,this.onConfirmSelectAddress)},i.onSlecteAddress=function(t){var e;for(var i in this.uiSkin.list_address.cells)e=this.uiSkin.list_address.cells[i],e.ShowSelected=e.address==this.uiSkin.list_address.array[t];b.instance.selectAddress=this.uiSkin.list_address.array[t]},i.updateAddressItem=function(t){t.setData(t.dataSource)},i.onConfirmSelectAddress=function(){null!=b.instance.selectAddress&&rn.instance.event("SELECT_ORDER_ADDRESS"),this.onCloseView()},i.onCloseView=function(){y.instance.closeView("VIEW_SELECT_FACTORY")},e}(nn),qn=function(t){function e(){this.uiSkin=null,this.province="",this.cityname="",this.areaname="",this.verifycode=null,this.param=null,this.phonecode="",e.__super.call(this)}r(e,"script.login.RegisterCntrol",t);var i=e.prototype;return i.onStart=function(){this.uiSkin=this.owner,this.uiSkin.input_adress.maxChars=200,this.uiSkin.input_company.maxChars=50,this.uiSkin.input_conpwd.maxChars=20,this.uiSkin.input_conpwd.type="password",this.uiSkin.input_phone.maxChars=11,this.uiSkin.input_phone.restrict="0-9",this.uiSkin.input_phonecode.maxChars=6,this.uiSkin.input_pwd.maxChars=20,this.uiSkin.input_pwd.type="password",this.uiSkin.input_receiver.maxChars=10,this.uiSkin.input_receiverphone.maxChars=11,this.uiSkin.input_receiverphone.restrict="0-9",this.uiSkin.inputCode.maxChars=8,this.uiSkin.radio_default.selectedIndex=0,this.uiSkin.provList.itemRender=Ws,this.uiSkin.provList.vScrollBarSkin="",this.uiSkin.provList.repeatX=1,this.uiSkin.provList.spaceY=2,this.uiSkin.provList.renderHandler=new l(this,this.updateCityList),this.uiSkin.provList.selectEnable=!0,this.uiSkin.provList.selectHandler=new l(this,this.selectProvince),this.uiSkin.provList.array=g.instance.getAllProvince(),this.selectProvince(0),this.uiSkin.provList.refresh(),this.uiSkin.cityList.itemRender=Ws,this.uiSkin.cityList.vScrollBarSkin="",this.uiSkin.cityList.repeatX=1,this.uiSkin.cityList.spaceY=2,this.uiSkin.cityList.selectEnable=!0,this.uiSkin.cityList.renderHandler=new l(this,this.updateCityList),this.uiSkin.cityList.selectHandler=new l(this,this.selectCity),this.uiSkin.areaList.itemRender=Ws,this.uiSkin.areaList.vScrollBarSkin="",this.uiSkin.areaList.selectEnable=!0,this.uiSkin.areaList.repeatX=1,this.uiSkin.areaList.spaceY=2,this.uiSkin.areaList.renderHandler=new l(this,this.updateCityList),this.uiSkin.areaList.selectHandler=new l(this,this.selectArea),this.uiSkin.btnSelProv.on("click",this,this.onShowProvince),this.uiSkin.btnSelCity.on("click",this,this.onShowCity),this.uiSkin.btnSelArea.on("click",this,this.onShowArea),this.uiSkin.btnGetCode.on("click",this,this.onGetPhoneCode),this.uiSkin.btnClose.on("click",this,this.onCloseScene),this.uiSkin.areabox.visible=!1,this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.txtRefresh.underline=!0,this.uiSkin.txtRefresh.underlineColor="#121212",this.uiSkin.txtRefresh.on("click",this,this.onRefreshVerify),this.uiSkin.btnReg.on("click",this,this.onRegister),this.verifycode=Me.document.createElement("div"),this.verifycode.id="v_container",this.verifycode.style="width: 200px;height: 50px;left:950px;top:775",this.verifycode.style.position="absolute",this.verifycode.style.zIndex=999,Me.document.body.appendChild(this.verifycode),Me.window.loadVerifyCode()},i.onGetPhoneCode=function(){return this.uiSkin.input_phone.text.length<11?(Me.window.alert("请填写正确的手机号"),void 0):(T.instance.Request("http://47.101.178.87/api/getcode?",this,this.onGetPhoneCodeBack,"phone="+this.uiSkin.input_phone.text,"post"),void 0)},i.onGetPhoneCodeBack=function(t){var e=JSON.parse(t);0==e.status&&(this.phonecode=e.code),console.log("pho code:"+t)},i.onRefreshVerify=function(){Me.window.loadVerifyCode()},i.onCloseScene=function(){Me.document.body.removeChild(this.verifycode),y.instance.closeView("VIEW_REGPANEL")},i.onRegister=function(){var t=Me.window.checkCode(this.uiSkin.inputCode.text);if(t){if(this.uiSkin.input_phone.text.length<11)return Me.window.alert("请填写正确的手机号"),void 0;if(this.uiSkin.input_pwd.text.length<6)return Me.window.alert("密码长度至少6位"),void 0;if(this.uiSkin.input_pwd.text!=this.uiSkin.input_conpwd.text)return Me.window.alert("密码确认不对"),void 0;var e="phone="+this.uiSkin.input_phone.text+"&pwd="+this.uiSkin.input_pwd.text+"&code="+this.phonecode;T.instance.Request("http://47.101.178.87/account/create",this,this.onRegisterBack,e,"post")}else Me.window.alert("验证码错误")},i.onRegisterBack=function(t){var e=JSON.parse(t);0==e.status&&(Me.window.alert("注册成功！"),Me.document.body.removeChild(this.verifycode),y.instance.openView("VIEW_lOGPANEL",!0))},i.onShowProvince=function(t){this.uiSkin.provbox.visible=!0,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!1,t.stopPropagation()},i.onShowCity=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!0,this.uiSkin.areabox.visible=!1,t.stopPropagation()},i.onShowArea=function(t){this.uiSkin.provbox.visible=!1,this.uiSkin.citybox.visible=!1,this.uiSkin.areabox.visible=!0,t.stopPropagation()},i.updateCityList=function(t){t.setData(t.dataSource)},i.selectProvince=function(t){this.province=this.uiSkin.provList.array[t],console.log(this.province),this.uiSkin.provbox.visible=!1,this.uiSkin.cityList.array=g.instance.getAllCity(this.province),this.uiSkin.cityList.refresh(),this.uiSkin.province.text=this.province,this.uiSkin.citytxt.text=this.uiSkin.cityList.array[0],this.uiSkin.cityList.selectedIndex=0,this.uiSkin.areaList.array=g.instance.getAllArea(this.province,this.uiSkin.cityList.array[0]),this.uiSkin.areaList.refresh(),this.uiSkin.areatxt.text="",this.uiSkin.areaList.selectedIndex=-1},i.selectCity=function(t){this.uiSkin.citybox.visible=!1,this.uiSkin.areaList.array=g.instance.getAllArea(this.province,this.uiSkin.cityList.array[t]),this.uiSkin.areaList.refresh(),this.uiSkin.citytxt.text=this.uiSkin.cityList.array[t],this.uiSkin.areatxt.text="",this.uiSkin.areaList.selectedIndex=-1},i.selectArea=function(t){-1!=t&&(this.uiSkin.areabox.visible=!1,this.uiSkin.areatxt.text=this.uiSkin.areaList.array[t])},e}(nn),Qn=function(t){function e(){this.uiSkin=null,this.fileListData=null,this.allFileData=null,this.curUploadIndex=0,this.file=null,this.param=null,this.isUploading=!1,e.__super.call(this)}r(e,"script.picUpload.UpLoadAndOrderContrl",t);var i=e.prototype;return i.onStart=function(){this.uiSkin=this.owner,this.uiSkin.btnClose.on("click",this,this.onCloseScene),this.uiSkin.btnBegin.on("click",this,this.onClickBegin),this.uiSkin.bgimg.alpha=.7,this.uiSkin.fileList.itemRender=Ys,this.uiSkin.fileList.vScrollBarSkin="",this.uiSkin.fileList.selectEnable=!1,this.uiSkin.fileList.spaceY=4,this.uiSkin.fileList.renderHandler=new l(this,this.updateFileItem),this.uiSkin.fileList.array=[],this.initFileOpen(),Me.window.uploadApp=this},i.initFileOpen=function(){var t=this;this.file=Me.document.createElement("input"),this.file.style="filter:alpha(opacity=0);opacity:0;width: 100;height:34px;left:395px;top:48",this.file.multiple="multiple",this.file.accept=".jpg,.jpeg,.png,.tif",this.file.type="file",this.file.style.position="absolute",this.file.style.zIndex=999,Me.document.body.appendChild(this.file),this.file.onchange=function(){if(!(t.isUploading||t.file.files.length<=0)){t.curUploadIndex=0,t.fileListData=[];for(var e=0;e<t.file.files.length;e++)t.fileListData.push(t.file.files[e]);t.uiSkin.fileList.array=t.fileListData}}},i.onClickBegin=function(){this.isUploading||(this.isUploading=!0,this.onBeginUpload())},i.onBeginUpload=function(){this.fileListData&&this.fileListData.length>this.curUploadIndex?Me.window.uploadPic({path:S.instance.curSelectDir.dpath,file:this.fileListData[this.curUploadIndex]}):this.isUploading=!1},i.onCompleteUpload=function(){this.uiSkin.fileList.cells[this.curUploadIndex].updateProgress("100"),this.curUploadIndex++,this.onBeginUpload()},i.onProgressHandler=function(t){Number(t)>=100&&(t="99"),this.uiSkin.fileList.cells[this.curUploadIndex].updateProgress(t.toString()),console.log("up progress"+JSON.stringify(t))},i.updateFileItem=function(t){t.setData(t.dataSource)},i.onCloseScene=function(){Me.window.uploadApp=null,rn.instance.event("UPDATE_FILE_LIST"),y.instance.closeView("VIEW_MYPICPANEL")},e}(nn),Jn=function(t){function e(){this.uiSkin=null,e.__super.call(this)}r(e,"script.order.SelectMaterialControl",t);var i=e.prototype;return i.onStart=function(){this.uiSkin=this.owner,this.uiSkin.tablist.itemRender=ks,this.uiSkin.tablist.vScrollBarSkin="",this.uiSkin.tablist.selectEnable=!0,this.uiSkin.tablist.spaceY=2,this.uiSkin.tablist.renderHandler=new l(this,this.updateMatClassItem),this.uiSkin.tablist.selectHandler=new l(this,this.onSlecteMatClass),this.uiSkin.matlist.itemRender=Hs,this.uiSkin.matlist.vScrollBarSkin="",this.uiSkin.matlist.selectEnable=!0,this.uiSkin.matlist.spaceY=10,this.uiSkin.matlist.renderHandler=new l(this,this.updateMatNameItem),this.uiSkin.matlist.selectHandler=new l(this,this.onSlecteMat);for(var t=[],e=0;10>e;e++)t.push(new v);this.uiSkin.tablist.array=t,this.uiSkin.btncancel.on("click",this,this.onCloseView),this.uiSkin.btnok.on("click",this,this.onConfirmSelectAddress)
},i.updateMatClassItem=function(t){t.setData(t.dataSource)},i.onSlecteMatClass=function(t){var e;for(var i in this.uiSkin.tablist.cells)e=this.uiSkin.tablist.cells[i],e.ShowSelected=e.matclassvo==this.uiSkin.tablist.array[t];this.uiSkin.matlist.array=this.uiSkin.tablist.array[t].childMatList},i.updateMatNameItem=function(t){t.setData(t.dataSource)},i.onSlecteMat=function(t){var e;for(var i in this.uiSkin.matlist.cells)e=this.uiSkin.matlist.cells[i],e.ShowSelected=e.matvo==this.uiSkin.matlist.array[t]},i.onConfirmSelectAddress=function(){this.onCloseView()},i.onCloseView=function(){y.instance.closeView("VIEW_SELECT_MATERIAL")},e}(nn),tr=function(t){function e(){this.uiSkin=null,e.__super.call(this)}r(e,"script.usercenter.AddressMgrControl",t);var i=e.prototype;return i.onStart=function(){this.uiSkin=this.owner,this.uiSkin.addlist.itemRender=Us,this.uiSkin.addlist.vScrollBarSkin="",this.uiSkin.addlist.repeatX=1,this.uiSkin.addlist.spaceY=0,this.uiSkin.addlist.renderHandler=new l(this,this.updateAddressList),this.uiSkin.addlist.selectEnable=!1;for(var t=[],e=0;6>e;e++){var i=new c;t.push(i)}this.uiSkin.addlist.array=t,this.uiSkin.btnaddAddress.on("click",this,this.onClickAdd)},i.onClickAdd=function(){y.instance.openView("VIEW_ADD_NEW_ADDRESS")},i.updateAddressList=function(t){t.setData(t.dataSource)},e}(nn),er=function(t){function e(){this.uiSkin=null,e.__super.call(this)}r(e,"script.usercenter.AddressEditControl",t);var i=e.prototype;return i.onStart=function(){this.uiSkin=this.owner,this.uiSkin.btnok.on("click",this,this.onCloseView),this.uiSkin.btncancel.on("click",this,this.onCloseView)},i.onCloseView=function(){y.instance.closeView("VIEW_ADD_NEW_ADDRESS")},e}(nn),ir=function(t){function e(){this._customRenderCmd=null,this._customCmds=null,this._x=0,this._y=0,this._renderType=0,this._bRepaintCanvas=!1,this._lastContext=null,e.__super.call(this)}r(e,"laya.layagl.ConchSpriteAdpt",t);var s=e.prototype;return s.createData=function(){var t=308;this._conchData=new ParamData(t,!1),this._datai32=this._conchData._int32Data,this._dataf32=this._conchData._float32Data,this._dataf32[4]=1,this._datai32[3]=-1,this._datai32[1]=0,this._datai32[2]=0,this._datai32[22]=4294967295,this._datai32[5]=1,this._dataf32[8]=0,this._dataf32[9]=0,this._dataf32[10]=1,this._dataf32[11]=1,this._dataf32[16]=1,this._dataf32[17]=0,this._dataf32[18]=0,this._dataf32[19]=1,this._dataf32[20]=0,this._dataf32[21]=0,this._datai32[24]=-1,this._datai32[25]=-1,this._datai32[27]=-1,this._datai32[28]=0,this._datai32[29]=0,this._datai32[30]=1e6,this._datai32[31]=1e6,this._datai32[63]=0,this._datai32[71]=1,this._datai32[72]=771,this._datai32[68]=-1},s._createTransform=function(){return Bi.create(new Float32Array(6))},s._setTransform=function(t){var e=this._conchData._float32Data;e[15]=0,e[16]=t.a,e[17]=t.b,e[18]=t.c,e[19]=t.d,e[20]=t.tx,e[21]=t.ty},s._setGraphics=function(t){this._datai32[23]=t._commandEncoder.getPtrID()},s._setGraphicsCallBack=function(){this._callbackFuncObj||(this._callbackFuncObj=new CallbackFuncObj),this._datai32[54]=this._callbackFuncObj.id,this._callbackFuncObj.addCallbackFunc(5,this.updateParticleFromNative.bind(this)),this._datai32[68]=5},s._setCacheAs=function(){I.createCommandEncoder(),this._drawCanvasParamData||(this._drawCanvasParamData=new ParamData(132,!0)),this._callbackFuncObj||(this._callbackFuncObj=new CallbackFuncObj),this._canvasBeginCmd||(this._canvasBeginCmd=Le.instance.createCommandEncoder(128,64,!1)),this._canvasEndCmd||(this._canvasEndCmd=Le.instance.createCommandEncoder(128,64,!1)),this._datai32[54]=this._callbackFuncObj.id,this._callbackFuncObj.addCallbackFunc(1,this.canvasBeginRenderFromNative.bind(this)),this._callbackFuncObj.addCallbackFunc(2,this.canvasEndRenderFromNative.bind(this)),this._datai32[56]=1,this._datai32[57]=2,this._datai32[58]=this._canvasBeginCmd.getPtrID(),this._datai32[59]=this._canvasEndCmd.getPtrID(),this._datai32[60]=I._DRAW_CANVAS_CMD_ENCODER_.getPtrID(),this._datai32[61]=this._drawCanvasParamData.getPtrID()},s._setX=function(t){this._x=this._dataf32[6]=t,this._renderType|=2,this._setRenderType(this._renderType),this._dataf32[15]=1},s._setY=function(t){this._y=this._dataf32[7]=t,this._renderType|=2,this._setRenderType(this._renderType),this._dataf32[15]=1},s._setPivotX=function(t){this._renderType|=2,this._dataf32[8]=t,this._dataf32[15]=1},s._getPivotX=function(){return this._dataf32[8]},s._setPivotY=function(t){this._renderType|=2,this._dataf32[9]=t,this._dataf32[15]=1},s._getPivotY=function(){return this._dataf32[9]},s._setAlpha=function(t){var e=this.getStyle();e.alpha=t,t=t>1?1:t,t=0>t?0:t;var i=this._datai32[22],n=i>>24;n=255*t,i=16777215&i|n<<24,this._datai32[22]=i,1!==t?this._renderType|=1:this._renderType&=-2,this._setRenderType(this._renderType),this.parentRepaint()},s._setRenderType=function(t){this._datai32[0]=t,Ri.GLS[t]||Ri.createByRenderType(t),Ri.GLSE[t]||Ri.createByRenderTypeEnd(t)},s.parentRepaint=function(){},s._getAlpha=function(){return(this._datai32[22]>>>24)/255},s._setScaleX=function(t){this._style.scaleX=this._dataf32[10]=t,this._dataf32[15]=1},s._setScaleY=function(t){this._style.scaleY=this._dataf32[11]=t,this._dataf32[15]=1},s._setSkewX=function(t){this._style.skewX=this._dataf32[12]=t,this._dataf32[15]=1},s._setSkewY=function(t){this._style.skewY=this._dataf32[13]=t,this._dataf32[15]=1},s._setRotation=function(t){this._style.rotation=this._dataf32[14]=t,this._dataf32[15]=1},s._setBgStyleColor=function(t,e,i,n,r){var s=null,a=null;this._drawSimpleRectParamData||(this._drawSimpleRectParamData=new ParamData(104,!0)),s=this._drawSimpleRectParamData._float32Data,a=this._drawSimpleRectParamData._int32Data;var h=o.create(r),_=h.numColor;a[0]=1,a[1]=96;var l=2;s[l++]=t,s[l++]=e,s[l++]=0,s[l++]=0,a[l++]=_,s[l++]=4294967295,s[l++]=t+i,s[l++]=e,s[l++]=0,s[l++]=0,a[l++]=_,s[l++]=4294967295,s[l++]=t+i,s[l++]=e+n,s[l++]=0,s[l++]=0,a[l++]=_,s[l++]=4294967295,s[l++]=t,s[l++]=e+n,s[l++]=0,s[l++]=0,a[l++]=_,s[l++]=4294967295,this._datai32[74]=this._drawSimpleRectParamData.getPtrID(),Le.syncBufferToRenderThread(this._drawSimpleRectParamData),this._datai32[73]=se._SIMPLE_RECT_CMDENCODER_.getPtrID()},s._setBorderStyleColor=function(t,e,i,n,r,s){var a=null,h=null;this._drawRectBorderParamData||(this._drawRectBorderParamData=new ParamData(236,!0)),a=this._drawRectBorderParamData._float32Data,h=this._drawRectBorderParamData._int32Data;var _=[],l=[],u=[];_.push(t),_.push(e),_.push(t+i),_.push(e),_.push(t+i),_.push(e+n),_.push(t),_.push(e+n),_.push(t),_.push(e-s/2),Je.createLine2(_,l,s,0,u,!1);var c=_.length;a=this._drawRectBorderParamData._float32Data,h=this._drawRectBorderParamData._int32Data;var d=this._drawRectBorderParamData._int16Data,f=o.create(r),p=f.numColor;h[0]=0,h[1]=120,h[2]=0,h[3]=2*l.length,h[4]=0;for(var m=5,g=0;c>g;g++)a[m++]=u[2*g],a[m++]=u[2*g+1],h[m++]=p;m=70;for(var v=0;v<l.length;v++)d[m++]=l[v];this._datai32[76]=this._drawRectBorderParamData.getPtrID(),Le.syncBufferToRenderThread(this._drawRectBorderParamData),this._datai32[75]=se._RECT_BORDER_CMD_ENCODER_.getPtrID()},s._setTextureEx=function(t,e){var i=null,n=null;if(!this._drawSimpleImageData){this._drawSimpleImageData=new ParamData(116,!0),i=this._drawSimpleImageData._float32Data,n=this._drawSimpleImageData._int32Data,n[0]=3,n[1]=33984,n[2]=e?t.bitmap._glTexture.id:0,n[3]=1,n[4]=96;var r=t.uv;i[5]=0,i[6]=0,i[7]=r[0],i[8]=r[1],n[9]=4294967295,n[10]=4294967295,i[11]=0,i[12]=0,i[13]=r[2],i[14]=r[3],n[15]=4294967295,n[16]=4294967295,i[17]=0,i[18]=0,i[19]=r[4],i[20]=r[5],n[21]=4294967295,n[22]=4294967295,i[23]=0,i[24]=0,i[25]=r[6],i[26]=r[7],n[27]=4294967295,n[28]=4294967295}i=this._drawSimpleImageData._float32Data,n=this._drawSimpleImageData._int32Data,n[2]=e?t.bitmap._glTexture.id:0;var s=e?t.width:0,a=e?t.height:0;i[11]=i[17]=s,i[18]=i[24]=a;var o=this._drawSimpleImageData.getPtrID();this._datai32[25]=o,Le.syncBufferToRenderThread(this._drawSimpleImageData),this._datai32[24]=se._SIMPLE_TEXTURE_CMDENCODER_.getPtrID()},s._setTexture=function(t){t&&(t.getIsReady()?this._setTextureEx(t,!0):(this._setTextureEx(t,!1),t.on("ready",this,this._setTextureEx,[t,!0])))},s._setCustomRender=function(){this._callbackFuncObj||(this._callbackFuncObj=new CallbackFuncObj),this._customCmds=[],this._callbackFuncObj.addCallbackFunc(0,this.customRenderFromNative.bind(this)),this._customRenderCmd=Le.instance.createCommandEncoder(128,64,!0),this._datai32[54]=this._callbackFuncObj.id,this._datai32[55]=0,this._datai32[27]=this._customRenderCmd.getPtrID()},s._setScrollRect=function(t){this._dataf32[28]=0,this._dataf32[29]=0,this._dataf32[30]=t.width,this._dataf32[31]=t.height,this._dataf32[32]=-t.x,this._dataf32[33]=-t.y,t.onPropertyChanged=this._setScrollRect.bind(this)},s._setColorFilter=function(){this._callbackFuncObj||(this._callbackFuncObj=new CallbackFuncObj),this._filterBeginCmd||(this._filterBeginCmd=Le.instance.createCommandEncoder(128,64,!1)),this._filterEndCmd||(this._filterEndCmd=Le.instance.createCommandEncoder(128,64,!0)),this._datai32[54]=this._callbackFuncObj.id,this._callbackFuncObj.addCallbackFunc(3,this.filterBeginRenderFromNative.bind(this)),this._callbackFuncObj.addCallbackFunc(4,this.filterEndRenderFromNative.bind(this)),this._datai32[65]=3,this._datai32[64]=this._filterBeginCmd.getPtrID(),this._datai32[67]=4,this._datai32[66]=this._filterEndCmd.getPtrID()},s._setMask=function(t){t.cacheAs="bitmap",this._callbackFuncObj||(this._callbackFuncObj=new CallbackFuncObj),this._maskCmd||(this._maskCmd=Le.instance.createCommandEncoder(128,64,!1)),this._datai32[54]=this._callbackFuncObj.id,this._callbackFuncObj.addCallbackFunc(6,this.maskRenderFromNative.bind(this)),this._datai32[69]=6,this._datai32[70]=this._maskCmd.getPtrID()},s._adjustTransform=function(){var t=this._transform||(this._transform=this._createTransform());t._bTransform=!0,Le.instance.calcMatrixFromScaleSkewRotation(this._conchData._data._ptrID,60,64,24,28,32,36,40,44,48,52,56);var e=this._conchData._float32Data;return t.a=e[16],t.b=e[17],t.c=e[18],t.d=e[19],t.tx=0,t.ty=0,t},s._setBlendMode=function(t){switch(t){case"normal":this._datai32[71]=1,this._datai32[72]=771;break;case"add":case"lighter":this._datai32[71]=1,this._datai32[72]=772;break;case"multiply":this._datai32[71]=774,this._datai32[72]=771;break;case"screen":this._datai32[71]=1,this._datai32[72]=1;break;case"overlay":this._datai32[71]=1,this._datai32[72]=769;break;case"light":this._datai32[71]=1,this._datai32[72]=1;break;case"mask":this._datai32[71]=0,this._datai32[72]=770;break;case"destination-out":this._datai32[71]=0,this._datai32[72]=0;break;default:alert("_setBlendMode Unknown type")}},s.customRenderFromNative=function(){var t=Le.instance.getCurrentContext();this._customRenderCmd.beginEncoding(),this._customRenderCmd.clearEncoding(),t._commandEncoder=this._customRenderCmd,t._customCmds=this._customCmds;for(var e=0,i=this._customCmds.length;i>e;e++)this._customCmds[e].recover();this._customCmds.length=0,this.customRender(t,0,0),this._customRenderCmd.endEncoding()},s.canvasBeginRenderFromNative=function(){var t=Le.instance,i=null,n=null,r=this._cacheStyle;if(r.canvas&&0==this._datai32[4])i=r.canvas,0!=this._bRepaintCanvas&&(this.setChildrenNativeVisible(!1),this._bRepaintCanvas=!1),this._datai32[63]=1;else{if(this._canvasBeginCmd.beginEncoding(),this._canvasBeginCmd.clearEncoding(),i=laya.layagl.ConchSpriteAdpt.buildCanvas(this,0,0)){this._datai32[63]=0,this._lastContext=t.getCurrentContext(),n=i.context;var s=n._targets;I.setParamData(this._drawCanvasParamData,s,-16,-16,s.width,s.height),t.setCurrentContext(n),n.beginRT(),t.save(),e._tempFloatArrayMatrix[0]=1,e._tempFloatArrayMatrix[1]=0,e._tempFloatArrayMatrix[2]=0,e._tempFloatArrayMatrix[3]=1,e._tempFloatArrayMatrix[4]=16,e._tempFloatArrayMatrix[5]=16,t.setGlobalValue(se.GLOBALVALUE_MATRIX32,8,e._tempFloatArrayMatrix),1!=this._bRepaintCanvas&&(this.setChildrenNativeVisible(!0),this._bRepaintCanvas=!0)}this._canvasBeginCmd.endEncoding()}},s.setChildrenNativeVisible=function(t){for(var e,i=this._children,n=i.length,r=0;n>r;++r)e=i[r],e._datai32[5]=t?1:0,e.setChildrenNativeVisible(t)},s.canvasEndRenderFromNative=function(){var t=Le.instance;if(this._canvasEndCmd.beginEncoding(),this._canvasEndCmd.clearEncoding(),this._bRepaintCanvas){var e=Le.instance.getCurrentContext();t.restore(),t.setCurrentContext(this._lastContext),t.commitContextToGPU(e),e.endRT(),t.blendFunc(1,771)}this._canvasEndCmd.endEncoding()},s.filterBeginRenderFromNative=function(){var t=this,i=Le.instance;this._filterBeginCmd.beginEncoding(),this._filterBeginCmd.clearEncoding();{var n=this._getCacheStyle().filters;n.length}if(n[0]instanceof laya.filters.ColorFilter){i.addShaderMacro(se.SHADER_MACRO_COLOR_FILTER);var r=n[0];i.setGlobalValue(se.GLOBALVALUE_COLORFILTER_COLOR,8,r._mat),i.setGlobalValue(se.GLOBALVALUE_COLORFILTER_ALPHA,8,r._alpha)}else{var s=Zi.TEMP,a=ui.create(),o=0,h=0,_=t._isHaveGlowFilter();_&&(o=50,h=25);var l=new Ge;l.copyFrom(t.getSelfBounds()),l.x+=t.x,l.y+=t.y,l.x-=t.pivotX+4,l.y-=t.pivotY+4;var u=l.x,c=l.y;if(l.width+=o+8,l.height+=o+8,s.x=l.x*a.a+l.y*a.c,s.y=l.y*a.d+l.x*a.b,l.x=s.x,l.y=s.y,s.x=l.width*a.a+l.height*a.c,s.y=l.height*a.d+l.width*a.b,l.width=s.x,l.height=s.y,l.width<=0||l.height<=0)return;var d=t._getCacheStyle().filterCache;d&&ri.releaseRT(d),d=ri.getRT(l.width,l.height),t._getCacheStyle().filterCache=d,e.useRenderTarget(d),e._tempFloatArrayMatrix[0]=1,e._tempFloatArrayMatrix[1]=0,e._tempFloatArrayMatrix[2]=0,e._tempFloatArrayMatrix[3]=1,e._tempFloatArrayMatrix[4]=t.x-u+h,e._tempFloatArrayMatrix[5]=t.y-c+h,i.setGlobalValue(se.GLOBALVALUE_MATRIX32,8,e._tempFloatArrayMatrix)}this._filterBeginCmd.endEncoding()},s.filterEndRenderFromNative=function(){this._filterEndCmd.beginEncoding(),this._filterEndCmd.clearEncoding();var t=Le.instance,n=this._getCacheStyle().filters;if(n[0]instanceof laya.filters.ColorFilter);else{t.restore();var r=Le.instance.getCurrentContext(),s=Gr.currentActive;if(Gr.popRT(),n[0]instanceof i.BlurFilter){t.addShaderMacro(se.SHADER_MACRO_BLUR_FILTER);var a=n[0];e._tempFloatArrayBuffer2[0]=s.width,e._tempFloatArrayBuffer2[1]=s.height,t.setGlobalValue(se.GLOBALVALUE_BLURFILTER_BLURINFO,8,e._tempFloatArrayBuffer2),t.setGlobalValue(se.GLOBALVALUE_BLURFILTER_STRENGTH,8,a.getStrenth_sig2_2sig2_native()),r.drawTarget(this._filterEndCmd,s,-4,-4,0,0)}else if(n[0]instanceof i.GlowFilter){var o=s.width,h=s.height,_=ri.getRT(o,h);e.useRenderTarget(_),t.addShaderMacro(se.SHADER_MACRO_GLOW_FILTER);var l=n[0],u=l.getBlurInfo2Native();u[0]=o,u[1]=h,t.setGlobalValue(se.GLOBALVALUE_GLOWFILTER_COLOR,8,l.getColorNative()),t.setGlobalValue(se.GLOBALVALUE_GLOWFILTER_BLURINFO1,8,l.getBlurInfo1Native()),t.setGlobalValue(se.GLOBALVALUE_GLOWFILTER_BLURINFO2,8,u),r.drawTarget(this._filterEndCmd,s,-16,-16,0,0),t.restore(),Gr.popRT(),r.drawTarget(this._filterEndCmd,_,-29,-29,0,0),r.drawTarget(this._filterEndCmd,s,-29,-29,0,0)}}this._filterEndCmd.endEncoding(),Le.syncBufferToRenderThread(this._filterEndCmd)},s.maskRenderFromNative=function(){this._maskCmd.beginEncoding(),this._maskCmd.clearEncoding();var t=Le.instance,i=t.getCurrentContext(),n=this.mask;n&&(n._children.length>0?(t.blockStart(n._conchData),n._renderChilds(i),t.blockEnd(n._conchData)):t.block(n._conchData)),e._tempInt1[0]=772,t.setGlobalValue(se.GLOBALVALUE_BLENDFUNC_SRC,8,e._tempInt1),e._tempInt1[0]=0,t.setGlobalValue(se.GLOBALVALUE_BLENDFUNC_DEST,8,e._tempInt1),this._maskCmd.endEncoding()},s.updateParticleFromNative=function(){this.tempCmd.updateParticle()},e.createMatrix=function(t,e,i,n,r,s,a){return void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===s&&(s=0),new Bi(t,e,i,n,r,s,a)},e.init=function(){te.__init__(),Se.__init__();var t=On.prototype,i=e.prototype,n=["_createTransform","_setTransform","_setGraphics","_setGraphicsCallBack","_setCacheAs","_setX","_setY","_setPivotX","_getPivotX","_setPivotY","_getPivotY","_setAlpha","_getAlpha","_setScaleX","_setScaleY","_setSkewX","_setSkewY","_setRotation","_adjustTransform","_setRenderType","_setTexture","_setTextureEx","_setCustomRender","_setScrollRect","_setColorFilter","customRenderFromNative","canvasBeginRenderFromNative","canvasEndRenderFromNative","setChildrenNativeVisible","filterBeginRenderFromNative","filterEndRenderFromNative","updateParticleFromNative","_setMask","maskRenderFromNative","_setBlendMode","_setBgStyleColor","_setBorderStyleColor"],r=0,s=0;s=n.length;var a;for(r=0;s>r;r++)a=n[r],t[a]=i[a];t.createGLBuffer=i.createData,ui._createFun=e.createMatrix;t.render=t.renderToNative=cr.prototype.renderToNative,t.repaint=t.repaintForNative=cr.prototype.repaintForNative,t.parentRepaint=t.parentRepaintForNative=cr.prototype.parentRepaintForNative,t._renderChilds=cr.prototype._renderChilds,t.writeBlockToNative=cr.prototype.writeBlockToNative,t._writeBlockChilds=cr.prototype._writeBlockChilds},e.useRenderTarget=function(t){var i=Le.instance;Gr.pushRT(),t.start(),i.clearColor(0,0,0,0),i.clear(17664),i.save(),e._tempFloatArrayBuffer2[0]=t.width,e._tempFloatArrayBuffer2[1]=t.height,i.setGlobalValue(se.GLOBALVALUE_VIEWS,8,e._tempFloatArrayBuffer2)},e.buildCanvas=function(t,e,i){var n,r,s,a,o,h,_,l,u,c=t._cacheStyle,d=c.canvas,f=c.cacheAs;return u=c._calculateCacheRect(t,f,e,i),_=u.x,l=u.y,a=c.cacheRect,o=a.width*_,h=a.height*l,r=a.x,s=a.y,"bitmap"===f&&(o>2048||h>2048)?(alert("cache bitmap size larger than 2048,cache ignored"),c.releaseContext(),null):(d||(c.createContext(),d=c.canvas),n=d.context,d.context.sprite=t,(d.width!=o||d.height!=h)&&(d.size(o,h),n._targets&&(n._targets.destroy(),n._targets=null)),"bitmap"===f?d.context.asBitmap=!0:"normal"===f&&(d.context.asBitmap=!1),"normal"===f&&(n.touches=[]),d)},n(e,["_tempFloatArrayBuffer2",function(){return this._tempFloatArrayBuffer2=new Float32Array(2)},"_tempFloatArrayMatrix",function(){return this._tempFloatArrayMatrix=new Float32Array(6)},"_tempInt1",function(){return this._tempInt1=new Int32Array(1)}]),e}(en),nr=function(t){function e(){e.__super.call(this)}return r(e,"laya.webgl.shader.BaseShader",t),e.activeShader=null,e.bindShader=null,e}(sn),rr=function(t){function e(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,e.__super.call(this),this._glBuffer=Le.instance.createBuffer()}r(e,"laya.webgl.utils.Buffer",t);var i=e.prototype;return i._bindForVAO=function(){},i.bind=function(){return!1},i._disposeResource=function(){this._glBuffer&&(Le.instance.deleteBuffer(this._glBuffer),this._glBuffer=null),this._setGPUMemory(0)},s(0,i,"bufferUsage",function(){return this._bufferUsage}),e._bindedVertexBuffer=null,e._bindedIndexBuffer=null,e}(sn),sr=function(t){function e(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=un.ctx,e.__super.call(this),this._onPlayEnd=Q.bind(this.__onPlayEnd,this),this.gain=this.context.createGain?this.context.createGain():this.context.createGainNode()}r(e,"laya.media.webaudio.WebAudioSoundChannel",t);var n=e.prototype;return n.play=function(){if(Vi.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var t=this.context,e=this.gain,i=t.createBufferSource();this.bufferSource=i,i.buffer=this.audioBuffer,i.connect(e),e&&e.disconnect(),e.connect(t.destination),i.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=Me.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.001):this.gain.gain.value=this._volume,0==this.loops&&(i.loop=!0),i.playbackRate.setTargetAtTime?i.playbackRate.setTargetAtTime(Vi.playbackRate,this.context.currentTime,.001):i.playbackRate.value=Vi.playbackRate,i.start(0,this.startTime),this._currentTime=0}},n.__onPlayEnd=function(){return 1==this.loops?(this.completeHandler&&(i.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),this.event("complete"),void 0):(this.loops>0&&this.loops--,this.startTime=0,this.play(),void 0)},n._clearBufferSource=function(){if(this.bufferSource){var t=this.bufferSource;t.stop?t.stop(0):t.noteOff(0),t.disconnect(0),t.onended=null,e._tryCleanFailed||this._tryClearBuffer(t),this.bufferSource=null}},n._tryClearBuffer=function(t){if(Me.onMac)try{t.buffer=un._miniBuffer}catch(i){e._tryCleanFailed=!0}else try{t.buffer=null}catch(i){e._tryCleanFailed=!0}},n.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,Vi.removeChannel(this),this.completeHandler=null,Vi.autoReleaseSound&&Vi.disposeSoundLater(this.url)},n.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,Vi.removeChannel(this),Vi.autoReleaseSound&&Vi.disposeSoundLater(this.url)},n.resume=function(){this.startTime=this._pauseTime,this.play()},s(0,n,"position",function(){return this.bufferSource?(Me.now()-this._startTime)/1e3+this.startTime:0}),s(0,n,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),s(0,n,"volume",function(){return this._volume},function(t){this.isStopped||(this._volume=t,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(t,this.context.currentTime,.001):this.gain.gain.value=t)}),e._tryCleanFailed=!1,e.SetTargetDelay=.001,e}(an),ar=function(t){function e(){e.__super.call(this),this._width=-1,this._height=-1}r(e,"laya.resource.Bitmap",t);var i=e.prototype;return i._getSource=function(){throw"Bitmap: must override it."},s(0,i,"width",function(){return this._width}),s(0,i,"height",function(){return this._height}),e}(sn),or=function(t){function e(t){this._audio=null,this._onEnd=null,this._resumePlay=null,e.__super.call(this),this._onEnd=Q.bind(this.__onEnd,this),this._resumePlay=Q.bind(this.__resumePlay,this),t.addEventListener("ended",this._onEnd),this._audio=t}r(e,"laya.media.h5audio.AudioSoundChannel",t);var n=e.prototype;return n.__onEnd=function(){return 1==this.loops?(this.completeHandler&&(i.systemTimer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),this.event("complete"),void 0):(this.loops>0&&this.loops--,this.startTime=0,this.play(),void 0)},n.__resumePlay=function(){if(this._audio&&this._audio.removeEventListener("canplay",this._resumePlay),!this.isStopped)try{this._audio.currentTime=this.startTime,Me.container.appendChild(this._audio),this._audio.play()}catch(t){this.event("error")}},n.play=function(){this.isStopped=!1;try{this._audio.playbackRate=Vi.playbackRate,this._audio.currentTime=this.startTime}catch(t){return this._audio.addEventListener("canplay",this._resumePlay),void 0}Vi.addChannel(this),Me.container.appendChild(this._audio),"play"in this._audio&&this._audio.play()},n.stop=function(){this.isStopped=!0,Vi.removeChannel(this),this.completeHandler=null,this._audio&&("pause"in this._audio&&wi.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),Me.onIE||this._audio!=pn._musicAudio&&Ki.recover("audio:"+this.url,this._audio),Me.removeElement(this._audio),this._audio=null)},n.pause=function(){this.isStopped=!0,Vi.removeChannel(this),"pause"in this._audio&&this._audio.pause()},n.resume=function(){this._audio&&(this.isStopped=!1,Vi.addChannel(this),"play"in this._audio&&this._audio.play())},s(0,n,"position",function(){return this._audio?this._audio.currentTime:0}),s(0,n,"duration",function(){return this._audio?this._audio.duration:0}),s(0,n,"volume",function(){return this._audio?this._audio.volume:1},function(t){this._audio&&(this._audio.volume=t)}),e}(an),hr=function(t){function e(t,i,n){this.texture=null,this._source=null,this._used=null,this._startFindPos=0,this._texW=0,this._texH=0,this._gridNum=0,this.charMaps=[],this._score=0,this._scoreTick=0,this.__destroyed=!1,this._discardTm=0,this.genID=0,this.ArrCharRenderInfo=[],e.__super.call(this),this._texW=t,this._texH=i,this._gridNum=n,this.texture=new N(this),this.setGridNum(n),this.lock=!0}r(e,"laya.webgl.resource.CharPageTexture",t);var n=e.prototype;return n.findAGrid=function(){for(var t=this._startFindPos;t<this._gridNum;t++)if(0==this._used[t]){this._startFindPos=t+1,this._used[t]=1;var e=this.ArrCharRenderInfo[t]=new Ve;return e.tex=this,e.pos=t,e}return null},n.removeGrid=function(t){this.ArrCharRenderInfo[t]&&(this.ArrCharRenderInfo[t].deleted=!0),this._used[t]=0,t<this._startFindPos&&(this._startFindPos=t)},n.removeOld=function(t){for(var e=0,i=null,n=0,r=this.charMaps.length;r>n;n++)if(i=this.charMaps[n]){var s=this;i.forEach(function(i,n,r){i&&i.touchTick<t&&(console.log("remove char "+n),s.removeGrid(i.pos),r.delete(n),e++)})}return e},n.reset=function(){this._discardTm=i.stage.getFrameTm(),this._startFindPos=0,this.charMaps=[],this._score=0,this._scoreTick=0,this.__destroyed=!0,this.ArrCharRenderInfo.forEach(function(t){t.deleted=!0})},n.setGridNum=function(t){if(this._gridNum=t,this._used&&this._used.length==this._gridNum)if(this._used.fill)this._used.fill(0);else for(var e=0;e<this._used.length;e++)this._used[e]=0;else this._used=new Uint8Array(t)},n.recreateResource=function(){if(!this._source){var t=wi.isConchApp?Le.instance.getDefaultCommandEncoder():Ii.mainContext,e=this._source=t.createTexture();this.texture.bitmap._glTexture=this._source,me.bindTexture(t,3553,e),t.texImage2D(3553,0,6408,this._texW,this._texH,0,6408,5121,null),t.texParameteri(3553,10241,9729),t.texParameteri(3553,10240,9729),t.texParameteri(3553,10242,33071),t.texParameteri(3553,10243,33071)}},n.addChar=function(t,e,i){if(Ce.isWan1Wan)return this.addCharCanvas(t,e,i),void 0;!this._source&&this.recreateResource();var n=wi.isConchApp?Le.instance.getDefaultCommandEncoder():Ii.mainContext;me.bindTexture(n,3553,this._source),!wi.isConchApp&&n.pixelStorei(37441,!0);var r=t.data;t.data instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer)),n.texSubImage2D(3553,0,e,i,t.width,t.height,6408,5121,r),!wi.isConchApp&&n.pixelStorei(37441,!1)},n.addCharCanvas=function(t,e,i){!this._source&&this.recreateResource();var n=wi.isConchApp?Le.instance.getDefaultCommandEncoder():Ii.mainContext;me.bindTexture(n,3553,this._source),!wi.isConchApp&&n.pixelStorei(37441,!0),n.texSubImage2D(3553,0,e,i,6408,5121,t),!wi.isConchApp&&n.pixelStorei(37441,!1)},n.destroy=function(){console.log("destroy CharPageTexture"),this.__destroyed=!0;var t=wi.isConchApp?Le.instance.getDefaultCommandEncoder():Ii.mainContext;this._source&&t.deleteTexture(this._source),this._source=null,this.ArrCharRenderInfo.forEach(function(t){t.deleted=!0})},n.printDebugInfo=function(){console.log("current page info:"),console.log("  score:",this._score,",tick:",this._scoreTick,",gridnum:",this._gridNum);for(var t=0,e=this.charMaps.length;e>t;t++){var i=this.charMaps[t];if(i){var n="";i.forEach(function(t,e){t&&(n+=e)}),console.log("data[",t,"]:",n)}}},e}(sn),_r=function(t){function e(){this.autoDestroyAtClosed=!1,this.url=null,this._timer=null,this._viewCreated=!1,this._idMap=null,this._$componentType="Scene",e.__super.call(this),this._setBit(8,!0),e.unDestroyedScenes.push(this),this._scene=this,this.createChildren()}r(e,"laya.display.Scene",t);var n=e.prototype;return n.createChildren=function(){},n.loadScene=function(t){var e=t.indexOf(".")>-1?t:t+".scene",n=i.loader.getRes(e);if(n)this.createView(n);else{i.loader.resetProgress();var r=new En;r.on("complete",this,this._onSceneLoaded,[e]),r.on("progress",this,this._onPrgogress),r.load(e)}},n._onPrgogress=function(t){rn.instance.event("UPDATE_LOADING_PROGRESS",t)},n._onSceneLoaded=function(t){console.log("加载scene:"+t),this.createView(hn.getRes(t))},n.createView=function(t){t&&!this._viewCreated&&(this._viewCreated=!0,ce.createByData(this,t))},n.getNodeByID=function(t){return this._idMap?this._idMap[t]:null},n.open=function(t,i){void 0===t&&(t=!0),t&&e.closeAll(),e.root.addChild(this.scene),this.onOpened(i)},n.onOpened=function(){},n.close=function(t){this.autoDestroyAtClosed?this.destroy():this.removeSelf(),this.onClosed(t)},n.onClosed=function(){console.log("onClosed")},n.destroy=function(e){void 0===e&&(e=!0),this._idMap=null,t.prototype.destroy.call(this,e);for(var i=laya.display.Scene.unDestroyedScenes,n=0,r=i.length;r>n;n++)if(i[n]===this)return i.splice(n,1),void 0},n._sizeChanged=function(){this.event("resize")},s(0,n,"scaleX",t.prototype._$get_scaleX,function(t){i.superGet(On,this,"scaleX")!=t&&(i.superSet(On,this,"scaleX",t),this.event("resize"))}),s(0,n,"scaleY",t.prototype._$get_scaleY,function(t){i.superGet(On,this,"scaleY")!=t&&(i.superSet(On,this,"scaleY",t),this.event("resize"))}),s(0,n,"width",function(){if(this._width)return this._width;for(var t=0,e=this.numChildren-1;e>-1;e--){var i=this.getChildAt(e);i._visible&&(t=Math.max(i._x+i.width*i.scaleX,t))}return t},function(t){i.superGet(On,this,"width")!=t&&(i.superSet(On,this,"width",t),this.callLater(this._sizeChanged))}),s(0,n,"timer",function(){return this._timer||i.timer},function(t){this._timer=t}),s(0,n,"height",function(){if(this._height)return this._height;for(var t=0,e=this.numChildren-1;e>-1;e--){var i=this.getChildAt(e);i._visible&&(t=Math.max(i._y+i.height*i.scaleY,t))}return t},function(t){i.superGet(On,this,"height")!=t&&(i.superSet(On,this,"height",t),this.callLater(this._sizeChanged))}),s(1,e,"root",function(){function t(){e._root.size(i.stage.width,i.stage.height),e._root.event("resize")}return e._root||(e._root=i.stage.addChild(new On),e._root.name="root",i.stage.on("resize",null,t),t()),e._root},laya.display.Sprite._$SET_root),e.load=function(t,n,r){function s(t){e._loadPage&&e._loadPage.event("progress",t),r&&r.runWith(t)}function a(){o.off("progress",null,s);var i=hn.getRes(t);if(!i)throw"Can not find scene:"+t;if(!i.props)throw"Scene data is error:"+t;var r=i.props.runtime?i.props.runtime:i.type,a=Te.getClass(r);if("instance"==i.props.renderType)var h=a.instance||(a.instance=new a);else h=new a;if(!(h&&h instanceof laya.display.Node))throw"Can not find scene:"+r;h.url=t,h._getBit(8)?(h.on("onViewCreated",null,function(){n&&n.runWith(h)}),h.createView(i)):n&&n.runWith(h),e.hideLoadingPage()}i.loader.resetProgress();var o=new En;o.on("progress",null,s),o.once("complete",null,a),o.load(t)},e.open=function(t,i,n,r,s){if(void 0===i&&(i=!0),n instanceof laya.utils.Handler){var a=r;r=n,n=a}e.showLoadingPage(),e.load(t,l.create(null,this._onSceneLoaded,[i,r,n]),s)},e._onSceneLoaded=function(t,e,i,n){n.open(t,i),e&&e.runWith(n)},e.close=function(t,e){void 0===e&&(e="");for(var i=!1,n=laya.display.Scene.unDestroyedScenes,r=0,s=n.length;s>r;r++){var a=n[r];a.parent&&a.url===t&&a.name==e&&(a.close(),i=!0)}return i},e.closeAll=function(){for(var t=laya.display.Scene.root,e=0,i=t.numChildren;i>e;e++){var n=t.getChildAt(0);n instanceof laya.display.Scene&&n.close()}},e.destroy=function(t,e){void 0===e&&(e="");for(var i=!1,n=laya.display.Scene.unDestroyedScenes,r=0,s=n.length;s>r;r++){var a=n[r];a.url===t&&a.name==e&&(a.destroy(),i=!0)}return i},e.gc=function(t){sn.destroyUnusedResources(t)},e.setLoadingPage=function(t){e._loadPage!=t&&(e._loadPage=t)},e.showLoadingPage=function(t,n){void 0===n&&(n=500),e._loadPage&&(i.systemTimer.clear(null,e._showLoading),i.systemTimer.clear(null,e._hideLoading),i.systemTimer.once(n,null,e._showLoading,[t],!1))},e._showLoading=function(t){i.stage.addChild(e._loadPage),e._loadPage.onOpened(t)},e._hideLoading=function(){e._loadPage.close()},e.hideLoadingPage=function(t){void 0===t&&(t=500),e._loadPage&&(i.systemTimer.clear(null,e._showLoading),i.systemTimer.clear(null,e._hideLoading),i.systemTimer.once(t,null,e._hideLoading))},e.unDestroyedScenes=[],e._root=null,e._loadPage=null,e}(On),lr=function(t){function e(){this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,e.__super.call(this),this._anchorX=0/0,this._anchorY=0/0,this._widget=yn.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}r(e,"laya.ui.UIComponent",t);
var n=e.prototype;return n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._dataSource=null,this._tag=null,this._toolTip=null},n.preinitialize=function(){},n.createChildren=function(){},n.initialize=function(){},n.measureWidth=function(){var t=0;this.commitMeasure();for(var e=this.numChildren-1;e>-1;e--){var i=this.getChildAt(e);i._visible&&(t=Math.max(i._x+i.width*i.scaleX,t))}return t},n.commitMeasure=function(){},n.measureHeight=function(){var t=0;this.commitMeasure();for(var e=this.numChildren-1;e>-1;e--){var i=this.getChildAt(e);i._visible&&(t=Math.max(i._y+i.height*i.scaleY,t))}return t},n._sizeChanged=function(){isNaN(this._anchorX)||(this.pivotX=this.anchorX*this.width),isNaN(this._anchorY)||(this.pivotY=this.anchorY*this.height),this.event("resize"),this._widget!==yn.EMPTY&&this._widget.resetLayout()},n.onMouseOver=function(){i.stage.event("showtip",this._toolTip)},n.onMouseOut=function(){i.stage.event("hidetip",this._toolTip)},n._getWidget=function(){return this._widget===yn.EMPTY&&(this._widget=this.addComponent(yn)),this._widget},n.onCompResize=function(){this._sizeChanged()},n._childChanged=function(e){this.callLater(this._sizeChanged),t.prototype._childChanged.call(this,e)},s(0,n,"centerY",function(){return this._widget.centerY},function(t){t!=this._widget.centerY&&(this._getWidget().centerY=t)}),s(0,n,"width",function(){return this._width?this._width:this.measureWidth()},function(t){i.superGet(On,this,"width")!=t&&(i.superSet(On,this,"width",t),this.callLater(this._sizeChanged))}),s(0,n,"bottom",function(){return this._widget.bottom},function(t){t!=this._widget.bottom&&(this._getWidget().bottom=t)}),s(0,n,"height",function(){return this._height?this._height:this.measureHeight()},function(t){i.superGet(On,this,"height")!=t&&(i.superSet(On,this,"height",t),this.callLater(this._sizeChanged))}),s(0,n,"left",function(){return this._widget.left},function(t){t!=this._widget.left&&(this._getWidget().left=t)}),s(0,n,"dataSource",function(){return this._dataSource},function(t){this._dataSource=t;for(var e in this._dataSource)this.hasOwnProperty(e)&&"function"!=typeof this[e]&&(this[e]=this._dataSource[e])}),s(0,n,"centerX",function(){return this._widget.centerX},function(t){t!=this._widget.centerX&&(this._getWidget().centerX=t)}),s(0,n,"top",function(){return this._widget.top},function(t){t!=this._widget.top&&(this._getWidget().top=t)}),s(0,n,"right",function(){return this._widget.right},function(t){t!=this._widget.right&&(this._getWidget().right=t)}),s(0,n,"tag",function(){return this._tag},function(t){this._tag=t}),s(0,n,"toolTip",function(){return this._toolTip},function(t){this._toolTip!=t&&(this._toolTip=t,null!=t?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),s(0,n,"gray",function(){return this._gray},function(t){t!==this._gray&&(this._gray=t,we.gray(this,t))}),s(0,n,"disabled",function(){return this._disabled},function(t){t!==this._disabled&&(this.gray=this._disabled=t,this.mouseEnabled=!t)}),s(0,n,"scaleX",t.prototype._$get_scaleX,function(t){i.superGet(On,this,"scaleX")!=t&&(i.superSet(On,this,"scaleX",t),this.event("resize"))}),s(0,n,"scaleY",t.prototype._$get_scaleY,function(t){i.superGet(On,this,"scaleY")!=t&&(i.superSet(On,this,"scaleY",t),this.event("resize"))}),s(0,n,"anchorX",function(){return this._anchorX},function(t){this._anchorX!=t&&(this._anchorX=t,this.callLater(this._sizeChanged))}),s(0,n,"anchorY",function(){return this._anchorY},function(t){this._anchorY!=t&&(this._anchorY=t,this.callLater(this._sizeChanged))}),e}(On),ur=function(e){function a(){this._clipPoint=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=0,this._startY=0,this._words=null,this._charSize={},this._valign="top",this._color="#000000",a.__super.call(this),this._fontSize=a.defaultFontSize,this._font=a.defaultFont,this.overflow="visible",this._style=An.EMPTY}r(a,"laya.display.Text",e);var o=a.prototype;return o.getStyle=function(){return this._style===An.EMPTY&&(this._style=An.create()),this._style},o._getTextStyle=function(){return this._style===An.EMPTY&&(this._style=An.create()),this._style},o.destroy=function(t){void 0===t&&(t=!0),e.prototype.destroy.call(this,t),this._clipPoint=null,this._lines=null,this._lineWidths=null,this._words=null,this._charSize=null},o._getBoundPointsM=function(t){void 0===t&&(t=!1);var e=Ge.TEMP;return e.setTo(0,0,this.width,this.height),e._getBoundPoints()},o.getGraphicBounds=function(t){void 0===t&&(t=!1);var e=Ge.TEMP;return e.setTo(0,0,this.width,this.height),e},o._getCSSStyle=function(){return this._style},o.lang=function(t){if(t=a.langPacks&&a.langPacks[t]?a.langPacks[t]:t,arguments.length<2)this._text=t;else{for(var e=0,i=arguments.length;i>e;e++)t=t.replace("{"+e+"}",arguments[e+1]);this._text=t}},o._getContextFont=function(){return(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(Me.onIPhone?laya.display.Text.fontFamilyMap[this.font]||this.font:this.font)},o._isPassWordMode=function(){var t=this._style,e=t.asPassword;return"prompt"in this&&this.prompt==this._text&&(e=!1),e},o._getPassWordTxt=function(t){var e,i=t.length;e="";for(var n=i;n>0;n--)e+="●";return e},o._renderText=function(){var t=this.padding,e=this._lines.length;"visible"!=this.overflow&&(e=Math.min(e,Math.floor((this.height-t[0]-t[2])/(this.leading+this._charSize.height))+1));var i=this.scrollY/(this._charSize.height+this.leading)|0,n=this.graphics;n.clear(!0);var r=this._getContextFont();Me.context.font=r;var s=t[3],a="left",o=this._lines,h=this.leading+this._charSize.height,_=this._style.currBitmapFont;_&&(h=this.leading+_.getMaxHeight());var l=t[0];if(!_&&this._width>0&&this._textWidth<=this._width&&("right"==this.align?(a="right",s=this._width-t[1]):"center"==this.align&&(a="center",s=.5*this._width+t[3]-t[1])),this._height>0){var u=this._textHeight>this._height?"top":this.valign;"middle"===u?l=.5*(this._height-e*h)+t[0]-t[2]:"bottom"===u&&(l=this._height-e*h-t[2])}var c=this._style;if(_&&_.autoScaleSize)var d=_.fontSize/this.fontSize;if(this._clipPoint){if(n.save(),_&&_.autoScaleSize){var f=0,p=0;f=this._width?this._width-t[3]-t[1]:this._textWidth,p=this._height?this._height-t[0]-t[2]:this._textHeight,f*=d,p*=d,n.clipRect(t[3],t[0],f,p)}else n.clipRect(t[3],t[0],this._width?this._width-t[3]-t[1]:this._textWidth,this._height?this._height-t[0]-t[2]:this._textHeight);this.repaint()}var m=c.asPassword;"prompt"in this&&this.prompt==this._text&&(m=!1);for(var g=0,v=0,y=Math.min(this._lines.length,e+i)||1,E=i;y>E;E++){var A,C=o[E];if(m){var S=C.length;C="";for(var D=S;D>0;D--)C+="●"}if(null==C&&(C=""),g=s-(this._clipPoint?this._clipPoint.x:0),v=l+h*E-(this._clipPoint?this._clipPoint.y:0),this.underline&&this._drawUnderline(a,g,v,E),_){var R=this.width;_.autoScaleSize&&(R=this.width*d),_._drawText(C,this,g,v,this.align,R)}else wi.isWebGL?(this._words||(this._words=[]),A=this._words.length>E-i?this._words[E-i]:new xe,A.setText(C)):A=C,c.stroke?n.fillBorderText(A,g,v,r,this.color,c.strokeColor,c.stroke,a):n.fillText(A,g,v,r,this.color,a)}if(_&&_.autoScaleSize){var T=1/d;this.scale(T,T)}this._clipPoint&&n.restore(),this._startX=s,this._startY=l},o._drawUnderline=function(t,e,i,n){var r=this._lineWidths[n];switch(t){case"center":e-=r/2;break;case"right":e-=r;break;case"left":}i+=this._charSize.height,this._graphics.drawLine(e,i,e+r,i,this.underlineColor||this.color,1)},o.typeset=function(){return this._isChanged=!1,this._text?(wi.isConchApp?t.conchTextCanvas.font=this._getContextFont():Me.context.font=this._getContextFont(),this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this._parseLines(this._getPassWordTxt(this._text)):this._parseLines(this._text),this._evalTextSize(),this._checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new Zi(0,0)):this._clipPoint=null,this._renderText(),void 0):(this._clipPoint=null,this._textWidth=this._textHeight=0,this.graphics.clear(!0),void 0)},o._evalTextSize=function(){var t=0/0,e=0/0;t=Math.max.apply(this,this._lineWidths),e=this._style.currBitmapFont?this._lines.length*(this._style.currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],(t!=this._textWidth||e!=this._textHeight)&&(this._textWidth=t,this._textHeight=e)},o._checkEnabledViewportOrNot=function(){return"scroll"==this.overflow&&(this._width>0&&this._textWidth>this._width||this._height>0&&this._textHeight>this._height)},o.changeText=function(t){this._text!==t&&(this.lang(t+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},o._parseLines=function(e){var i=this.wordWrap||"hidden"==this.overflow;if(i)var n=this._getWordWrapWidth();var r=this._style.currBitmapFont;if(r)this._charSize.width=r.getMaxWidth(),this._charSize.height=r.getMaxHeight();else{var s=null;s=wi.isConchApp?t.conchTextCanvas.measureText(this._testWord):Me.context.measureText(a._testWord),this._charSize.width=s.width,this._charSize.height=s.height||this.fontSize}for(var o=e.replace(/\r\n/g,"\n").split("\n"),h=0,_=o.length;_>h;h++){var l=o[h];i?this._parseLine(l,n):(this._lineWidths.push(this._getTextWidth(l)),this._lines.push(l))}},o._parseLine=function(t,e){var i,n=(Me.context,this._lines),r=0,s=0/0,a=0/0,o=0;if(s=this._getTextWidth(t),e>=s)return n.push(t),this._lineWidths.push(s),void 0;s=this._charSize.width,r=Math.floor(e/s),0==r&&(r=1),s=this._getTextWidth(t.substring(0,r)),a=s;for(var h=r,_=t.length;_>h;h++)if(s=this._getTextWidth(t.charAt(h)),a+=s,a>e)if(this.wordWrap){var l=t.substring(o,h);if(l.charCodeAt(l.length-1)<255&&(i=/(?:\w|-)+$/.exec(l),i&&(h=i.index+o,0==i.index?h+=l.length:l=t.substring(o,h))),n.push(l),this._lineWidths.push(a-s),o=h,!(_>h+r)){n.push(t.substring(o,_)),this._lineWidths.push(this._getTextWidth(n[n.length-1])),o=-1;break}h+=r,s=this._getTextWidth(t.substring(o,h)),a=s,h--}else if("hidden"==this.overflow)return n.push(t.substring(0,h)),this._lineWidths.push(this._getTextWidth(n[n.length-1])),void 0;this.wordWrap&&-1!=o&&(n.push(t.substring(o,_)),this._lineWidths.push(this._getTextWidth(n[n.length-1])))},o._getTextWidth=function(e){var i=this._style.currBitmapFont;return i?i.getTextWidth(e):wi.isConchApp?t.conchTextCanvas.measureText(e).width:Me.context.measureText(e).width},o._getWordWrapWidth=function(){var t=this.padding,e=0/0,i=this._style.currBitmapFont;return e=i&&i.autoScaleSize?this._width*(i.fontSize/this.fontSize):this._width,0>=e&&(e=this.wordWrap?100:Me.width),0>=e&&(e=100),e-t[3]-t[1]},o.getCharPoint=function(t,e){this._isChanged&&i.systemTimer.runCallLater(this,this.typeset);for(var n=0,r=this._lines,s=0,a=0,o=r.length;o>a;a++){if(n+=r[a].length,n>t){var h=a;break}s=n}var _=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;Me.context.font=_;var l=this._getTextWidth(this._text.substring(s,t)),u=e||new Zi;return u.setTo(this._startX+l-(this._clipPoint?this._clipPoint.x:0),this._startY+h*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},s(0,o,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(t){t!=this._width&&(i.superSet(On,this,"width",t),this.isChanged=!0,this.borderColor&&this._setBorderStyleColor(0,0,this.width,this.height,this.borderColor,1))}),s(0,o,"textWidth",function(){return this._isChanged&&i.systemTimer.runCallLater(this,this.typeset),this._textWidth}),s(0,o,"height",function(){return this._height?this._height:this.textHeight},function(t){t!=this._height&&(i.superSet(On,this,"height",t),this.isChanged=!0,this.borderColor&&this._setBorderStyleColor(0,0,this.width,this.height,this.borderColor,1))}),s(0,o,"textHeight",function(){return this._isChanged&&i.systemTimer.runCallLater(this,this.typeset),this._textHeight}),s(0,o,"padding",function(){return this._style.padding},function(t){if("string"==typeof t){var e;e=t.split(",");var i=0,n=0;for(n=e.length;e.length<4;)e.push(0);for(i=0;n>i;i++)e[i]=parseFloat(e[i])||0;t=e}this._getTextStyle().padding=t,this.isChanged=!0}),s(0,o,"bold",function(){return this._style.bold},function(t){this._getTextStyle().bold=t,this.isChanged=!0}),s(0,o,"text",function(){return this._text||""},function(t){this._text!==t&&(this.lang(t+""),this.isChanged=!0,this.event("change"),this.borderColor&&this._setBorderStyleColor(0,0,this.width,this.height,this.borderColor,1))}),s(0,o,"color",function(){return this._color},function(t){this._color!=t&&(this._color=t,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),s(0,o,"font",function(){return this._font},function(t){this._style.currBitmapFont&&(this._getTextStyle().currBitmapFont=null,this.scale(1,1)),a._bitmapFonts&&a._bitmapFonts[t]&&(this._getTextStyle().currBitmapFont=a._bitmapFonts[t]),this._font=t,this.isChanged=!0}),s(0,o,"fontSize",function(){return this._fontSize},function(t){this._fontSize!=t&&(this._fontSize=t,this.isChanged=!0)}),s(0,o,"italic",function(){return this._style.italic},function(t){this._getTextStyle().italic=t,this.isChanged=!0}),s(0,o,"align",function(){return this._style.align},function(t){this._getTextStyle().align=t,this.isChanged=!0}),s(0,o,"valign",function(){return this._valign},function(t){this._valign=t,this.isChanged=!0}),s(0,o,"wordWrap",function(){return this._style.wordWrap},function(t){this._getTextStyle().wordWrap=t,this.isChanged=!0}),s(0,o,"leading",function(){return this._style.leading},function(t){this._getTextStyle().leading=t,this.isChanged=!0}),s(0,o,"bgColor",function(){return this._style.bgColor},function(t){this._getTextStyle().bgColor=t,this._renderType|=128,this._setBgStyleColor(0,0,this.width,this.height,t),this._setRenderType(this._renderType),this.isChanged=!0}),s(0,o,"borderColor",function(){return this._style.borderColor},function(t){this._getTextStyle().borderColor=t,this._renderType|=128,this._setBorderStyleColor(0,0,this.width,this.height,t,1),this._setRenderType(this._renderType),this.isChanged=!0}),s(0,o,"stroke",function(){return this._style.stroke},function(t){this._getTextStyle().stroke=t,this.isChanged=!0}),s(0,o,"strokeColor",function(){return this._style.strokeColor},function(t){this._getTextStyle().strokeColor=t,this.isChanged=!0}),s(0,o,"isChanged",null,function(t){this._isChanged!==t&&(this._isChanged=t,t&&i.systemTimer.callLater(this,this.typeset))}),s(0,o,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(t){if(!("scroll"!=this.overflow||this.textWidth<this._width)&&this._clipPoint){t=t<this.padding[3]?this.padding[3]:t;var e=this._textWidth-this._width;t=t>e?e:t,this._clipPoint.x=t,this._renderText()}}),s(0,o,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(t){if(!("scroll"!=this.overflow||this.textHeight<this._height)&&this._clipPoint){t=t<this.padding[0]?this.padding[0]:t;var e=this._textHeight-this._height;t=t>e?e:t,this._clipPoint.y=t,this._renderText()}}),s(0,o,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),s(0,o,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),s(0,o,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),s(0,o,"underlineColor",function(){return this._style.underlineColor},function(t){this._getTextStyle().underlineColor=t,this._isChanged||this._renderText()}),s(0,o,"underline",function(){return this._style.underline},function(t){this._getTextStyle().underline=t}),a.defaultFontStr=function(){return a.defaultFontSize+"px "+a.defaultFont},a.registerBitmapFont=function(t,e){a._bitmapFonts||(a._bitmapFonts={}),a._bitmapFonts[t]=e},a.unregisterBitmapFont=function(t,e){if(void 0===e&&(e=!0),a._bitmapFonts&&a._bitmapFonts[t]){var i=a._bitmapFonts[t];e&&i.destroy(),delete a._bitmapFonts[t]}},a.VISIBLE="visible",a.SCROLL="scroll",a.HIDDEN="hidden",a.defaultFontSize=12,a.defaultFont="Arial",a.langPacks=null,a.isComplexText=!1,a._testWord="游",a._bitmapFonts=null,a.CharacterCache=!0,a.RightToLeft=!1,n(a,["fontFamilyMap",function(){return this.fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),a}(On),cr=function(t){function e(){e.__super.call(this)}r(e,"laya.layagl.ConchSprite",t);var i=e.prototype;return i.parentRepaintForNative=function(t){void 0===t&&(t=2);var e=this._parent;e&&(e._conchData._int32Data[4]&t)!=t&&(e._conchData._int32Data[4]|=t,e.parentRepaintForNative(t))},i.renderToNative=function(t){var e=t.gl,i=Le.getFrameCount()-1,n=this._conchData._int32Data,r=n[4];this._children.length>0?i!=n[3]||r>0&&1==(1&r)?(e.blockStart(this._conchData),this._renderChilds(t),e.blockEnd(this._conchData)):e.copyCmdBuffer(this._conchData._int32Data[1],this._conchData._int32Data[2]):e.block(this._conchData)},i.writeBlockToNative=function(){var t=Le.instance;this._children.length>0?(t.blockStart(this._conchData),this._writeBlockChilds(),t.blockEnd(this._conchData)):t.block(this._conchData)},i._renderChilds=function(t){var e,i=this._children,n=0,r=i.length,s=this._style;if(s.viewport)for(var a=s.viewport,o=a.x,h=a.y,_=a.right,l=a.bottom,u=0/0,c=0/0;r>n;++n)(e=i[n])._visible&&(u=e._x)<_&&u+e.width>o&&(c=e._y)<l&&c+e.height>h&&e.renderToNative(t);else for(;r>n;++n)(e=i[n])._visible&&e.renderToNative(t)},i._writeBlockChilds=function(){var t,e=this._children,i=0,n=e.length,r=this._style;if(r.viewport)for(var s=r.viewport,a=s.x,o=s.y,h=s.right,_=s.bottom,l=0/0,u=0/0;n>i;++i)(t=e[i])._visible&&(l=t._x)<h&&l+t.width>a&&(u=t._y)<_&&u+t.height>o&&t.writeBlockToNative();else for(;n>i;++i)(t=e[i])._visible&&t.writeBlockToNative()},i.repaintForNative=function(t){void 0===t&&(t=2),(this._conchData._int32Data[4]&t)!=t&&(this._conchData._int32Data[4]|=t,this.parentRepaintForNative(t))},e}(On),dr=function(t){function e(){this._element=null,this._recList=[],this._innerHTML=null,this._repaintState=0,e.__super.call(this),this._element=new xn,this._element.repaintHandler=new l(this,this._htmlDivRepaint),this.mouseEnabled=!0,this.on("click",this,this._onMouseClick)}r(e,"laya.html.dom.HTMLDivElement",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),this._element&&this._element.reset(),this._element=null,this._doClears(),t.prototype.destroy.call(this,e)},i._htmlDivRepaint=function(t){void 0===t&&(t=!1),t?this._repaintState<2&&(this._repaintState=2):this._repaintState<1&&(this._repaintState=1),this._repaintState>0&&this._setGraphicDirty()},i._updateGraphicWork=function(){switch(this._repaintState){case 1:this._updateGraphic();break;case 2:this._refresh()}},i._setGraphicDirty=function(){this.callLater(this._updateGraphicWork)},i._doClears=function(){if(this._recList){var t,e=0,i=this._recList.length;for(e=0;i>e;e++)t=this._recList[e],t.recover();this._recList.length=0}},i._updateGraphic=function(){this._doClears(),this.graphics.clear(!0),this._repaintState=0,this._element.drawToGraphic(this.graphics,-this._element.x,-this._element.y,this._recList);var t=this._element.getBounds();t&&this.setSelfBounds(t),this.size(t.width,t.height)},i._refresh=function(){this._repaintState=1,this._innerHTML&&(this._element.innerHTML=this._innerHTML),this._setGraphicDirty()},i._onMouseClick=function(){var t,e=this.mouseX,i=this.mouseY,n=0,r=0;for(r=this._recList.length,n=0;r>n;n++)t=this._recList[n],t.rec.contains(e,i)&&this._eventLink(t.href)},i._eventLink=function(t){this.event("link",[t])},s(0,i,"style",function(){return this._element.style}),s(0,i,"innerHTML",null,function(t){this._innerHTML!=t&&(this._repaintState=1,this._innerHTML=t,this._element.innerHTML=t,this._setGraphicDirty())}),s(0,i,"contextWidth",function(){return this._element.contextWidth}),s(0,i,"contextHeight",function(){return this._element.contextHeight}),e}(On),fr=function(t){function e(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._actionName=null,this._controlNode=null,e.__super.call(this),this._interval=Di.animationInterval,this._setBitUp(16)}r(e,"laya.display.AnimationBase",t);var i=e.prototype;return i.play=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=!0),void 0===i&&(i=""),this._isPlaying=!0,this._actionName=i,this.index="string"==typeof t?this._getFrameByLabel(t):t,this.loop=e,this._isReverse=1===this.wrapMode,0==this.index&&this._isReverse&&(this.index=this.count-1),this.interval>0&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},i._getFrameByLabel=function(t){for(var e=0;e<this._count;e++){var i=this._labels[e];if(i&&i.indexOf(t)>-1)return e}return 0},i._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),this.event("complete"),void 0;2==this.wrapMode?(this._index=this._count>0?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),this.event("complete"),void 0;2==this.wrapMode?(this._index=this._count-2>=0?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},i._setControlNode=function(t){this._controlNode&&(this._controlNode.off("display",this,this._resumePlay),this._controlNode.off("undisplay",this,this._resumePlay)),this._controlNode=t,t&&t!=this&&(t.on("display",this,this._resumePlay),t.on("undisplay",this,this._resumePlay))},i._setDisplay=function(e){t.prototype._setDisplay.call(this,e),this._resumePlay()},i._resumePlay=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},i.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},i.addLabel=function(t,e){this._labels||(this._labels={}),this._labels[e]||(this._labels[e]=[]),this._labels[e].push(t)},i.removeLabel=function(t){if(t){if(this._labels)for(var e in this._labels)this._removeLabelFromList(this._labels[e],t)}else this._labels=null},i._removeLabelFromList=function(t,e){if(t)for(var i=t.length-1;i>=0;i--)t[i]==e&&t.splice(i,1)},i.gotoAndStop=function(t){this.index="string"==typeof t?this._getFrameByLabel(t):t,this.stop()},i._displayToIndex=function(){},i.clear=function(){return this.stop(),this._labels=null,this},s(0,i,"interval",function(){return this._interval},function(t){this._interval!=t&&(this._frameRateChanged=!0,this._interval=t,this._isPlaying&&t>0&&this.timerLoop(t,this,this._frameLoop,null,!0,!0))}),s(0,i,"isPlaying",function(){return this._isPlaying}),s(0,i,"index",function(){return this._index},function(t){if(this._index=t,this._displayToIndex(t),this._labels&&this._labels[t])for(var e=this._labels[t],i=0,n=e.length;n>i;i++)this.event("label",e[i])}),s(0,i,"count",function(){return this._count}),e.WRAP_POSITIVE=0,e.WRAP_REVERSE=1,e.WRAP_PINGPONG=2,e}(On),pr=function(e){function a(){function t(){"hidden"==Me.document[r]?(e._isVisibility=!1,n._isInputting()&&(xr.inputElement.target.focus=!1)):e._isVisibility=!0,e.renderingEnabled=e._isVisibility,n.event("visibilitychange")}this.focus=null,this._frameRate="fast",this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._safariOffsetY=0,this._frameStartTime=0,this._isFocused=!1,this._isVisibility=!1,this._wgColor=[0,0,0,1],this._scene3Ds=[],this._globalRepaintSet=!1,this._globalRepaintGet=!1,a.__super.call(this),this.offset=new Zi,this._canvasTransform=new ui,this._previousOrientation=Me.window.orientation;var e=this;this.transform=ui.create(),this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._setBit(128,!0),this._setBit(2,!0),this._isFocused=!0,this._isVisibility=!0;var i=Me.window,n=this;i.addEventListener("focus",function(){e._isFocused=!0,n.event("focus"),n.event("focuschange")}),i.addEventListener("blur",function(){e._isFocused=!1,n.event("blur"),n.event("focuschange"),n._isInputting()&&(xr.inputElement.target.focus=!1)});var r="visibilityState",s="visibilitychange",o=i.document;"undefined"!=typeof o.hidden?(s="visibilitychange",r="visibilityState"):"undefined"!=typeof o.mozHidden?(s="mozvisibilitychange",r="mozVisibilityState"):"undefined"!=typeof o.msHidden?(s="msvisibilitychange",r="msVisibilityState"):"undefined"!=typeof o.webkitHidden&&(s="webkitvisibilitychange",r="webkitVisibilityState"),i.document.addEventListener(s,t),i.addEventListener("resize",function(){var t=Me.window.orientation;null!=t&&t!=e._previousOrientation&&n._isInputting()&&(xr.inputElement.target.focus=!1),e._previousOrientation=t,n._isInputting()||(Me.onSafari&&(n._safariOffsetY=(Me.window.__innerHeight||Me.document.body.clientHeight||Me.document.documentElement.clientHeight)-Me.window.innerHeight),n._resetCanvas())}),i.addEventListener("orientationchange",function(){n._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),Me.onMobile&&this.on("mousedown",this,this._onmouseMove)}r(a,"laya.display.Stage",e);var h=a.prototype;return h._isInputting=function(){return Me.onMobile&&xr.isInputting},h._changeCanvasSize=function(){this.setScreenSize(Me.clientWidth*Me.pixelRatio,Me.clientHeight*Me.pixelRatio)},h._resetCanvas=function(){this.screenAdaptationEnabled&&this._changeCanvasSize()},h.setScreenSize=function(t,e){var i=!1;if("none"!==this._screenMode){var n=1>t/e?"vertical":"horizontal";if(i=n!==this._screenMode){var r=e;e=t,t=r}}this.canvasRotation=i;var s=wi._mainCanvas,a=s.source.style,o=this._canvasTransform.identity(),h=this._scaleMode,_=t/this.designWidth,l=e/this.designHeight,u=this.designWidth,c=this.designHeight,d=t,f=e,p=Me.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,h){case"noscale":_=l=1,d=this.designWidth,f=this.designHeight;break;case"showall":_=l=Math.min(_,l),u=d=Math.round(this.designWidth*_),c=f=Math.round(this.designHeight*l);break;case"noborder":_=l=Math.max(_,l),d=Math.round(this.designWidth*_),f=Math.round(this.designHeight*l);break;case"full":_=l=1,this._width=u=t,this._height=c=e;break;case"fixedwidth":l=_,this._height=c=Math.round(e/_);break;case"fixedheight":_=l,this._width=u=Math.round(t/l);break;case"fixedauto":t/e<this.designWidth/this.designHeight?(l=_,this._height=c=Math.round(e/_)):(_=l,this._width=u=Math.round(t/l))}_*=this.scaleX,l*=this.scaleY,1===_&&1===l?this.transform.identity():(this.transform.a=this._formatData(_/(d/u)),this.transform.d=this._formatData(l/(f/c))),wi.isConchApp&&(this._conchData._float32Data[10]=this._formatData(_/(d/u)),this._conchData._float32Data[11]=this._formatData(l/(f/c)),this._conchData._float32Data[15]=1),s.size(u,c),Yi.changeWebGLSize(u,c),o.scale(d/u/p,f/c/p),this.offset.x="left"===this._alignH?0:"right"===this._alignH?t-d:.5*(t-d)/p,this.offset.y="top"===this._alignV?0:"bottom"===this._alignV?e-f:.5*(e-f)/p,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),o.translate(this.offset.x,this.offset.y),this._safariOffsetY&&o.translate(0,this._safariOffsetY),this.canvasDegree=0,i&&("horizontal"===this._screenMode?(o.rotate(Math.PI/2),o.translate(e/p,0),this.canvasDegree=90):(o.rotate(-Math.PI/2),o.translate(0,t/p),this.canvasDegree=-90)),o.a=this._formatData(o.a),o.d=this._formatData(o.d),o.tx=this._formatData(o.tx),o.ty=this._formatData(o.ty),a.transformOrigin=a.webkitTransformOrigin=a.msTransformOrigin=a.mozTransformOrigin=a.oTransformOrigin="0px 0px 0px",a.transform=a.webkitTransform=a.msTransform=a.mozTransform=a.oTransform="matrix("+o.toString()+")",this._safariOffsetY&&o.translate(0,-this._safariOffsetY),o.translate(parseInt(a.left)||0,parseInt(a.top)||0),this.visible=!0,this._repaint|=2,this.event("resize")},h._formatData=function(t){return Math.abs(t)<1e-6?0:Math.abs(1-t)<.001?t>0?1:-1:t},h.getMousePoint=function(){return Zi.TEMP.setTo(this.mouseX,this.mouseY)},h.repaint=function(t){void 0===t&&(t=2),this._repaint|=t},h.repaintForNative=function(t){void 0===t&&(t=2),this._conchData._int32Data[4]|=t},h.parentRepaint=function(t){void 0===t&&(t=2)},h._loop=function(){return this._globalRepaintGet=this._globalRepaintSet,this._globalRepaintSet=!1,this.render(wi._context,0,0),!0},h.getFrameTm=function(){return this._frameStartTime},h._onmouseMove=function(){this._mouseMoveTime=Me.now()},h.getTimeFromFrameStart=function(){return Me.now()-this._frameStartTime},h.render=function(t,i,n){if(a._dbgSprite.graphics.clear(),"sleep"===this._frameRate){var r=Me.now();if(!(r-this._frameStartTime>=1e3))return;this._frameStartTime=r}else{if(!this._visible)return this._renderCount++,this._renderCount%5===0&&(yi.I._update(),Li.loopCount++,this._updateTimers()),void 0;this._frameStartTime=Me.now()}this._renderCount++;var s="mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate,o="slow"!==s,h=this._renderCount%2===0;if(Li.renderSlow=!o,(o||h)&&(yi.I._update(),Li.loopCount++,!wi.isConchApp&&wi.isWebGL&&this.renderingEnabled)){for(var _=0,l=this._scene3Ds.length;l>_;_++)this._scene3Ds[_]._update();t.clear(),e.prototype.render.call(this,t,i,n),Li._show&&Li._sp&&Li._sp.render(t,i,n)}a._dbgSprite.render(t,0,0),(o||!h)&&(this.renderingEnabled&&(wi.isWebGL?(Yi.clear(this._bgColor),t.flush(),mi.instance&&mi.getInstance().endDispose()):(Yi.clear(this._bgColor),e.prototype.render.call(this,t,i,n),Li._show&&Li._sp&&Li._sp.render(t,i,n),wi.isConchApp&&t.gl.commit())),this._updateTimers())},h._updateTimers=function(){i.systemTimer._update(),i.startTimer._update(),i.physicsTimer._update(),i.updateTimer._update(),i.lateTimer._update(),i.timer._update()},h.renderToNative=function(t,n,r){return this._renderCount++,Li.loopCount++,this._visible?(yi.I._update(),i.systemTimer._update(),i.startTimer._update(),i.physicsTimer._update(),i.updateTimer._update(),i.lateTimer._update(),i.timer._update(),this.renderingEnabled&&(Yi.clear(this._bgColor),e.prototype.render.call(this,t,n,r),Li._show&&Li._sp&&Li._sp.render(t,n,r),t.gl.commit()),void 0):(this._renderCount%5===0&&(yi.I._update(),Li.loopCount++,i.systemTimer._update(),i.startTimer._update(),i.physicsTimer._update(),i.updateTimer._update(),i.lateTimer._update(),i.timer._update()),void 0)},h._requestFullscreen=function(){var t=Me.document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},h._fullScreenChanged=function(){i.stage.event("fullscreenchange")},h.exitFullscreen=function(){var t=Me.document;t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()},h.isGlobalRepaint=function(){return this._globalRepaintGet},h.setGlobalRepaint=function(){this._globalRepaintSet=!0},s(0,h,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),s(0,h,"width",e.prototype._$get_width,function(t){this.designWidth=t,i.superSet(On,this,"width",t),i.systemTimer.callLater(this,this._changeCanvasSize)}),s(0,h,"isFocused",function(){return this._isFocused}),s(0,h,"alignH",function(){return this._alignH},function(t){this._alignH=t,i.systemTimer.callLater(this,this._changeCanvasSize)}),s(0,h,"height",e.prototype._$get_height,function(t){this.designHeight=t,i.superSet(On,this,"height",t),i.systemTimer.callLater(this,this._changeCanvasSize)}),s(0,h,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||this._createTransform()},e.prototype._$set_transform),s(0,h,"isVisibility",function(){return this._isVisibility}),s(0,h,"scaleMode",function(){return this._scaleMode
},function(t){this._scaleMode=t,i.systemTimer.callLater(this,this._changeCanvasSize)}),s(0,h,"alignV",function(){return this._alignV},function(t){this._alignV=t,i.systemTimer.callLater(this,this._changeCanvasSize)}),s(0,h,"bgColor",function(){return this._bgColor},function(t){this._bgColor=t,wi.isWebGL&&(this._wgColor=t?o.create(t).arrColor:null),Me.onLimixiu?this._wgColor=o.create(t).arrColor:wi.canvas.style.background=t?t:"none",wi.isConchApp&&(this._renderType|=128,this._setBgStyleColor(0,0,this.width,this.height,t),this._setRenderType(this._renderType))}),s(0,h,"mouseX",function(){return Math.round(oe.instance.mouseX/this.clientScaleX)}),s(0,h,"mouseY",function(){return Math.round(oe.instance.mouseY/this.clientScaleY)}),s(0,h,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),s(0,h,"screenMode",function(){return this._screenMode},function(t){this._screenMode=t}),s(0,h,"visible",e.prototype._$get_visible,function(t){if(this.visible!==t){i.superSet(On,this,"visible",t);var e=wi._mainCanvas.source.style;e.visibility=t?"visible":"hidden"}}),s(0,h,"fullScreenEnabled",null,function(t){var e=Me.document,i=wi.canvas;t?(i.addEventListener("mousedown",this._requestFullscreen),i.addEventListener("touchstart",this._requestFullscreen),e.addEventListener("fullscreenchange",this._fullScreenChanged),e.addEventListener("mozfullscreenchange",this._fullScreenChanged),e.addEventListener("webkitfullscreenchange",this._fullScreenChanged),e.addEventListener("msfullscreenchange",this._fullScreenChanged)):(i.removeEventListener("mousedown",this._requestFullscreen),i.removeEventListener("touchstart",this._requestFullscreen),e.removeEventListener("fullscreenchange",this._fullScreenChanged),e.removeEventListener("mozfullscreenchange",this._fullScreenChanged),e.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),e.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),s(0,h,"frameRate",function(){return wi.isConchApp?this._frameRateNative:this._frameRate},function(e){if(wi.isConchApp){switch(e){case"fast":t.conch.config.setLimitFPS(60);break;case"mouse":t.conch.config.setMouseFrame(2e3);break;case"slow":t.conch.config.setSlowFrame(!0);break;case"sleep":t.conch.config.setLimitFPS(1)}this._frameRateNative=e}else this._frameRate=e}),a.SCALE_NOSCALE="noscale",a.SCALE_EXACTFIT="exactfit",a.SCALE_SHOWALL="showall",a.SCALE_NOBORDER="noborder",a.SCALE_FULL="full",a.SCALE_FIXED_WIDTH="fixedwidth",a.SCALE_FIXED_HEIGHT="fixedheight",a.SCALE_FIXED_AUTO="fixedauto",a.ALIGN_LEFT="left",a.ALIGN_RIGHT="right",a.ALIGN_CENTER="center",a.ALIGN_TOP="top",a.ALIGN_MIDDLE="middle",a.ALIGN_BOTTOM="bottom",a.SCREEN_NONE="none",a.SCREEN_HORIZONTAL="horizontal",a.SCREEN_VERTICAL="vertical",a.FRAME_FAST="fast",a.FRAME_SLOW="slow",a.FRAME_MOUSE="mouse",a.FRAME_SLEEP="sleep",n(a,["_dbgSprite",function(){return this._dbgSprite=new On}]),a}(On),mr=function(t){function e(){this.lockLayer=null,this.popupEffect=function(t){t.scale(1,1),ii.from(t,{x:i.stage.width/2,y:i.stage.height/2,scaleX:0,scaleY:0},300,Ne.backOut,l.create(this,this.doOpen,[t]))},this.closeEffect=function(t){ii.to(t,{x:i.stage.width/2,y:i.stage.height/2,scaleX:0,scaleY:0},300,Ne.strongOut,l.create(this,this.doClose,[t]))},e.__super.call(this),this.maskLayer=new On,this.popupEffectHandler=new l(this,this.popupEffect),this.closeEffectHandler=new l(this,this.closeEffect),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,i.stage.addChild(this),i.stage.on("resize",this,this._onResize),Fi.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}r(e,"laya.ui.DialogManager",t);var n=e.prototype;return n._closeOnSide=function(){var t=this.getChildAt(this.numChildren-1);t instanceof laya.ui.Dialog&&t.close()},n.setLockView=function(t){this.lockLayer||(this.lockLayer=new Tr,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(i.stage.width,i.stage.height)),this.lockLayer.removeChildren(),t&&(t.centerX=t.centerY=0,this.lockLayer.addChild(t))},n._onResize=function(){var t=this.maskLayer.width=i.stage.width,e=this.maskLayer.height=i.stage.height;this.lockLayer&&this.lockLayer.size(t,e),this.maskLayer.graphics.clear(!0),this.maskLayer.graphics.drawRect(0,0,t,e,Fi.popupBgColor),this.maskLayer.alpha=Fi.popupBgAlpha;for(var n=this.numChildren-1;n>-1;n--){var r=this.getChildAt(n);r.isPopupCenter&&this._centerDialog(r)}},n._centerDialog=function(t){t.x=Math.round((i.stage.width-t.width>>1)+t.pivotX),t.y=Math.round((i.stage.height-t.height>>1)+t.pivotY)},n.open=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1),e&&this._closeAll(),t.isPopupCenter&&this._centerDialog(t),this.addChild(t),(t.isModal||this._getBit(32))&&i.timer.callLater(this,this._checkMask),n&&null!=t.popupEffect?t.popupEffect.runWith(t):this.doOpen(t),this.event("open")},n.doOpen=function(t){t.onOpened(t._param)},n.lock=function(t){this.lockLayer&&(t?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},n.close=function(t){t.isShowEffect&&null!=t.closeEffect?t.closeEffect.runWith([t]):this.doClose(t),this.event("close")},n.doClose=function(t){t.removeSelf(),t.isModal&&this._checkMask(),t.closeHandler&&t.closeHandler.runWith(t.closeType),t.onClosed(t.closeType),t.autoDestroyAtClosed&&t.destroy()},n.closeAll=function(){this._closeAll(),this.event("close")},n._closeAll=function(){for(var t=this.numChildren-1;t>-1;t--){var e=this.getChildAt(t);e&&null!=e.close&&this.doClose(e)}},n.getDialogsByGroup=function(t){for(var e=[],i=this.numChildren-1;i>-1;i--){var n=this.getChildAt(i);n&&n.group===t&&e.push(n)}return e},n.closeByGroup=function(t){for(var e=[],i=this.numChildren-1;i>-1;i--){var n=this.getChildAt(i);n&&n.group===t&&(n.close(),e.push(n))}return e},n._checkMask=function(){this.maskLayer.removeSelf();for(var t=this.numChildren-1;t>-1;t--){var e=this.getChildAt(t);if(e&&e.isModal)return this.addChildAt(this.maskLayer,t),void 0}},e}(On),gr=function(t){function e(){this._maxsize=0,this._upload=!0,this._uploadSize=0,this._bufferSize=0,this._u8Array=null,e.__super.call(this),this.lock=!0}r(e,"laya.webgl.utils.Buffer2D",t);var i=e.prototype;return i.setByteLength=function(t){this._byteLength!==t&&(t<=this._bufferSize||this._resizeBuffer(2*t+256,!0),this._byteLength=t)},i.needSize=function(t){var e=this._byteLength;if(t){var i=this._byteLength+t;i<=this._bufferSize||this._resizeBuffer(i<<1,!0),this._byteLength=i}return e},i._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),Li.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this._setGPUMemory(this._buffer.byteLength),this._buffer=this._buffer.slice(0,this._maxsize+64),this._bufferSize=this._buffer.byteLength,this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,Le.instance.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this._setGPUMemory(this._uploadSize)),Le.instance.bufferSubData(this._bufferType,0,this._buffer)},i._bufferSubData=function(t,e,i){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this._maxsize=Math.max(this._maxsize,this._byteLength),Li.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this._setGPUMemory(this._buffer.byteLength),this._buffer=this._buffer.slice(0,this._maxsize+64),this._bufferSize=this._buffer.byteLength,this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,Le.instance.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this._setGPUMemory(this._uploadSize)),e||i){var n=this._buffer.slice(e,i);Le.instance.bufferSubData(this._bufferType,t,n)}else Le.instance.bufferSubData(this._bufferType,t,this._buffer)},i._checkArrayUse=function(){},i._bind_uploadForVAO=function(){return this._upload?(this._upload=!1,this._bindForVAO(),this._bufferData(),!0):!1},i._bind_upload=function(){return this._upload?(this._upload=!1,this.bind(),this._bufferData(),!0):!1},i._bind_subUpload=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this._upload?(this._upload=!1,this.bind(),this._bufferSubData(t,e,i),!0):!1},i._resizeBuffer=function(t,e){if(t<this._buffer.byteLength)return this;if(this._setGPUMemory(t),e&&this._buffer&&this._buffer.byteLength>0){var i=new ArrayBuffer(t),n=this._u8Array&&this._u8Array.buffer==this._buffer?this._u8Array:new Uint8Array(this._buffer);this._u8Array=new Uint8Array(i),this._u8Array.set(n,0),this._buffer=i}else this._buffer=new ArrayBuffer(t);return this._checkArrayUse(),this._upload=!0,this._bufferSize=this._buffer.byteLength,this},i.append=function(t){this._upload=!0;var e,i=0;i=t.byteLength,t instanceof Uint8Array?(this._resizeBuffer(this._byteLength+i,!0),e=new Uint8Array(this._buffer,this._byteLength)):t instanceof Uint16Array?(this._resizeBuffer(this._byteLength+i,!0),e=new Uint16Array(this._buffer,this._byteLength)):t instanceof Float32Array&&(this._resizeBuffer(this._byteLength+i,!0),e=new Float32Array(this._buffer,this._byteLength)),e.set(t,0),this._byteLength+=i,this._checkArrayUse()},i.appendU16Array=function(t,e){this._resizeBuffer(this._byteLength+2*e,!0);for(var i=new Uint16Array(this._buffer,this._byteLength,e),n=0;e>n;n++)i[n]=t[n];this._byteLength+=2*e,this._checkArrayUse()},i.appendEx=function(t,e){this._upload=!0;var i,n=0;n=t.byteLength,this._resizeBuffer(this._byteLength+n,!0),i=new e(this._buffer,this._byteLength),i.set(t,0),this._byteLength+=n,this._checkArrayUse()},i.appendEx2=function(t,e,i,n){void 0===n&&(n=1),this._upload=!0;var r,s=0;s=i*n,this._resizeBuffer(this._byteLength+s,!0),r=new e(this._buffer,this._byteLength);var a=0;for(a=0;i>a;a++)r[a]=t[a];this._byteLength+=s,this._checkArrayUse()},i.getBuffer=function(){return this._buffer},i.setNeedUpload=function(){this._upload=!0},i.getNeedUpload=function(){return this._upload},i.upload=function(){var t=this._bind_upload();return Le.instance.bindBuffer(this._bufferType,null),34962==this._bufferType&&(rr._bindedVertexBuffer=null),34963==this._bufferType&&(rr._bindedIndexBuffer=null),nr.activeShader=null,t},i.subUpload=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0);var n=this._bind_subUpload();return Le.instance.bindBuffer(this._bufferType,null),34962==this._bufferType&&(rr._bindedVertexBuffer=null),34963==this._bufferType&&(rr._bindedIndexBuffer=null),nr.activeShader=null,n},i._disposeResource=function(){t.prototype._disposeResource.call(this),this._upload=!0,this._uploadSize=0},i.clear=function(){this._byteLength=0,this._upload=!0},s(0,i,"bufferLength",function(){return this._buffer.byteLength}),s(0,i,"byteLength",null,function(t){this.setByteLength(t)}),e.__int__=function(){},e.FLOAT32=4,e.SHORT=2,e}(rr),vr=function(t){function e(t,i,n,r,s){if(this._attribInfo=null,this.customCompile=!1,this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},e.__super.call(this),!t||!i)throw"Shader Error";this._attribInfo=s,wi.isConchApp&&(this.customCompile=!0),this._id=++e._count,this._vs=t,this._ps=i,this._nameMap=r?r:{},null!=n&&(e.sharders[n]=this),this.recreateResource(),this.lock=!0}r(e,"laya.webgl.shader.Shader",t);var i=e.prototype;return i.recreateResource=function(){this._compile(),this._setGPUMemory(0)},i._disposeResource=function(){Ii.mainContext.deleteShader(this._vshader),Ii.mainContext.deleteShader(this._pshader),Ii.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this._setGPUMemory(0),this._curActTexIndex=0},i._compile=function(){if(this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var t;this.customCompile&&(t=_e.preGetParams(this._vs,this._ps));var i=Ii.mainContext;this._program=i.createProgram(),this._vshader=e._createShader(i,this._vs,35633),this._pshader=e._createShader(i,this._ps,35632),i.attachShader(this._program,this._vshader),i.attachShader(this._program,this._pshader);var n,r,s=0,a=0,o=this._attribInfo?this._attribInfo.length:0;for(s=0;o>s;s+=2)i.bindAttribLocation(this._program,this._attribInfo[s+1],this._attribInfo[s]);if(i.linkProgram(this._program),!this.customCompile&&!i.getProgramParameter(this._program,35714))throw i.getProgramInfoLog(this._program);var h=this.customCompile?t.uniforms.length:i.getProgramParameter(this._program,35718);for(s=0;h>s;s++){var _=this.customCompile?t.uniforms[s]:i.getActiveUniform(this._program,s);r=i.getUniformLocation(this._program,_.name),n={vartype:"uniform",glfun:null,ivartype:1,location:r,name:_.name,type:_.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},n.name.indexOf("[0]")>0&&(n.name=n.name.substr(0,n.name.length-3),n.isArray=!0,n.location=i.getUniformLocation(this._program,n.name)),this._params.push(n)}for(s=0,a=this._params.length;a>s;s++)switch(n=this._params[s],n.indexOfParams=s,n.index=1,n.value=[n.location,null],n.codename=n.name,n.name=this._nameMap[n.codename]?this._nameMap[n.codename]:n.codename,this._paramsMap[n.name]=n,n._this=this,n.uploadedValue=[],n.type){case 5124:n.fun=n.isArray?this._uniform1iv:this._uniform1i;break;case 5126:n.fun=n.isArray?this._uniform1fv:this._uniform1f;break;case 35664:n.fun=n.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:n.fun=n.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:n.fun=n.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:n.fun=this._uniform_sampler2D;break;case 35680:n.fun=this._uniform_samplerCube;break;case 35676:n.glfun=i.uniformMatrix4fv,n.fun=this._uniformMatrix4fv;break;case 35670:n.fun=this._uniform1i;break;case 35674:case 35675:throw new Error("compile shader err!");default:throw new Error("compile shader err!")}}},i.getUniform=function(t){return this._paramsMap[t]},i._uniform1f=function(t,e){var i=t.uploadedValue;return i[0]!==e?(Ii.mainContext.uniform1f(t.location,i[0]=e),1):0},i._uniform1fv=function(t,e){if(e.length<4){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(Ii.mainContext.uniform1fv(t.location,e),i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],1):0}return Ii.mainContext.uniform1fv(t.location,e),1},i._uniform_vec2=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]?(Ii.mainContext.uniform2f(t.location,i[0]=e[0],i[1]=e[1]),1):0},i._uniform_vec2v=function(t,e){if(e.length<2){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(Ii.mainContext.uniform2fv(t.location,e),i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],1):0}return Ii.mainContext.uniform2fv(t.location,e),1},i._uniform_vec3=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]?(Ii.mainContext.uniform3f(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2]),1):0},i._uniform_vec3v=function(t,e){return Ii.mainContext.uniform3fv(t.location,e),1},i._uniform_vec4=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(Ii.mainContext.uniform4f(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3]),1):0},i._uniform_vec4v=function(t,e){return Ii.mainContext.uniform4fv(t.location,e),1},i._uniformMatrix2fv=function(t,e){return Ii.mainContext.uniformMatrix2fv(t.location,!1,e),1},i._uniformMatrix3fv=function(t,e){return Ii.mainContext.uniformMatrix3fv(t.location,!1,e),1},i._uniformMatrix4fv=function(t,e){return Ii.mainContext.uniformMatrix4fv(t.location,!1,e),1},i._uniform1i=function(t,e){var i=t.uploadedValue;return i[0]!==e?(Ii.mainContext.uniform1i(t.location,i[0]=e),1):0},i._uniform1iv=function(t,e){return Ii.mainContext.uniform1iv(t.location,e),1},i._uniform_ivec2=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]?(Ii.mainContext.uniform2i(t.location,i[0]=e[0],i[1]=e[1]),1):0},i._uniform_ivec2v=function(t,e){return Ii.mainContext.uniform2iv(t.location,e),1},i._uniform_vec3i=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]?(Ii.mainContext.uniform3i(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2]),1):0},i._uniform_vec3vi=function(t,e){return Ii.mainContext.uniform3iv(t.location,e),1},i._uniform_vec4i=function(t,e){var i=t.uploadedValue;return i[0]!==e[0]||i[1]!==e[1]||i[2]!==e[2]||i[3]!==e[3]?(Ii.mainContext.uniform4i(t.location,i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3]),1):0},i._uniform_vec4vi=function(t,e){return Ii.mainContext.uniform4iv(t.location,e),1},i._uniform_sampler2D=function(t,e){var i=Ii.mainContext,n=t.uploadedValue;return null==n[0]?(n[0]=this._curActTexIndex,i.uniform1i(t.location,this._curActTexIndex),me.activeTexture(i,33984+this._curActTexIndex),me.bindTexture(i,3553,e),this._curActTexIndex++,1):(me.activeTexture(i,33984+n[0]),me.bindTexture(i,3553,e),0)},i._uniform_samplerCube=function(t,e){var i=Ii.mainContext,n=t.uploadedValue;return null==n[0]?(n[0]=this._curActTexIndex,i.uniform1i(t.location,this._curActTexIndex),me.activeTexture(i,33984+this._curActTexIndex),me.bindTexture(i,34067,e),this._curActTexIndex++,1):(me.activeTexture(i,33984+n[0]),me.bindTexture(i,34067,e),0)},i._noSetValue=function(t){console.log("no....:"+t.name)},i.uploadOne=function(t,e){me.useProgram(Ii.mainContext,this._program);var i=this._paramsMap[t];i.fun.call(this,i,e)},i.uploadTexture2D=function(t){var e=me;e._activeTextures[0]!==t&&(e.bindTexture(Ii.mainContext,e.TEXTURE_2D,t),e._activeTextures[0]=t)},i.upload=function(t,e){nr.activeShader=nr.bindShader=this;var i=Ii.mainContext;me.useProgram(i,this._program),this._reCompile?(e=this._params,this._reCompile=!1):e=e||this._params;for(var n,r,s=e.length,a=0,o=0;s>o;o++)n=e[o],null!==(r=t[n.name])&&(a+=n.fun.call(this,n,r));Li.shaderCall+=a},i.uploadArray=function(t,e,i){nr.activeShader=this,nr.bindShader=this,me.useProgram(Ii.mainContext,this._program);for(var n,r,s=(this._params,0),a=e-2;a>=0;a-=2)r=this._paramsMap[t[a]],r&&(n=t[a+1],null!=n&&(i&&i[r.name]&&i[r.name].bind(),s+=r.fun.call(this,r,n)));Li.shaderCall+=s},i.getParams=function(){return this._params},i.setAttributesLocation=function(t){this._attribInfo=t},e.getShader=function(t){return e.sharders[t]},e.create=function(t,i,n,r,s){return new e(t,i,n,r,s)},e.withCompile=function(t,i,n,r){if(n&&e.sharders[n])return e.sharders[n];var s=e._preCompileShader[2e-4*t];if(!s)throw new Error("withCompile shader err!"+t);return s.createShader(i,n,r,null)},e.withCompile2D=function(t,i,n,r,s,a){if(r&&e.sharders[r])return e.sharders[r];var o=e._preCompileShader[2e-4*t+i];if(!o)throw new Error("withCompile shader err!"+t+" "+i);return o.createShader(n,r,s,a)},e.addInclude=function(t,e){_e.addInclude(t,e)},e.preCompile=function(t,i,n,r){var s=2e-4*t;e._preCompileShader[s]=new _e(i,n,r)},e.preCompile2D=function(t,i,n,r,s){var a=2e-4*t+i;e._preCompileShader[a]=new _e(n,r,s)},e._createShader=function(t,e,i){var n=t.createShader(i);return t.shaderSource(n,e),t.compileShader(n),t.getShaderParameter(n,35713)?n:(console.log(t.getShaderInfoLog(n)),null)},e._count=0,e._preCompileShader={},e.SHADERNAME2ID=2e-4,e.sharders=new Array(32),n(e,["nameKey",function(){return this.nameKey=new _i}]),e}(nr),yr=function(t){function e(t){e.__super.call(this),void 0===t&&(t=!1),this._source=t||!wi.isWebGL?Me.createElement("canvas"):this,this.lock=!0}r(e,"laya.resource.HTMLCanvas",t);var i=e.prototype;return i._getSource=function(){return this._source},i.clear=function(){this._ctx&&this._ctx.clear(),this._texture&&(this._texture.destroy(),this._texture=null)},i.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null},i.release=function(){},i._setContext=function(t){this._ctx=t},i.getContext=function(){return this.context},i.getMemSize=function(){return 0},i.size=function(t,e){(this._width!=t||this._height!=e||this._source&&(this._source.width!=t||this._source.height!=e))&&(this._width=t,this._height=e,this._setGPUMemory(t*e*4),this._ctx&&this._ctx.size&&this._ctx.size(t,e),this._source&&(this._source.height=e,this._source.width=t),this._texture&&(this._texture.destroy(),this._texture=null))},i.getTexture=function(){return this._texture||(this._texture=new on(this,on.DEF_UV)),this._texture},i.toBase64=function(t,e,i){if(this._source)if(wi.isConchApp&&this._source.toBase64)this._source.toBase64(t,e,i);else{var n=this._source.toDataURL(t,e);i(n)}},s(0,i,"source",function(){return this._source}),s(0,i,"context",function(){return this._ctx?this._ctx:(this._ctx=wi.isWebGL&&this._source==this?new laya.webgl.canvas.WebGLContext2D:this._source.getContext(wi.isConchApp?"layagl":"2d"),this._ctx._canvas=this,this._ctx)}),e}(ar),Er=function(t){function e(){e.__super.call(this)}r(e,"laya.resource.HTMLImage",t);var i=e.prototype;return i.loadImageSource=function(t){var e=t.width,i=t.height;if(0>=e||0>=i)throw new Error("HTMLImage:width or height must large than 0.");this._width=e,this._height=i,this._source=t,this._setGPUMemory(e*i*4),this._activeResource()},i._disposeResource=function(){this._source&&(this._source=null,this._setGPUMemory(0))},i._getSource=function(){return this._source},e.create=function(){return new e},e}(ar),Ar=function(t){function e(t,i){e.__super.call(this),this._wrapModeU=0,this._wrapModeV=0,this._filterMode=1,this._readyed=!1,this._width=-1,this._height=-1,this._format=t,this._mipmap=i,this._anisoLevel=1,this._glTexture=Le.instance.createTexture()}r(e,"laya.webgl.resource.BaseTexture",t);var i=e.prototype;return i._isPot=function(t){return 0===(t&t-1)},i._getGLFormat=function(){var t=0;switch(this._format){case 0:t=6407;break;case 1:t=6408;break;case 2:t=6406;break;case 3:if(!me._compressedTextureS3tc)throw"BaseTexture: not support DXT1 format.";t=me._compressedTextureS3tc.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case 4:if(!me._compressedTextureS3tc)throw"BaseTexture: not support DXT5 format.";t=me._compressedTextureS3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;case 5:if(!me._compressedTextureEtc1)throw"BaseTexture: not support ETC1RGB format.";t=me._compressedTextureEtc1.COMPRESSED_RGB_ETC1_WEBGL;break;case 9:if(!me._compressedTexturePvrtc)throw"BaseTexture: not support PVRTCRGB_2BPPV format.";t=me._compressedTexturePvrtc.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;break;case 10:if(!me._compressedTexturePvrtc)throw"BaseTexture: not support PVRTCRGBA_2BPPV format.";t=me._compressedTexturePvrtc.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;break;case 11:if(!me._compressedTexturePvrtc)throw"BaseTexture: not support PVRTCRGB_4BPPV format.";t=me._compressedTexturePvrtc.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;break;case 12:if(!me._compressedTexturePvrtc)throw"BaseTexture: not support PVRTCRGBA_4BPPV format.";t=me._compressedTexturePvrtc.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;break;default:throw"BaseTexture: unknown texture format."}return t},i._setFilterMode=function(t){var e=Le.instance;switch(me.bindTexture(e,this._glTextureType,this._glTexture),t){case 0:this._mipmap&&this._isPot(this._width)&&this._isPot(this._height)?e.texParameteri(this._glTextureType,10241,9984):e.texParameteri(this._glTextureType,10241,9728),e.texParameteri(this._glTextureType,10240,9728);break;case 1:this._mipmap&&this._isPot(this._width)&&this._isPot(this._height)?e.texParameteri(this._glTextureType,10241,9985):e.texParameteri(this._glTextureType,10241,9729),e.texParameteri(this._glTextureType,10240,9729);break;case 2:this._mipmap&&this._isPot(this._width)&&this._isPot(this._height)?e.texParameteri(this._glTextureType,10241,9987):e.texParameteri(this._glTextureType,10241,9729),e.texParameteri(this._glTextureType,10240,9729);break;default:throw new Error("BaseTexture:unknown filterMode value.")}},i._setWarpMode=function(t,e){var i=Le.instance;if(me.bindTexture(i,this._glTextureType,this._glTexture),this._isPot(this._width)&&this._isPot(this._height))switch(e){case 0:i.texParameteri(this._glTextureType,t,10497);break;case 1:i.texParameteri(this._glTextureType,t,33071)}else i.texParameteri(this._glTextureType,t,33071)},i._setAnisotropy=function(t){var e=me._extTextureFilterAnisotropic;if(e){t=Math.max(t,1);var i=Le.instance;me.bindTexture(i,this._glTextureType,this._glTexture),t=Math.min(i.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT),t),i.texParameterf(this._glTextureType,e.TEXTURE_MAX_ANISOTROPY_EXT,t)}},i._disposeResource=function(){this._glTexture&&(Le.instance.deleteTexture(this._glTexture),this._glTexture=null,this._setGPUMemory(0))},i._getSource=function(){return this._readyed?this._glTexture:null},s(0,i,"wrapModeU",function(){return this._wrapModeU},function(t){this._wrapModeU!==t&&(this._wrapModeU=t,-1!==this._width&&this._setWarpMode(10242,t))}),s(0,i,"mipmap",function(){return this._mipmap}),s(0,i,"format",function(){return this._format}),s(0,i,"wrapModeV",function(){return this._wrapModeV},function(t){this._wrapModeV!==t&&(this._wrapModeV=t,-1!==this._height&&this._setWarpMode(10243,t))}),s(0,i,"defaulteTexture",function(){throw"BaseTexture:must override it."}),s(0,i,"filterMode",function(){return this._filterMode},function(t){t!==this._filterMode&&(this._filterMode=t,-1!==this._width&&-1!==this._height&&this._setFilterMode(t))}),s(0,i,"anisoLevel",function(){return this._anisoLevel},function(t){t!==this._anisoLevel&&(this._anisoLevel=Math.max(1,Math.min(16,t)),-1!==this._width&&-1!==this._height&&this._setAnisotropy(t))}),e.WARPMODE_REPEAT=0,e.WARPMODE_CLAMP=1,e.FILTERMODE_POINT=0,e.FILTERMODE_BILINEAR=1,e.FILTERMODE_TRILINEAR=2,e.FORMAT_R8G8B8=0,e.FORMAT_R8G8B8A8=1,e.FORMAT_ALPHA8=2,e.FORMAT_DXT1=3,e.FORMAT_DXT5=4,e.FORMAT_ETC1RGB=5,e.FORMAT_PVRTCRGB_2BPPV=9,e.FORMAT_PVRTCRGBA_2BPPV=10,e.FORMAT_PVRTCRGB_4BPPV=11,e.FORMAT_PVRTCRGBA_4BPPV=12,e.FORMAT_DEPTH_16=0,e.FORMAT_STENCIL_8=1,e.FORMAT_DEPTHSTENCIL_16_8=2,e.FORMAT_DEPTHSTENCIL_NONE=3,e}(ar),Cr=function(t){function e(){this._watchMap={},this._widget=null,this._dataSource=null,this._anchorX=0/0,this._anchorY=0/0,this._widget=yn.EMPTY,e.__super.call(this)}r(e,"laya.ui.View",t);var n=e.prototype;return n.destroy=function(e){void 0===e&&(e=!0),this._watchMap=null,t.prototype.destroy.call(this,e)},n.changeData=function(t){var e=this._watchMap[t];if(e)for(var i=0,n=e.length;n>i;i++){var r=e[i];r.exe(this)}},n._sizeChanged=function(){isNaN(this._anchorX)||(this.pivotX=this.anchorX*this.width),isNaN(this._anchorY)||(this.pivotY=this.anchorY*this.height),this.event("resize")},n._getWidget=function(){return this._widget===yn.EMPTY&&(this._widget=this.addComponent(yn)),this._widget},n.loadUI=function(t){var i=e.uiMap[t];e.uiMap&&this.createView(i)},s(0,n,"anchorX",function(){return this._anchorX},function(t){this._anchorX!=t&&(this._anchorX=t,this.callLater(this._sizeChanged))}),s(0,n,"centerX",function(){return this._widget.centerX},function(t){t!=this._widget.centerX&&(this._getWidget().centerX=t)}),s(0,n,"top",function(){return this._widget.top},function(t){t!=this._widget.top&&(this._getWidget().top=t)}),s(0,n,"bottom",function(){return this._widget.bottom},function(t){t!=this._widget.bottom&&(this._getWidget().bottom=t)}),s(0,n,"dataSource",function(){return this._dataSource},function(t){this._dataSource=t;for(var e in t){var i=this.getChildByName(e);i instanceof laya.ui.UIComponent?i.dataSource=t[e]:this.hasOwnProperty(e)&&"function"!=typeof this[e]&&(this[e]=t[e])}}),s(0,n,"left",function(){return this._widget.left},function(t){t!=this._widget.left&&(this._getWidget().left=t)}),s(0,n,"right",function(){return this._widget.right},function(t){t!=this._widget.right&&(this._getWidget().right=t)}),s(0,n,"anchorY",function(){return this._anchorY},function(t){this._anchorY!=t&&(this._anchorY=t,this.callLater(this._sizeChanged))}),s(0,n,"centerY",function(){return this._widget.centerY},function(t){t!=this._widget.centerY&&(this._getWidget().centerY=t)}),e.regComponent=function(t,e){Te.regClass(t,e)},e.regViewRuntime=function(t,e){Te.regClass(t,e)},e.regUI=function(t,e){i.loader.cacheRes(t,e)},e.uiMap={},e.__init$=function(){Te.regShortClassName([Ts,br,Zs,Br,Tr,bs,br,Ds,Mr,Ir,lr,Rs,Fs,Or,Lr,As,Is,Fr,Ms,qs,Pr,Nr,$s,Ps,e,Ss,Os,Ns,ws,Ks,js,On,kr,ur,Ls])},e}(_r),Sr=function(t){function e(){this.bgimg=null,this.numindex=null,this.fileimg=null,this.filename=null,this.viprice=null,this.price=null,this.inputnum=null,this.total=null,this.operatebox=null,this.addmsg=null,this.deleteorder=null,this.editbox=null,this.editwidth=null,this.editheight=null,this.architype=null,this.changearchitxt=null,this.matbox=null,this.mattxt=null,this.changemat=null,e.__super.call(this)}r(e,"ui.order.OrderItemUI",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"Scene",props:{width:1280},compId:2,child:[{type:"Image",props:{y:0,x:0,width:1281,"var":"bgimg",skin:"commers/sel.png",sizeGrid:"5,5,5,5",height:60},compId:26},{type:"Label",props:{y:21,x:10,width:30,"var":"numindex",text:"1",height:21,fontSize:20,align:"center"},compId:3},{type:"Image",props:{y:0,x:54,width:85,"var":"fileimg",skin:"comp/image.png",height:60},compId:4},{type:"Label",props:{y:15,x:151,wordWrap:!0,width:182,"var":"filename",text:"PP纸无背胶（海报、展架）.tif",height:38,fontSize:18,align:"center"},compId:5},{type:"Label",props:{y:26,x:911,width:58,"var":"viprice",text:"76.8",height:21,fontSize:18,align:"center"},compId:14},{type:"Label",props:{y:26,x:1047,width:58,"var":"price",text:"76.8",height:21,fontSize:18,align:"center"},compId:15},{type:"TextInput",props:{y:26,x:993,width:46,"var":"inputnum",text:"200",skin:"comp/textinput.png",height:22,fontSize:18,sizeGrid:"6,15,7,14"},compId:16},{type:"Label",props:{y:26,x:1110,width:77,"var":"total",text:"7776.8",height:21,fontSize:18,align:"center"},compId:17},{type:"Box",props:{y:10,x:1203,"var":"operatebox"},compId:21,child:[{type:"Text",props:{"var":"addmsg",text:"添加备注",fontSize:18,color:"#094f28",runtime:"laya.display.Text"},compId:18},{type:"Text",props:{y:26,"var":"deleteorder",text:"删除订单",fontSize:18,color:"#094f28",runtime:"laya.display.Text"},compId:19}]},{type:"Box",props:{y:10,x:577,"var":"editbox"},compId:22,child:[{type:"Label",props:{y:1,width:58,text:"宽(cm)",height:21,fontSize:18,align:"center"},compId:8},{type:"Label",props:{y:25,width:58,text:"高(cm)",height:21,fontSize:18,align:"center"},compId:9},{type:"TextInput",props:{x:58,width:74,"var":"editwidth",text:"20",skin:"comp/textinput.png",height:22,fontSize:18,sizeGrid:"6,15,7,14"},compId:10},{type:"TextInput",props:{y:26,x:58,width:74,"var":"editheight",text:"20",skin:"comp/textinput.png",height:22,fontSize:18,sizeGrid:"6,15,7,14"},compId:11}]},{type:"VBox",props:{y:10,x:726,space:0},compId:24,child:[{type:"Label",props:{y:5,x:0,width:176,"var":"architype",valign:"top",text:"户外材料--白胶车贴",height:30,fontSize:18,align:"center"},compId:12},{type:"Text",props:{y:31,x:52,"var":"changearchitxt",text:"更换材料",presetID:1,fontSize:18,color:"#094f28",isPresetRoot:!0,runtime:"laya.display.Text"},compId:29,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:30}]}]},{type:"Sprite",props:{y:12,x:360,"var":"matbox"},compId:25,child:[{type:"Label",props:{width:187,"var":"mattxt",text:"户外材料--白胶车贴",height:21,fontSize:18,align:"center"},compId:6},{type:"Text",props:{y:25,x:60,"var":"changemat",text:"更换材料",presetID:1,fontSize:18,color:"#094f28",isPresetRoot:!0,runtime:"laya.display.Text"},compId:27,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:28}]}]}],loadList:["commers/sel.png","comp/image.png","comp/textinput.png","prefabs/LinksText.prefab"],loadList3D:[]},e}(_r),Dr=function(t){function e(){this.panel_main=null,this.txt_login=null,this.txt_reg=null,this.btnUserCenter=null,this.btnBuyCar=null,this.btnUpload=null,e.__super.call(this)}r(e,"ui.LoginViewUI",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.loadScene("LoginView")},e}(_r),Rr=function(t){function e(){this.pname=null,this.psize=null,this.inputnum=null,this.pricetxt=null,this.totaltxt=null,this.btndelete=null,e.__super.call(this)}r(e,"ui.order.PartsItemUI",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"Scene",props:{width:1280},compId:2,child:[{type:"Label",props:{y:0,x:0,width:277,"var":"pname",text:"X展架",height:20,fontSize:20,align:"center"},compId:3},{type:"Label",props:{y:0,x:290,width:208,"var":"psize",text:"150*180",height:20,fontSize:20,align:"center"},compId:4},{type:"TextInput",props:{y:0,x:579,width:50,"var":"inputnum",text:"1",skin:"comp/textinput.png",fontSize:20,sizeGrid:"6,15,7,14"},compId:5},{type:"Label",props:{y:2,x:692,width:208,"var":"pricetxt",text:"89.6",height:20,fontSize:20,align:"center"},compId:6},{type:"Label",props:{y:2,x:935,width:208,"var":"totaltxt",text:"458.2",height:20,fontSize:20,align:"center"},compId:7},{type:"Text",props:{y:0,x:1211,width:40,"var":"btndelete",text:"删除",height:20,fontSize:20,color:"#198972",runtime:"laya.display.Text"},compId:8}],loadList:["comp/textinput.png"],loadList3D:[]},e
}(_r),Tr=function(t){function e(){e.__super.call(this)}r(e,"laya.ui.Box",t);var n=e.prototype;return i.imps(n,{"laya.ui.IBox":!0}),s(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t;for(var e in t){var i=this.getChildByName(e);i?i.dataSource=t[e]:this.hasOwnProperty(e)&&"function"!=typeof this[e]&&(this[e]=t[e])}}),e}(lr),xr=function(t){function e(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",e.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow="scroll",this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}r(e,"laya.display.Input",t);var a=e.prototype;return a.setSelection=function(t,e){this.focus=!0,laya.display.Input.inputElement.selectionStart=t,laya.display.Input.inputElement.selectionEnd=e},a._onUnDisplay=function(){this.focus=!1},a._onMouseDown=function(){this.focus=!0},a._syncInputTransform=function(){var t=this.nativeInput,n=Q.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),r=this._width-this.padding[1]-this.padding[3],s=this._height-this.padding[0]-this.padding[2];wi.isConchApp?(t.setScale(n.scaleX,n.scaleY),t.setSize(r,s),t.setPos(n.x,n.y)):(e.inputContainer.style.transform=e.inputContainer.style.webkitTransform="scale("+n.scaleX+","+n.scaleY+") rotate("+i.stage.canvasDegree+"deg)",t.style.width=r+"px",t.style.height=s+"px",e.inputContainer.style.left=n.x+"px",e.inputContainer.style.top=n.y+"px")},a.select=function(){this.nativeInput.select()},a._setInputMethod=function(){e.input.parentElement&&e.inputContainer.removeChild(e.input),e.area.parentElement&&e.inputContainer.removeChild(e.area),e.inputElement=this._multiline?e.area:e.input,e.inputContainer.appendChild(e.inputElement),ur.RightToLeft&&(e.inputElement.style.direction="rtl")},a._focusIn=function(){laya.display.Input.isInputting=!0;var t=this.nativeInput;this._focus=!0;var e=t.style;e.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),t.readOnly=!this._editable,wi.isConchApp&&(t.setType(this._type),t.setForbidEdit(!this._editable)),t.maxLength=this._maxChars;this.padding;if(t.type=this._type,t.value=this._content,t.placeholder=this._prompt,i.stage.off("keydown",this,this._onKeyDown),i.stage.on("keydown",this,this._onKeyDown),i.stage.focus=this,this.event("focus"),Me.onPC&&t.focus(),!Me.onMiniGame){{this._text}this._text=null}this.typeset(),t.setColor(this._originColor),t.setFontSize(this.fontSize),t.setFontFace(Me.onIPhone?ur.fontFamilyMap[this.font]||this.font:this.font),wi.isConchApp&&t.setMultiAble&&t.setMultiAble(this._multiline),e.lineHeight=this.leading+this.fontSize+"px",e.fontStyle=this.italic?"italic":"normal",e.fontWeight=this.bold?"bold":"normal",e.textAlign=this.align,e.padding="0 0",this._syncInputTransform(),!wi.isConchApp&&Me.onPC&&i.systemTimer.frameLoop(1,this,this._syncInputTransform)},a._setPromptColor=function(){e.promptStyleDOM=Me.getElementById("promptStyle"),e.promptStyleDOM||(e.promptStyleDOM=Me.createElement("style"),e.promptStyleDOM.setAttribute("id","promptStyle"),Me.document.head.appendChild(e.promptStyleDOM)),e.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},a._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(i.superSet(ur,this,"text",this._content),i.superSet(ur,this,"color",this._originColor)):(i.superSet(ur,this,"text",this._prompt),i.superSet(ur,this,"color",this._promptColor)),i.stage.off("keydown",this,this._onKeyDown),i.stage.focus=null,this.event("blur"),this.event("change"),wi.isConchApp&&this.nativeInput.blur(),Me.onPC&&i.systemTimer.clear(this,this._syncInputTransform)},a._onKeyDown=function(t){13===t.keyCode&&(Me.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},a.changeText=function(e){this._content=e,this._focus?(this.nativeInput.value=e||"",this.event("change")):t.prototype.changeText.call(this,e)},s(0,a,"color",t.prototype._$get_color,function(t){this._focus&&this.nativeInput.setColor(t),i.superSet(ur,this,"color",this._content?t:this._promptColor),this._originColor=t}),s(0,a,"multiline",function(){return this._multiline},function(t){this._multiline=t,this.valign=t?"top":"middle"}),s(0,a,"maxChars",function(){return this._maxChars},function(t){0>=t&&(t=1e5),this._maxChars=t}),s(0,a,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(t){i.superSet(ur,this,"color",this._originColor),t+="",this._focus?(this.nativeInput.value=t||"",this.event("change")):(this._multiline||(t=t.replace(/\r?\n/g,"")),this._content=t,t?i.superSet(ur,this,"text",t):(i.superSet(ur,this,"text",this._prompt),i.superSet(ur,this,"color",this.promptColor)))}),s(0,a,"nativeInput",function(){return this._multiline?e.area:e.input}),s(0,a,"prompt",function(){return this._prompt},function(t){!this._text&&t&&i.superSet(ur,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?i.superSet(ur,this,"text",this._text==this._prompt?t:this._text):i.superSet(ur,this,"text",t),this._prompt=ur.langPacks&&ur.langPacks[t]?ur.langPacks[t]:t}),s(0,a,"focus",function(){return this._focus},function(t){var i=this.nativeInput;this._focus!==t&&(t?(i.target?i.target._focusOut():this._setInputMethod(),i.target=this,this._focusIn()):(i.target=null,this._focusOut(),Me.document.body.scrollTop=0,i.blur(),wi.isConchApp?i.setPos(-1e4,-1e4):e.inputContainer.contains(i)&&e.inputContainer.removeChild(i)))}),s(0,a,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(t){t?(t="[^"+t+"]",t.indexOf("^^")>-1&&(t=t.replace("^^","")),this._restrictPattern=new RegExp(t,"g")):this._restrictPattern=null}),s(0,a,"editable",function(){return this._editable},function(t){this._editable=t,wi.isConchApp&&e.input.setForbidEdit(!t)}),s(0,a,"promptColor",function(){return this._promptColor},function(t){this._promptColor=t,this._content||i.superSet(ur,this,"color",t)}),s(0,a,"type",function(){return this._type},function(t){this._getTextStyle().asPassword="password"===t?!0:!1,this._type=t}),e.__init__=function(){e._createInputElement(),Me.onMobile&&wi.canvas.addEventListener(e.IOS_IFRAME?Me.onMiniGame?"touchend":"click":"touchend",e._popupInputMethod)},e._popupInputMethod=function(){if(laya.display.Input.isInputting){var t=laya.display.Input.inputElement;t.focus()}},e._createInputElement=function(){e._initInput(e.area=Me.createElement("textarea")),e._initInput(e.input=Me.createElement("input")),e.inputContainer=Me.createElement("div"),e.inputContainer.style.position="absolute",e.inputContainer.style.zIndex=1e5,Me.container.appendChild(e.inputContainer),e.inputContainer.setPos=function(t,i){e.inputContainer.style.left=t+"px",e.inputContainer.style.top=i+"px"}},e._initInput=function(t){var i=t.style;i.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",i.resize="none",i.backgroundColor="transparent",i.border="none",i.outline="none",i.zIndex=1,t.addEventListener("input",e._processInputting),t.addEventListener("mousemove",e._stopEvent),t.addEventListener("mousedown",e._stopEvent),t.addEventListener("touchmove",e._stopEvent),t.setFontFace=function(e){t.style.fontFamily=e},wi.isConchApp||(t.setColor=function(e){t.style.color=e},t.setFontSize=function(e){t.style.fontSize=e+"px"})},e._processInputting=function(){var t=laya.display.Input.inputElement.target;if(t){var e=laya.display.Input.inputElement.value;t._restrictPattern&&(e=e.replace(/\u2006|\x27/g,""),t._restrictPattern.test(e)&&(e=e.replace(t._restrictPattern,""),laya.display.Input.inputElement.value=e)),t._text=e,t.event("input")}},e._stopEvent=function(t){"touchmove"==t.type&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},e.TYPE_TEXT="text",e.TYPE_PASSWORD="password",e.TYPE_EMAIL="email",e.TYPE_URL="url",e.TYPE_NUMBER="number",e.TYPE_RANGE="range",e.TYPE_DATE="date",e.TYPE_MONTH="month",e.TYPE_WEEK="week",e.TYPE_TIME="time",e.TYPE_DATE_TIME="datetime",e.TYPE_DATE_TIME_LOCAL="datetime-local",e.TYPE_SEARCH="search",e.input=null,e.area=null,e.inputElement=null,e.inputContainer=null,e.confirmButton=null,e.promptStyleDOM=null,e.inputHeight=45,e.isInputting=!1,e.stageMatrix=null,n(e,["IOS_IFRAME",function(){return this.IOS_IFRAME=Me.onIOS&&Me.window.top!=Me.window.self}]),e}(ur),br=function(t){function e(t,i){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,e.__super.call(this),this._labelColors=qi.buttonLabelColors,this._stateNum=qi.buttonStateNum,void 0===i&&(i=""),this.skin=t,this.label=i}r(e,"laya.ui.Button",t);var a=e.prototype;return i.imps(a,{"laya.ui.ISelect":!0}),a.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(e),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},a.createChildren=function(){this.graphics=this._bitmap=new Pn},a.createText=function(){this._text||(this._text=new ur,this._text.overflow="hidden",this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},a.initialize=function(){1!==this._mouseState&&(this.mouseEnabled=!0,this._setBit(64,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},a.onMouse=function(t){return this.toggle===!1&&this._selected?void 0:"click"===t.type?(this.toggle&&(this.selected=!this._selected),this._clickHandler&&this._clickHandler.run(),void 0):(!this._selected&&(this.state=e.stateMap[t.type]),void 0)},a._skinLoaded=function(){this.callLater(this.changeClips),this._setStateChanged(),this._sizeChanged(),this.event("loaded")},a.changeClips=function(){var t=hn.getRes(this._skin);if(!t)return console.log("lose skin",this._skin),void 0;var e=t.sourceWidth,i=t.sourceHeight/this._stateNum;t.$_GID||(t.$_GID=Q.getGID());var n=t.$_GID+"-"+this._stateNum,r=Ee.I.get(n);if(Q.isOkTextureList(r)||(r=null),r)this._sources=r;else{if(this._sources=[],1===this._stateNum)this._sources.push(t);else for(var s=0;s<this._stateNum;s++)this._sources.push(on.createFromTexture(t,0,i*s,e,i));Ee.I.set(n,this._sources)}this._autoSize?(this._bitmap.width=this._width||e,this._bitmap.height=this._height||i,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=e)},a.measureWidth=function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))},a.measureHeight=function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height},a.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var t=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[t]),this.label&&(this._text.color=this._labelColors[t],this._strokeColors&&(this._text.strokeColor=this._strokeColors[t]))},a._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},s(0,a,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,t?hn.getRes(t)?this._skinLoaded():i.loader.load(this._skin,l.create(this,this._skinLoaded),null,"image",1):this._skinLoaded())}),s(0,a,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(t){this.createText(),this._text.padding=we.fillArray(qi.labelPadding,t,Number)}),s(0,a,"state",function(){return this._state},function(t){this._state!=t&&(this._state=t,this._setStateChanged())}),s(0,a,"text",function(){return this.createText(),this._text}),s(0,a,"stateNum",function(){return this._stateNum},function(t){"string"==typeof t&&(t=parseInt(t)),this._stateNum!=t&&(this._stateNum=1>t?1:t>3?3:t,this.callLater(this.changeClips))}),s(0,a,"label",function(){return this._text?this._text.text:null},function(t){(this._text||t)&&(this.createText(),this._text.text!=t&&(t&&!this._text.parent&&this.addChild(this._text),this._text.text=(t+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),s(0,a,"labelSize",function(){return this.createText(),this._text.fontSize},function(t){this.createText(),this._text.fontSize=t}),s(0,a,"selected",function(){return this._selected},function(t){this._selected!=t&&(this._selected=t,this.state=this._selected?2:0,this.event("change"))}),s(0,a,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(t){this._strokeColors=we.fillArray(qi.buttonLabelColors,t,String),this._setStateChanged()}),s(0,a,"labelColors",function(){return this._labelColors.join(",")},function(t){this._labelColors=we.fillArray(qi.buttonLabelColors,t,String),this._setStateChanged()}),s(0,a,"labelStroke",function(){return this.createText(),this._text.stroke},function(t){this.createText(),this._text.stroke=t}),s(0,a,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(t){this.createText(),this._text.strokeColor=t}),s(0,a,"labelBold",function(){return this.createText(),this._text.bold},function(t){this.createText(),this._text.bold=t}),s(0,a,"labelFont",function(){return this.createText(),this._text.font},function(t){this.createText(),this._text.font=t}),s(0,a,"labelAlign",function(){return this.createText(),this._text.align},function(t){this.createText(),this._text.align=t}),s(0,a,"clickHandler",function(){return this._clickHandler},function(t){this._clickHandler=t}),s(0,a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t){this._bitmap.sizeGrid=we.fillArray(qi.defaultSizeGrid,t,Number)}),s(0,a,"width",t.prototype._$get_width,function(t){i.superSet(lr,this,"width",t),this._autoSize&&(this._bitmap.width=t,this._text&&(this._text.width=t))}),s(0,a,"height",t.prototype._$get_height,function(t){i.superSet(lr,this,"height",t),this._autoSize&&(this._bitmap.height=t,this._text&&(this._text.height=t))}),s(0,a,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.label=t+"":i.superSet(lr,this,"dataSource",t)}),s(0,a,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(t){this._bitmap._offset=t?we.fillArray([1,1],t,Number):[]}),n(e,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),e}(lr),Pr=function(t){function e(t){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=0/0,this._hide=!1,this._clickOnly=!0,this._offsets=null,this.isLockedFun=null,this.triggerDownDragLimit=null,this.triggerUpDragLimit=null,e.__super.call(this),this._showButtons=Fi.showButtons,this._touchScrollEnable=Fi.touchScrollEnable,this._mouseWheelEnable=Fi.mouseWheelEnable,this.skin=t,this.max=1}r(e,"laya.ui.ScrollBar",t);var n=e.prototype;return n.destroy=function(e){void 0===e&&(e=!0),this.stopScroll(),this.target=null,t.prototype.destroy.call(this,e),this.upButton&&this.upButton.destroy(e),this.downButton&&this.downButton.destroy(e),this.slider&&this.slider.destroy(e),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},n.createChildren=function(){this.addChild(this.slider=new Nr),this.addChild(this.upButton=new br),this.addChild(this.downButton=new br)},n.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},n.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},n.onButtonMouseDown=function(t){var e=t.currentTarget===this.upButton;this.slide(e),i.timer.once(qi.scrollBarDelayTime,this,this.startLoop,[e]),i.stage.once("mouseup",this,this.onStageMouseUp)},n.startLoop=function(t){i.timer.frameLoop(1,this,this.slide,[t])},n.slide=function(t){t?this.value-=this._scrollSize:this.value+=this._scrollSize},n.onStageMouseUp=function(){i.timer.clear(this,this.startLoop),i.timer.clear(this,this.slide)},n._skinLoaded=function(){this.slider.skin=this._skin,this.callLater(this.changeScrollBar),this._sizeChanged(),this.event("loaded")},n.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},n._sizeChanged=function(){t.prototype._sizeChanged.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},n.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},n.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider._y+this.slider.height:this.downButton.x=this.slider._x+this.slider.width},n.measureWidth=function(){return this.slider.isVertical?this.slider.width:100},n.measureHeight=function(){return this.slider.isVertical?100:this.slider.height},n.setScroll=function(t,e,i){this.runCallLater(this._sizeChanged),this.slider.setSlider(t,e,i),this.slider.bar.visible=e>0,!this._hide&&this.autoHide&&(this.visible=!1)},n.onTargetMouseWheel=function(t){this.value-=t.delta*this._scrollSize,this.target=this._target},n.onTargetMouseDown=function(t){(!this.isLockedFun||this.isLockedFun(t))&&(this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new Zi),this._lastPoint.setTo(i.stage.mouseX,i.stage.mouseY),i.timer.clear(this,this.tweenMove),ii.clearTween(this),i.stage.once("mouseup",this,this.onStageMouseUp2),i.stage.once("mouseout",this,this.onStageMouseUp2),i.timer.frameLoop(1,this,this.loop))},n.startDragForce=function(){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new Zi),this._lastPoint.setTo(i.stage.mouseX,i.stage.mouseY),i.timer.clear(this,this.tweenMove),ii.clearTween(this),i.stage.once("mouseup",this,this.onStageMouseUp2),i.stage.once("mouseout",this,this.onStageMouseUp2),i.timer.frameLoop(1,this,this.loop)},n.cancelDragOp=function(){i.stage.off("mouseup",this,this.onStageMouseUp2),i.stage.off("mouseout",this,this.onStageMouseUp2),i.timer.clear(this,this.loop),this._target.mouseEnabled=!0},n.loop=function(){var t=i.stage.mouseY,e=i.stage.mouseX;if(this._lastOffset=this.isVertical?t-this._lastPoint.y:e-this._lastPoint.x,this._clickOnly){if(!(Math.abs(this._lastOffset*(this.isVertical?i.stage._canvasTransform.getScaleY():i.stage._canvasTransform.getScaleX()))>1))return;if(this._clickOnly=!1,0==this.value&&this._lastOffset>0&&this.triggerDownDragLimit&&this.triggerDownDragLimit())return this.cancelDragOp(),void 0;if(this.value==this.max&&this._lastOffset<0&&this.triggerUpDragLimit&&this.triggerUpDragLimit())return this.cancelDragOp(),void 0;this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=e,this._lastPoint.y=t,0!==this._lastOffset&&(this._checkElastic||(this.elasticDistance>0?this._checkElastic||0==this._lastOffset||(this._lastOffset>0&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},n.onStageMouseUp2=function(){if(i.stage.off("mouseup",this,this.onStageMouseUp2),i.stage.off("mouseout",this,this.onStageMouseUp2),i.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?ii.to(this,{value:this.min},this.elasticBackTime,Ne.sineOut,l.create(this,this.elasticOver)):this._value>this.max&&ii.to(this,{value:this.max},this.elasticBackTime,Ne.sineOut,l.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?i.stage.mouseY-this._lastPoint.y:i.stage.mouseX-this._lastPoint.x);for(var t=0,e=Math.min(this._offsets.length,3),n=0;e>n;n++)t+=this._offsets[this._offsets.length-1-n];if(this._lastOffset=t/e,t=Math.abs(this._lastOffset),2>t)return this.event("end"),void 0;t>60&&(this._lastOffset=this._lastOffset>0?60:-60);var r=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));i.timer.frameLoop(1,this,this.tweenMove,[r])}},n.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&ii.to(this,{alpha:0},500),this.event("end")},n.tweenMove=function(t){this._lastOffset*=this.rollRatio;var e=0/0;if(t>0&&(this._lastOffset>0&&this.value<=this.min?(this._isElastic=!0,e=.5*-(this.min-t-this.value),this._lastOffset>e&&(this._lastOffset=e)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,e=.5*-(this.max+t-this.value),this._lastOffset<e&&(this._lastOffset=e))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(i.timer.clear(this,this.tweenMove),this._isElastic)return this._value<this.min?ii.to(this,{value:this.min},this.elasticBackTime,Ne.sineOut,l.create(this,this.elasticOver)):this._value>this.max?ii.to(this,{value:this.max},this.elasticBackTime,Ne.sineOut,l.create(this,this.elasticOver)):this.elasticOver(),void 0;this.event("end"),!this.hide&&this.autoHide&&ii.to(this,{alpha:0},500)}},n.stopScroll=function(){this.onStageMouseUp2(null),i.timer.clear(this,this.tweenMove),ii.clearTween(this)},s(0,n,"thumbPercent",function(){return this._thumbPercent},function(t){this.runCallLater(this.changeScrollBar),this.runCallLater(this._sizeChanged),t=t>=1?.99:t,this._thumbPercent=t,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*t,qi.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*t,qi.scrollBarMinNum))}),s(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.value=Number(t):i.superSet(lr,this,"dataSource",t)}),s(0,n,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._skin&&!hn.getRes(this._skin)?i.loader.load([this._skin,this._skin.replace(".png","$up.png"),this._skin.replace(".png","$down.png"),this._skin.replace(".png","$bar.png")],l.create(this,this._skinLoaded)):this._skinLoaded())}),s(0,n,"max",function(){return this.slider.max},function(t){this.slider.max=t}),s(0,n,"min",function(){return this.slider.min},function(t){this.slider.min=t}),s(0,n,"value",function(){return this._value},function(t){t!==this._value&&(this._value=t,this._isElastic||(this.slider._value!=t&&(this.slider._value=t,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),s(0,n,"isVertical",function(){return this.slider.isVertical},function(t){this.slider.isVertical=t}),s(0,n,"sizeGrid",function(){return this.slider.sizeGrid},function(t){this.slider.sizeGrid=t}),s(0,n,"scrollSize",function(){return this._scrollSize},function(t){this._scrollSize=t}),s(0,n,"target",function(){return this._target},function(t){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),this._target=t,t&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),s(0,n,"hide",function(){return this._hide},function(t){this._hide=t,this.visible=!t}),s(0,n,"showButtons",function(){return this._showButtons},function(t){this._showButtons=t,this.callLater(this.changeScrollBar)}),s(0,n,"touchScrollEnable",function(){return this._touchScrollEnable},function(t){this._touchScrollEnable=t,this.target=this._target}),s(0,n,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(t){this._mouseWheelEnable=t,this.target=this._target}),s(0,n,"tick",function(){return this.slider.tick},function(t){this.slider.tick=t}),e}(lr),Lr=function(t){function e(t){this._tf=null,e.__super.call(this),void 0===t&&(t=""),this.text=t}r(e,"laya.ui.Label",t);var n=e.prototype;return n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._tf=null},n.createChildren=function(){this.addChild(this._tf=new ur)},n.changeText=function(t){this._tf.changeText(t)},n.measureWidth=function(){return this._tf.width},n.measureHeight=function(){return this._tf.height},s(0,n,"padding",function(){return this._tf.padding.join(",")},function(t){this._tf.padding=we.fillArray(qi.labelPadding,t,Number)}),s(0,n,"bold",function(){return this._tf.bold},function(t){this._tf.bold=t}),s(0,n,"align",function(){return this._tf.align},function(t){this._tf.align=t}),s(0,n,"text",function(){return this._tf.text},function(t){this._tf.text!=t&&(t&&(t=we.adptString(t+"")),this._tf.text=t,this.event("change"),this._width&&this._height||this.onCompResize())}),s(0,n,"italic",function(){return this._tf.italic},function(t){this._tf.italic=t}),s(0,n,"wordWrap",function(){return this._tf.wordWrap},function(t){this._tf.wordWrap=t}),s(0,n,"font",function(){return this._tf.font},function(t){this._tf.font=t}),s(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.text=t+"":i.superSet(lr,this,"dataSource",t)}),s(0,n,"color",function(){return this._tf.color},function(t){this._tf.color=t}),s(0,n,"valign",function(){return this._tf.valign},function(t){this._tf.valign=t}),s(0,n,"leading",function(){return this._tf.leading},function(t){this._tf.leading=t}),s(0,n,"fontSize",function(){return this._tf.fontSize},function(t){this._tf.fontSize=t}),s(0,n,"bgColor",function(){return this._tf.bgColor},function(t){this._tf.bgColor=t}),s(0,n,"borderColor",function(){return this._tf.borderColor},function(t){this._tf.borderColor=t}),s(0,n,"stroke",function(){return this._tf.stroke},function(t){this._tf.stroke=t}),s(0,n,"strokeColor",function(){return this._tf.strokeColor},function(t){this._tf.strokeColor=t}),s(0,n,"textField",function(){return this._tf}),s(0,n,"width",function(){return this._width||this._tf.text?i.superGet(lr,this,"width"):0},function(t){i.superSet(lr,this,"width",t),this._tf.width=t}),s(0,n,"height",function(){return this._height||this._tf.text?i.superGet(lr,this,"height"):0},function(t){i.superSet(lr,this,"height",t),this._tf.height=t}),s(0,n,"overflow",function(){return this._tf.overflow},function(t){this._tf.overflow=t}),s(0,n,"underline",function(){return this._tf.underline},function(t){this._tf.underline=t}),s(0,n,"underlineColor",function(){return this._tf.underlineColor},function(t){this._tf.underlineColor=t}),e}(lr),Ir=function(t){function e(t,i){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=0/0,this._listHeight=0/0,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,e.__super.call(this),this._itemColors=qi.comboBoxItemColors,this.skin=t,this.labels=i}r(e,"laya.ui.ComboBox",t);var n=e.prototype;return n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._button&&this._button.destroy(e),this._list&&this._list.destroy(e),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},n.createChildren=function(){this.addChild(this._button=new br),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},n._createList=function(){this._list=new As,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},n._setListEvent=function(){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=l.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},n.onListDown=function(t){t.stopPropagation()},n.onScrollBarDown=function(t){t.stopPropagation()},n.onButtonMouseDown=function(){this.callLater(this.switchTo,[!this._isOpen])},n.measureWidth=function(){return this._button.width},n.measureHeight=function(){return this._button.height},n.changeList=function(){this._listChanged=!1;var t=this.width-2,e=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:t,height:this._itemHeight,fontSize:this._itemSize,color:e}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},n.onlistItemMouse=function(t,e){var i=t.type;if("mouseover"===i||"mouseout"===i){if(this._isCustomList)return;var n=this._list.getCell(e);if(!n)return;var r=n.getChildByName("label");r&&("mouseover"===i?(r.bgColor=this._itemColors[0],r.color=this._itemColors[1]):(r.bgColor=null,r.color=this._itemColors[2]))}else"click"===i&&(this.selectedIndex=e,this.isOpen=!1)},n.switchTo=function(t){this.isOpen=t},n.changeOpen=function(){this.isOpen=!this._isOpen},n.changeItem=function(){if(this._itemChanged=!1,this._listHeight=this._labels.length>0?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var t=this._list.graphics;t.clear(!0),t.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}var e=this._list.array||[];e.length=0;for(var i=0,n=this._labels.length;n>i;i++)e.push({label:this._labels[i]});this._list.height=this._listHeight,this._list.array=e},n.changeSelected=function(){this._button.label=this.selectedLabel},n._onStageMouseWheel=function(t){this._list&&!this._list.contains(t.target)&&this.removeList(null)},n.removeList=function(){i.stage.off("mousedown",this,this.removeList),i.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},s(0,n,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this._selectedIndex=t,this._labels.length>0?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[ee.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),s(0,n,"skin",function(){return this._button.skin
},function(t){this._button.skin!=t&&(this._button.skin=t,this._listChanged=!0)}),s(0,n,"visibleNum",function(){return this._visibleNum},function(t){this._visibleNum=t,this._listChanged=!0}),s(0,n,"width",t.prototype._$get_width,function(t){i.superSet(lr,this,"width",t),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),s(0,n,"selectedLabel",function(){return this._selectedIndex>-1&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(t){this.selectedIndex=this._labels.indexOf(t)}),s(0,n,"labels",function(){return this._labels.join(",")},function(t){this._labels.length>0&&(this.selectedIndex=-1),t?this._labels=t.split(","):this._labels.length=0,this._itemChanged=!0}),s(0,n,"height",t.prototype._$get_height,function(t){i.superSet(lr,this,"height",t),this._button.height=this._height}),s(0,n,"selectHandler",function(){return this._selectHandler},function(t){this._selectHandler=t}),s(0,n,"labelBold",function(){return this._button.text.bold},function(t){this._button.text.bold=t}),s(0,n,"itemColors",function(){return String(this._itemColors)},function(t){this._itemColors=we.fillArray(this._itemColors,t,String),this._listChanged=!0}),s(0,n,"itemSize",function(){return this._itemSize},function(t){this._itemSize=t,this._listChanged=!0}),s(0,n,"scrollBar",function(){return this.list.scrollBar}),s(0,n,"isOpen",function(){return this._isOpen},function(t){if(this._isOpen!=t)if(this._isOpen=t,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var e=this.localToGlobal(Zi.TEMP.setTo(0,0)),n=e.y+this._button.height;n=n+this._listHeight<=i.stage.height?n:e.y-this._listHeight,this._list.pos(e.x,n),this._list.zOrder=1001,i._currentStage.addChild(this._list),i.stage.once("mousedown",this,this.removeList),i.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),s(0,n,"scrollBarSkin",function(){return this._scrollBarSkin},function(t){this._scrollBarSkin=t}),s(0,n,"sizeGrid",function(){return this._button.sizeGrid},function(t){this._button.sizeGrid=t}),s(0,n,"button",function(){return this._button}),s(0,n,"list",function(){return this._list||this._createList(),this._list},function(t){t&&(t.removeSelf(),this._isCustomList=!0,this._list=t,this._setListEvent(t),this._itemHeight=t.getCell(0).height+t.spaceY)}),s(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t&&Math.floor(t)==t||"string"==typeof t?this.selectedIndex=parseInt(t):t instanceof Array?this.labels=t.join(","):i.superSet(lr,this,"dataSource",t)}),s(0,n,"labelColors",function(){return this._button.labelColors},function(t){this._button.labelColors!=t&&(this._button.labelColors=t)}),s(0,n,"labelPadding",function(){return this._button.text.padding.join(",")},function(t){this._button.text.padding=we.fillArray(qi.labelPadding,t,Number)}),s(0,n,"labelSize",function(){return this._button.text.fontSize},function(t){this._button.text.fontSize=t}),s(0,n,"labelFont",function(){return this._button.text.font},function(t){this._button.text.font=t}),s(0,n,"stateNum",function(){return this._button.stateNum},function(t){this._button.stateNum=t}),e}(lr),Mr=function(t){function e(t,i,n){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._complete=null,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,e.__super.call(this),void 0===i&&(i=1),void 0===n&&(n=1),this._clipX=i,this._clipY=n,this.skin=t}r(e,"laya.ui.Clip",t);var n=e.prototype;return n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},n.dispose=function(){this.destroy(!0),i.loader.clearRes(this._skin)},n.createChildren=function(){this.graphics=this._bitmap=new Pn},n._onDisplay=function(){this._isPlaying?this._getBit(128)?this.play():this.stop():this._autoPlay&&this.play()},n._skinLoaded=function(){this._setClipChanged(),this._sizeChanged(),this.event("loaded")},n.changeClip=function(){if(this._clipChanged=!1,this._skin){var t=hn.getRes(this._skin);t?this.loadComplete(this._skin,t):i.loader.load(this._skin,l.create(this,this.loadComplete,[this._skin]))}},n.loadComplete=function(t,e){if(t===this._skin&&e){var i=this._clipWidth||Math.ceil(e.sourceWidth/this._clipX),n=this._clipHeight||Math.ceil(e.sourceHeight/this._clipY),r=this._skin+i+n,s=Ee.I.get(r);if(Q.isOkTextureList(s)||(s=null),s)this._sources=s;else{this._sources=[];for(var a=0;a<this._clipY;a++)for(var o=0;o<this._clipX;o++)this._sources.push(on.createFromTexture(e,i*o,n*a,i,n));Ee.I.set(r,this._sources)}this.index=this._index,this.event("loaded"),this.onCompResize()}},n.measureWidth=function(){return this.runCallLater(this.changeClip),this._bitmap.width},n.measureHeight=function(){return this.runCallLater(this.changeClip),this._bitmap.height},n.play=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),this._isPlaying=!0,this.index=t,this._toIndex=e,this._index++,i.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},n._loop=function(){this._visible&&this._sources&&(this._index++,this._toIndex>-1&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},n.stop=function(){this._isPlaying=!1,i.timer.clear(this,this._loop),this.event("complete")},n._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},s(0,n,"interval",function(){return this._interval},function(t){this._interval!=t&&(this._interval=t,this._isPlaying&&this.play())}),s(0,n,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,t?hn.getRes(t)?this._skinLoaded():i.loader.load(this._skin,l.create(this,this._skinLoaded),null,"image",1):this._bitmap.source=null)}),s(0,n,"sources",function(){return this._sources},function(t){this._sources=t,this.index=this._index,this.event("loaded")}),s(0,n,"clipX",function(){return this._clipX},function(t){this._clipX=t||1,this._setClipChanged()}),s(0,n,"clipY",function(){return this._clipY},function(t){this._clipY=t||1,this._setClipChanged()}),s(0,n,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),s(0,n,"clipWidth",function(){return this._clipWidth},function(t){this._clipWidth=t,this._setClipChanged()}),s(0,n,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t){this._bitmap.sizeGrid=we.fillArray(qi.defaultSizeGrid,t,Number)}),s(0,n,"group",function(){return this._group},function(t){t&&this._skin&&hn.setGroup(this._skin,t),this._group=t}),s(0,n,"clipHeight",function(){return this._clipHeight},function(t){this._clipHeight=t,this._setClipChanged()}),s(0,n,"width",t.prototype._$get_width,function(t){i.superSet(lr,this,"width",t),this._bitmap.width=t}),s(0,n,"height",t.prototype._$get_height,function(t){i.superSet(lr,this,"height",t),this._bitmap.height=t}),s(0,n,"index",function(){return this._index},function(t){this._index=t,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[t]),this.event("change")}),s(0,n,"autoPlay",function(){return this._autoPlay},function(t){this._autoPlay!=t&&(this._autoPlay=t,t?this.play():this.stop())}),s(0,n,"isPlaying",function(){return this._isPlaying},function(t){this._isPlaying=t}),s(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t&&Math.floor(t)==t||"string"==typeof t?this.index=parseInt(t):i.superSet(lr,this,"dataSource",t)}),s(0,n,"bitmap",function(){return this._bitmap}),e}(lr),wr=function(t){function e(){this._targetDic=null,this._animationData=null,this._usedFrames=null,e.__super.call(this),null===e._sortIndexFun&&(e._sortIndexFun=Ie.sortByKey("index",!1,!0))}r(e,"laya.display.FrameAnimation",t);var i=e.prototype;return i._setUp=function(t,e){this._targetDic=t,this._animationData=e,this.interval=1e3/e.frameRate,e.parsed?(this._count=e.count,this._labels=e.labels,this._usedFrames=e.animationNewFrames):(this._usedFrames=[],this._calculateDatas(),e.parsed=!0,e.labels=this._labels,e.count=this._count,e.animationNewFrames=this._usedFrames)},i.clear=function(){return t.prototype.clear.call(this),this._targetDic=null,this._animationData=null,this},i._displayToIndex=function(t){if(this._animationData){0>t&&(t=0),t>this._count&&(t=this._count);var e=this._animationData.nodes,i=0,n=e.length;for(i=0;n>i;i++)this._displayNodeToFrame(e[i],t)}},i._displayNodeToFrame=function(t,e,i){i||(i=this._targetDic);var n=i[t.target];if(n){var r,s,a,o=t.frames,h=t.keys,_=0,l=h.length;for(_=0;l>_;_++)r=h[_],s=o[r],a=s.length>e?s[e]:s[s.length-1],n[r]=a;var u=t.funkeys;l=u.length;var c;if(0!=l)for(_=0;l>_;_++)r=u[_],c=o[r],void 0!==c[e]&&n[r]&&n[r].apply(n,c[e])}},i._calculateDatas=function(){if(this._animationData){var t,e=this._animationData.nodes,i=0,n=e.length;for(this._count=0,i=0;n>i;i++)t=e[i],this._calculateKeyFrames(t);this._count+=1}},i._calculateKeyFrames=function(t){var i,n,r=t.keyframes,s=t.target;t.frames||(t.frames={}),t.keys?t.keys.length=0:t.keys=[],t.funkeys?t.funkeys.length=0:t.funkeys=[],t.initValues||(t.initValues={});for(i in r){var a=-1!=i.indexOf("()");if(n=r[i],a&&(i=i.substr(0,i.length-2)),t.frames[i]||(t.frames[i]=[]),a){t.funkeys.push(i);for(var o=t.frames[i],h=0;h<n.length;h++){var _=n[h];o[_.index]=_.value,_.index>this._count&&(this._count=_.index)}}else this._targetDic&&this._targetDic[s]&&(t.initValues[i]=this._targetDic[s][i]),n.sort(e._sortIndexFun),t.keys.push(i),this._calculateNodePropFrames(n,t.frames[i],i,s)}},i.resetNodes=function(){if(this._targetDic&&this._animationData){var t,e,i=this._animationData.nodes,n=0,r=i.length;for(n=0;r>n;n++)if(t=i[n],e=t.initValues){var s=this._targetDic[t.target];if(s){var a;for(a in e)s[a]=e[a]}}}},i._calculateNodePropFrames=function(t,e){var i=0,n=t.length-1;for(e.length=t[n].index+1,i=0;n>i;i++)this._dealKeyFrame(t[i]),this._calculateFrameValues(t[i],t[i+1],e);0==n&&(e[0]=t[0].value,this._usedFrames&&(this._usedFrames[t[0].index]=!0)),this._dealKeyFrame(t[i])},i._dealKeyFrame=function(t){t.label&&""!=t.label&&this.addLabel(t.label,t.index)},i._calculateFrameValues=function(t,e,i){var n,r=0,s=t.index,a=e.index,o=t.value,h=e.value-t.value,_=a-s,l=this._usedFrames;if(a>this._count&&(this._count=a),t.tween)for(n=Ne[t.tweenMethod],null==n&&(n=Ne.linearNone),r=s;a>r;r++)i[r]=n(r-s,o,h,_),l&&(l[r]=!0);else for(r=s;a>r;r++)i[r]=o;l&&(l[t.index]=!0,l[e.index]=!0),i[e.index]=e.value},e._sortIndexFun=null,e}(fr),Or=function(t){function e(t){this._bitmap=null,this._skin=null,this._group=null,e.__super.call(this),this.skin=t}r(e,"laya.ui.Image",t);var n=e.prototype;return n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null},n.dispose=function(){this.destroy(!0),i.loader.clearRes(this._skin)},n.createChildren=function(){this.graphics=this._bitmap=new Pn,this._bitmap.autoCacheCmd=!1},n.setSource=function(t,e){t===this._skin&&e&&(this.source=e,this.onCompResize())},n.measureWidth=function(){return this._bitmap.width},n.measureHeight=function(){return this._bitmap.height},s(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"string"==typeof t?this.skin=t:i.superSet(lr,this,"dataSource",t)}),s(0,n,"source",function(){return this._bitmap.source},function(t){this._bitmap&&(this._bitmap.source=t,this.event("loaded"),this.repaint())}),s(0,n,"skin",function(){return this._skin},function(t){if(this._skin!=t)if(this._skin=t,t){var e=hn.getRes(t);e?(this.source=e,this.onCompResize()):i.loader.load(this._skin,l.create(this,this.setSource,[this._skin]),null,"image",1,!0,this._group)}else this.source=null}),s(0,n,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(t){this._bitmap.sizeGrid=we.fillArray(qi.defaultSizeGrid,t,Number)}),s(0,n,"group",function(){return this._group},function(t){t&&this._skin&&hn.setGroup(this._skin,t),this._group=t}),s(0,n,"width",t.prototype._$get_width,function(t){i.superSet(lr,this,"width",t),this._bitmap.width=0==t?1e-7:t}),s(0,n,"height",t.prototype._$get_height,function(t){i.superSet(lr,this,"height",t),this._bitmap.height=0==t?1e-7:t}),e}(lr),Br=function(t){function e(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,e.__super.call(this)}r(e,"laya.ui.ColorPicker",t);var n=e.prototype;return n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._colorPanel&&this._colorPanel.destroy(e),this._colorButton&&this._colorButton.destroy(e),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},n.createChildren=function(){this.addChild(this._colorButton=new br),this._colorPanel=new Tr,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new On),this._colorPanel.addChild(this._colorBlock=new On),this._colorPanel.addChild(this._colorInput=new xr)},n.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},n.onPanelMouseDown=function(t){t.stopPropagation()},n.changePanel=function(){this._panelChanged=!1;var t=this._colorPanel.graphics;t.clear(!0),t.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,t=this._colorTiles.graphics,t.clear(!0);for(var e=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],i=0;12>i;i++)for(var n=0;20>n;n++){var r=0;r=0===n?e[i]:1===n?0:51*(((3*i+n/6)%3<<0)+3*(i/6<<0))<<16|n%6*51<<8|(i<<0)%6*51;var s=we.toColor(r);this._colors.push(s);var a=n*this._gridSize,o=i*this._gridSize;t.drawRect(a,o,this._gridSize,this._gridSize,s,"#000000")}},n.onColorButtonClick=function(){this._colorPanel.parent?this.close():this.open()},n.open=function(){var t=this.localToGlobal(new Zi),e=t.x+this._colorPanel.width<=i.stage.width?t.x:i.stage.width-this._colorPanel.width,n=t.y+this._colorButton.height;n=n+this._colorPanel.height<=i.stage.height?n:t.y-this._colorPanel.height,this._colorPanel.pos(e,n),this._colorPanel.zOrder=1001,i._currentStage.addChild(this._colorPanel),i.stage.on("mousedown",this,this.removeColorBox)},n.close=function(){i.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},n.removeColorBox=function(){this.close()},n.onColorFieldKeyDown=function(t){13==t.keyCode&&(this.selectedColor=this._colorInput.text?this._colorInput.text:null,this.close(),t.stopPropagation())},n.onColorInputChange=function(){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},n.onColorTilesClick=function(){this.selectedColor=this.getColorByMouse(),this.close()},n.onColorTilesMouseMove=function(){this._colorInput.focus=!1;var t=this.getColorByMouse();this._colorInput.text=t,this.drawBlock(t)},n.getColorByMouse=function(){var t=this._colorTiles.getMousePoint(),e=Math.floor(t.x/this._gridSize),i=Math.floor(t.y/this._gridSize);return this._colors[20*i+e]},n.drawBlock=function(t){var e=this._colorBlock.graphics;e.clear(!0);var i=t?t:"#ffffff";e.drawRect(0,0,50,20,i,this._borderColor),t||e.drawLine(0,0,50,20,"#ff0000")},n.changeColor=function(){var t=this.graphics;t.clear(!0);var e=this._selectedColor||"#000000";t.drawRect(0,0,this._colorButton.width,this._colorButton.height,e)},n._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},s(0,n,"inputBgColor",function(){return this._inputBgColor},function(t){this._inputBgColor=t,this._setPanelChanged()}),s(0,n,"selectedColor",function(){return this._selectedColor},function(t){this._selectedColor!=t&&(this._selectedColor=this._colorInput.text=t,this.drawBlock(t),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",ee.EMPTY.setTo("change",this,this)))}),s(0,n,"skin",function(){return this._colorButton.skin},function(t){this._colorButton.once("loaded",this,this.changeColor),this._colorButton.skin=t}),s(0,n,"bgColor",function(){return this._bgColor},function(t){this._bgColor=t,this._setPanelChanged()}),s(0,n,"borderColor",function(){return this._borderColor},function(t){this._borderColor=t,this._setPanelChanged()}),s(0,n,"inputColor",function(){return this._inputColor},function(t){this._inputColor=t,this._setPanelChanged()}),e}(lr),Nr=function(t){function e(t){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=0/0,this._ty=0/0,this._maxMove=0/0,this._globalSacle=null,e.__super.call(this),this.skin=t}r(e,"laya.ui.Slider",t);var a=e.prototype;return a.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._bg&&this._bg.destroy(e),this._bar&&this._bar.destroy(e),this._progress&&this._progress.destroy(e),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},a.createChildren=function(){this.addChild(this._bg=new Or),this.addChild(this._bar=new br)},a.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},a.onBarMouseDown=function(){this._globalSacle||(this._globalSacle=new Zi),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=i.stage.mouseX,this._ty=i.stage.mouseY,i.stage.on("mousemove",this,this.mouseMove),i.stage.once("mouseup",this,this.mouseUp),i.stage.once("mouseout",this,this.mouseUp),this.showValueText()},a.showValueText=function(){if(this.showLabel){var t=laya.ui.Slider.label;this.addChild(t),t.textField.changeText(this._value+""),this.isVertical?(t.x=this._bar._x+20,t.y=.5*(this._bar.height-t.height)+this._bar._y):(t.y=this._bar._y-20,t.x=.5*(this._bar.width-t.width)+this._bar._x)}},a.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},a.mouseUp=function(){i.stage.off("mousemove",this,this.mouseMove),i.stage.off("mouseup",this,this.mouseUp),i.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},a.mouseMove=function(){var t=this._value;this.isVertical?(this._bar.y+=(i.stage.mouseY-this._ty)/this._globalSacle.y,this._bar._y>this._maxMove?this._bar.y=this._maxMove:this._bar._y<0&&(this._bar.y=0),this._value=this._bar._y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar._y+.5*this._bar.height)):(this._bar.x+=(i.stage.mouseX-this._tx)/this._globalSacle.x,this._bar._x>this._maxMove?this._bar.x=this._maxMove:this._bar._x<0&&(this._bar.x=0),this._value=this._bar._x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar._x+.5*this._bar.width)),this._tx=i.stage.mouseX,this._ty=i.stage.mouseY;var e=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*e)/e,this._value!=t&&this.sendChangeEvent(),this.showValueText()},a.sendChangeEvent=function(t){void 0===t&&(t="change"),this.event(t),this.changeHandler&&this.changeHandler.runWith(this._value)},a._skinLoaded=function(){this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var t=this._skin.replace(".png","$progress.png");hn.getRes(t)&&(this._progress||(this.addChild(this._progress=new Or),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=t),this.setBarPoint(),this.callLater(this.changeValue),this._sizeChanged(),this.event("loaded")},a.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},a.measureWidth=function(){return Math.max(this._bg.width,this._bar.width)},a.measureHeight=function(){return Math.max(this._bg.height,this._bar.height)},a._sizeChanged=function(){t.prototype._sizeChanged.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},a.setSlider=function(t,e,i){this._value=-1,this._min=t,this._max=e>t?e:t,this.value=t>i?t:i>e?e:i},a.changeValue=function(){var t=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*t)/t,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var e=this._max-this._min;0===e&&(e=1),this.isVertical?(this._bar.y=(this._value-this._min)/e*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar._y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/e*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar._x+.5*this._bar.width))},a.onBgMouseDown=function(){var t=this._bg.getMousePoint();this.value=this.isVertical?t.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:t.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},s(0,a,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.value=Number(t):i.superSet(lr,this,"dataSource",t)}),s(0,a,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._skin&&!hn.getRes(this._skin)?i.loader.load([this._skin,this._skin.replace(".png","$bar.png")],l.create(this,this._skinLoaded)):this._skinLoaded())}),s(0,a,"tick",function(){return this._tick},function(t){this._tick!=t&&(this._tick=t,this.callLater(this.changeValue))}),s(0,a,"sizeGrid",function(){return this._bg.sizeGrid},function(t){this._bg.sizeGrid=t,this._bar.sizeGrid=t,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),s(0,a,"allowClickBack",function(){return this._allowClickBack},function(t){this._allowClickBack!=t&&(this._allowClickBack=t,t?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),s(0,a,"max",function(){return this._max},function(t){this._max!=t&&(this._max=t,this.callLater(this.changeValue))}),s(0,a,"min",function(){return this._min},function(t){this._min!=t&&(this._min=t,this.callLater(this.changeValue))}),s(0,a,"bar",function(){return this._bar}),s(0,a,"value",function(){return this._value},function(t){if(this._value!=t){var e=this._value;this._value=t,this.changeValue(),this._value!=e&&this.sendChangeEvent()}}),n(e,["label",function(){return this.label=new Lr}]),e}(lr),Fr=function(t){function e(t){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,e.__super.call(this),this.skin=t}r(e,"laya.ui.ProgressBar",t);var n=e.prototype;return n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._bg&&this._bg.destroy(e),this._bar&&this._bar.destroy(e),this._bg=this._bar=null,this.changeHandler=null},n.createChildren=function(){this.addChild(this._bg=new Or),this.addChild(this._bar=new Or),this._bar._bitmap.autoCacheCmd=!1},n._skinLoaded=function(){this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue),this._sizeChanged(),this.event("loaded")},n.measureWidth=function(){return this._bg.width},n.measureHeight=function(){return this._bg.height},n.changeValue=function(){if(this.sizeGrid){var t=this.sizeGrid.split(","),e=Number(t[3]),i=Number(t[1]),n=this.width-e-i,r=n*this._value;this._bar.width=e+i+r,this._bar.visible=this._bar.width>e+i}else this._bar.width=this.width*this._value},s(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t||"string"==typeof t?this.value=Number(t):i.superSet(lr,this,"dataSource",t)}),s(0,n,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._skin&&!hn.getRes(this._skin)?i.loader.load(this._skin,l.create(this,this._skinLoaded),null,"image",1):this._skinLoaded())}),s(0,n,"height",t.prototype._$get_height,function(t){i.superSet(lr,this,"height",t),this._bg.height=this._height,this._bar.height=this._height}),s(0,n,"bar",function(){return this._bar}),s(0,n,"value",function(){return this._value},function(t){this._value!=t&&(t=t>1?1:0>t?0:t,this._value=t,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(t))}),s(0,n,"bg",function(){return this._bg}),s(0,n,"sizeGrid",function(){return this._bg.sizeGrid},function(t){this._bg.sizeGrid=this._bar.sizeGrid=t}),s(0,n,"width",t.prototype._$get_width,function(t){i.superSet(lr,this,"width",t),this._bg.width=this._width,this.callLater(this.changeValue)}),e}(lr),kr=function(t){function e(){this._frames=null,this._url=null,e.__super.call(this),this._setControlNode(this)}r(e,"laya.display.Animation",t);var n=e.prototype;return n.destroy=function(t){void 0===t&&(t=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,t),this._frames=null,this._labels=null},n.play=function(e,i,n){void 0===e&&(e=0),void 0===i&&(i=!0),void 0===n&&(n=""),n&&this._setFramesFromCache(n,!0),t.prototype.play.call(this,e,i,n)},n._setFramesFromCache=function(t,i){if(void 0===i&&(i=!1),this._url&&(t=this._url+"#"+t),t&&e.framesMap[t]){var n=e.framesMap[t];return n instanceof Array?(this._frames=e.framesMap[t],this._count=this._frames.length):(n.nodeRoot&&(e.framesMap[t]=Bs.parseAnimationByData(n),n=e.framesMap[t]),this._frames=n.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=n.interval),this._labels=this._copyLabels(n.labels)),!0}return i&&console.log("ani not found:",t),!1},n._copyLabels=function(t){if(!t)return null;var e;e={};var i;for(i in t)e[i]=Q.copyArray([],t[i]);return e},n._frameLoop=function(){this._visible&&this._style.alpha>.01&&this._frames&&t.prototype._frameLoop.call(this)},n._displayToIndex=function(t){this._frames&&(this.graphics=this._frames[t])},n.clear=function(){return t.prototype.clear.call(this),this.stop(),this.graphics=null,this._frames=null,this._labels=null,this},n.loadImages=function(t,i){return void 0===i&&(i=""),this._url="",this._setFramesFromCache(i)||(this.frames=e.framesMap[i]?e.framesMap[i]:e.createFrames(t,i)),this},n.loadAtlas=function(t,n,r){function s(i){t===i&&(a.frames=e.framesMap[r]?e.framesMap[r]:e.createFrames(t,r),n&&n.run())}void 0===r&&(r=""),this._url="";var a=this;return a._setFramesFromCache(r)||(hn.getAtlas(t)?s(t):i.loader.load(t,l.create(null,s,[t]),null,"atlas")),this},n.loadAnimation=function(t,e,n){this._url=t;var r=this;return this._actionName||(this._actionName=""),r._setFramesFromCache(this._actionName)?(r._setFramesFromCache(this._actionName,!0),this.index=0,e&&e.run()):!n||hn.getAtlas(n)?this._loadAnimationData(t,e,n):i.loader.load(n,l.create(this,this._loadAnimationData,[t,e,n]),null,"atlas"),this},n._loadAnimationData=function(t,n,r){function s(i){if(hn.getRes(i)&&t===i){var r;if(e.framesMap[t+"#"])o._setFramesFromCache(a._actionName,!0),a.index=0,a._resumePlay();else{var s=Bs.parseAnimationData(hn.getRes(t));if(!s)return;var h,_=s.animationList,l=0,u=_.length;for(l=0;u>l;l++)r=_[l],e.framesMap[t+"#"+r.name]=r,h||(h=r);h&&(e.framesMap[t+"#"]=h,o._setFramesFromCache(a._actionName,!0),a.index=0),a._resumePlay()}n&&n.run()}}var a=this;if(r&&!hn.getAtlas(r))return console.warn("atlas load fail:"+r),void 0;var o=this;hn.getRes(t)?s(t):i.loader.load(t,l.create(null,s,[t]),null,"json"),hn.clearRes(t)},s(0,n,"frames",function(){return this._frames},function(t){this._frames=t,t&&(this._count=t.length,this._actionName&&this._setFramesFromCache(this._actionName,!0),this.index=this._index)}),s(0,n,"autoPlay",null,function(t){t?this.play():this.stop()}),s(0,n,"source",null,function(t){t.indexOf(".ani")>-1?this.loadAnimation(t):t.indexOf(".json")>-1||t.indexOf("als")>-1||t.indexOf("atlas")>-1?this.loadAtlas(t):this.loadImages(t.split(","))}),s(0,n,"autoAnimation",null,function(t){this.play(0,!0,t)}),e.createFrames=function(t,i){var n;if("string"==typeof t){var r=hn.getAtlas(t);if(r&&r.length){n=[];for(var s=0,a=r.length;a>s;s++){var o=new Ue;o.drawImage(hn.getRes(r[s]),0,0),n.push(o)}}}else if(t instanceof Array)for(n=[],s=0,a=t.length;a>s;s++)o=new Ue,o.loadImage(t[s],0,0),n.push(o);return i&&(e.framesMap[i]=n),n},e.clearCache=function(t){var i,n=e.framesMap,r=t+"#";for(i in n)(i===t||0===i.indexOf(r))&&delete e.framesMap[i]},e.framesMap={},e}(fr),Vr=function(t){function e(t,i){this._floatArray32=null,this._uint32Array=null,this._vertexStride=0,e.__super.call(this),this._vertexStride=t,this._bufferUsage=i,this._bufferType=34962,this._buffer=new ArrayBuffer(8),this._floatArray32=new Float32Array(this._buffer),this._uint32Array=new Uint32Array(this._buffer)}r(e,"laya.webgl.utils.VertexBuffer2D",t);var i=e.prototype;return i.getFloat32Array=function(){return this._floatArray32},i.appendArray=function(t){var e=this._byteLength>>2;this.setByteLength(this._byteLength+4*t.length);var i=this.getFloat32Array();i.set(t,e),this._upload=!0},i._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer)),this._uint32Array&&(this._uint32Array=new Uint32Array(this._buffer))},i.deleteBuffer=function(){this._disposeResource()},i._bindForVAO=function(){Le.instance.bindBuffer(34962,this._glBuffer)},i.bind=function(){return rr._bindedVertexBuffer!==this._glBuffer?(Le.instance.bindBuffer(34962,this._glBuffer),rr._bindedVertexBuffer=this._glBuffer,!0):!1},i.destroy=function(){laya.resource.Resource.prototype.destroy.call(this),this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},s(0,i,"vertexStride",function(){return this._vertexStride}),e.create=function(t,i){return void 0===i&&(i=35048),new e(t,i)},e}(gr),Ur=function(t){function e(t){this._uint16Array=null,void 0===t&&(t=35044),e.__super.call(this),this._bufferUsage=t,this._bufferType=34963,this._buffer=new ArrayBuffer(8)}r(e,"laya.webgl.utils.IndexBuffer2D",t);var i=e.prototype;return i._checkArrayUse=function(){this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},i.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},i._bindForVAO=function(){Le.instance.bindBuffer(34963,this._glBuffer)},i.bind=function(){return rr._bindedIndexBuffer!==this._glBuffer?(Le.instance.bindBuffer(34963,this._glBuffer),rr._bindedIndexBuffer=this._glBuffer,!0):!1},i.destory=function(){this._uint16Array=null,this._buffer=null},i.disposeResource=function(){this._disposeResource()},e.create=function(t){return void 0===t&&(t=35044),new e(t)},e}(gr),Wr=function(t){function e(t,i,n,r,s){this._params2dQuick2=null,this._shaderValueWidth=0,this._shaderValueHeight=0,e.__super.call(this,t,i,n,r,s)}r(e,"laya.webgl.shader.d2.Shader2X",t);var i=e.prototype;return i._disposeResource=function(){t.prototype._disposeResource.call(this),this._params2dQuick2=null},i.upload2dQuick2=function(t){this.upload(t,this._params2dQuick2||this._make2dQuick2())
},i._make2dQuick2=function(){if(!this._params2dQuick2){this._params2dQuick2=[];for(var t,e=this._params,i=0,n=e.length;n>i;i++)t=e[i],"size"!==t.name&&this._params2dQuick2.push(t)}return this._params2dQuick2},e.create=function(t,i,n,r,s){return new e(t,i,n,r,s)},e}(vr),Gr=function(t){function e(t,i,n,r){this._mgrKey=0,void 0===n&&(n=0),void 0===r&&(r=0),e.__super.call(this,n,!1),this._glTextureType=3553,this._width=t,this._height=i,this._depthStencilFormat=r,this._create(t,i)}r(e,"laya.webgl.resource.RenderTexture2D",t);var i=e.prototype;return i.getIsReady=function(){return!0},i._create=function(t,e){var i=Le.instance;this._frameBuffer=i.createFramebuffer(),me.bindTexture(i,this._glTextureType,this._glTexture);var n=this._getGLFormat();if(i.texImage2D(this._glTextureType,0,n,t,e,0,n,5121,null),this._setGPUMemory(t*e*4),i.bindFramebuffer(36160,this._frameBuffer),i.framebufferTexture2D(36160,36064,3553,this._glTexture,0),3!==this._depthStencilFormat)switch(this._depthStencilBuffer=i.createRenderbuffer(),i.bindRenderbuffer(36161,this._depthStencilBuffer),this._depthStencilFormat){case 0:i.renderbufferStorage(36161,33189,t,e),i.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 1:i.renderbufferStorage(36161,36168,t,e),i.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 2:i.renderbufferStorage(36161,34041,t,e),i.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer);break;default:console.log("RenderTexture: unkonw depth format.")}i.bindFramebuffer(36160,null),i.bindRenderbuffer(36161,null),this._setWarpMode(10242,this._wrapModeU),this._setWarpMode(10243,this._wrapModeV),this._setFilterMode(this._filterMode),this._setAnisotropy(this._anisoLevel),this._readyed=!0,this._activeResource()},i.generateMipmap=function(){this._isPot(this.width)&&this._isPot(this.height)?(this._mipmap=!0,Le.instance.generateMipmap(this._glTextureType),this._setFilterMode(this._filterMode),this._setGPUMemory(this.width*this.height*4*(1+1/3))):(this._mipmap=!1,this._setGPUMemory(this.width*this.height*4))},i.start=function(){var t=Le.instance;Le.instance.bindFramebuffer(36160,this._frameBuffer),e._currentActive=this,this._readyed=!0,t.viewport(0,0,this._width,this._height),this._lastWidth=ci.width,this._lastHeight=ci.height,ci.width=this._width,ci.height=this._height,nr.activeShader=null},i.end=function(){Le.instance.bindFramebuffer(36160,null),e._currentActive=null,this._readyed=!0},i.restore=function(){var t=Le.instance;this._lastRT!=e._currentActive&&(Le.instance.bindFramebuffer(36160,this._lastRT?this._lastRT._frameBuffer:null),e._currentActive=this._lastRT),this._readyed=!0,t.viewport(0,0,this._lastWidth,this._lastHeight),ci.width=this._lastWidth,ci.height=this._lastHeight,nr.activeShader=null},i.clear=function(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1);var r=Le.instance;r.clearColor(t,e,i,n);var s=16384;switch(this._depthStencilFormat){case 33189:s|=256;break;case 36168:s|=1024;break;case 34041:s|=256,s|=1024}r.clear(s)},i.getData=function(t,e,i,n){var r=Le.instance;r.bindFramebuffer(36160,this._frameBuffer);var s=36053===r.checkFramebufferStatus(36160);if(!s)return r.bindFramebuffer(36160,null),null;var a=new Uint8Array(this._width*this._height*4),o=this._getGLFormat();return r.readPixels(t,e,i,n,o,5121,a),r.bindFramebuffer(36160,null),a},i._disposeResource=function(){if(this._frameBuffer){var t=Le.instance;t.deleteTexture(this._glTexture),t.deleteFramebuffer(this._frameBuffer),t.deleteRenderbuffer(this._depthStencilBuffer),this._glTexture=null,this._frameBuffer=null,this._depthStencilBuffer=null,this._setGPUMemory(0)}},s(0,i,"depthStencilFormat",function(){return this._depthStencilFormat}),s(0,i,"defaulteTexture",function(){return Xr.grayTexture}),s(0,i,"sourceWidth",function(){return this._width}),s(0,i,"sourceHeight",function(){return this._height}),s(0,i,"offsetX",function(){return 0}),s(0,i,"offsetY",function(){return 0}),s(1,e,"currentActive",function(){return e._currentActive},laya.webgl.resource.BaseTexture._$SET_currentActive),e.pushRT=function(){e.rtStack.push({rt:e._currentActive,w:ci.width,h:ci.height})},e.popRT=function(){var t=Le.instance,i=e.rtStack.pop();i&&(e._currentActive!=i.rt&&(Le.instance.bindFramebuffer(36160,i.rt?i.rt._frameBuffer:null),e._currentActive=i.rt),t.viewport(0,0,i.w,i.h),ci.width=i.w,ci.height=i.h)},e._currentActive=null,e.rtStack=[],n(e,["defuv",function(){return this.defuv=[0,0,1,0,1,1,0,1]},"flipyuv",function(){return this.flipyuv=[0,1,1,1,1,0,0,0]}]),e}(Ar),Xr=function(t){function e(t,i,n,r,s){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=!0),void 0===s&&(s=!1),e.__super.call(this,n,r),this._glTextureType=3553,this._width=t,this._height=i,this._canRead=s,this._setWarpMode(10242,this._wrapModeU),this._setWarpMode(10243,this._wrapModeV),Di.is2DPixelArtGame&&(this._filterMode=0),this._setFilterMode(this._filterMode),this._setAnisotropy(this._anisoLevel)}r(e,"laya.webgl.resource.Texture2D",t);var n=e.prototype;return n._calcualatesCompressedDataSize=function(t,e,i){switch(t){case 3:case 5:return(e+3>>2)*(i+3>>2)*8;case 4:return(e+3>>2)*(i+3>>2)*16;case 11:case 12:return Math.floor((Math.max(e,8)*Math.max(i,8)*4+7)/8);case 9:case 10:return Math.floor((Math.max(e,16)*Math.max(i,8)*2+7)/8);default:return 0}},n._pharseDDS=function(t){var e=827611204,i=894720068,n=4,r=131072,s=542327876,a=31,o=0,h=1,_=2,l=3,u=4,c=7,d=20,f=21,p=new Int32Array(t,0,a);if(p[o]!=s)throw"Invalid magic number in DDS header";if(!(p[d]&n))throw"Unsupported format, must contain a FourCC code";var m=p[f];switch(this._format){case 3:if(m!==e)throw"the FourCC code is not same with texture format.";break;case 4:if(m!==i)throw"the FourCC code is not same with texture format.";break;default:throw"unknown texture format."}var g=1;if(p[_]&r){if(g=Math.max(1,p[c]),!this._mipmap)throw"the mipmap is not same with Texture2D."}else if(this._mipmap)throw"the mipmap is not same with Texture2D.";var v=p[u],y=p[l];if(this._width!==v||this._height!==y)throw"the width or height is not same with Texture2D.";var E=p[h]+4;this._upLoadCompressedTexImage2D(t,v,y,g,E,0)},n._pharseKTX=function(t){var e=13,i=4,n=7,r=6,s=11,a=12,o=new Uint8Array(t,0,12);if(171!=o[0]||75!=o[1]||84!=o[2]||88!=o[3]||32!=o[4]||49!=o[5]||49!=o[6]||187!=o[7]||13!=o[8]||10!=o[9]||26!=o[10]||10!=o[11])throw"Invalid fileIdentifier in KTX header";var h=new Int32Array(o.buffer,o.length,e),_=h[i],l=this._getGLFormat();switch(this._format){case 5:if(_!==l)throw"the format  is not same with texture format FORMAT_ETC1RGB.";break;default:throw"unknown texture format."}var u=h[s],c=h[r],d=h[n];if(this._width!==c||this._height!==d)throw"the width or height is not same with Texture2D.";var f=64+h[a];this._upLoadCompressedTexImage2D(t,c,d,u,f,4)},n._pharsePVR=function(t){var e=0,i=1,n=2,r=3,s=6,a=55727696,o=13,h=0,_=2,l=6,u=7,c=11,d=12,f=new Int32Array(t,0,o);if(f[h]!=a)throw"Invalid magic number in PVR header";var p=f[_];switch(this._format){case 5:if(p!==s)throw"the format  is not same with texture format FORMAT_ETC1RGB.";break;case 9:if(p!==e)throw"the format  is not same with texture format FORMAT_PVRTCRGB_2BPPV.";break;case 11:if(p!==n)throw"the format  is not same with texture format FORMAT_PVRTCRGB_4BPPV.";break;case 10:if(p!==i)throw"the format  is not same with texture format FORMAT_PVRTCRGBA_2BPPV.";break;case 12:if(p!==r)throw"the format  is not same with texture format FORMAT_PVRTCRGBA_4BPPV.";break;default:throw"unknown texture format."}var m=f[c],g=f[u],v=f[l];if(this._width!==g||this._height!==v)throw"the width or height is not same with Texture2D.";var y=f[d]+52;this._upLoadCompressedTexImage2D(t,g,v,m,y,0)},n._upLoadCompressedTexImage2D=function(t,e,i,n,r,s){var a=Le.instance,o=this._glTextureType;me.bindTexture(a,o,this._glTexture);for(var h=this._getGLFormat(),_=r,l=0;n>l;l++){_+=s;var u=this._calcualatesCompressedDataSize(this._format,e,i),c=new Uint8Array(t,_,u);a.compressedTexImage2D(o,l,h,e,i,0,c),e>>=1,i>>=1,_+=u}var d=_;this._setGPUMemory(d),this._readyed=!0,this._activeResource()},n.loadImageSource=function(t,e){void 0===e&&(e=!1);var i=t.width,n=t.height;this._width=i,this._height=n,this._setWarpMode(10242,this._wrapModeU),this._setWarpMode(10243,this._wrapModeV),this._setFilterMode(this._filterMode);var r=Le.instance;me.bindTexture(r,this._glTextureType,this._glTexture);var s=this._getGLFormat();wi.isConchApp?(t.setPremultiplyAlpha(e),r.texImage2D(this._glTextureType,0,6408,6408,5121,t)):(e&&r.pixelStorei(37441,!0),r.texImage2D(this._glTextureType,0,s,s,5121,t),e&&r.pixelStorei(37441,!1)),this._mipmap&&this._isPot(i)&&this._isPot(n)?(r.generateMipmap(this._glTextureType),this._setGPUMemory(i*n*4*(1+1/3))):this._setGPUMemory(i*n*4),this._canRead&&(wi.isConchApp?this._pixels=new Uint8Array(t._nativeObj.getImageData(0,0,i,n)):(Me.canvas.size(i,n),Me.canvas.clear(),Me.context.drawImage(t,0,0,i,n),this._pixels=new Uint8Array(Me.context.getImageData(0,0,i,n).data.buffer))),this._readyed=!0,this._activeResource()},n.setPixels=function(t,e){if(void 0===e&&(e=0),!t)throw"Texture2D:pixels can't be null.";var i=this._width,n=this._height,r=Le.instance,s=this._glTextureType;me.bindTexture(r,s,this._glTexture);var a=this._getGLFormat();r.texImage2D(s,e,a,i,n,0,a,5121,t),this._mipmap&&this._isPot(i)&&this._isPot(n)?(r.generateMipmap(s),this._setGPUMemory(i*n*4*(1+1/3))):this._setGPUMemory(i*n*4),this._canRead&&(this._pixels=t),this._readyed=!0,this._activeResource()},n.setCompressData=function(t){switch(this._format){case 3:case 4:this._pharseDDS(t);break;case 5:this._pharseKTX(t);break;case 9:case 10:case 11:case 12:this._pharsePVR(t);break;default:throw"Texture2D:unkonwn format."}},n._recoverResource=function(){},n.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},s(0,n,"defaulteTexture",function(){return laya.webgl.resource.Texture2D.grayTexture}),e.__init__=function(){var t=new Uint8Array(3);t[0]=128,t[1]=128,t[2]=128,e.grayTexture=new e(1,1,0,!1,!1),e.grayTexture.setPixels(t),e.grayTexture.lock=!0},e._parse=function(t,i,n){var r=n?new e(n[0],n[1],n[2],n[3],n[4]):new e(0,0);switch(i&&(r.wrapModeU=i.wrapModeU,r.wrapModeV=i.wrapModeV,r.filterMode=i.filterMode,r.anisoLevel=i.anisoLevel),r._format){case 0:case 1:r.loadImageSource(t);break;case 3:case 4:case 5:case 9:case 10:case 11:case 12:r.setCompressData(t);break;default:throw"Texture2D:unkonwn format."}return r},e.load=function(t,e){i.loader.create(t,e,null,"TEXTURE2D")},e.grayTexture=null,e}(Ar),zr=function(t){function e(){this.btnadd=null,this.inputsearch=null,this.btnsearch=null,this.list_address=null,this.btnok=null,this.btncancel=null,e.__super.call(this)}r(e,"ui.order.SelectAddressPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/SelectAddressPanel")},e}(Cr),Hr=function(t){function e(){this.conName=null,this.phone=null,this.detailaddr=null,this.btnDel=null,this.btnEdit=null,e.__super.call(this)}r(e,"ui.usercenter.AddressItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:788,height:24},compId:2,child:[{type:"Label",props:{y:0,x:1,width:101,"var":"conName",valign:"middle",text:"徐建华",height:24,fontSize:18,align:"center"},compId:3},{type:"Label",props:{y:0,x:101,width:170,"var":"phone",valign:"middle",text:"13564113173",height:24,fontSize:18,align:"center"},compId:5},{type:"Label",props:{y:0,x:270,width:443,"var":"detailaddr",valign:"middle",text:"上海市浦东新区周浦镇瑞浦路612弄23号1001室",height:24,fontSize:18,align:"center"},compId:6},{type:"Rect",props:{y:0,x:0,width:788,lineWidth:1,lineColor:"#1c1a1a",height:24},compId:10},{type:"Text",props:{y:5,x:753,"var":"btnDel",text:"删除",presetID:1,color:"#1c893f",isPresetRoot:!0,runtime:"laya.display.Text"},compId:8,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:9}]},{type:"Text",props:{y:5,x:718,"var":"btnEdit",text:"编辑",presetID:1,color:"#1c893f",isPresetRoot:!0,runtime:"laya.display.Text"},compId:7,child:[{type:"Script",props:{presetID:2,runtime:"script.prefabScript.LinkTextControl"},compId:4}]}],loadList:["prefabs/LinksText.prefab"],loadList3D:[]},e}(Cr),Yr=function(t){function e(){this.productname=null,e.__super.call(this)}r(e,"ui.login.CityAreaItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:170,height:26},compId:2,child:[{type:"Label",props:{width:170,"var":"productname",valign:"middle",top:0,text:"江西省",left:0,height:24,fontSize:24,color:"#f8f1f1",align:"center"},compId:3}],loadList:[],loadList3D:[]},e}(Cr),jr=function(t){function e(){this.list_address=null,this.okbtn=null,this.cancelbtn=null,e.__super.call(this)}r(e,"ui.order.SelectFactoryPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/SelectFactoryPanel")},e}(Cr),Zr=function(t){function e(){this.selbtn=null,e.__super.call(this)}r(e,"ui.order.TabChooseBtnUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{},compId:2,child:[{type:"Button",props:{y:0,x:0,"var":"selbtn",stateNum:2,skin:"button/clubDayoption.png",labelSize:26,labelColors:"#FFFFFF,#CDCDCD",label:"条幅旗帜"},compId:3}],loadList:["button/clubDayoption.png"],loadList3D:[]},e}(Cr),Kr=function(t){function e(){this.selimg=null,this.addresstxt=null,e.__super.call(this)}r(e,"ui.order.AddressItemUI",t,"AddressItemUI$1");var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{y:0,x:0,width:888,"var":"selimg",skin:"commers/sel.png",sizeGrid:"5,5,5,5",height:41},compId:4},{type:"Label",props:{y:8,x:7,width:870,"var":"addresstxt",text:"label",height:24,fontSize:24},compId:3}],loadList:["commers/sel.png"],loadList3D:[]},e}(Cr),$r=function(t){function e(){this.btnSelProv=null,this.province=null,this.btnSelCity=null,this.citytxt=null,this.btnSelArea=null,this.areatxt=null,this.provbox=null,this.provList=null,this.citybox=null,this.cityList=null,this.areabox=null,this.areaList=null,e.__super.call(this)}r(e,"ui.usercenter.EnterPrizeInfoPaneUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/EnterPrizeInfoPane")},e}(Cr),qr=function(t){function e(){this.firstpage=null,this.panel_main=null,this.myaddresstxt=null,this.changemyadd=null,this.factorytxt=null,this.changefactory=null,this.btnaddpic=null,this.mainvbox=null,this.ordervbox=null,this.btn_addattach=null,this.partvbox=null,e.__super.call(this)}r(e,"ui.PaintOrderPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("PaintOrderPanel")},e}(Cr),Qr=function(t){function e(){this.btnaddAddress=null,this.addlist=null,e.__super.call(this)}r(e,"ui.usercenter.AddressMgrPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("usercenter/AddressMgrPanel")},e}(Cr),Jr=function(t){function e(){this.techname=null,e.__super.call(this)}r(e,"ui.order.TechBoxItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:1240},compId:2,child:[{type:"Label",props:{y:0,x:0,width:110,"var":"techname",valign:"middle",text:"喷印设备：",height:30,fontSize:24,align:"right"},compId:3}],loadList:[],loadList3D:[]},e}(Cr),ts=function(t){function e(){this.bgimg=null,this.input_account=null,this.input_pwd=null,this.btn_login=null,this.closebtn=null,this.txt_reg=null,this.txt_forget=null,e.__super.call(this)}r(e,"ui.login.LogPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("login/LogPanel")},e}(Cr),es=function(t){function e(){this.folderList=null,this.flder0=null,this.flder1=null,this.flder2=null,this.htmltext=null,this.radiosel=null,this.btnok=null,this.picList=null,this.btncancel=null,e.__super.call(this)}r(e,"ui.order.SelectPicPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/SelectPicPanel")},e}(Cr),is=function(t){function e(){this.inputmsg=null,this.btnok=null,this.btncancel=null,e.__super.call(this)}r(e,"ui.order.AddCommentPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:1920,height:1080},compId:2,child:[{type:"Image",props:{y:10,x:10,top:0,skin:"commers/blackbg.png",right:0,left:0,bottom:0,alpha:.8},compId:3},{type:"Panel",props:{y:10,x:10,top:0,right:0,left:0,bottom:100},compId:4,child:[{type:"Image",props:{y:370,x:320,width:1280,skin:"commers/whitebg.png",height:331},compId:6},{type:"Image",props:{y:300,x:320,width:1280,skin:"commers/blackbg.png",height:74,alpha:.3},compId:7},{type:"Label",props:{y:319,x:849,text:"添加备注",fontSize:36,color:"#eedfdf",bold:!0},compId:8},{type:"TextInput",props:{y:391,x:344,width:1235,"var":"inputmsg",skin:"comp/textinput.png",prompt:"添加备注",height:210,fontSize:20,sizeGrid:"6,15,7,14"},compId:10},{type:"Sprite",props:{y:644,x:826},compId:13,child:[{type:"Button",props:{width:112,"var":"btnok",skin:"comp/button.png",labelSize:20,label:"确定",height:30},compId:14},{type:"Button",props:{x:159,width:112,"var":"btncancel",skin:"comp/button.png",labelSize:20,label:"取消",height:30},compId:15}]}]},{type:"Script",props:{runtime:"utils.AddMsgControl"},compId:16}],loadList:["commers/blackbg.png","commers/whitebg.png","comp/textinput.png","comp/button.png"],loadList3D:[]},e}(Cr),ns=function(t){function e(){this.bgimg=null,this.input_phone=null,this.input_pwd=null,this.input_conpwd=null,this.input_company=null,this.input_receiver=null,this.input_receiverphone=null,this.input_adress=null,this.inputCode=null,this.txtRefresh=null,this.input_phonecode=null,this.btnGetCode=null,this.btnSelProv=null,this.province=null,this.btnSelCity=null,this.citytxt=null,this.btnSelArea=null,this.areatxt=null,this.btnClose=null,this.radio_default=null,this.btnReg=null,this.provbox=null,this.provList=null,this.citybox=null,this.cityList=null,this.areabox=null,this.areaList=null,e.__super.call(this)}r(e,"ui.login.RegisterPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("login/RegisterPanel")},e}(Cr),rs=function(t){function e(){this.outimg=null,this.foldname=null,e.__super.call(this)}r(e,"ui.picManager.DirectItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{y:0,x:0,width:160,"var":"outimg",skin:"commers/blackbg.png",height:30},compId:3,child:[{type:"Label",props:{y:4,"var":"foldname",text:"我的图片",right:2,left:2,height:24,fontSize:20,color:"#eaf3ec",alpha:.8,align:"center"},compId:5}]}],loadList:["commers/blackbg.png"],loadList3D:[]},e}(Cr),ss=function(t){function e(){this.btnok=null,this.btncancel=null,e.__super.call(this)}r(e,"ui.usercenter.NewAddressPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:1920,height:1080},compId:2,child:[{type:"Image",props:{y:10,x:10,top:0,skin:"commers/blackbg.png",right:0,left:0,bottom:0,alpha:.8},compId:3},{type:"Panel",props:{y:10,x:10,top:0,right:0,left:0,bottom:100},compId:4,child:[{type:"Image",props:{y:170,x:490,width:946,skin:"commers/whitebg.png",height:515},compId:6},{type:"Image",props:{y:100,x:490,width:946,skin:"commers/blackbg.png",height:74,alpha:.8},compId:7},{type:"Label",props:{y:119,x:861,text:"新增收货地址",fontSize:36,color:"#eedfdf",bold:!0},compId:8},{type:"Sprite",props:{y:635,x:780.5},compId:13,child:[{type:"Button",props:{width:112,"var":"btnok",skin:"comp/button.png",labelSize:20,label:"确定",height:30},compId:14},{type:"Button",props:{x:159,width:112,"var":"btncancel",skin:"comp/button.png",labelSize:20,label:"取消",height:30},compId:15}]},{type:"Box",props:{y:189,x:511},compId:56,child:[{type:"Label",props:{y:10,x:13,width:109,text:"收货人：",height:20,fontSize:20,font:"Arial",align:"right"},compId:64},{type:"TextInput",props:{x:126,width:250,skin:"comp/textinput.png",height:40,fontSize:20,sizeGrid:"6,15,7,14"},compId:65},{type:"Label",props:{y:8,x:29,text:"*",fontSize:20,color:"#ef0d09"},compId:66}]},{type:"Label",props:{y:310,x:517,width:112,text:"地区：",height:20,fontSize:20,font:"Arial",align:"right"},compId:57},{type:"Button",props:{y:300,x:638,width:170,stateNum:1,height:35},compId:58,child:[{type:"Label",props:{y:0,x:0,width:170,valign:"middle",text:"北京市",height:35,fontSize:20,color:"#201e1e",borderColor:"#3e3939",align:"center"},compId:67},{type:"Image",props:{y:11,x:136,skin:"commers/combxbtn.png"},compId:68}]},{type:"Button",props:{y:300,x:832,width:170,stateNum:1,height:35},compId:59,child:[{type:"Label",props:{y:0,x:0,width:170,valign:"middle",text:"北京市",height:35,fontSize:20,color:"#201e1e",borderColor:"#3e3939",align:"center"},compId:69},{type:"Image",props:{y:11,x:136,skin:"commers/combxbtn.png"},compId:70}]},{type:"Button",props:{y:300,x:1025,width:170,stateNum:1,height:35},compId:60,child:[{type:"Label",props:{y:0,x:0,width:170,valign:"middle",text:"北京市",height:35,fontSize:20,color:"#201e1e",borderColor:"#3e3939",align:"center"},compId:71},{type:"Image",props:{y:11,x:136,skin:"commers/combxbtn.png"},compId:72}]},{type:"Box",props:{y:364,x:511},compId:84,child:[{type:"Label",props:{y:10,x:13,width:109,text:"详细地址：",height:20,fontSize:20,font:"Arial",align:"right"},compId:85},{type:"TextInput",props:{y:0,x:126,width:772,skin:"comp/textinput.png",height:40,fontSize:20,sizeGrid:"6,15,7,14"},compId:86},{type:"Label",props:{y:8,x:9,text:"*",fontSize:20,color:"#ef0d09"},compId:87}]},{type:"Image",props:{y:337,x:637,width:172,skin:"commers/blackbg.png",height:278,alpha:.8},compId:61,child:[{type:"List",props:{top:0,right:0,left:0,bottom:0},compId:73}]},{type:"Image",props:{y:337,x:830,width:172,skin:"commers/blackbg.png",height:278,alpha:.8},compId:62,child:[{type:"List",props:{top:0,right:0,left:0,bottom:0},compId:74}]},{type:"Image",props:{y:337,x:1024,width:172,skin:"commers/blackbg.png",height:278,alpha:.8},compId:63,child:[{type:"List",props:{top:0,right:0,left:0,bottom:0},compId:75}]},{type:"Box",props:{y:244,x:511},compId:80,child:[{type:"Label",props:{y:10,x:13,width:109,text:"手机号码：",height:20,fontSize:20,font:"Arial",align:"right"},compId:81},{type:"TextInput",props:{x:126,width:250,skin:"comp/textinput.png",height:40,fontSize:20,sizeGrid:"6,15,7,14"},compId:82},{type:"Label",props:{y:8,x:9,text:"*",fontSize:20,color:"#ef0d09"},compId:83}]}]},{type:"Script",props:{runtime:"script.usercenter.AddressEditControl"},compId:88}],loadList:["commers/blackbg.png","commers/whitebg.png","comp/button.png","comp/textinput.png","commers/combxbtn.png"],loadList3D:[]},e}(Cr),as=function(t){function e(){this.sel=null,this.img=null,this.filename=null,this.btndelete=null,this.fileinfo=null,this.picClassTxt=null,this.colorspacetxt=null,e.__super.call(this)}r(e,"ui.picManager.PicShortItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:156,height:220},compId:2,child:[{type:"Image",props:{y:0,width:156,"var":"sel",top:0,skin:"commers/sel.png",sizeGrid:"10,10,10,10",left:0,height:156},compId:6},{type:"Image",props:{y:78,x:78,width:150,"var":"img",height:150,anchorY:.5,anchorX:.5},compId:3},{type:"Label",props:{y:154,wordWrap:!1,"var":"filename",valign:"middle",text:"名称.jpg 宽 3256",right:2,overflow:"hidden",left:2,height:21,fontSize:16,color:"#2a2525",align:"center"},compId:4},{type:"Button",props:{y:5,x:129.5,width:20,"var":"btndelete",skin:"comp/button.png",label:"X",height:20},compId:7},{type:"Label",props:{y:175,wordWrap:!0,width:152,"var":"fileinfo",valign:"middle",text:"名称.jpg 宽 3256",right:2,overflow:"scroll",left:2,height:45,fontSize:16,color:"#2a2525",align:"center"},compId:8},{type:"Label",props:{y:129,wordWrap:!0,width:50,"var":"picClassTxt",valign:"middle",text:"jpeg",left:6,height:21,fontSize:18,color:"#d9c5c5",bgColor:"#3b3131",align:"left"},compId:9},{type:"Label",props:{y:129,wordWrap:!0,width:50,"var":"colorspacetxt",valign:"middle",text:"jpeg",right:6,height:21,fontSize:18,color:"#d9c5c5",bgColor:"#3b3131",align:"right"},compId:11}],loadList:["commers/sel.png","comp/button.png"],loadList3D:[]},e}(Cr),os=function(t){function e(){this.panel_main=null,this.btntxt0=null,this.btntxt1=null,this.btntxt2=null,this.btntxt3=null,this.btntxt4=null,this.btntxt5=null,this.btntxt6=null,this.btntxt7=null,this.btntxt8=null,this.firstpage=null,this.sp_container=null,e.__super.call(this)}r(e,"ui.usercenter.UserMainPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:1920,height:1080},compId:2,child:[{type:"Image",props:{top:0,skin:"commers/whitebg.png",right:0,left:0,bottom:0},compId:3},{type:"Panel",props:{"var":"panel_main",top:0,right:0,left:0,bottom:100},compId:4,child:[{type:"Label",props:{y:101,x:320,width:236,valign:"middle",text:"用户中心",height:48,fontSize:24,color:"#f8f0ef",bgColor:"#f60f0b",align:"center"},compId:14},{type:"Image",props:{y:147,x:320,width:236,skin:"commers/sel.png",sizeGrid:"5,5,5,5",height:639},compId:52},{type:"VBox",props:{y:148,x:321,space:2},compId:5,child:[{type:"Box",props:{y:50,x:2,width:232,height:127},compId:20,child:[{type:"Label",props:{y:12,x:68.5,text:"企业设置",fontSize:24,color:"#272524",bold:!0},compId:17,child:[{type:"Rect",props:{y:-12,x:-69,width:231,lineWidth:1,height:48,fillColor:"#a19595"},compId:16}]},{type:"VBox",props:{y:53,x:0,width:230,space:20},compId:26,child:[{type:"Label",props:{"var":"btntxt0",text:"企业资料",right:10,left:10,fontSize:24,color:"#272524",align:"center"},compId:18},{type:"Label",props:{y:43,"var":"btntxt1",text:"收货地址",right:10,left:10,fontSize:24,color:"#272524",align:"center"},compId:19}]}]},{type:"Box",props:{y:182,x:2,width:232,height:171},compId:21,child:[{type:"Label",props:{y:12,x:68.5,text:"订单管理",fontSize:24,color:"#272524",bold:!0},compId:22,child:[{type:"Rect",props:{y:-12,x:-69,width:231,lineWidth:1,height:48,fillColor:"#a19595"},compId:23}]},{type:"VBox",props:{y:53,x:0,width:230,space:20},compId:27,child:[{type:"Label",props:{y:0,"var":"btntxt2",text:"购物车",right:10,left:10,height:24,fontSize:24,color:"#272524",align:"center"},compId:24},{type:"Label",props:{y:44,"var":"btntxt3",text:"我的订单",right:10,left:10,fontSize:24,color:"#272524",align:"center"},compId:25},{type:"Label",props:{y:88,"var":"btntxt4",text:"委托订单",right:10,left:10,fontSize:24,color:"#272524",align:"center"},compId:28}]}]},{type:"Box",props:{y:353,x:2,width:232,height:127},compId:29,child:[{type:"Label",props:{y:12,x:68.5,text:"财务管理",fontSize:24,color:"#272524",bold:!0},compId:30,child:[{type:"Rect",props:{y:-12,x:-69,width:231,lineWidth:1,height:48,fillColor:"#a19595"},compId:31}]},{type:"VBox",props:{y:53,x:0,width:230,space:20},compId:32,child:[{type:"Label",props:{y:0,"var":"btntxt5",text:"账户充值",right:10,left:10,height:24,fontSize:24,color:"#272524",align:"center"},compId:33},{type:"Label",props:{y:44,"var":"btntxt6",text:"我的账单",right:10,left:10,fontSize:24,color:"#272524",align:"center"},compId:34}]}]},{type:"Box",props:{y:508,x:2,width:232,height:117},compId:36,child:[{type:"Label",props:{y:12,x:68.5,text:"个人管理",fontSize:24,color:"#272524",bold:!0},compId:37,child:[{type:"Rect",props:{y:-12,x:-69,width:231,lineWidth:1,height:48,fillColor:"#a19595"},compId:38}]},{type:"VBox",props:{y:53,x:0,width:230,space:20},compId:39,child:[{type:"Label",props:{y:0,"var":"btntxt7",text:"修改密码",right:10,left:10,height:24,fontSize:24,color:"#272524",align:"center"},compId:40},{type:"Label",props:{y:33,"var":"btntxt8",text:"我的图库",right:10,left:10,fontSize:24,color:"#272524",align:"center"},compId:41}]}]}]},{type:"Image",props:{y:1,x:320,width:1280,skin:"commers/whitebg.png",height:60},compId:6,child:[{type:"Label",props:{x:30,top:20,text:"欢迎来到用户中心！",styleSkin:"comp/label.png",fontSize:20},compId:7},{type:"Label",props:{y:18,x:1070,text:"我的订单",mouseEnabled:!0,fontSize:20},compId:8},{type:"Label",props:{y:17,text:"|",right:117,fontSize:20},compId:9},{type:"Label",props:{y:18,x:1168.1953125,text:"退出",mouseEnabled:!0,fontSize:20},compId:10},{type:"Text",props:{y:19,x:210,"var":"firstpage",text:"首页",mouseEnabled:!0,fontSize:20,runtime:"laya.display.Text"},compId:11}]},{type:"Label",props:{y:108,x:603,text:"企业资料",fontSize:24,color:"#c3221f"},compId:49},{type:"Sprite",props:{y:150,x:600,width:900,"var":"sp_container",height:800},compId:50}]},{type:"Script",props:{runtime:"script.usercenter.UserMainControl"},compId:51}],loadList:["commers/whitebg.png","commers/sel.png","comp/label.png"],loadList3D:[]},e}(Cr),hs=function(t){function e(){this.blackrect=null,this.redrect=null,this.matname=null,e.__super.call(this)}r(e,"ui.order.MaterialNameItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{},compId:2,child:[{type:"Sprite",props:{y:0,x:0,"var":"blackrect"},compId:6,child:[{type:"Rect",props:{y:-.5,x:-.5,width:200,lineWidth:1,lineColor:"0",height:39},compId:7}]},{type:"Sprite",props:{y:0,x:0,"var":"redrect"},compId:5,child:[{type:"Rect",props:{y:0,x:0,width:200,lineWidth:1,lineColor:"#ff0000",height:39},compId:3}]},{type:"Label",props:{y:2,x:1,width:198,"var":"matname",valign:"middle",text:"90宽激光单色",height:35,fontSize:18,align:"center"},compId:4}],loadList:[],loadList3D:[]},e}(Cr),_s=function(t){function e(){this.firstpage=null,this.btnNewDir=null,this.btnUploadPic=null,this.folderList=null,this.btnNewFolder=null,this.flder0=null,this.flder1=null,this.flder2=null,this.htmltext=null,this.radiosel=null,this.btnorder=null,this.picList=null,this.boxNewFolder=null,this.input_folename=null,this.btnSureCreate=null,this.btnCloseInput=null,e.__super.call(this)}r(e,"ui.PicManagePanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("PicManagePanel")},e}(Cr),ls=function(t){function e(t){this.ordervo=null,e.__super.call(this),this.ordervo=t,this.initItem()}r(e,"script.order.PicOrderItem",t);var i=e.prototype;return i.initItem=function(){this.numindex.text=this.ordervo.indexNum.toString(),this.fileimg.skin="http://s-scfy-763.oss-cn-shanghai.aliyuncs.com/"+this.ordervo.picinfo.fid+".jpg",this.filename.text=this.ordervo.picinfo.directName,this.architype.text=this.ordervo.techStr,this.deleteorder.underline=!0,this.deleteorder.underlineColor="#222222",this.deleteorder.on("click",this,this.onDeleteOrder),this.addmsg.underline=!0,this.addmsg.underlineColor="#222222",this.addmsg.on("click",this,this.onAddComment),this.changemat.underline=!0,this.changemat.underlineColor="#222222",this.changemat.on("click",this,this.onShowMaterialView),this.changearchitxt.on("click",this,this.onchangeTech),this.architype.height=this.architype.textField.textHeight>30?this.architype.textField.textHeight:30,this.height=this.architype.height>30?this.architype.height+35:60,this.bgimg.height=this.height,this.alighComponet()
},i.onAddComment=function(){y.instance.openView("VIEW_ADD_MESSAGE",!1,{msg:this.ordervo.comment,caller:this,callback:this.onAddMsgBack})},i.onAddMsgBack=function(t){this.ordervo.comment=t},i.onchangeTech=function(){return y.instance.openView("VIEW_SELECT_TECHNORLOGY"),void 0},i.alighComponet=function(){this.numindex.y=(this.height-this.numindex.height)/2,this.fileimg.y=(this.height-this.fileimg.height)/2,this.filename.y=(this.height-this.filename.height)/2,this.matbox.y=(this.height-42)/2,this.editbox.y=(this.height-this.editbox.height)/2,this.viprice.y=(this.height-this.viprice.height)/2,this.inputnum.y=(this.height-this.inputnum.height)/2,this.price.y=(this.height-this.price.height)/2,this.total.y=(this.height-this.total.height)/2,this.operatebox.y=(this.height-this.operatebox.height)/2},i.updateIndex=function(){this.numindex.text=this.ordervo.indexNum.toString()},i.onDeleteOrder=function(){rn.instance.event("DELETE_PIC_ORDER",this)},i.onShowMaterialView=function(){y.instance.openView("VIEW_SELECT_MATERIAL")},e}(Sr),us=function(t){function e(){this.matlist=null,this.btnok=null,this.btncancel=null,this.tablist=null,e.__super.call(this)}r(e,"ui.order.SelectMaterialPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/SelectMaterialPanel")},e}(Cr),cs=function(t){function e(){this.input_phone=null,this.input_conpwd=null,this.input_phonecode=null,this.btn_getcode=null,this.btnClose=null,this.btn_ok=null,e.__super.call(this)}r(e,"ui.login.ResetPwdPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("login/ResetPwdPanel")},e}(Cr),ds=function(t){function e(){this.bgimg=null,this.btnClose=null,this.btnBegin=null,this.fileList=null,e.__super.call(this)}r(e,"ui.uploadpic.UpLoadPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("uploadpic/UpLoadPanel")},e}(Cr),fs=function(t){function e(){this.filename=null,this.prgbar=null,this.prog=null,this.filesize=null,e.__super.call(this)}r(e,"ui.uploadpic.UpLoadItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{},compId:2,child:[{type:"Label",props:{y:9,x:12,width:115,"var":"filename",text:"文件名",overflow:"hidden",height:21,fontSize:20,color:"#f3ecec",align:"right"},compId:3},{type:"ProgressBar",props:{y:13,x:211,width:152,"var":"prgbar",value:.5,skin:"comp/progress.png",height:14},compId:5},{type:"Label",props:{y:10,x:374,width:45,"var":"prog",text:"10%",height:18,fontSize:20,color:"#f1e7e7"},compId:6},{type:"Label",props:{y:9,x:138,width:61,"var":"filesize",text:"12k",height:21,fontSize:20,color:"#f1e2e2",align:"right"},compId:7}],loadList:["comp/progress.png"],loadList3D:[]},e}(Cr),ps=function(t){function e(){this.txt=null,e.__super.call(this)}r(e,"ui.order.TechorItemUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{},compId:2,child:[{type:"Label",props:{y:0,x:0,width:100,"var":"txt",valign:"middle",text:"布料喷绘",height:30,fontSize:20,borderColor:"#e02222",align:"center"},compId:5}],loadList:[],loadList3D:[]},e}(Cr),ms=function(t){function e(t){this.partItemvo=null,this.partItemvo=t,e.__super.call(this)}r(e,"script.order.PartItem",t);var i=e.prototype;return i.initView=function(){this.pname.text=this.partItemvo.partName,this.psize.text=this.partItemvo.partSize},e}(Rr),gs=function(t){function e(){this.msgtxt=null,this.okbtn=null,this.cancelbtn=null,this.closebtn=null,e.__super.call(this)}r(e,"ui.PopUpDialogUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:1920,height:1080},compId:2,child:[{type:"Image",props:{top:0,skin:"commers/blackbg.png",right:0,left:0,bottom:0,alpha:.8},compId:3},{type:"Image",props:{width:920,top:200,skin:"commers/whitebg.png",right:500,left:500,height:374,bottom:506,alpha:.8},compId:4,child:[{type:"Label",props:{y:34,x:50,width:820,"var":"msgtxt",valign:"middle",text:"这是一个确定弹窗",right:50,overflow:"scroll",left:50,height:208,fontSize:22,align:"center"},compId:5},{type:"Sprite",props:{y:294,x:236},compId:8,child:[{type:"Button",props:{width:100,"var":"okbtn",skin:"comp/button.png",labelSize:24,label:"确定",height:30},compId:6},{type:"Button",props:{x:348,width:100,"var":"cancelbtn",skin:"comp/button.png",labelSize:24,label:"取消",height:30},compId:7}]},{type:"Button",props:{y:0,x:870,width:50,"var":"closebtn",skin:"comp/button.png",labelSize:24,label:"X",height:40},compId:9}]},{type:"Script",props:{runtime:"utils.PopUpWindowControl"},compId:10}],loadList:["commers/blackbg.png","commers/whitebg.png","comp/button.png"],loadList3D:[]},e}(Cr),vs=function(t){function e(){this.techcontent=null,this.btnok=null,this.btncancel=null,e.__super.call(this)}r(e,"ui.order.SelectTechPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("order/SelectTechPanel")},e}(Cr),ys=function(t){function e(){this.prg=null,this.prgtxt=null,e.__super.call(this)}r(e,"ui.login.LoadingPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"View",props:{width:1920,height:1080},compId:2,child:[{type:"ProgressBar",props:{y:445,x:587,width:818,"var":"prg",skin:"comp/progress.png",sizeGrid:"2,1,1,2",height:14},compId:3},{type:"Label",props:{y:400,x:781.5,width:357,"var":"prgtxt",text:"10%",height:31,fontSize:24,color:"#f3e4e4",align:"center"},compId:4},{type:"Script",props:{runtime:"utils.LoadingPrgControl"},compId:5}],loadList:["comp/progress.png"],loadList3D:[]},e}(Cr),Es=function(t){function e(){this.mainpanel=null,this.img=null,this.closeBtn=null,e.__super.call(this)}r(e,"ui.picManager.PicCheckPanelUI",t);var i=e.prototype;return i.createChildren=function(){laya.display.Scene.prototype.createChildren.call(this),this.loadScene("picManager/PicCheckPanel")},e}(Cr),As=function(t){function e(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._$componentType="List",this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._usedCache=null,e.__super.call(this),this._cells=[],this._offset=new Zi}r(e,"laya.ui.List",t);var n=e.prototype;return i.imps(n,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),n.destroy=function(t){void 0===t&&(t=!0),this._content&&this._content.destroy(t),this._scrollBar&&this._scrollBar.destroy(t),laya.ui.UIComponent.prototype.destroy.call(this,t),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},n.createChildren=function(){this.addChild(this._content=new Tr)},n.onScrollStart=function(){this._usedCache||(this._usedCache=i.superGet(Tr,this,"cacheAs")),i.superSet(Tr,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},n.onScrollEnd=function(){i.superSet(Tr,this,"cacheAs",this._usedCache)},n._removePreScrollBar=function(){var t=this.removeChildByName("scrollBar");t&&t.destroy(!0)},n.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var t=this._getOneCell(),e=t.width+this._spaceX||1,i=t.height+this._spaceY||1;this._width>0&&(this._repeatX2=this._isVertical?Math.round(this._width/e):Math.ceil(this._width/e)),this._height>0&&(this._repeatY2=this._isVertical?Math.ceil(this._height/i):Math.round(this._height/i));var n=this._width?this._width:e*this.repeatX-this._spaceX,r=this._height?this._height:i*this.repeatY-this._spaceY;this._cellSize=this._isVertical?i:e,this._cellOffset=this._isVertical?i*Math.max(this._repeatY2,this._repeatY)-r-this._spaceY:e*Math.max(this._repeatX2,this._repeatX)-n-this._spaceX,this._isVertical&&this.vScrollBarSkin?this._scrollBar.height=r:!this._isVertical&&this.hScrollBarSkin&&(this._scrollBar.width=n),this.setContentSize(n,r);var s=this._isVertical?this.repeatX:this.repeatY,a=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,s,a),this._createdLine=a,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},n._getOneCell=function(){if(0===this._cells.length){var t=this.createItem();if(this._offset.setTo(t._x,t._y),this.cacheContent)return t;this._cells.push(t)}return this._cells[0]},n._createItems=function(t,e,i){var n=this._content,r=this._getOneCell(),s=r.width+this._spaceX,a=r.height+this._spaceY;if(this.cacheContent){var o=new Tr;o.cacheAs="normal",o.pos((this._isVertical?0:t)*s,(this._isVertical?t:0)*a),this._content.addChild(o),n=o}else{for(var h=[],_=this._cells.length-1;_>-1;_--){var l=this._cells[_];l.removeSelf(),h.push(l)}this._cells.length=0}for(var u=t;i>u;u++)for(var c=0;e>c;c++)r=h&&h.length?h.pop():this.createItem(),r.x=(this._isVertical?c:u)*s-n._x,r.y=(this._isVertical?u:c)*a-n._y,r.name="item"+(u*e+c),n.addChild(r),this.addCell(r)},n.createItem=function(){var t=[];if("function"==typeof this._itemRender)var e=new this._itemRender;else e=ce.createComp(this._itemRender,null,null,t);if(0==t.length&&e._watchMap){var i=e._watchMap;for(var n in i)for(var r=i[n],s=0;s<r.length;s++){var a=r[s];t.push(a.comp,a.prop,a.value)}}return t.length&&(e._$bindData=t),e},n.addCell=function(t){t.on("click",this,this.onCellMouse),t.on("rightclick",this,this.onCellMouse),t.on("mouseover",this,this.onCellMouse),t.on("mouseout",this,this.onCellMouse),t.on("mousedown",this,this.onCellMouse),t.on("mouseup",this,this.onCellMouse),this._cells.push(t)},n._afterInited=function(){this.initItems()},n.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;var t=0;t=0;for(var e=0;1e4>e;e++){var i=this.getChildByName("item"+e);{if(!i)break;this.addCell(i),t++}}this.repeatY=t}},n.setContentSize=function(t,e){this._content.width=t,this._content.height=e,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content._style.scrollRect||(this._content.scrollRect=Ge.create()),this._content._style.scrollRect.setTo(-this._offset.x,-this._offset.y,t,e),this._content.scrollRect=this._content.scrollRect),this.event("resize")},n.onCellMouse=function(t){"mousedown"===t.type&&(this._isMoved=!1);var e=t.currentTarget,i=this._startIndex+this._cells.indexOf(e);0>i||("click"===t.type||"rightclick"===t.type?this.selectEnable&&!this._isMoved?this.selectedIndex=i:this.changeCellState(e,!0,0):"mouseover"!==t.type&&"mouseout"!==t.type||this._selectedIndex===i||this.changeCellState(e,"mouseover"===t.type,0),this.mouseHandler&&this.mouseHandler.runWith([t,i]))},n.changeCellState=function(t,e,i){var n=t.getChildByName("selectBox");n&&(this.selectEnable=!0,n.visible=e,n.index=i)},n._sizeChanged=function(){laya.ui.UIComponent.prototype._sizeChanged.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},n.onScrollBarChange=function(){this.runCallLater(this.changeCells);var t=this._scrollBar.value,e=this._isVertical?this.repeatX:this.repeatY,i=this._isVertical?this.repeatY:this.repeatX,n=Math.floor(t/this._cellSize);if(this.cacheContent)s=i+1,this._createdLine-n<s&&(this._createItems(this._createdLine,e,this._createdLine+s),this.renderItems(this._createdLine*e,0),this._createdLine+=s);else{var r=n*e,s=0;if(r>this._startIndex){s=r-this._startIndex;var a=!0,o=this._startIndex+e*(i+1);this._isMoved=!0}else r<this._startIndex&&(s=this._startIndex-r,a=!1,o=this._startIndex-1,this._isMoved=!0);for(var h=0;s>h;h++){if(a){var _=this._cells.shift();this._cells[this._cells.length]=_;var l=o+h}else _=this._cells.pop(),this._cells.unshift(_),l=o-h;var u=Math.floor(l/e)*this._cellSize;this._isVertical?_.y=u:_.x=u,this.renderItem(_,l)}this._startIndex=r,this.changeSelectStatus()}var c=this._content._style.scrollRect;this._isVertical?(c.y=t-this._offset.y,c.x=-this._offset.x):(c.y=-this._offset.y,c.x=t-this._offset.x),this._content.scrollRect=c},n.posCell=function(t,e){if(this._scrollBar){var i=this._isVertical?this.repeatX:this.repeatY,n=(this._isVertical?this.repeatY:this.repeatX,Math.floor(e/i)*this._cellSize);this._isVertical?t._y=n:t.x=n}},n.changeSelectStatus=function(){for(var t=0,e=this._cells.length;e>t;t++)this.changeCellState(this._cells[t],this._selectedIndex===this._startIndex+t,1)},n.renderItems=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);for(var i=t,n=e||this._cells.length;n>i;i++)this.renderItem(this._cells[i],this._startIndex+i);this.changeSelectStatus()},n.renderItem=function(t,e){this._array&&e>=0&&e<this._array.length?(t.visible=!0,t._$bindData?(t._dataSource=this._array[e],this._bindData(t,this._array[e])):t.dataSource=this._array[e],this.cacheContent||this.posCell(t,e),this.hasListener("render")&&this.event("render",[t,e]),this.renderHandler&&this.renderHandler.runWith([t,e])):(t.visible=!1,t.dataSource=null)},n._bindData=function(t,e){for(var i=t._$bindData,n=0,r=i.length;r>n;n++){var s=i[n++],a=i[n++],o=i[n],h=we.getBindFun(o);s[a]=h.call(this,e)}},n.updateArray=function(t){if(this._array=t,this._scrollBar){var e=t.length,i=this._isVertical?this.repeatX:this.repeatY,n=this._isVertical?this.repeatY:this.repeatX,r=Math.ceil(e/i);this._scrollBar.thumbPercent=n/r,this._scrollBar.slider._max=(r-n)*this._cellSize+this._cellOffset}},n.refresh=function(){this.array=this._array},n.getItem=function(t){return t>-1&&t<this._array.length?this._array[t]:null},n.changeItem=function(t,e){t>-1&&t<this._array.length&&(this._array[t]=e,t>=this._startIndex&&t<this._startIndex+this._cells.length&&this.renderItem(this.getCell(t),t))},n.setItem=function(t,e){this.changeItem(t,e)},n.addItem=function(t){this._array.push(t),this.array=this._array},n.addItemAt=function(t,e){this._array.splice(e,0,t),this.array=this._array},n.deleteItem=function(t){this._array.splice(t,1),this.array=this._array},n.getCell=function(t){return this.runCallLater(this.changeCells),t>-1&&this._cells?this._cells[(t-this._startIndex)%this._cells.length]:null},n.scrollTo=function(t){if(this._scrollBar){var e=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(t/e)*this._cellSize}else this.startIndex=t},n.tweenTo=function(t,e,i){if(void 0===e&&(e=200),this._scrollBar){this._scrollBar.stopScroll();var n=this._isVertical?this.repeatX:this.repeatY;ii.to(this._scrollBar,{value:Math.floor(t/n)*this._cellSize},e,null,i,0,!0)}else this.startIndex=t,i&&i.run()},n._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},n.commitMeasure=function(){this.runCallLater(this.changeCells)},s(0,n,"cacheAs",t.prototype._$get_cacheAs,function(t){i.superSet(Tr,this,"cacheAs",t),this._scrollBar&&(this._usedCache=null,"none"!==t?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),s(0,n,"content",function(){return this._content}),s(0,n,"height",t.prototype._$get_height,function(t){t!=this._height&&(i.superSet(Tr,this,"height",t),this._setCellChanged())}),s(0,n,"itemRender",function(){return this._itemRender},function(t){if(this._itemRender!=t){this._itemRender=t;for(var e=this._cells.length-1;e>-1;e--)this._cells[e].destroy();this._cells.length=0,this._setCellChanged()}}),s(0,n,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(t){this._removePreScrollBar();var e=new Os;e.name="scrollBar",e.right=0,t&&" "!=t&&(e.skin=t),this.scrollBar=e,this.addChild(e),this._setCellChanged()}),s(0,n,"page",function(){return this._page},function(t){this._page=t,this._array&&(this._page=t>0?t:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),s(0,n,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(t){this._removePreScrollBar();var e=new Rs;e.name="scrollBar",e.bottom=0,t&&" "!=t&&(e.skin=t),this.scrollBar=e,this.addChild(e),this._setCellChanged()}),s(0,n,"repeatX",function(){return this._repeatX>0?this._repeatX:this._repeatX2>0?this._repeatX2:1},function(t){this._repeatX=t,this._setCellChanged()}),s(0,n,"scrollBar",function(){return this._scrollBar},function(t){this._scrollBar!=t&&(this._scrollBar=t,t&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange)))}),s(0,n,"width",t.prototype._$get_width,function(t){t!=this._width&&(i.superSet(Tr,this,"width",t),this._setCellChanged())}),s(0,n,"repeatY",function(){return this._repeatY>0?this._repeatY:this._repeatY2>0?this._repeatY2:1},function(t){this._repeatY=t,this._setCellChanged()}),s(0,n,"spaceX",function(){return this._spaceX},function(t){this._spaceX=t,this._setCellChanged()}),s(0,n,"spaceY",function(){return this._spaceY},function(t){this._spaceY=t,this._setCellChanged()}),s(0,n,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this._selectedIndex=t,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(t),this.startIndex=this._startIndex)}),s(0,n,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(t){this.selectedIndex=this._array.indexOf(t)}),s(0,n,"length",function(){return this._array?this._array.length:0}),s(0,n,"selection",function(){return this.getCell(this._selectedIndex)},function(t){this.selectedIndex=this._startIndex+this._cells.indexOf(t)}),s(0,n,"startIndex",function(){return this._startIndex},function(t){this._startIndex=t>0?t:0,this.callLater(this.renderItems)}),s(0,n,"array",function(){return this._array},function(t){this.runCallLater(this.changeCells),this._array=t||[];var e=this._array.length;if(this.totalPage=Math.ceil(e/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<e?this._selectedIndex:e-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var i=this._isVertical?this.repeatX:this.repeatY,n=this._isVertical?this.repeatY:this.repeatX,r=Math.ceil(e/i),s=this._cellOffset>0?this.totalPage+1:this.totalPage;s>1?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=n/r,this._scrollBar.setScroll(0,(r-n)*this._cellSize+this._cellOffset,this._scrollBar.value),this._scrollBar.target=this._content):(this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content)}}),s(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t&&Math.floor(t)==t||"string"==typeof t?this.selectedIndex=parseInt(t):t instanceof Array?this.array=t:i.superSet(Tr,this,"dataSource",t)}),s(0,n,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),e}(Tr),Cs=function(t){function e(){this._space=0,this._align="none",this._itemChanged=!1,e.__super.call(this)}r(e,"laya.ui.LayoutBox",t);var i=e.prototype;return i.addChild=function(t){return t.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,t)},i.onResize=function(){this._setItemChanged()},i.addChildAt=function(t,e){return t.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,t,e)},i.removeChildAt=function(t){return this.getChildAt(t).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,t)},i.refresh=function(){this._setItemChanged()},i.changeItems=function(){this._itemChanged=!1},i.sortItem=function(t){t&&t.sort(function(t,e){return t.y-e.y})},i._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},s(0,i,"space",function(){return this._space},function(t){this._space=t,this._setItemChanged()}),s(0,i,"align",function(){return this._align},function(t){this._align=t,this._setItemChanged()}),e}(Tr),Ss=function(t){function e(){this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this.isShowEffect=!0,this.isPopupCenter=!0,this.closeType=null,this._dragArea=null,this._param=null,e.__super.call(this),this.popupEffect=e.manager.popupEffectHandler,this.closeEffect=e.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)}r(e,"laya.ui.Dialog",t);var n=e.prototype;return n._dealDragArea=function(){var t=this.getChildByName("drag");t&&(this.dragArea=t._x+","+t._y+","+t.width+","+t.height,t.removeSelf())},n._onMouseDown=function(){var t=this.getMousePoint();this._dragArea.contains(t.x,t.y)?this.startDrag():this.stopDrag()},n._onClick=function(t){var e=t.target;if(e)switch(e.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":return this.close(e.name),void 0}},n.open=function(t,i){void 0===t&&(t=!0),this._dealDragArea(),this._param=i,e.manager.open(this,t,this.isShowEffect),e.manager.lock(!1)},n.close=function(t){this.closeType=t,e.manager.close(this)},n.destroy=function(e){void 0===e&&(e=!0),this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this._dragArea=null,t.prototype.destroy.call(this,e)},n.show=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!0),this._open(!1,t,e)},n.popup=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!0),this._open(!0,t,e)},n._open=function(t,i,n){this.isModal=t,this.isShowEffect=n,e.manager.lock(!0),this.open(i)},s(0,n,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(t){if(t){var e=we.fillArray([0,0,0,0],t,Number);this._dragArea=new Ge(e[0],e[1],e[2],e[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),s(0,n,"isPopup",function(){return null!=this.parent}),s(0,n,"zOrder",t.prototype._$get_zOrder,function(t){i.superSet(Cr,this,"zOrder",t),e.manager._checkMask()}),s(1,e,"manager",function(){return e._manager=e._manager||new mr},function(t){e._manager=t}),e.setLockView=function(t){e.manager.setLockView(t)},e.lock=function(t){e.manager.lock(t)},e.closeAll=function(){e.manager.closeAll()},e.getDialogsByGroup=function(t){return e.manager.getDialogsByGroup(t)},e.closeByGroup=function(t){return e.manager.closeByGroup(t)},e.CLOSE="close",e.CANCEL="cancel",e.SURE="sure",e.NO="no",e.YES="yes",e.OK="ok",e._manager=null,e}(Cr),Ds=function(t){function e(t,i){void 0===i&&(i=""),e.__super.call(this,t,i)}r(e,"laya.ui.CheckBox",t);var n=e.prototype;return n.preinitialize=function(){laya.ui.UIComponent.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},n.initialize=function(){t.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},s(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"boolean"==typeof t?this.selected=t:"string"==typeof t?this.selected="true"===t:i.superSet(br,this,"dataSource",t)}),e}(br),Rs=function(t){function e(){e.__super.call(this)}r(e,"laya.ui.HScrollBar",t);var i=e.prototype;return i.initialize=function(){t.prototype.initialize.call(this),this.slider.isVertical=!1},e}(Pr),Ts=function(t){function e(){this._items=null,this._selectedIndex=0,e.__super.call(this),this._setIndexHandler=l.create(this,this.setIndex,null,!1)}r(e,"laya.ui.ViewStack",t);var n=e.prototype;return i.imps(n,{"laya.ui.IItem":!0}),n.setItems=function(t){this.removeChildren();for(var e=0,i=0,n=t.length;n>i;i++){var r=t[i];r&&(r.name="item"+e,this.addChild(r),e++)}this.initItems()},n.addItem=function(t){t.name="item"+this._items.length,this.addChild(t),this.initItems()},n._afterInited=function(){this.initItems()},n.initItems=function(){this._items=[];for(var t=0;1e4>t;t++){var e=this.getChildByName("item"+t);if(null==e)break;this._items.push(e),e.visible=t==this._selectedIndex}},n.setSelect=function(t,e){this._items&&t>-1&&t<this._items.length&&(this._items[t].visible=e)},n.setIndex=function(t){this.selectedIndex=t},s(0,n,"dataSource",t.prototype._$get_dataSource,function(t){if(this._dataSource=t,"number"==typeof t&&Math.floor(t)==t||"string"==typeof t)this.selectedIndex=parseInt(t);else for(var e in this._dataSource)this.hasOwnProperty(e)&&(this[e]=this._dataSource[e])}),s(0,n,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=t,this.setSelect(this._selectedIndex,!0))}),s(0,n,"selection",function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(t){this.selectedIndex=this._items.indexOf(t)}),s(0,n,"items",function(){return this._items}),s(0,n,"setIndexHandler",function(){return this._setIndexHandler},function(t){this._setIndexHandler=t}),e}(Tr),xs=function(t){function e(t,i){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=0/0,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,e.__super.call(this),this.skin=i,this.labels=t}r(e,"laya.ui.UIGroup",t);var n=e.prototype;return i.imps(n,{"laya.ui.IItem":!0}),n.preinitialize=function(){this.mouseEnabled=!0},n.destroy=function(t){void 0===t&&(t=!0),laya.ui.UIComponent.prototype.destroy.call(this,t),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},n.addItem=function(t,e){void 0===e&&(e=!0);var i=t,n=this._items.length;if(i.name="item"+n,this.addChild(i),this.initItems(),e&&n>0){var r=this._items[n-1];"horizontal"==this._direction?i.x=r._x+r.width+this._space:i.y=r._y+r.height+this._space}else e&&(i.x=0,i.y=0);return n},n.delItem=function(t,e){void 0===e&&(e=!0);var i=this._items.indexOf(t);if(-1!=i){var n=t;this.removeChild(n);for(var r=i+1,s=this._items.length;s>r;r++){var a=this._items[r];a.name="item"+(r-1),e&&("horizontal"==this._direction?a.x-=n.width+this._space:a.y-=n.height+this._space)}if(this.initItems(),this._selectedIndex>-1){var o=0;o=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=o}}},n._afterInited=function(){this.initItems()},n.initItems=function(){this._items||(this._items=[]),this._items.length=0;for(var t=0;1e4>t;t++){var e=this.getChildByName("item"+t);if(null==e)break;this._items.push(e),e.selected=t===this._selectedIndex,e.clickHandler=l.create(this,this.itemClick,[t],!1)}},n.itemClick=function(t){this.selectedIndex=t},n.setSelect=function(t,e){this._items&&t>-1&&t<this._items.length&&(this._items[t].selected=e)},n._skinLoaded=function(){this._setLabelChanged(),this.event("loaded")},n.createItem=function(){return null},n.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var t=0,e=0,i=this._items.length;i>e;e++){var n=this._items[e];this._skin&&(n.skin=this._skin),this._labelColors&&(n.labelColors=this._labelColors),this._labelSize&&(n.labelSize=this._labelSize),this._labelStroke&&(n.labelStroke=this._labelStroke),this._labelStrokeColor&&(n.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(n.strokeColors=this._strokeColors),this._labelBold&&(n.labelBold=this._labelBold),this._labelPadding&&(n.labelPadding=this._labelPadding),this._labelAlign&&(n.labelAlign=this._labelAlign),this._stateNum&&(n.stateNum=this._stateNum),this._labelFont&&(n.labelFont=this._labelFont),"horizontal"===this._direction?(n.y=0,n.x=t,t+=n.width+this._space):(n.x=0,n.y=t,t+=n.height+this._space)}this._sizeChanged()},n.commitMeasure=function(){this.runCallLater(this.changeLabels)},n._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},s(0,n,"labelStrokeColor",function(){return this._labelStrokeColor},function(t){this._labelStrokeColor!=t&&(this._labelStrokeColor=t,this._setLabelChanged())}),s(0,n,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._skin&&!hn.getRes(this._skin)?i.loader.load(this._skin,l.create(this,this._skinLoaded),null,"image",1):this._skinLoaded())}),s(0,n,"selectedIndex",function(){return this._selectedIndex},function(t){this._selectedIndex!=t&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=t,this.setSelect(t,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),s(0,n,"labels",function(){return this._labels},function(t){if(this._labels!=t){if(this._labels=t,this.removeChildren(),this._setLabelChanged(),this._labels)for(var e=this._labels.split(","),i=0,n=e.length;n>i;i++){var r=this.createItem(this._skin,e[i]);r.name="item"+i,this.addChild(r)}this.initItems()}}),s(0,n,"strokeColors",function(){return this._strokeColors},function(t){this._strokeColors!=t&&(this._strokeColors=t,this._setLabelChanged())}),s(0,n,"labelColors",function(){return this._labelColors},function(t){this._labelColors!=t&&(this._labelColors=t,this._setLabelChanged())}),s(0,n,"labelStroke",function(){return this._labelStroke},function(t){this._labelStroke!=t&&(this._labelStroke=t,this._setLabelChanged())}),s(0,n,"labelSize",function(){return this._labelSize},function(t){this._labelSize!=t&&(this._labelSize=t,this._setLabelChanged())}),s(0,n,"stateNum",function(){return this._stateNum},function(t){this._stateNum!=t&&(this._stateNum=t,this._setLabelChanged())}),s(0,n,"labelBold",function(){return this._labelBold},function(t){this._labelBold!=t&&(this._labelBold=t,this._setLabelChanged())}),s(0,n,"labelFont",function(){return this._labelFont},function(t){this._labelFont!=t&&(this._labelFont=t,this._setLabelChanged())}),s(0,n,"labelPadding",function(){return this._labelPadding},function(t){this._labelPadding!=t&&(this._labelPadding=t,this._setLabelChanged())}),s(0,n,"direction",function(){return this._direction},function(t){this._direction=t,this._setLabelChanged()}),s(0,n,"space",function(){return this._space},function(t){this._space=t,this._setLabelChanged()}),s(0,n,"items",function(){return this._items}),s(0,n,"selection",function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(t){this.selectedIndex=this._items.indexOf(t)}),s(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,"number"==typeof t&&Math.floor(t)==t||"string"==typeof t?this.selectedIndex=parseInt(t):t instanceof Array?this.labels=t.join(","):i.superSet(Tr,this,"dataSource",t)}),e}(Tr),bs=function(t){function e(){this._oldW=0,this._oldH=0,e.__super.call(this)}r(e,"laya.ui.ScaleBox",t);var n=e.prototype;return n.onEnable=function(){i.stage.on("resize",this,this.onResize),this.onResize()},n.onDisable=function(){i.stage.off("resize",this,this.onResize)},n.onResize=function(){if(this.width>0&&this.height>0){var t=Math.min(i.stage.width/this._oldW,i.stage.height/this._oldH);i.superSet(Tr,this,"width",i.stage.width),i.superSet(Tr,this,"height",i.stage.height),this.scale(t,t)}},s(0,n,"width",t.prototype._$get_width,function(t){i.superSet(Tr,this,"width",t),this._oldW=t}),s(0,n,"height",t.prototype._$get_height,function(t){i.superSet(Tr,this,"height",t),this._oldH=t}),e}(Tr),Ps=function(t){function e(t){this._bg=null,this._skin=null,e.__super.call(this),void 0===t&&(t=""),this.text=t,this.skin=this.skin}r(e,"laya.ui.TextInput",t);var n=e.prototype;return n.preinitialize=function(){this.mouseEnabled=!0},n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._bg&&this._bg.destroy(),this._bg=null
},n.createChildren=function(){this.addChild(this._tf=new xr),this._tf.padding=qi.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},n._onFocus=function(){this.event("focus",this)},n._onBlur=function(){this.event("blur",this)},n._onInput=function(){this.event("input",this)},n._onEnter=function(){this.event("enter",this)},n.initialize=function(){this.width=128,this.height=22},n._skinLoaded=function(){this._bg||(this.graphics=this._bg=new Pn),this._bg.source=hn.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height),this._sizeChanged(),this.event("loaded")},n.select=function(){this._tf.select()},n.setSelection=function(t,e){this._tf.setSelection(t,e)},s(0,n,"text",t.prototype._$get_text,function(t){this._tf.text!=t&&(t+="",this._tf.text=t,this.event("change"))}),s(0,n,"bg",function(){return this._bg},function(t){this.graphics=this._bg=t}),s(0,n,"multiline",function(){return this._tf.multiline},function(t){this._tf.multiline=t}),s(0,n,"skin",function(){return this._skin},function(t){this._skin!=t&&(this._skin=t,this._skin&&!hn.getRes(this._skin)?i.loader.load(this._skin,l.create(this,this._skinLoaded),null,"image",1):this._skinLoaded())}),s(0,n,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(t){this._bg||(this.graphics=this._bg=new Pn),this._bg.sizeGrid=we.fillArray(qi.defaultSizeGrid,t,Number)}),s(0,n,"width",t.prototype._$get_width,function(t){i.superSet(Lr,this,"width",t),this._bg&&(this._bg.width=t)}),s(0,n,"height",t.prototype._$get_height,function(t){i.superSet(Lr,this,"height",t),this._bg&&(this._bg.height=t)}),s(0,n,"editable",function(){return this._tf.editable},function(t){this._tf.editable=t}),s(0,n,"restrict",function(){return this._tf.restrict},function(t){this._tf.restrict=t}),s(0,n,"prompt",function(){return this._tf.prompt},function(t){this._tf.prompt=t}),s(0,n,"promptColor",function(){return this._tf.promptColor},function(t){this._tf.promptColor=t}),s(0,n,"maxChars",function(){return this._tf.maxChars},function(t){this._tf.maxChars=t}),s(0,n,"focus",function(){return this._tf.focus},function(t){this._tf.focus=t}),s(0,n,"type",function(){return this._tf.type},function(t){this._tf.type=t}),e}(Lr),Ls=function(t){function e(t,i){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,e.__super.call(this),t&&(this.skin=t),i&&(this.sheet=i)}r(e,"laya.ui.FontClip",t);var n=e.prototype;return n.createChildren=function(){this._bitmap=new Pn,this.on("loaded",this,this._onClipLoaded)},n._onClipLoaded=function(){this.callLater(this.changeValue)},n.changeValue=function(){if(this._sources&&this._valueArr){this.graphics.clear(!0);var t;if(t=this._sources[0]){var e="horizontal"===this._direction;e?(this._wordsW=this._valueArr.length*(t.sourceWidth+this.spaceX),this._wordsH=t.sourceHeight):(this._wordsW=t.sourceWidth,this._wordsH=(t.sourceHeight+this.spaceY)*this._valueArr.length);var i=0;if(this._width)switch(this._align){case"center":i=.5*(this._width-this._wordsW);break;case"right":i=this._width-this._wordsW;break;default:i=0}for(var n=0,r=this._valueArr.length;r>n;n++){var s=this._indexMap[this._valueArr.charAt(n)];this.sources[s]&&(t=this.sources[s],e?this.graphics.drawImage(t,i+n*(t.sourceWidth+this.spaceX),0,t.sourceWidth,t.sourceHeight):this.graphics.drawImage(t,0+i,n*(t.sourceHeight+this.spaceY),t.sourceWidth,t.sourceHeight))}this._width||(this._widget.resetLayoutX(),this.callLater(this._sizeChanged)),this._height||(this._widget.resetLayoutY(),this.callLater(this._sizeChanged))}}},n.measureWidth=function(){return this._wordsW},n.measureHeight=function(){return this._wordsH},n.destroy=function(e){void 0===e&&(e=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),t.prototype.destroy.call(this,e)},s(0,n,"sheet",function(){return this._sheet},function(t){t+="",this._sheet=t;var e=t.split(" ");this._clipX=String(e[0]).length,this.clipY=e.length,this._indexMap={};for(var i=0;i<this._clipY;i++)for(var n=e[i].split(""),r=0,s=n.length;s>r;r++)this._indexMap[n[r]]=i*this._clipX+r}),s(0,n,"height",t.prototype._$get_height,function(t){i.superSet(Mr,this,"height",t),this.callLater(this.changeValue)}),s(0,n,"direction",function(){return this._direction},function(t){this._direction=t,this.callLater(this.changeValue)}),s(0,n,"value",function(){return this._valueArr?this._valueArr:""},function(t){t+="",this._valueArr=t,this.callLater(this.changeValue)}),s(0,n,"width",t.prototype._$get_width,function(t){i.superSet(Mr,this,"width",t),this.callLater(this.changeValue)}),s(0,n,"spaceX",function(){return this._spaceX},function(t){this._spaceX=t,"horizontal"===this._direction&&this.callLater(this.changeValue)}),s(0,n,"spaceY",function(){return this._spaceY},function(t){this._spaceY=t,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),s(0,n,"align",function(){return this._align},function(t){this._align=t,this.callLater(this.changeValue)}),e}(Mr),Is=function(t){function e(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,this._usedCache=null,e.__super.call(this),this.width=this.height=100}r(e,"laya.ui.Panel",t);var n=e.prototype;return n.destroy=function(t){void 0===t&&(t=!0),laya.ui.UIComponent.prototype.destroy.call(this,t),this._content&&this._content.destroy(t),this._vScrollBar&&this._vScrollBar.destroy(t),this._hScrollBar&&this._hScrollBar.destroy(t),this._vScrollBar=null,this._hScrollBar=null,this._content=null},n.destroyChildren=function(){this._content.destroyChildren()},n.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new Tr)},n.addChild=function(t){return t.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(t)},n.onResize=function(){this._setScrollChanged()},n.addChildAt=function(t,e){return t.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(t,e)},n.removeChild=function(t){return t.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(t)},n.removeChildAt=function(t){return this.getChildAt(t).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(t)},n.removeChildren=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=2147483647),this._content.removeChildren(t,e),this._setScrollChanged(),this},n.getChildAt=function(t){return this._content.getChildAt(t)},n.getChildByName=function(t){return this._content.getChildByName(t)},n.getChildIndex=function(t){return this._content.getChildIndex(t)},n.changeScroll=function(){this._scrollChanged=!1;var t=this.contentWidth||1,e=this.contentHeight||1,i=this._vScrollBar,n=this._hScrollBar,r=i&&e>this._height,s=n&&t>this._width,a=r?this._width-i.width:this._width,o=s?this._height-n.height:this._height;i&&(i.x=this._width-i.width,i.y=0,i.height=this._height-(s?n.height:0),i.scrollSize=Math.max(.033*this._height,1),i.thumbPercent=o/e,i.setScroll(0,e-o,i.value)),n&&(n.x=0,n.y=this._height-n.height,n.width=this._width-(r?i.width:0),n.scrollSize=Math.max(.033*this._width,1),n.thumbPercent=a/t,n.setScroll(0,t-a,n.value))},n._sizeChanged=function(){laya.ui.UIComponent.prototype._sizeChanged.call(this),this.setContentSize(this._width,this._height)},n.setContentSize=function(t,e){var i=this._content;i.width=t,i.height=e,i._style.scrollRect||(i.scrollRect=Ge.create()),i._style.scrollRect.setTo(0,0,t,e),i.scrollRect=i.scrollRect},n.onScrollBarChange=function(t){var e=this._content._style.scrollRect;if(e){var i=Math.round(t.value);t.isVertical?e.y=i:e.x=i,this._content.scrollRect=e}},n.scrollTo=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.vScrollBar&&(this.vScrollBar.value=e),this.hScrollBar&&(this.hScrollBar.value=t)},n.refresh=function(){this.changeScroll()},n.onScrollStart=function(){this._usedCache||(this._usedCache=i.superGet(Tr,this,"cacheAs")),i.superSet(Tr,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},n.onScrollEnd=function(){i.superSet(Tr,this,"cacheAs",this._usedCache)},n._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},s(0,n,"numChildren",function(){return this._content.numChildren}),s(0,n,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(t){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new Rs),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=t}),s(0,n,"contentWidth",function(){for(var t=0,e=this._content.numChildren-1;e>-1;e--){var i=this._content.getChildAt(e);t=Math.max(i._x+i.width*i.scaleX,t)}return t}),s(0,n,"contentHeight",function(){for(var t=0,e=this._content.numChildren-1;e>-1;e--){var i=this._content.getChildAt(e);t=Math.max(i._y+i.height*i.scaleY,t)}return t}),s(0,n,"width",t.prototype._$get_width,function(t){i.superSet(Tr,this,"width",t),this._setScrollChanged()}),s(0,n,"hScrollBar",function(){return this._hScrollBar}),s(0,n,"content",function(){return this._content}),s(0,n,"height",t.prototype._$get_height,function(t){i.superSet(Tr,this,"height",t),this._setScrollChanged()}),s(0,n,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(t){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new Os),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),t&&" "!=t&&(this._vScrollBar.skin=t)}),s(0,n,"vScrollBar",function(){return this._vScrollBar}),s(0,n,"cacheAs",t.prototype._$get_cacheAs,function(t){i.superSet(Tr,this,"cacheAs",t),this._usedCache=null,"none"!==t?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),e}(Tr),Ms=function(t){function e(t,i){this._value=null,void 0===i&&(i=""),e.__super.call(this,t,i)}r(e,"laya.ui.Radio",t);var i=e.prototype;return i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._value=null},i.preinitialize=function(){laya.ui.UIComponent.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},i.initialize=function(){t.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},i.onClick=function(){this.selected=!0},s(0,i,"value",function(){return null!=this._value?this._value:this.label},function(t){this._value=t}),e}(br),ws=function(t){function e(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,e.__super.call(this),this.width=this.height=200}r(e,"laya.ui.Tree",t);var n=e.prototype;return i.imps(n,{"laya.ui.IRender":!0}),n.destroy=function(t){void 0===t&&(t=!0),laya.ui.UIComponent.prototype.destroy.call(this,t),this._list&&this._list.destroy(t),this._list=null,this._source=null,this._renderHandler=null},n.createChildren=function(){this.addChild(this._list=new As),this._list.renderHandler=l.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},n.onListChange=function(){this.event("change")},n.getArray=function(){var t,e=[];for(var i in this._source)t=this._source[i],this.getParentOpenStatus(t)&&(t.x=this._spaceLeft*this.getDepth(t),e.push(t));return e},n.getDepth=function(t,e){return void 0===e&&(e=0),null==t.nodeParent?e:this.getDepth(t.nodeParent,e+1)},n.getParentOpenStatus=function(t){var e=t.nodeParent;return null==e?!0:e.isOpen?null!=e.nodeParent?this.getParentOpenStatus(e):!0:!1},n.renderItem=function(t,e){var i=t.dataSource;if(i){t.left=i.x;var n=t.getChildByName("arrow");n&&(i.hasChild?(n.visible=!0,n.index=i.isOpen?1:0,n.tag=e,n.off("click",this,this.onArrowClick),n.on("click",this,this.onArrowClick)):n.visible=!1);var r=t.getChildByName("folder");r&&(r.index=2==r.clipY?i.isDirectory?0:1:i.isDirectory?i.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([t,e])}},n.onArrowClick=function(t){var e=t.currentTarget,i=e.tag;this._list.array[i].isOpen=!this._list.array[i].isOpen,this.event("open"),this._list.array=this.getArray()},n.setItemState=function(t,e){this._list.array[t]&&(this._list.array[t].isOpen=e,this._list.array=this.getArray())},n.fresh=function(){this._list.array=this.getArray(),this.repaint()},n.parseXml=function(t,e,i,n){var r,s=t.childNodes,a=s.length;if(!n){r={};var o,h=t.attributes;for(var _ in h){o=h[_];var l=o.nodeName,u=o.nodeValue;r[l]="true"==u?!0:"false"==u?!1:u}r.nodeParent=i,a>0&&(r.isDirectory=!0),r.hasChild=a>0,e.push(r)}for(var c=0;a>c;c++){var d=s[c];this.parseXml(d,e,r,!1)}},n.parseOpenStatus=function(t,e){for(var i=0,n=e.length;n>i;i++){var r=e[i];if(r.isDirectory)for(var s=0,a=t.length;a>s;s++){var o=t[s];if(o.isDirectory&&this.isSameParent(o,r)&&r.label==o.label){r.isOpen=o.isOpen;break}}}},n.isSameParent=function(t,e){return null==t.nodeParent&&null==e.nodeParent?!0:null==t.nodeParent||null==e.nodeParent?!1:t.nodeParent.label==e.nodeParent.label?this.isSameParent(t.nodeParent,e.nodeParent):!1},n.filter=function(t){if(Boolean(t)){var e=[];this.getFilterSource(this._source,e,t),this._list.array=e}else this._list.array=this.getArray()},n.getFilterSource=function(t,e,i){i=i.toLocaleLowerCase();var n;for(var r in t)n=t[r],!n.isDirectory&&String(n.label).toLowerCase().indexOf(i)>-1&&(n.x=0,e.push(n)),n.child&&n.child.length>0&&this.getFilterSource(n.child,e,i)},s(0,n,"spaceBottom",function(){return this._list.spaceY},function(t){this._list.spaceY=t}),s(0,n,"keepStatus",function(){return this._keepStatus},function(t){this._keepStatus=t}),s(0,n,"itemRender",function(){return this._list.itemRender},function(t){this._list.itemRender=t}),s(0,n,"array",function(){return this._list.array},function(t){this._keepStatus&&this._list.array&&t&&this.parseOpenStatus(this._list.array,t),this._source=t,this._list.array=this.getArray()}),s(0,n,"mouseHandler",function(){return this._list.mouseHandler},function(t){this._list.mouseHandler=t}),s(0,n,"dataSource",t.prototype._$get_dataSource,function(t){this._dataSource=t,i.superSet(Tr,this,"dataSource",t)}),s(0,n,"source",function(){return this._source}),s(0,n,"scrollBar",function(){return this._list.scrollBar}),s(0,n,"list",function(){return this._list}),s(0,n,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(t){this._list.vScrollBarSkin=t}),s(0,n,"renderHandler",function(){return this._renderHandler},function(t){this._renderHandler=t}),s(0,n,"selectedIndex",function(){return this._list.selectedIndex},function(t){this._list.selectedIndex=t}),s(0,n,"spaceLeft",function(){return this._spaceLeft},function(t){this._spaceLeft=t}),s(0,n,"selectedItem",function(){return this._list.selectedItem},function(t){this._list.selectedItem=t}),s(0,n,"width",t.prototype._$get_width,function(t){i.superSet(Tr,this,"width",t),this._list.width=t}),s(0,n,"height",t.prototype._$get_height,function(t){i.superSet(Tr,this,"height",t),this._list.height=t}),s(0,n,"xml",null,function(t){var e=[];this.parseXml(t.childNodes[0],e,null,!0),this.array=e}),s(0,n,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),e}(Tr),Os=function(t){function e(){e.__super.call(this)}return r(e,"laya.ui.VScrollBar",t),e}(Pr),Bs=function(t){function e(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,e.__super.call(this)}var i;r(e,"laya.utils.GraphicAnimation",t);var s=e.prototype;return s._parseNodeList=function(t){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[t.compId]=t.props,t.compId&&this._nodeList.push(t.compId);var e=t.child;if(e){var i=0,n=e.length;for(i=0;n>i;i++)this._parseNodeList(e[i])}},s._calGraphicData=function(t){this._setUp(null,t),this._createGraphicData()},s._createGraphicData=function(){var t=[],e=0,i=this.count,n=this._usedFrames;n||(n=[]);var r;for(e=0;i>e;e++)(n[e]||!r)&&(r=this._createFrameGraphic(e)),t.push(r);this._gList=t},s._createFrameGraphic=function(t){var i=new Ue;return e._rootMatrix||(e._rootMatrix=new ui),this._updateNodeGraphic(this._rootNode,t,e._rootMatrix,i),i},s._updateNodeGraphic=function(t,e,i,n,r){void 0===r&&(r=1);var s;s=this._nodeGDic[t.compId]=this._getNodeGraphicData(t.compId,e,this._nodeGDic[t.compId]),s.resultTransform||(s.resultTransform=new ui);var a;a=s.resultTransform,ui.mul(s.transform,i,a);var o,h=s.alpha*r;if(!(.01>h)){s.skin&&(o=this._getTextureByUrl(s.skin),o&&(a._checkTransform()?(n.drawTexture(o,0,0,s.width,s.height,a,h),s.resultTransform=null):n.drawTexture(o,a.tx,a.ty,s.width,s.height,null,h)));var _=t.child;if(_){var l=0,u=0;for(u=_.length,l=0;u>l;l++)this._updateNodeGraphic(_[l],e,a,n,h)}}},s._updateNoChilds=function(t,e){if(t.skin){var i=this._getTextureByUrl(t.skin);if(i){var n=t.transform;n._checkTransform();var r=!1;r=!n._bTransform,r?e.drawTexture(i,n.tx,n.ty,t.width,t.height,null,t.alpha):e.drawTexture(i,0,0,t.width,t.height,n.clone(),t.alpha)}}},s._updateNodeGraphic2=function(t,e,i){var n;if(n=this._nodeGDic[t.compId]=this._getNodeGraphicData(t.compId,e,this._nodeGDic[t.compId]),!t.child)return this._updateNoChilds(n,i),void 0;var r=n.transform;r._checkTransform();var s=!1;s=!r._bTransform;var a=!1;a=s&&(0!=r.tx||0!=r.ty);var o=!1;o=r._bTransform||1!=n.alpha,o&&i.save(),1!=n.alpha&&i.alpha(n.alpha),s?a&&i.translate(r.tx,r.ty):i.transform(r.clone());var h,_=t.child;if(n.skin&&(h=this._getTextureByUrl(n.skin),h&&i.drawImage(h,0,0,n.width,n.height)),_){var l=0,u=0;for(u=_.length,l=0;u>l;l++)this._updateNodeGraphic2(_[l],e,i)}o?i.restore():s?a&&i.translate(-r.tx,-r.ty):i.transform(r.clone().invert())},s._calculateKeyFrames=function(e){t.prototype._calculateKeyFrames.call(this,e),this._nodeIDAniDic[e.target]=e},s.getNodeDataByID=function(t){return this._nodeIDAniDic[t]},s._getParams=function(t,i,n,r){var s=e._temParam;s.length=i.length;var a=0,o=i.length;for(a=0;o>a;a++)s[a]=this._getObjVar(t,i[a][0],n,i[a][1],r);return s},s._getObjVar=function(t,e,i,n,r){if(t.hasOwnProperty(e)){var s=t[e];return i>=s.length&&(i=s.length-1),t[e][i]}return r.hasOwnProperty(e)?r[e]:n},s._getNodeGraphicData=function(t,n,r){r||(r=new i),r.transform?r.transform.identity():r.transform=new ui;var s=this.getNodeDataByID(t);if(!s)return r;var a=s.frames,o=this._getParams(a,e._drawTextureCmd,n,this._nodeDefaultProps[t]),h=o[0],_=0/0,l=0/0,u=o[5],c=o[6],d=o[13],f=o[14],p=o[7],m=o[8],g=o[9],v=o[11],y=o[12];_=o[3],l=o[4],(0==_||0==l)&&(h=null),-1==_&&(_=0),-1==l&&(l=0);var E;r.skin=h,r.width=_,r.height=l,h&&(E=this._getTextureByUrl(h),E?(_||(_=E.sourceWidth),l||(l=E.sourceHeight)):console.warn("lost skin:",h,",you may load pics first")),r.alpha=o[10];var A=r.transform;0!=d&&(u=d*_),0!=f&&(c=f*l),(0!=u||0!=c)&&A.translate(-u,-c);var C=null;if(g||1!==p||1!==m||v||y){C=e._tempMt,C.identity(),C._bTransform=!0;var S=.0174532922222222*(g-v),D=.0174532922222222*(g+y),R=Math.cos(D),T=Math.sin(D),x=Math.sin(S),b=Math.cos(S);C.a=p*R,C.b=p*T,C.c=-m*x,C.d=m*b,C.tx=C.ty=0}return C&&(A=ui.mul(A,C,A)),A.translate(o[1],o[2]),r},s._getTextureByUrl=function(t){return hn.getRes(t)},s.setAniData=function(t,i){if(t.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=t,this._parseNodeList(t);var n,r={},s=[],a=t.animations,o=0,h=a.length;for(o=0;h>o;o++)if(n=a[o],this._labels=null,(!i||i==n.name)&&n){try{this._calGraphicData(n)}catch(_){console.warn("parse animation fail:"+n.name+",empty animation created"),this._gList=[]}var l={};l.interval=1e3/n.frameRate,l.frames=this._gList,l.labels=this._labels,l.name=n.name,s.push(l),r[n.name]=l}this.animationList=s,this.animationDic=r}e._temParam.length=0},s.parseByData=function(t){var e,i;e=t.nodeRoot,i=t.aniO,delete t.nodeRoot,delete t.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=e,this._parseNodeList(e),this._labels=null;try{this._calGraphicData(i)}catch(n){console.warn("parse animation fail:"+i.name+",empty animation created"),this._gList=[]}var r=t;return r.interval=1e3/i.frameRate,r.frames=this._gList,r.labels=this._labels,r.name=i.name,r},s.setUpAniData=function(t){if(t.animations){var e,i={},n=[],r=t.animations,s=0,a=r.length;for(s=0;a>s;s++)if(e=r[s]){var o={};o.name=e.name,o.aniO=e,o.nodeRoot=t,n.push(o),i[e.name]=o}this.animationList=n,this.animationDic=i}},s._clear=function(){this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic=null},e.parseAnimationByData=function(t){e._I||(e._I=new e);var i;return i=e._I.parseByData(t),e._I._clear(),i},e.parseAnimationData=function(t){e._I||(e._I=new e),e._I.setUpAniData(t);var i;return i={},i.animationList=e._I.animationList,i.animationDic=e._I.animationDic,e._I._clear(),i},e._temParam=[],e._I=null,e._rootMatrix=null,n(e,["_drawTextureCmd",function(){return this._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]]},"_tempMt",function(){return this._tempMt=new ui}]),e.__init$=function(){i=function(){function t(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=0/0,this.height=0/0,this.alpha=1}return r(t,""),t}()},e}(wr),Ns=function(t){function e(){e.__super.call(this)}return r(e,"laya.ui.VSlider",t),e}(Nr),Fs=function(t){function e(t){e.__super.call(this,t),this.isVertical=!1}return r(e,"laya.ui.HSlider",t),e}(Nr),ks=function(t){function e(){this.matclassvo=null,e.__super.call(this)}r(e,"script.order.MaterialClassBtn",t);var i=e.prototype;return i.setData=function(t){this.matclassvo=t,this.selbtn.label=this.matclassvo.matclassname},s(0,i,"ShowSelected",null,function(t){this.selbtn.selected=t}),e}(Zr),Vs=function(t){function e(){this.address=null,e.__super.call(this)}r(e,"script.order.SelAddressItem",t);var i=e.prototype;return i.setData=function(t){this.address=t,this.addresstxt.text=this.address.addressDetail,this.ShowSelected=this.address==b.instance.selectAddress},s(0,i,"ShowSelected",null,function(t){this.selimg.visible=t}),e}(Kr),Us=function(t){function e(){e.__super.call(this)}r(e,"script.usercenter.CompanyAddressItem",t);var i=e.prototype;return i.setData=function(t){this.conName.text=t.receiverName,this.phone.text=t.phone,this.detailaddr.text=t.proCityArea},e}(Hr),Ws=function(t){function e(){this.cityname=null,e.__super.call(this)}r(e,"script.login.CityAreaItem",t);var i=e.prototype;return i.setData=function(t){this.cityname=t,this.productname.text=t},e}(Yr),Gs=function(t){function e(t){this.techmainvo=null,this.originPos=110,this.allItems=[],this.lastSelectIndex=-1,e.__super.call(this),this.techmainvo=t,this.initView()}r(e,"script.order.TechBoxItem",t);var i=e.prototype;return i.initView=function(){this.techname.text=this.techmainvo.totalName;for(var t=this.originPos,e=0,i=10,n=10,r=0;r<this.techmainvo.techlist.length;r++){var s=new ps;s.txt.text=this.techmainvo.techlist[r].techName,s.txt.borderColor="#445544",s.txt.width=s.txt.textField.textWidth+20,s.on("click",this,this.onClickTech,[r]),this.addChild(s),t+i+s.txt.width>this.width&&(t=this.originPos,e+=s.txt.height+n),s.x=t+i,s.y=e,t+=s.txt.width+i,this.allItems.push(s)}this.height=e>0?e+30:30},i.onClickTech=function(t){this.lastSelectIndex>=0&&this.lastSelectIndex!=t?(this.allItems[t].txt.borderColor="#FF0000",this.allItems[this.lastSelectIndex].txt.borderColor="#445544",this.lastSelectIndex=t):this.lastSelectIndex<0?(this.allItems[t].txt.borderColor="#FF0000",this.lastSelectIndex=t):this.lastSelectIndex==t&&(this.allItems[this.lastSelectIndex].txt.borderColor="#445544",this.lastSelectIndex=-1)},e}(Jr),Xs=function(t){function e(){this.picInfo=null,e.__super.call(this)}r(e,"script.picUpload.PicInfoItem",t);var i=e.prototype;return i.setData=function(t){if(this.picInfo=t,this.offAll(),this.on("doubleclick",this,this.onDoubleClick),this.on("click",this,this.onClickHandler),this.on("mouseover",this,this.onMouseOverHandler),this.btndelete.visible=!0,this.btndelete.on("click",this,this.onDeleteHandler),this.sel.visible=S.instance.haselectPic.hasOwnProperty(this.picInfo.fid),0==this.picInfo.picType)this.img.skin="commers/fold.png",this.fileinfo.text=this.picInfo.directName,this.filename.visible=!1,this.picClassTxt.visible=!1,this.colorspacetxt.visible=!1,this.img.width=150,this.img.height=150;else{this.filename.visible=!0,this.filename.text=this.picInfo.directName,this.picInfo.picWidth>this.picInfo.picHeight?(this.img.width=150,this.img.height=150/this.picInfo.picWidth*this.picInfo.picHeight):(this.img.height=150,this.img.width=150/this.picInfo.picHeight*this.picInfo.picWidth),this.img.skin="http://s-scfy-763.oss-cn-shanghai.aliyuncs.com/"+this.picInfo.fid+".jpg";var e="长:"+this.picInfo.picPhysicWidth+";宽:"+this.picInfo.picPhysicHeight+"\n";e+="dpi:"+this.picInfo.dpi,this.fileinfo.text=e,this.picClassTxt.text=this.picInfo.picClass,this.picClassTxt.visible=!0,this.colorspacetxt.text=this.picInfo.colorspace,this.colorspacetxt.visible=!0}},i.onDeleteHandler=function(t){t.stopPropagation(),1==this.picInfo.picType?y.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"确定删除该图片吗？",caller:this,callback:this.confirmDelete}):y.instance.openView("VIEW_POPUPDIALOG",!1,{msg:"确定删除该目录吗？",caller:this,callback:this.confirmDelete})},i.confirmDelete=function(t){t&&(this.sel.visible&&rn.instance.event("SELECT_PIC_ORDER",this.picInfo),1==this.picInfo.picType?T.instance.Request("http://47.101.178.87/file/remove?",this,this.onDeleteFileBack,"fid="+this.picInfo.fid,"post"):T.instance.Request("http://47.101.178.87/dir/remove?",this,this.onDeleteFileBack,"path="+this.picInfo.dpath,"post"))},i.onDeleteFileBack=function(t){var e=JSON.parse(t);0==e.status&&rn.instance.event("UPDATE_FILE_LIST")},i.onMouseOutHandler=function(){this.btndelete.visible=!1},i.onMouseOverHandler=function(){this.btndelete.visible=!0},i.onClickHandler=function(){1==this.picInfo.picType&&(this.sel.visible=!this.sel.visible,rn.instance.event("SELECT_PIC_ORDER",this.picInfo))},i.onDoubleClick=function(){0==this.picInfo.picType?rn.instance.event("SELECT_FOLDER",this.picInfo):y.instance.openView("VIEW_PICTURE_CHECK",!1,this.picInfo)},e}(as),zs=function(t){function e(){this.isSeleted=!1,this.directData=null,e.__super.call(this)}r(e,"script.picUpload.DirectFolderItem",t);var i=e.prototype;return i.setData=function(t){this.directData=t,this.foldname.text=t.directName,this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)},i.onMouseOut=function(){this.isSeleted||(this.foldname.color="#FFFFFF")},i.onMouseOver=function(){this.isSeleted||(this.foldname.color="#FF0000")},s(0,i,"ShowSelected",null,function(t){this.isSeleted=t,this.foldname.color=t?"#FF0000":"#FFFFFF"}),e}(rs),Hs=function(t){function e(){this.matvo=null,e.__super.call(this)}r(e,"script.order.MaterialItem",t);var i=e.prototype;return i.setData=function(t){this.matvo=t,this.matname.text=this.matvo.matName,this.blackrect.visible=!1,this.redrect.visible=!1},s(0,i,"ShowSelected",null,function(t){this.blackrect.visible=!t,this.redrect.visible=t}),e}(hs),Ys=function(t){function e(){e.__super.call(this)}r(e,"script.picUpload.FileUpLoadItem",t);var i=e.prototype;return i.setData=function(t){this.filename.text=t.name,this.prog.text="0%";var e=Math.floor(t.size/1048576),i="";i=e>0?(t.size/1048576).toFixed(2).toString()+"m":(t.size/1024).toFixed(2).toString()+"k",this.prgbar.value=0,this.filesize.text=i},i.updateProgress=function(t){var e=Number(t);e>100&&(e=100),this.prgbar.value=e/100,this.prog.text=t+"%"},e}(fs),js=function(t){function e(){e.__super.call(this)}r(e,"laya.ui.VBox",t);var n=e.prototype;return n.changeItems=function(){this._itemChanged=!1;for(var t=[],e=0,i=0,n=this.numChildren;n>i;i++){var r=this.getChildAt(i);r&&(t.push(r),e=this._width?this._width:Math.max(e,r.width*r.scaleX))}this.sortItem(t);var s=0;for(i=0,n=t.length;n>i;i++)r=t[i],r.y=s,s+=r.height*r.scaleY+this._space,"left"==this._align?r.x=0:"center"==this._align?r.x=.5*(e-r.width*r.scaleX):"right"==this._align&&(r.x=e-r.width*r.scaleX);this._sizeChanged()},s(0,n,"width",t.prototype._$get_width,function(t){this._width!=t&&(i.superSet(Cs,this,"width",t),this.callLater(this.changeItems))}),e.NONE="none",e.LEFT="left",e.CENTER="center",e.RIGHT="right",e}(Cs),Zs=function(t){function e(t){this._vScrollBar=null,this._hScrollBar=null,void 0===t&&(t=""),e.__super.call(this,t),this.on("change",this,this._onTextChange)}r(e,"laya.ui.TextArea",t);var n=e.prototype;return n._onTextChange=function(){this.callLater(this.changeScroll)},n.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},n.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},n.onVBarChanged=function(){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},n.onHBarChanged=function(){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},n.changeScroll=function(){var t=this._vScrollBar&&this._tf.maxScrollY>0,e=this._hScrollBar&&this._tf.maxScrollX>0,i=t?this._width-this._vScrollBar.width:this._width,n=e?this._height-this._hScrollBar.height:this._height,r=this._tf.padding||qi.labelPadding;this._tf.width=i,this._tf.height=n,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-r[2],this._vScrollBar.y=r[1],this._vScrollBar.height=this._height-(e?this._hScrollBar.height:0)-r[1]-r[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=n/Math.max(this._tf.textHeight,n),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=t),this._hScrollBar&&(this._hScrollBar.x=r[0],this._hScrollBar.y=this._height-this._hScrollBar.height-r[3],this._hScrollBar.width=this._width-(t?this._vScrollBar.width:0)-r[0]-r[2],this._hScrollBar.scrollSize=Math.max(.033*i,1),this._hScrollBar.thumbPercent=i/Math.max(this._tf.textWidth,i),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=e)},n.scrollTo=function(t){this.commitMeasure(),this._tf.scrollY=t},s(0,n,"scrollY",function(){return this._tf.scrollY}),s(0,n,"width",t.prototype._$get_width,function(t){i.superSet(Ps,this,"width",t),this.callLater(this.changeScroll)}),s(0,n,"hScrollBar",function(){return this._hScrollBar}),s(0,n,"height",t.prototype._$get_height,function(t){i.superSet(Ps,this,"height",t),this.callLater(this.changeScroll)}),s(0,n,"maxScrollX",function(){return this._tf.maxScrollX}),s(0,n,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(t){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new Os),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=t}),s(0,n,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(t){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new Rs),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=t}),s(0,n,"vScrollBar",function(){return this._vScrollBar}),s(0,n,"maxScrollY",function(){return this._tf.maxScrollY
}),s(0,n,"scrollX",function(){return this._tf.scrollX}),e}(Ps),Ks=function(t){function e(){e.__super.call(this)}r(e,"laya.ui.HBox",t);var n=e.prototype;return n.sortItem=function(t){t&&t.sort(function(t,e){return t.x-e.x})},n.changeItems=function(){this._itemChanged=!1;for(var t=[],e=0,i=0,n=this.numChildren;n>i;i++){var r=this.getChildAt(i);r&&(t.push(r),e=this._height?this._height:Math.max(e,r.height*r.scaleY))}this.sortItem(t);var s=0;for(i=0,n=t.length;n>i;i++)r=t[i],r.x=s,s+=r.width*r.scaleX+this._space,"top"==this._align?r.y=0:"middle"==this._align?r.y=.5*(e-r.height*r.scaleY):"bottom"==this._align&&(r.y=e-r.height*r.scaleY);this._sizeChanged()},s(0,n,"height",t.prototype._$get_height,function(t){this._height!=t&&(i.superSet(Cs,this,"height",t),this.callLater(this.changeItems))}),e.NONE="none",e.TOP="top",e.MIDDLE="middle",e.BOTTOM="bottom",e}(Cs),$s=function(t){function e(){e.__super.call(this)}r(e,"laya.ui.Tab",t);var i=e.prototype;return i.createItem=function(t,e){return new br(t,e)},e}(xs),qs=function(t){function e(){e.__super.call(this)}r(e,"laya.ui.RadioGroup",t);var i=e.prototype;return i.createItem=function(t,e){return new Ms(t,e)},e}(xs);i.__init([_,Ce,rn,Cr,d,ln,ce,Bs,gi,si,yi,_n,ge]),new x}(window,document,t)},{}]},{},[1]);